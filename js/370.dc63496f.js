"use strict";(globalThis["webpackChunkraiden_dapp"]=globalThis["webpackChunkraiden_dapp"]||[]).push([[370],{28370:(e,t,n)=>{n.r(t),n.d(t,{default:()=>fe});var r=n(48006),a=n(26598),o=n(45776),i=n(46678),s=n(90446),c=n(55452),u=n(30138),d=Number.MIN_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER+1,l=Number.MIN_SAFE_INTEGER+2,v=/^[^a-zA-Z_$]|[^a-zA-Z0-9_$]+/,m=/\\.|(^|\.)[^a-zA-Z_$]|[^a-zA-Z0-9_$.]+/;function h(e,t){return t?m.test(e):v.test(e)}var _=new RegExp(v.source,"g"),p=new RegExp(m.source,"g"),g="\\".charCodeAt(0);const y=".".charCodeAt(0);function b(e,t){var n=function(e){for(var n="",r=0;r<e.length;r++){var a=e.charCodeAt(r);if(a===y&&t&&0===r)n+=".";else{if(a===g&&t)continue;n+="_c"+a+"_"}}return n};return t?e.replace(p,n):e.replace(_,n)}function w(e){for(var t of Object.keys(e)){if(h(t))return!0;if(null===e[t]||"boolean"===typeof e[t])return!0;if("object"===typeof e[t])return w(e[t])}}function k(e){if(!w(e))return!1;var t=Array.isArray(e),n=t?[]:{};return Object.keys(e).forEach((function(r){var a=t?r:b(r);null===e[r]?n[a]=d:"boolean"===typeof e[r]?n[a]=e[r]?l:f:"object"===typeof e[r]?n[a]=k(e[r]):n[a]=e[r]})),n}var x="docs",D="meta";function j(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e((0,s.Tr)(s.cG,n,t.type))}}function E(e,t,n,a){return delete n._attachments[e].stub,a?(n._attachments[e].data=t.attachments[n._attachments[e].digest].data,Promise.resolve()):new Promise((function(a){var o=t.attachments[n._attachments[e].digest].data;(0,r.fM)(o,(function(t){n._attachments[e].data=(0,r.r3)(t),delete n._attachments[e].length,a()}))}))}function I(e,t){var n=e.views[t].options&&e.views[t].options.def&&e.views[t].options.def.fields||[];return n.map((function(e){return"string"===typeof e?e:Object.keys(e)[0]}))}function B(e){return"_find_idx/"+e.join("/")}function R(e){return["deleted"].concat(e.map((function(e){return e in["_id","_rev","_deleted","_attachments"]?e.substr(1):"data."+b(e,!0)})))}var O=1,S=Math.pow(10,13);function q(){return S*O+(new Date).getTime()}function A(e){return Math.floor(e/S)}function T(e,t){var n=e.transaction.objectStore(x),r=n.getAll(IDBKeyRange.bound("_design/","_design/￿"));r.onsuccess=function(e){var r=e.target.result,a=Array.from(n.indexNames),o=r.filter((function(e){return 0===e.deleted&&e.revs[e.rev].data.views})).map((function(e){return e.revs[e.rev].data})).reduce((function(e,t){return Object.keys(t.views).reduce((function(e,n){var r=I(t,n);return r&&r.length>0&&(e[B(r)]=R(r)),e}),e)}),{}),i=Object.keys(o),s=["seq"];a.forEach((function(e){-1===s.indexOf(e)&&-1===i.indexOf(e)&&n.deleteIndex(e)}));var c=i.filter((function(e){return-1===a.indexOf(e)}));try{c.forEach((function(e){n.createIndex(e,o[e])}))}catch(u){t(u)}}}function P(e,t){if(t<1){var n=e.createObjectStore(x,{keyPath:"id"});n.createIndex("seq","seq",{unique:!0}),e.createObjectStore(D,{keyPath:"id"})}}function N(e,t,n,r,a){var o=n.versionchanged?indexedDB.open(n.name):indexedDB.open(n.name,q());o.onupgradeneeded=function(e){if(e.oldVersion>0&&e.oldVersion<S)throw new Error('Incorrect adapter: you should specify the "idb" adapter to open this DB');if(0===e.oldVersion&&e.newVersion<S)throw indexedDB.deleteDatabase(n.name),new Error("Database was deleted while open");var t=e.target.result,r=A(e.oldVersion);P(t,r),T(o,a)},o.onblocked=function(e){u.error("onblocked, this should never happen",e)},o.onsuccess=function(t){var a=t.target.result;a.onabort=function(t){u.error("Database has a global failure",t.target.error),delete e[n.name],a.close()},a.onversionchange=function(){u.log("Database was made stale, closing handle"),e[n.name].versionchanged=!0,a.close()},a.onclose=function(){u.log("Database was made stale, closing handle"),n.name in e&&(e[n.name].versionchanged=!0)};var o={id:D},s=a.transaction([D],"readwrite");s.oncomplete=function(){r({idb:a,metadata:o})};var c=s.objectStore(D);c.get(D).onsuccess=function(e){o=e.target.result||o;var t=!1;"doc_count"in o||(t=!0,o.doc_count=0),"seq"in o||(t=!0,o.seq=0),"db_uuid"in o||(t=!0,o.db_uuid=(0,i.Vj)()),t&&c.put(o)}},o.onerror=function(e){a(e.target.error)}}function C(e,t,n){return e[n.name]&&!e[n.name].versionchanged||(n.versionchanged=e[n.name]&&e[n.name].versionchanged,e[n.name]=new Promise((function(r,a){N(e,t,n,r,a)}))),e[n.name]}function K(e,t){t(null,{doc_count:e.doc_count,update_seq:e.seq})}function M(e,t,n,r){if(e.error)return r(e.error);e.txn.objectStore(x).get(t).onsuccess=function(t){var a,o=t.target.result;if(a=n.rev?n.latest?(0,c.pA)(n.rev,o):n.rev:o&&o.rev,o&&(!o.deleted||n.rev)&&a in o.revs){var i=o.revs[a].data;i._id=o.id,i._rev=a,r(null,{doc:i,metadata:o,ctx:e})}else r((0,s.Tr)(s.Uc,"missing"))}}function V(e,t,n){if(t.binary)return n(null,e);(0,r.fM)(e,(function(e){n(null,(0,r.r3)(e))}))}function G(e,t,n,r,a,o){if(e.error)return o(e.error);var i;e.txn.objectStore(x).get(t).onsuccess=function(e){var t=e.target.result,r=t.revs[a.rev||t.rev].data,o=r._attachments[n].digest;i=t.attachments[o].data},e.txn.oncomplete=function(){V(i,a,o)},e.txn.onabort=o}function F(e,t,n,i,u,d,f){var l,v,m,h=[],_=[],p=u.revs_limit||1e3,g=-1===u.name.indexOf("-mrview-");const y=u.auto_compaction;function b(e){return/^_local/.test(e.id)?1:p}function w(e){return"missing"===e.rev_tree[0].ids[1].status}function E(e){try{return atob(e)}catch(t){return{error:(0,s.Tr)(s.eC,"Attachment is not a valid base64 string")}}}function I(e,t){var n=0,r={};function a(a){a.target.result&&(r[a.target.result.id]=a.target.result),++n===t.length&&R(e,t,r)}t.forEach((function(t){e.objectStore(x).get(t.id).onsuccess=a}))}function B(e,t,n){return e.revs[t]&&e.revs[t].data._attachments&&Object.values(e.revs[t].data._attachments).find((function(e){return e.digest===n}))}function R(e,t,r){t.forEach((function(t,a){var o;if("was_delete"in n&&!Object.prototype.hasOwnProperty.call(r,t.id))o=(0,s.Tr)(s.Uc,"deleted");else if(n.new_edits&&!Object.prototype.hasOwnProperty.call(r,t.id)&&w(t))o=(0,s.Tr)(s.gW);else if(Object.prototype.hasOwnProperty.call(r,t.id)){if(o=S(e,t,r[t.id]),0==o)return}else{var i=(0,c.TS)([],t.rev_tree[0],b(t));t.rev_tree=i.tree,t.stemmedRevs=i.stemmedRevs,o=t,o.isNewDoc=!0,o.wasDeleted=t.revs[t.rev].deleted?1:0}o.error?h[a]=o:(r[o.id]=o,m=a,q(e,o,a))}))}function O(e){var t={id:e.metadata.id,rev:e.metadata.rev,rev_tree:e.metadata.rev_tree,revs:e.metadata.revs||{}};return t.revs[t.rev]={data:e.data,deleted:e.metadata.deleted},t}function S(e,t,r){if(t.rev in r.revs&&!n.new_edits)return!1;var o=/^1-/.test(t.rev);if(r.deleted&&!t.deleted&&n.new_edits&&o){var i=t.revs[t.rev].data;i._rev=r.rev,i._id=r.id,t=O((0,a.EB)(i,n.new_edits,u))}var d=(0,c.TS)(r.rev_tree,t.rev_tree[0],b(t));t.stemmedRevs=d.stemmedRevs,t.rev_tree=d.tree;var f=r.revs;f[t.rev]=t.revs[t.rev],t.revs=f,t.attachments=r.attachments;var l=n.new_edits&&(r.deleted&&t.deleted||!r.deleted&&"new_leaf"!==d.conflicts||r.deleted&&!t.deleted&&"new_branch"===d.conflicts||r.rev===t.rev);return l?(0,s.Tr)(s.gW):(t.wasDeleted=r.deleted,t)}function q(e,t,n){var r=(0,c.S)(t),a=t.rev,o=/^_local/.test(t.id),u=t.revs[r].data;const d=t.isNewDoc;if(g){var f=k(u);f?(t.data=f,delete t.data._attachments):t.data=u}else t.data=u;if(t.rev=r,t.deleted=t.revs[r].deleted?1:0,!o){t.seq=++i.seq;var l=0;t.isNewDoc?l=t.deleted?0:1:t.wasDeleted!==t.deleted&&(l=t.deleted?-1:1),i.doc_count+=l}delete t.isNewDoc,delete t.wasDeleted;let m=t.stemmedRevs||[];if(y&&!d){const e=(0,c.UB)(t);e.length&&(m=m.concat(e))}if(m.length&&m.forEach((function(e){delete t.revs[e]})),delete t.stemmedRevs,"attachments"in t||(t.attachments={}),u._attachments)for(var _ in u._attachments){var p=u._attachments[_];if(p.stub){if(!(p.digest in t.attachments))return v=(0,s.Tr)(s.wp),void e.abort();B(t,a,p.digest)&&(t.attachments[p.digest].revs[a]=!0)}else t.attachments[p.digest]=p,t.attachments[p.digest].revs={},t.attachments[p.digest].revs[a]=!0,u._attachments[_]={stub:!0,digest:p.digest,content_type:p.content_type,length:p.length,revpos:parseInt(a,10)}}if(o&&t.deleted)return e.objectStore(x).delete(t.id).onsuccess=function(){h[n]={ok:!0,id:t.id,rev:"0-0"}},void A(n);e.objectStore(x).put(t).onsuccess=function(){h[n]={ok:!0,id:t.id,rev:a},A(n)}}function A(e){e===m&&l.objectStore(D).put(i)}function T(e){if(e.stub)return Promise.resolve(e);var t;if("string"===typeof e.data){if(t=E(e.data),t.error)return Promise.reject(t.error);e.data=(0,r.sG)(t,e.content_type)}else t=e.data;return new Promise((function(n){(0,o.u)(t,(function(r){e.digest="md5-"+r,e.length=t.size||t.length||0,n(e)}))}))}function P(){var e=_.map((function(e){var t=e.revs[e.rev].data;if(!t._attachments)return Promise.resolve(t);var n=Object.keys(t._attachments).map((function(e){return t._attachments[e].name=e,T(t._attachments[e])}));return Promise.all(n).then((function(e){var n={};return e.forEach((function(e){n[e.name]=e,delete e.name})),t._attachments=n,t}))}));return Promise.all(e)}for(var N=0,C=t.docs.length;N<C;N++){var K;try{K=(0,a.EB)(t.docs[N],n.new_edits,u)}catch(M){K=M}if(K.error)return f(K);_.push(O(K))}P().then((function(){e._openTransactionSafely([x,D],"readwrite",(function(e,t){if(e)return f(e);l=t,l.onabort=function(){f(v||(0,s.Tr)(s.I4,"transaction was aborted"))},l.ontimeout=j(f),l.oncomplete=function(){d.notify(u.name),f(null,h)},I(l,_)}))})).catch((function(e){f(e)}))}function z(e,t,n){var r=new Array(e.length),a=0;e.forEach((function(o,i){t.get(o).onsuccess=function(t){t.target.result?r[i]=t.target.result:r[i]={key:o,error:"not_found"},a++,a===e.length&&r.forEach((function(e){n(e)}))}}))}function U(e,t,n,r,a){try{if(e&&t)return a?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return a?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return a?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(o){return{error:o}}return null}function Z(e,t,n,r){if("DataError"===n.name&&0===n.code){var a={total_rows:t.doc_count,offset:e.skip,rows:[]};return e.update_seq&&(a.update_seq=t.seq),r(null,a)}r((0,s.Tr)(s.cG,n.name,n.message))}function $(e,t,n,r){if(e.error)return r(e.error);if(0===n.limit){var a={total_rows:t.doc_count,offset:n.skip,rows:[]};return n.update_seq&&(a.update_seq=t.seq),r(null,a)}var o,i=[],s=[],u="startkey"in n&&n.startkey,d="endkey"in n&&n.endkey,f="key"in n&&n.key,l="keys"in n&&n.keys,v=n.skip||0,m="number"===typeof n.limit?n.limit:-1,h=!1!==n.inclusive_end,_="descending"in n&&n.descending?"prev":null;if(!l&&(o=U(u,d,h,f,_),o&&o.error))return Z(n,t,o.error,r);var p=e.txn.objectStore(x);if(e.txn.oncomplete=b,l)return z(n.keys,p,y);function g(e,t){var r=t.revs[t.rev].data;if(e.doc=r,e.doc._id=t.id,e.doc._rev=t.rev,n.conflicts){var a=(0,c.DJ)(t);a.length&&(e.doc._conflicts=a)}if(n.attachments&&r._attachments)for(var o in r._attachments)s.push(E(o,t,e.doc,n.binary))}function y(e){if(e.error&&l)return i.push(e),!0;var t={id:e.id,key:e.id,value:{rev:e.rev}},r=e.deleted;if(r)l&&(i.push(t),t.value.deleted=!0,t.doc=null);else if(v--<=0&&(i.push(t),n.include_docs&&g(t,e),0===--m))return!1;return!0}function b(){Promise.all(s).then((function(){var e={total_rows:t.doc_count,offset:0,rows:i};n.update_seq&&(e.update_seq=t.seq),r(null,e)}))}var w=_?p.openCursor(o,_):p.openCursor(o);w.onsuccess=function(e){var t=e.target.result&&e.target.result.value;if(t){if(/^_local/.test(t.id))return e.target.result.continue();var n=y(t);n&&e.target.result.continue()}}}function L(e,t,n,r,a){if(e.error)return a.complete(e.error);if(a.continuous){var o=r.name+":"+(0,i.Vj)();return t.addListener(r.name,o,n,a),t.notify(r.name),{cancel:function(){t.removeListener(r.name,o)}}}var s="limit"in a?a.limit:-1;0===s&&(s=1);var c,u=e.txn.objectStore(x).index("seq"),d=(0,i.sP)(a),f=0,l=a.since||0,v=[],m=[];function h(e){if(e.target.result){var t=e.target.result,n=t.value;if(n.data=n.revs[n.rev].data,n.data._id=n.id,n.data._rev=n.rev,n.deleted&&(n.data._deleted=!0),a.doc_ids&&-1===a.doc_ids.indexOf(n.id))return t.continue();var r=a.processChange(n.data,n,a);r.seq=n.seq,l=n.seq;var o=d(r);if("object"===typeof o)return a.complete(o);if(o)if(f++,a.return_docs&&v.push(r),a.include_docs&&a.attachments&&n.data._attachments){var i=[];for(var c in n.data._attachments){var u=E(c,n,r.doc,a.binary);i.push(u),m.push(u)}Promise.all(i).then((function(){a.onChange(r)}))}else a.onChange(r);f!==s&&t.continue()}}function _(){Promise.all(m).then((function(){a.complete(null,{results:v,last_seq:l})}))}c=a.descending?u.openCursor(null,"prev"):u.openCursor(IDBKeyRange.lowerBound(a.since,!0)),e.txn.oncomplete=_,c.onsuccess=h}function J(e,t,n){if(e.error)return n(e.error);var r=e.txn.objectStore(x).get(t);r.onsuccess=function(e){e.target.result?n(null,e.target.result.rev_tree):n((0,s.Tr)(s.Uc))}}function W(e,t,n,r){if(e.error)return r(e.error);var a=e.txn.objectStore(x);a.get(t).onsuccess=function(e){var t=e.target.result;(0,c.fE)(t.rev_tree,(function(e,t,r,a,o){var i=t+"-"+r;-1!==n.indexOf(i)&&(o.status="missing")}));var r=[];n.forEach((function(e){if(e in t.revs){if(t.revs[e].data._attachments)for(var n in t.revs[e].data._attachments)r.push(t.revs[e].data._attachments[n].digest);delete t.revs[e]}})),r.forEach((function(e){n.forEach((function(n){delete t.attachments[e].revs[n]})),Object.keys(t.attachments[e].revs).length||delete t.attachments[e]})),a.put(t)},e.txn.oncomplete=function(){r()}}function Y(e,t,n,r){function a(){var n=indexedDB.deleteDatabase(e.name);n.onsuccess=function(){delete t[e.name],r(null,{ok:!0})}}n.removeAllListeners(e.name),e.name in t?t[e.name].then((function(e){e.idb.close(),a()})):a()}var H=null,Q="￿",X=Number.NEGATIVE_INFINITY,ee=[[[[[[[[[[[[]]]]]]]]]]]];function te(e){var t=e.revs[e.rev].data;return t._id=e.id,t._rev=e.rev,e.deleted&&(t._deleted=!0),t}function ne(e){function t(e,t){return void 0!==e[t]}function n(e,t){var n=[0].concat(e);return n.map((function(e){if(null===e&&t)return d;if(!0===e)return l;if(!1===e)return f;if(!t){if(e===H)return X;if(Object.prototype.hasOwnProperty.call(e,Q))return ee}return e}))}if(t(e,"inclusive_end")||(e.inclusive_end=!0),t(e,"inclusive_start")||(e.inclusive_start=!0),e.descending){var r=e.startkey,a=e.inclusive_start;e.startkey=e.endkey,e.endkey=r,e.inclusive_start=e.inclusive_end,e.inclusive_end=a}try{return t(e,"key")?IDBKeyRange.only(n(e.key,!0)):t(e,"startkey")&&!t(e,"endkey")?IDBKeyRange.lowerBound(n(e.startkey),!e.inclusive_start):!t(e,"startkey")&&t(e,"endkey")?IDBKeyRange.upperBound(n(e.endkey),!e.inclusive_end):t(e,"startkey")&&t(e,"endkey")?IDBKeyRange.bound(n(e.startkey),n(e.endkey),!e.inclusive_start,!e.inclusive_end):IDBKeyRange.only([0])}catch(o){throw u.error("Could not generate keyRange",o,e),Error("Could not generate key range with "+JSON.stringify(e))}}function re(e,t,n){var r=B(t);return new Promise((function(a){e._openTransactionSafely([x],"readonly",(function(o,i){if(o)return j(n)(o);i.onabort=j(n),i.ontimeout=j(n);var s=Array.from(i.objectStore(x).indexNames);-1===s.indexOf(r)?e._freshen().then((function(){return re(e,t,n)})).then(a):a(i.objectStore(x).index(r))}))}))}function ae(e,t,n){var r=this,a=t.split("/");return new Promise((function(e,t){r.get("_design/"+a[0]).then((function(o){var i=I(o,a[1]);if(!i)throw new Error("ddoc "+o._id+" with view "+a[1]+" does not have map.options.def.fields defined.");var s=n.skip,c=Number.isInteger(n.limit)&&n.limit;return re(r,i,t).then((function(r){var a=ne(n),o=r.openCursor(a,n.descending?"prev":"next"),i=[];o.onerror=j(t),o.onsuccess=function(t){var n=t.target.result;return n&&0!==c?s?(n.advance(s),void(s=!1)):(c&&(c-=1),i.push({doc:te(n.value)}),void n.continue()):e({rows:i})}}))})).catch(t)}))}function oe(){return Promise.resolve()}var ie="indexeddb",se=new i.b6,ce={};function ue(e,t){e.view_adapter&&u.log("Please note that the indexeddb adapter manages _find indexes itself, therefore it is not using your specified view_adapter");var n=this,r={},a=function(t){return function(){var a=Array.prototype.slice.call(arguments);C(ce,n,e).then((function(e){r=e.metadata,a.unshift(e.idb),t.apply(n,a)})).catch((function(e){var t=a.pop();"function"===typeof t?t(e):u.error(e)}))}},o=function(t){return function(){var a=Array.prototype.slice.call(arguments);return C(ce,n,e).then((function(e){return r=e.metadata,a.unshift(e.idb),t.apply(n,a)}))}},i=function(t,a,o){return a=a||[x],o=o||"readonly",function(){var i=Array.prototype.slice.call(arguments),s={};C(ce,n,e).then((function(e){r=e.metadata,s.txn=e.idb.transaction(a,o)})).catch((function(e){u.error("Failed to establish transaction safely"),u.error(e),s.error=e})).then((function(){i.unshift(s),t.apply(n,i)}))}};n._openTransactionSafely=function(e,t,n){i((function(e,t){t(e.error,e.txn)}),e,t)(n)},n._remote=!1,n.type=function(){return ie},n._id=a((function(e,t){t(null,r.db_uuid)})),n._info=a((function(e,t){return K(r,t)})),n._get=i(M),n._bulkDocs=a((function(t,a,o,i){F(n,a,o,r,e,se,i)})),n._allDocs=i((function(e,t,n){$(e,r,t,n)})),n._getAttachment=i(G),n._changes=i((function(t,r){L(t,se,n,e,r)})),n._getRevisionTree=i(J),n._doCompaction=i(W,[x],"readwrite"),n._customFindAbstractMapper={query:o(ae),viewCleanup:o(oe)},n._destroy=function(t,n){return Y(e,ce,se,n)},n._close=a((function(t,n){delete ce[e.name],t.close(),n()})),n._freshen=function(){return new Promise((function(e){n._close((function(){a(e)()}))}))},setTimeout((function(){t(null,n)}))}function de(e){e.adapter(ie,ue,!0)}ue.valid=function(){return!0};const fe=de}}]);