{"version":3,"sources":["webpack:///./src/views/OpenChannel.vue?390a","webpack:///./src/views/OpenChannel.vue","webpack:///./src/views/OpenChannel.vue?ca51","webpack:///./src/views/OpenChannel.vue?1438","webpack:///./src/views/OpenChannel.vue?47f2"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","autocomplete","model","value","callback","$$v","valid","expression","column","justify-space-between","fill-height","align-center","justify-center","xs10","token","max","balance","limit","deposit","xs2","_v","_s","$t","xs8","partner","enabled","text","on","click","$event","openChannel","display","loading","steps","done-step","doneStep","current","done","description","error","title","button-label","dismiss","staticRenderFns","OpenChannelvue_type_script_lang_ts_OpenChannel","_Mixins","OpenChannel","_this","Object","classCallCheck","types","inherits","createClass","key","to","from","next","window","confirm","_openChannel","asyncToGenerator","regeneratorRuntime","mark","_callee","depositAmount","_this2","wrap","_context","prev","balance_utils","parse","decimals","eq","constants","$raiden","address","progress","setTimeout","navigateToSelectPaymentTarget","t0","raiden_service","message","stop","apply","arguments","_created","_callee2","_this$$route$params","tokenInfo","_context2","$route","params","address_utils","checkAddressChecksum","navigateToHome","abrupt","navigateToTokenSelect","$store","getters","getToken","sent","created","vue_property_decorator","navigation_mixin","tslib_es6","components","TokenInformation","Divider","ErrorScreen","Stepper","ActionButton","AmountInput","OpenChannelvue_type_script_lang_ts_","views_OpenChannelvue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__","installComponents_default","VFlex","VForm","VLayout","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_OpenChannel_vue_vue_type_style_index_0_id_5765b755_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_OpenChannel_vue_vue_type_style_index_0_id_5765b755_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-14a2b175.80efca2f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-form',{staticClass:\"open-channel\",attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"justify-space-between\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"align-center\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\"}},[_c('amount-input',{attrs:{\"token\":_vm.token,\"max\":_vm.token.balance,\"limit\":\"\"},model:{value:(_vm.deposit),callback:function ($$v) {_vm.deposit=$$v},expression:\"deposit\"}})],1)],1),_c('divider'),_c('token-information',{attrs:{\"token\":_vm.token}}),_c('divider'),_c('v-layout',{staticClass:\"open-channel__hub\",attrs:{\"align-center\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{staticClass:\"open-channel__hub__label text-left\",attrs:{\"xs2\":\"\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('open-channel.hub'))+\"\\n      \")]),_c('v-flex',{staticClass:\"open-channel__hub__address text-left\",attrs:{\"xs8\":\"\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.partner)+\"\\n      \")])],1),_c('action-button',{attrs:{\"enabled\":_vm.valid,\"text\":_vm.$t('open-channel.open-button')},on:{\"click\":function($event){return _vm.openChannel()}}}),_c('stepper',{attrs:{\"display\":_vm.loading,\"steps\":_vm.steps,\"done-step\":_vm.doneStep,\"current\":_vm.current,\"done\":_vm.done}}),_c('error-screen',{attrs:{\"description\":_vm.error,\"title\":_vm.$t('open-channel.error.title'),\"button-label\":_vm.$t('open-channel.error.button')},on:{\"dismiss\":function($event){_vm.error = ''}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins } from 'vue-property-decorator';\nimport AmountInput from '../components/AmountInput.vue';\nimport {\n  ChannelDepositFailed,\n  ChannelOpenFailed\n} from '@/services/raiden-service';\nimport {\n  emptyDescription,\n  StepDescription,\n  Token,\n  TokenPlaceholder\n} from '@/model/types';\nimport { BalanceUtils } from '@/utils/balance-utils';\nimport Stepper from '@/components/Stepper.vue';\nimport { Zero } from 'ethers/constants';\nimport AddressUtils from '@/utils/address-utils';\nimport NavigationMixin from '@/mixins/navigation-mixin';\nimport { Route } from 'vue-router';\nimport ErrorScreen from '@/components/ErrorScreen.vue';\nimport Divider from '@/components/Divider.vue';\nimport TokenInformation from '@/components/TokenInformation.vue';\nimport ActionButton from '@/components/ActionButton.vue';\n\n@Component({\n  components: {\n    TokenInformation,\n    Divider,\n    ErrorScreen,\n    Stepper,\n    ActionButton,\n    AmountInput\n  }\n})\nexport default class OpenChannel extends Mixins(NavigationMixin) {\n  partner: string = '';\n  token: Token = TokenPlaceholder;\n\n  deposit: string = '0.00';\n\n  valid: boolean = false;\n  loading: boolean = false;\n  error: string = '';\n\n  steps: StepDescription[] = [];\n\n  doneStep: StepDescription = emptyDescription();\n  current = 0;\n  done = false;\n\n  beforeRouteLeave(to: Route, from: Route, next: any) {\n    if (!this.loading) {\n      next();\n    } else {\n      if (window.confirm(this.$t('open-channel.confirmation') as string)) {\n        next();\n      } else {\n        next(false);\n      }\n    }\n  }\n\n  async openChannel() {\n    const token = this.token;\n    const depositAmount = BalanceUtils.parse(this.deposit, token.decimals);\n\n    if (depositAmount.eq(Zero)) {\n      this.steps = [\n        (this.$t('open-channel.steps.open') as any) as StepDescription\n      ];\n    } else {\n      this.steps = [\n        (this.$t('open-channel.steps.open') as any) as StepDescription,\n        (this.$t('open-channel.steps.transfer') as any) as StepDescription,\n        (this.$t('open-channel.steps.deposit') as any) as StepDescription\n      ];\n    }\n\n    this.loading = true;\n\n    try {\n      await this.$raiden.openChannel(\n        token.address,\n        this.partner,\n        depositAmount,\n        progress => (this.current = progress.current - 1)\n      );\n\n      this.done = true;\n      setTimeout(() => {\n        this.loading = false;\n        this.navigateToSelectPaymentTarget(this.token.address);\n      }, 2000);\n    } catch (e) {\n      this.error = '';\n      if (e instanceof ChannelOpenFailed) {\n        this.error = this.$t('open-channel.error.open-failed') as string;\n      } else if (e instanceof ChannelDepositFailed) {\n        this.error = this.$t('open-channel.error.deposit-failed') as string;\n      } else {\n        this.error = e.message;\n      }\n\n      this.done = false;\n      this.loading = false;\n    }\n  }\n\n  async created() {\n    this.doneStep = (this.$t(\n      'open-channel.steps.done'\n    ) as any) as StepDescription;\n    const { token, partner } = this.$route.params;\n\n    if (!AddressUtils.checkAddressChecksum(token)) {\n      this.navigateToHome();\n      return;\n    }\n\n    if (!AddressUtils.checkAddressChecksum(partner)) {\n      this.navigateToTokenSelect();\n      return;\n    } else {\n      this.partner = partner;\n    }\n\n    let tokenInfo = this.$store.getters.token(token);\n    if (!tokenInfo) {\n      tokenInfo = await this.$raiden.getToken(token);\n    }\n\n    if (!tokenInfo) {\n      this.navigateToHome();\n    } else {\n      this.token = tokenInfo;\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OpenChannel.vue?vue&type=template&id=5765b755&scoped=true&\"\nimport script from \"./OpenChannel.vue?vue&type=script&lang=ts&\"\nexport * from \"./OpenChannel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./OpenChannel.vue?vue&type=style&index=0&id=5765b755&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5765b755\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VFlex,VForm,VLayout})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=style&index=0&id=5765b755&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OpenChannel.vue?vue&type=style&index=0&id=5765b755&scoped=true&lang=scss&\""],"sourceRoot":""}