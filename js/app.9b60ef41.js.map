{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/filters.ts","webpack:///./src/mixins/navigation-mixin.ts","webpack:///./src/assets/done.svg","webpack:///./src/locales sync [A-Za-z0-9-_,\\s]+\\.json$/","webpack:///./src/route-names.ts","webpack:///./src/components/ListHeader.vue?81d4","webpack:///./src/assets/back_arrow.svg","webpack:///./src/components/ActionButton.vue?7b9b","webpack:///./src/components/ActionButton.vue","webpack:///./src/components/ActionButton.vue?574f","webpack:///./src/components/ActionButton.vue?547b","webpack:///./src/mixins/blockie-mixin.ts","webpack:///./src/components/ActionButton.vue?b8e6","webpack:///./src/model/types.ts","webpack:///./src/App.vue?ffd9","webpack:///./src/components/NoAccessMessage.vue?7780","webpack:///./src/components/Stepper.vue?46f9","webpack:///./src/components/AppHeader.vue?e8fb","webpack:///./src/assets/copy_icon.svg","webpack:///./src/assets/logo.svg","webpack:///./src/components/Stepper.vue?83e8","webpack:///./src/components/Stepper.vue","webpack:///./src/components/Stepper.vue?04e6","webpack:///./src/components/Stepper.vue?e0bd","webpack:///./src/utils/balance-utils.ts","webpack:///./src/components/Tokens.vue?a2cc","webpack:///./src/components/SplashScreen.vue?7fda","webpack:///./src/App.vue?a032","webpack:///./src/components/SplashScreen.vue?3543","webpack:///./src/components/NoAccessMessage.vue?1902","webpack:///./src/components/NoAccessMessage.vue","webpack:///./src/components/NoAccessMessage.vue?cd93","webpack:///./src/components/NoAccessMessage.vue?71ea","webpack:///./src/components/SplashScreen.vue","webpack:///./src/components/SplashScreen.vue?10ae","webpack:///./src/components/SplashScreen.vue?1ffb","webpack:///./src/components/AppHeader.vue?d5d7","webpack:///./src/components/AppHeader.vue","webpack:///./src/components/AppHeader.vue?1bd0","webpack:///./src/components/AppHeader.vue?4bd4","webpack:///./src/App.vue","webpack:///./src/App.vue?2594","webpack:///./src/App.vue?4f7e","webpack:///./src/plugins/class-component.hooks.ts","webpack:///./src/views/Home.vue?1a04","webpack:///./src/components/AppCore.vue?4c18","webpack:///./src/components/Tokens.vue?324d","webpack:///./src/components/ConfirmationDialog.vue?c110","webpack:///./src/components/ConfirmationDialog.vue","webpack:///./src/components/ConfirmationDialog.vue?800c","webpack:///./src/components/ConfirmationDialog.vue?1a16","webpack:///./src/components/Tokens.vue","webpack:///./src/components/Tokens.vue?b132","webpack:///./src/components/Tokens.vue?8375","webpack:///./src/components/AppCore.vue","webpack:///./src/components/AppCore.vue?851c","webpack:///./src/components/AppCore.vue?48f8","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?54ed","webpack:///./src/views/Home.vue?2908","webpack:///./src/router.ts","webpack:///./src/store.ts","webpack:///./src/registerServiceWorker.ts","webpack:///./src/class-component-hooks.ts","webpack:///./src/plugins/raiden.ts","webpack:///./src/services/identicon-cache.ts","webpack:///./src/plugins/identicon-plugin.ts","webpack:///./src/i18n.ts","webpack:///./src/plugins/vuetify.ts","webpack:///./src/main.ts","webpack:///./src/components/ListHeader.vue?8bdb","webpack:///./src/components/ListHeader.vue","webpack:///./src/components/ListHeader.vue?ec8b","webpack:///./src/components/ListHeader.vue?0972","webpack:///./src/components/ConfirmationDialog.vue?d1a5","webpack:///./src/services/config-provider.ts","webpack:///./src/services/raiden-service.ts","webpack:///./src/services/web3-provider.ts","webpack:///../raiden-ts/dist/utils/types.js","webpack:///../raiden-ts/dist/config.js","webpack:///../raiden-ts/dist/utils/data.js","webpack:///../raiden-ts/dist/channels/types.js","webpack:///../raiden-ts/dist/channels/state.js","webpack:///../raiden-ts/dist/messages/types.js","webpack:///../raiden-ts/dist/transport/state.js","webpack:///../raiden-ts/dist/transfers/state.js","webpack:///../raiden-ts/dist/state.js","webpack:///../raiden-ts/dist/constants.js","webpack:///../raiden-ts/dist/contracts/TokenNetworkRegistryFactory.js","webpack:///../raiden-ts/dist/contracts/TokenNetworkFactory.js","webpack:///../raiden-ts/dist/contracts/HumanStandardTokenFactory.js","webpack:///../raiden-ts/dist/contracts/ServiceRegistryFactory.js","webpack:///../raiden-ts/dist/channels/utils.js","webpack:///../raiden-ts/dist/utils/redux.js","webpack:///../raiden-ts/dist/channels/actions.js","webpack:///../raiden-ts/dist/channels/reducer.js","webpack:///../raiden-ts/dist/transport/actions.js","webpack:///../raiden-ts/dist/transport/reducer.js","webpack:///../raiden-ts/dist/transfers/utils.js","webpack:///../raiden-ts/dist/messages/utils.js","webpack:///../raiden-ts/dist/transfers/actions.js","webpack:///../raiden-ts/dist/transfers/reducer.js","webpack:///../raiden-ts/dist/messages/actions.js","webpack:///../raiden-ts/dist/path/actions.js","webpack:///../raiden-ts/dist/actions.js","webpack:///../raiden-ts/dist/reducer.js","webpack:///../raiden-ts/dist/utils/ethers.js","webpack:///../raiden-ts/dist/channels/epics.js","webpack:///../raiden-ts/dist/utils/matrix.js","webpack:///../raiden-ts/dist/utils/lru.js","webpack:///../raiden-ts/dist/transport/utils.js","webpack:///../raiden-ts/dist/transport/epics.js","webpack:///../raiden-ts/dist/transfers/epics.js","webpack:///../raiden-ts/dist/path/utils.js","webpack:///../raiden-ts/dist/path/types.js","webpack:///../raiden-ts/dist/path/epics.js","webpack:///../raiden-ts/dist/epics.js","webpack:///../raiden-ts/dist/raiden.js","webpack:///../raiden-ts/dist/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","Filters","width","separator","substWidth","Math","floor","substr","parseFloat","toFixed","toLocaleUpperCase","amount","decimals","units","toUnits","deposit","splitted","indexOf","filter","truncate","upper","displayFormat","capitalizeFirst","NavigationMixin","token","this","$router","SELECT_HUB","params","HOME","partner","OPEN_CHANNEL","CHANNELS","TRANSFER","SELECT_TOKEN","$route","navigateToHome","navigateToTokenSelect","navigateToSelectHub","map","webpackContext","req","id","webpackContextResolve","keys","RouteNames","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","enabled","loading","on","$event","click","_v","_s","text","staticRenderFns","ActionButton","required","Boolean","default","component","VBtn","VCol","VRow","BlockieMixin","address","$identicon","getIdenticon","DeniedReason","emptyDescription","label","title","description","emptyTokenModel","symbol","opening","open","closing","closed","settling","settled","PlaceHolderNetwork","chainId","_l","step","index","class","current","done","doneStep","steps","_e","Stepper","VImg","VProgressCircular","BalanceUtils","wei","depositTokens","decimalPart","split","connecting","connect","$t","accessDenied","reason","UNSUPPORTED_NETWORK","INITIALIZATION_FAILED","VAlert","injectedWeb3Available","components","NoAccessMessage","computed","VContainer","defaultAccount","onBackClicked","meta","network","$blockie","scopedSlots","_u","fn","ref","_g","_f","copy","copied","accountBalance","directives","rawName","expression","domProps","composing","copyArea","$refs","focus","select","execCommand","VSpacer","VTooltip","$store","commit","$raiden","disconnect","UNDEFINED","AppHeader","SplashScreen","VApp","VContent","registerHooks","proxy","leaveNetwork","leaveModalVisible","leaveConfirmed","leaveCancelled","selectedToken","model","callback","$$v","display","_t","cancel","confirm","ConfirmationDialog","$emit","VCard","VCardActions","VCardText","VCardTitle","VDialog","dismissModal","ListHeader","VList","VListGroup","VListItem","VListItemAvatar","VListItemContent","VListItemSubtitle","VListItemTitle","AppCore","Tokens","Home","use","router","base","routes","path","redirect","_defaultState","providerDetected","channels","tokens","defaultState","store","state","mutations","noProvider","account","loadComplete","balance","updateChannels","updateTokens","entries","reset","assign","actions","getters","reducer","acc","channel","tokenChannels","tokenInfo","allTokens","values","tokenAddress","channelWithBiggestCapacity","_","openChannels","Store","VUE_APP_RAIDEN_PACKAGE","ready","log","registered","cached","updatefound","updated","offline","RaidenPlugin","Vue","_options","cache","generated","IdenticonPlugin","loadLocaleMessages","locales","messages","forEach","matched","match","locale","fallbackLocale","icons","iconfont","theme","dark","themes","primary","secondary","config","productionTip","vuetify","i18n","h","$mount","header","url","fetch","json","_raiden","provider","localStorage","pfsSafetyMargin","RaidenInitializationFailed","raiden","resolveName","EnsResolveFailed","raidenPackageConfigUrl","RaidenService","createRaiden","PRIVATE_KEY","getAccount","getBalance","events$","pipe","exhaustMap","fetchTokenData","subscribe","payload","channels$","start","deniedReason","NO_ACCOUNT","stop","toEth","getTokenBalance","getTokenInfo","progress","progressUpdater","total","openChannel","ChannelOpenFailed","gt","failed","closeChannel","ChannelCloseFailed","depositChannel","ChannelDepositFailed","settleChannel","ChannelSettleFailed","fetchToken","a","getToken","paths","transfer","secretHash","transfers$","first","secrethash","completed","toPromise","TransferFailed","raidenPFS","getAvailability","findRoutes","pfs","FindRoutesFailed","findPFS","PFSRequestFailed","Web3Provider","ethereum","INFURA_ENDPOINT","enable","web3","currentProvider","isMetaMask","autoRefreshOnNetworkChange","location","replace","origin","decode","codec","decoded","isLeft","ThrowReporter","report","right","isStringifiable","u","isBigNumber","BigNumberC","bigNumberify","toString","LosslessNumber","HexString","memoize","size","hexDataLength","isHexString","Int","min","Zero","sub","Two","pow","max","is","gte","lt","UInt","Signature","Hash","Secret","PrivateKey","Address","getAddress","Timed","timed","v","Date","now","RaidenConfig","matrixServerLookup","revealTimeout","settleTimeout","httpTimeout","discoveryRoom","pfsRoom","matrixExcessRooms","matrixServer","logger","makeDefaultConfig","overwrites","encode","hex","hexZeroPad","hexlify","isArrayish","str","isLosslessNumber","losslessParse","parse","valueOf","ChannelState","Lock","expiration","SignedBalanceProof","tokenNetworkAddress","channelId","nonce","transferredAmount","lockedAmount","locksroot","messageHash","signature","sender","MessageType","ChannelEnd","locks","balanceProof","withdraw","Channel","own","openBlock","isFirstParticipant","settleable","closeBlock","RaidenMatrixSetup","userId","accessToken","deviceId","displayName","RaidenSentTransferStatus","RetrieableMessage","message_identifier","Delivered","DELIVERED","delivered_message_identifier","Processed","PROCESSED","SecretRequest","SECRET_REQUEST","payment_identifier","SecretReveal","SECRET_REVEAL","secret","EnvelopeMessage","chain_id","token_network_address","channel_identifier","transferred_amount","locked_amount","RouteMetadata","route","Metadata","LockedTransferBase","recipient","lock","initiator","fee","metadata","LockedTransfer","LOCKED_TRANSFER","RefundTransfer","REFUND_TRANSFER","Unlock","UNLOCK","LockExpired","LOCK_EXPIRED","ToDevice","TO_DEVICE","WithdrawBase","participant","total_withdraw","WithdrawRequest","WITHDRAW_REQUEST","WithdrawConfirmation","WITHDRAW_CONFIRMATION","WithdrawExpired","WITHDRAW_EXPIRED","PFSCapacityUpdate","PFS_CAPACITY_UPDATE","canonical_identifier","chain_identifier","updating_participant","other_participant","updating_nonce","other_nonce","updating_capacity","other_capacity","reveal_timeout","Message","Signed","SentTransfer","transferProcessed","refund","channelClosed","secretReveal","unlock","lockExpired","unlockProcessed","lockExpiredProcessed","SentTransfers","RaidenState","registry","blockNumber","transport","matrix","server","setup","rooms","secrets","registerBlock","sent","encodeRaidenState","losslessStringify","decodeRaidenState","makeInitialState","contractsInfo","TokenNetworkRegistry","block_number","ShutdownReason","initialState","getNetwork","AddressZero","ServiceRegistry","SignatureZero","padZeros","TokenNetworkRegistryFactory","signerOrProvider","Contract","_abi","constant","inputs","outputs","payable","stateMutability","anonymous","indexed","TokenNetworkFactory","HumanStandardTokenFactory","ServiceRegistryFactory","channelAmounts","Zero32","ownDeposit","ownWithdraw","ownTransferred","ownLocked","ownBalance","ownCapacity","partnerDeposit","partnerWithdraw","partnerTransferred","partnerLocked","partnerBalance","partnerCapacity","add","partialCombineReducers","reducers","action","subState","newSubState","newBlock","createStandardAction","tokenMonitored","channelOpen","channelOpened","channelOpenFailed","channelMonitored","channelDeposit","channelDeposited","channelDepositFailed","channelWithdrawn","channelClose","channelCloseFailed","channelSettleable","channelSettle","channelSettled","channelSettleFailed","isActionOf","set","tokenNetwork","unset","totalDeposit","totalWithdraw","includes","channelsReducer","matrixSetup","matrixRequestMonitorPresence","matrixPresenceUpdate","available","ts","matrixRequestMonitorPresenceFailed","matrixRoom","matrixRoomLeave","roomId","getOr","room","isEmpty","transportReducer","getLocksroot","encoded","keccak256","concat","getSecrethash","sha256","makeSecret","randomBytes","makePaymentId","makeMessageId","raidenSentTransfer","expired","unlocked","expiring","unlocking","revealed","refunded","received","pending","status","changedAt","success","paymentId","toNumber","expirationBlock","startedAt","MessageTypeId","__awaiter","thisArg","_arguments","P","generator","next","rejected","CMDIDs","createMetadataHash","routeHashes","RLP","createBalanceHash","isZero","HashZero","createMessageHash","packed","packMessage","balanceHash","BALANCE_PROOF","WITHDRAW","isSigned","getMessageSigner","verifyMessage","arrayify","getBalanceProofFromEnvelopeMessage","encodeJsonMessage","decodeJsonMessage","parsed","signMessage","signer","transferSigned","transferSecret","transferSecretRequest","transferSecretReveal","transferUnlock","transferUnlocked","transferUnlockProcessed","transferExpire","transferExpired","transferExpireFailed","transferExpireProcessed","transferRefunded","transferred","transferFailed","transferClear","withdrawReceiveRequest","withdrawSendConfirmation","transfersReducer","channelPath","eq","sentTransfer","mapValues","txHash","messageSend","messageSent","messageGlobalSend","messageReceived","pathFind","pathFound","pathFindFailed","pfsListUpdated","raidenShutdown","raidenConfigUpdate","RaidenActions","ChannelsActions","TransportActions","MessagesActions","TransfersActions","PathFindActions","RaidenEvents","pick","getType","configReducer","raidenReducers","raidenReducer","reduce","fromEthersEvent","resultSelector","fromEventPattern","handler","removeListener","getEventsStream","contract","filters","fromBlock$","lastSeenBlock$","pastEvents$","EMPTY","combineLatest","defer","of","switchMap","fromBlock","toBlock","getLogs","mergeMap","logs","from","sortBy","flatten","interface","parseLog","args","Array","getBlock","blockHash","getTransaction","transactionHash","getTransactionReceipt","newEvents$","merge","parseNetwork","parseInt","send","patchSignSend","origSend","method","catch","initNewBlockEpic","getBlockNumber","initMonitorRegistryEpic","state$","registryContract","publishReplay","TokenNetworkCreated","pluck","withLatestFrom","initMonitorChannelsEpic","obj","initMonitorProviderEpic","listAccounts","accounts","isProviderAccount","interval","pollingInterval","ACCOUNT_CHANGED","curNetwork","NETWORK_CHANGED","tokenMonitoredEpic","action$","getTokenNetworkContract","blockNumber$","groupBy","grouped$","tokenNetworkContract","ChannelOpened","p1","p2","channelMonitoredEpic","depositFilter","ChannelNewDeposit","withdrawFilter","ChannelWithdraw","closedFilter","ChannelClosed","settledFilter","ChannelSettled","settleBlock","takeWhile","negate","channelOpenEpic","config$","channelState","functions","tx","wait","receipt","hash","mergeMapTo","catchError","channelOpenedEpic","channelDepositEpic","getTokenContract","findKey","tn","tokenContract","approve","tap","setTotalDeposit","gasLimit","channelCloseEpic","additionalHash","nonClosingSignature","closingMessage","closingSignature","channelSettleEpic","zeroBalanceProof","part1","part2","channelSettleableEpic","settleableBlock","yamlListToArray","yml","reg","results","exec","matrixRTT","fromFetch","response","ok","NaN","Number","MAX_SAFE_INTEGER","end","rtt","getServerName","getUserPresence","encodeUri","$userId","_http","authedRequest","LruCache","Map","entry","delete","keyToDelete","getPresences$","scan","presences","update","share","startWith","globalRoomNames","g","roomMatch","curry","roomIdOrAlias","getCanonicalAlias","getAliases","getRoom$","getRoom","getRooms","find","fromEvent","take","AVAILABLE","userRe","initMatrixEpic","matrix$","throwError","toArray","rtts","isNaN","JSON","stringify","createClient","baseUrl","serverName","userName","toLowerCase","password","loginWithPassword","register","device_id","opts","access_token","credentials","user_id","signedUserId","setDisplayName","globalRoom","joinRoom","mapTo","_server","complete","delay","startClient","initialSyncLimit","ignoreElements","matrixShutdownEpic","finalize","stopClient","matrixMonitorPresenceEpic","validUsers","getUsers","user","presence","recovered","minBy","searchUserDirectory","term","display_name","matrixPresenceUpdateEpic","getUser","getSender","peerAddress","toMonitor","Set","has","displayName$","getProfileInfo","profile","displayname","lastPresenceTs","matrixCreateRoomEpic","presencesStateReplay$","concatMap","createRoom","visibility","invite","room_id","matrixInviteEpic","member","getMember","matrixHandleInvitesEpic","getUserId","membership","cachedPresence","senderPresence$","takeUntil","timer","senderPresence","syncRoom","matrixLeaveExcessRoomsEpic","leave","matrixLeaveUnknownRoomsEpic","globalRooms","some","matrixCleanLeftRoomsEpic","matrixMessageSendEpic","distinctUntilChanged","body","sendEvent","msgtype","matrixMessageGlobalSendEpic","roomName","warn","roomAlias","matrixMessageReceivedEpic","content","getHomeserverUrl","line","origin_server_ts","matrixMessageReceivedUpdateRoomEpic","matrixMonitorChannelPresenceEpic","deliveredEpic","msgId","delivered","signed","put","nextNonce","One","makeAndSignTransfer","makeAndSignUnlock","signed$","lte","makeAndSignLockExpired","makeAndSignWithdrawConfirmation","confirmation","transferGenerateAndSignEnvelopeMessageEpic","deps","withdrawCache","transferSignedRetryMessageEpic","sendOnceAndWaitSent$","repeatWhen","completed$","transferUnlockedRetryMessageEpic","transferExpiredRetryMessageEpic","transferAutoExpireEpic","requests$","requestAndWait$","initQueuePendingEnvelopeMessagesEpic","transferProcessedReceivedEpic","transferSecretRequestedEpic","transferSecretRevealEpic","reveal$","transferSecretRevealedEpic","transferUnlockProcessedReceivedEpic","transferExpireProcessedEpic","transferChannelClosedEpic","transferRefundedEpic","transferReceivedReplyProcessedEpic","processed","withdrawRequestReceivedEpic","withdrawSendConfirmationEpic","channelCanRoute","capacity","serviceRegistryToken","serviceRegistryContract","pfsInfo","pfsAddrOrUrl","PathInfo","network_info","registry_address","operator","payment_address","price_info","version","url$","urls","res","info","price","pfsListInfo","pfsList","addr","list","sort","b","dif","PathResults","estimated_fee","feedback_token","Paths","PFS","pathFindServiceEpic","cached$","configPfs","pfs$","isNil","pfss","headers","to","max_paths","mul","round","div","filteredPaths","invalidatedRecipients","canTransferOrReason","pfsCapacityUpdateEpic","debounceTime","pfsServiceRegistryMonitorEpic","RegisteredService","service","valid_till","validTill","end$","valid","RaidenEpics","ChannelsEpics","TransportEpics","TransfersEpics","PathFindEpics","raidenRootEpic","shutdownNotification","limitedAction$","limitedState$","stateOutput$","actionOutput$","epic","Raiden","resetEventsBlock","BehaviorSubject","Subject","transform","partner2channel","partner2raidenChannel","changed","totalSupply","pfsList$","ReplaySubject","middlewares","createLogger","level","AsyncSubject","epicMiddleware","createEpicMiddleware","dependencies","createStore","applyMiddleware","run","dispatch","STOP","balanceOf","options","decodedValue","getState","connection","storageOrState","contracts","isStorage","getItem","JsonRpcProvider","rinkebyDeploy","rinkebyServicesDeploy","ropstenDeploy","ropstenServicesDeploy","goerliDeploy","goerliServicesDeploy","Signer","isSigner","Wallet","getSigner","loadedState","onState","onStateComplete","_merge","loaded","debouncedState","debounce","setItem","maxWait","flush"],"mappings":"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","file":"js/app.9b60ef41.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2a5b2f9c\":\"dcfaaf80\",\"chunk-587869c4\":\"756a856c\",\"chunk-67e81ee5\":\"7740ad35\",\"chunk-6aff208b\":\"29451800\",\"chunk-89f30e78\":\"be127edf\",\"chunk-e28890e2\":\"b831bff5\",\"chunk-4a2aa1f7\":\"90570756\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-2a5b2f9c\":1,\"chunk-587869c4\":1,\"chunk-67e81ee5\":1,\"chunk-6aff208b\":1,\"chunk-89f30e78\":1,\"chunk-e28890e2\":1,\"chunk-4a2aa1f7\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2a5b2f9c\":\"91aeee02\",\"chunk-587869c4\":\"4d3f2534\",\"chunk-67e81ee5\":\"5c4534eb\",\"chunk-6aff208b\":\"d154f1bd\",\"chunk-89f30e78\":\"b4487b1e\",\"chunk-e28890e2\":\"88d11361\",\"chunk-4a2aa1f7\":\"d50b715f\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import Vue from 'vue';\nimport { BigNumber } from 'ethers/utils';\nimport { BalanceUtils } from '@/utils/balance-utils';\nimport split from 'lodash/split';\nimport capitalize from 'lodash/capitalize';\n\nexport default class Filters {\n  static truncate(value: string, width: number = 12) {\n    const separator = '...';\n    if (value.length <= width) {\n      return value;\n    } else {\n      const substWidth = Math.floor(width / 2);\n      return (\n        value.substr(0, substWidth) +\n        separator +\n        value.substr(value.length - substWidth)\n      );\n    }\n  }\n\n  static decimals(value: string, decimals: number = 3) {\n    return parseFloat(value).toFixed(decimals);\n  }\n\n  static upper(value: string) {\n    if (!value) {\n      return '';\n    }\n    return value.toLocaleUpperCase();\n  }\n\n  static displayFormat(amount: BigNumber, decimals: number): string {\n    const units = BalanceUtils.toUnits(amount, decimals);\n    const deposit = parseFloat(units);\n    if (deposit === 0) {\n      return '0.0';\n    } else if (deposit < 0.00001) {\n      return '<0.00001';\n    } else {\n      const splitted = split(units, '.');\n      if (splitted[1] && splitted[1].length > 5) {\n        return units.substr(0, units.indexOf('.') + 6);\n      } else {\n        return units;\n      }\n    }\n  }\n\n  static capitalizeFirst(value: string): string {\n    return capitalize(value);\n  }\n}\n\nVue.filter('truncate', Filters.truncate);\nVue.filter('decimals', Filters.decimals);\nVue.filter('upper', Filters.upper);\nVue.filter('displayFormat', Filters.displayFormat);\nVue.filter('capitalizeFirst', Filters.capitalizeFirst);\n","import { Component, Vue } from 'vue-property-decorator';\nimport { RouteNames } from '@/route-names';\n\n@Component\nexport default class NavigationMixin extends Vue {\n  navigateToSelectHub(token: string) {\n    this.$router.push({\n      name: RouteNames.SELECT_HUB,\n      params: {\n        token: token\n      }\n    });\n  }\n\n  navigateToHome() {\n    this.$router.push({\n      name: RouteNames.HOME\n    });\n  }\n\n  navigateToOpenChannel(token: string, partner: string) {\n    this.$router.push({\n      name: RouteNames.OPEN_CHANNEL,\n      params: {\n        token: token,\n        partner: partner\n      }\n    });\n  }\n\n  navigateToChannels(token: string) {\n    this.$router.push({\n      name: RouteNames.CHANNELS,\n      params: {\n        token: token\n      }\n    });\n  }\n\n  navigateToSelectTransferTarget(token: string) {\n    this.$router.push({\n      name: RouteNames.TRANSFER,\n      params: { token: token }\n    });\n  }\n\n  navigateToTokenSelect() {\n    this.$router.push({\n      name: RouteNames.SELECT_TOKEN\n    });\n  }\n\n  onBackClicked() {\n    switch (this.$route.name) {\n      case RouteNames.TRANSFER:\n      case RouteNames.CHANNELS:\n      case RouteNames.SELECT_TOKEN:\n        this.navigateToHome();\n        break;\n      case RouteNames.SELECT_HUB:\n        this.navigateToTokenSelect();\n        break;\n      case RouteNames.OPEN_CHANNEL:\n        this.navigateToSelectHub(this.$route.params.token);\n        break;\n    }\n  }\n}\n","module.exports = __webpack_public_path__ + \"img/done.24f4e34a.svg\";","var map = {\n\t\"./en.json\": \"edd4\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"49f8\";","export enum RouteNames {\n  TRANSFER = 'transfer',\n  SELECT_TOKEN = 'select-token',\n  SELECT_HUB = 'select-hub',\n  HOME = 'home',\n  CHANNELS = 'channels',\n  OPEN_CHANNEL = 'open-channel'\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListHeader.vue?vue&type=style&index=0&id=046d9f4b&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListHeader.vue?vue&type=style&index=0&id=046d9f4b&scoped=true&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/back_arrow.268247fb.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{staticClass:\"action-button\",attrs:{\"no-gutters\":\"\",\"align-content\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"text-center\",attrs:{\"cols\":\"10\"}},[_c('v-btn',{staticClass:\"text-capitalize action-button__button\",attrs:{\"disabled\":!_vm.enabled,\"loading\":_vm.loading,\"depressed\":\"\",\"large\":\"\"},on:{\"click\":function($event){return _vm.click()}}},[_vm._v(\"\\n      \"+_vm._s(_vm.text)+\"\\n    \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Emit, Prop, Vue } from 'vue-property-decorator';\n\n@Component({})\nexport default class ActionButton extends Vue {\n  @Prop({ required: true, type: Boolean })\n  enabled!: boolean;\n\n  @Prop({ required: true })\n  text!: string;\n\n  @Prop({ type: Boolean, default: false })\n  loading!: boolean;\n\n  @Emit()\n  click() {}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ActionButton.vue?vue&type=template&id=f9550b38&scoped=true&\"\nimport script from \"./ActionButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./ActionButton.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ActionButton.vue?vue&type=style&index=0&id=f9550b38&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f9550b38\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VRow})\n","import { Component, Vue } from 'vue-property-decorator';\n\n@Component\nexport default class BlockieMixin extends Vue {\n  $blockie(address: string) {\n    return this.$identicon.getIdenticon(address);\n  }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionButton.vue?vue&type=style&index=0&id=f9550b38&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionButton.vue?vue&type=style&index=0&id=f9550b38&lang=scss&scoped=true&\"","import { BigNumber, BigNumberish, Network } from 'ethers/utils';\n\nexport interface Token {\n  readonly address: string;\n  readonly decimals?: number;\n  readonly balance?: BigNumberish;\n  readonly symbol?: string;\n  readonly name?: string;\n}\n\nexport interface AccTokenModel {\n  name: string;\n  symbol: string;\n  address: string;\n  opening: number;\n  open: number;\n  closing: number;\n  closed: number;\n  settling: number;\n  settled: number;\n\n  [index: string]: number | string;\n}\n\nexport interface TokenModel extends AccTokenModel {\n  readonly name: string;\n  readonly symbol: string;\n  readonly address: string;\n  readonly opening: number;\n  readonly open: number;\n  readonly closing: number;\n  readonly closed: number;\n  readonly settling: number;\n  readonly settled: number;\n}\n\nexport interface LeaveNetworkResult {\n  readonly closed: number;\n  readonly failed: number;\n}\n\nexport interface Progress {\n  readonly current: number;\n  readonly total: number;\n}\n\nexport interface StepDescription {\n  readonly label: string;\n  readonly title: string;\n  readonly description: string;\n}\n\nexport interface Route {\n  readonly key: number;\n  readonly hops: number;\n  readonly path: string[];\n  readonly fee: BigNumber;\n  readonly displayFee: string;\n}\n\nexport const emptyDescription = (): StepDescription => ({\n  label: '',\n  title: '',\n  description: ''\n});\n\nexport const emptyTokenModel = (): AccTokenModel => ({\n  name: '',\n  symbol: '',\n  address: '',\n  opening: 0,\n  open: 0,\n  closing: 0,\n  closed: 0,\n  settling: 0,\n  settled: 0\n});\n\nexport const PlaceHolderNetwork: Network = {\n  name: '',\n  chainId: -1\n};\n\nexport enum DeniedReason {\n  UNDEFINED,\n  NO_ACCOUNT,\n  UNSUPPORTED_NETWORK,\n  INITIALIZATION_FAILED\n}\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js!../node_modules/vuetify-loader/lib/loader.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=36797782&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js!../node_modules/vuetify-loader/lib/loader.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=36797782&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoAccessMessage.vue?vue&type=style&index=0&id=6b8163f4&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoAccessMessage.vue?vue&type=style&index=0&id=6b8163f4&scoped=true&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stepper.vue?vue&type=style&index=0&id=30108802&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stepper.vue?vue&type=style&index=0&id=30108802&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppHeader.vue?vue&type=style&index=0&id=08e6cbd5&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppHeader.vue?vue&type=style&index=0&id=08e6cbd5&scoped=true&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/copy_icon.80d12304.svg\";","module.exports = __webpack_public_path__ + \"img/logo.5c4b022d.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.display)?_c('div',{staticClass:\"stepper\"},[_c('div',{staticClass:\"stepper__card\"},[_c('div',{staticClass:\"stepper__card__steps\"},[_vm._l((_vm.steps),function(step,index){return _c('div',{key:index,staticClass:\"stepper__card__steps__step\",class:{\n          'stepper__card__steps__step--active': _vm.current === index && !_vm.done\n        }},[_c('span',{staticClass:\"stepper__card__steps__step__label\"},[_vm._v(\"\\n          \"+_vm._s(step.label)+\"\\n        \")])])}),_c('div',{staticClass:\"stepper__card__steps__step\",class:{ 'stepper__card__steps__step--active': _vm.done }},[_vm._v(\"\\n        \"+_vm._s(_vm.doneStep.label)+\"\\n      \")])],2),_c('div',{staticClass:\"stepper__card__content\"},[_c('div',{staticClass:\"stepper__card__content__title\"},[(_vm.done)?_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.doneStep.title)+\"\\n        \")]):_c('span',[_vm._v(_vm._s(_vm.steps[_vm.current].title))])]),(_vm.done)?_c('div',[_c('v-img',{staticClass:\"stepper__card__content--done\",attrs:{\"src\":require('../assets/done.svg')}})],1):_c('v-progress-circular',{staticClass:\"stepper__card__content--progress\",attrs:{\"size\":110,\"width\":7,\"indeterminate\":\"\"}}),_c('p',{staticClass:\"stepper__card__content__description\"},[(_vm.done)?_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.doneStep.description)+\"\\n        \")]):_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.steps[_vm.current].description)+\"\\n        \")])])],1)])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { StepDescription } from '@/model/types';\n\n@Component({})\nexport default class Stepper extends Vue {\n  @Prop({ required: true })\n  display!: boolean;\n\n  @Prop({ required: false, default: 0 })\n  current!: number;\n\n  @Prop({ required: true })\n  steps!: StepDescription[];\n\n  @Prop({ required: true })\n  doneStep!: StepDescription;\n\n  @Prop({})\n  done?: boolean;\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stepper.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stepper.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Stepper.vue?vue&type=template&id=30108802&scoped=true&\"\nimport script from \"./Stepper.vue?vue&type=script&lang=ts&\"\nexport * from \"./Stepper.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Stepper.vue?vue&type=style&index=0&id=30108802&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30108802\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\ninstallComponents(component, {VImg,VProgressCircular})\n","import { BigNumber, parseUnits, formatUnits, formatEther } from 'ethers/utils';\n\nexport class BalanceUtils {\n  static toEth(wei: BigNumber): string {\n    return formatEther(wei);\n  }\n\n  static toUnits(wei: BigNumber, decimals: number): string {\n    return formatUnits(wei, decimals);\n  }\n\n  static decimalsOverflow(depositTokens: string, decimals: number): boolean {\n    let decimalPart: string;\n    if (depositTokens.indexOf('.') > 0) {\n      decimalPart = depositTokens.split('.')[1];\n    } else {\n      decimalPart = '';\n    }\n    return decimalPart.length > decimals;\n  }\n\n  static parse(deposit: string, decimals: number) {\n    return parseUnits(deposit, decimals);\n  }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tokens.vue?vue&type=style&index=0&id=107a7378&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tokens.vue?vue&type=style&index=0&id=107a7378&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SplashScreen.vue?vue&type=style&index=0&id=4b726f94&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SplashScreen.vue?vue&type=style&index=0&id=4b726f94&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"dark\":\"\"}},[(_vm.inaccessible)?_c('splash-screen',{attrs:{\"connecting\":_vm.connecting},on:{\"connect\":function($event){return _vm.connect()}}}):_c('div',{attrs:{\"id\":\"application-wrapper\"}},[_c('div',{attrs:{\"id\":\"application-content\"}},[_c('app-header'),_c('v-content',[_c('v-container',{staticClass:\"application__container fill-height\",attrs:{\"fluid\":\"\"}},[_c('router-view')],1)],1)],1)]),_c('div',{staticClass:\"policy\"},[_c('a',{attrs:{\"href\":\"https://raiden.network/privacy.html\",\"target\":\"_blank\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('application.privacy-policy'))+\"\\n    \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"splash-screen fill-height\",attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\",\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"4\",\"lg\":\"4\",\"md\":\"6\",\"sm\":\"8\"}},[_c('div',{staticClass:\"splash-screen__wrapper display-3\"},[_c('div',{staticClass:\"splash-screen__logo-container\"},[_c('v-img',{staticClass:\"splash-screen__logo\",attrs:{\"src\":require('../assets/logo.svg'),\"min-width\":\"50px\",\"aspect-ratio\":\"1\",\"contain\":\"\"}})],1),_c('div',{staticClass:\"splash-screen__app-name\"},[_c('div',[_vm._v(\"\\n            \"+_vm._s(_vm.name)+\"\\n          \")])])]),_c('div',{staticClass:\"font-weight-light text-center splash-screen__disclaimer\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('splash-screen.disclaimer'))+\"\\n      \")]),_c('div',{staticClass:\"font-weight-light text-center splash-screen__matrix_sign\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('splash-screen.matrix-sign'))+\"\\n      \")]),_c('div',{staticClass:\"splash-screen__button\"},[(_vm.injectedProvider)?_c('action-button',{attrs:{\"text\":_vm.$t('splash-screen.connect-button'),\"enabled\":!_vm.connecting,\"loading\":_vm.connecting},on:{\"click\":function($event){return _vm.connect()}}}):_c('span',{staticClass:\"splash-screen__no-provider\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('splash-screen.no-provider'))+\"\\n        \")])],1),_c('div',{staticClass:\"splash-screen__message\"},[(_vm.accessDenied)?_c('no-access-message',{attrs:{\"reason\":_vm.accessDenied}}):_vm._e()],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-alert',{staticClass:\"no-access-message\",attrs:{\"value\":true,\"color\":\"error\",\"icon\":\"warning\"}},[_c('div',{staticClass:\"font-weight-light no-access-message__message\"},[(_vm.networkUnsupported)?_c('span',[_vm._v(\"\\n      \"+_vm._s(_vm.$t('no-access.unsupported-network'))+\"\\n    \")]):(_vm.initializationFailed)?_c('span',[_vm._v(\"\\n      \"+_vm._s(_vm.$t('no-access.sdk-initialization-failure'))+\"\\n    \")]):_c('span',[_vm._v(\"\\n      \"+_vm._s(_vm.$t('no-access.generic-error'))+\"\\n    \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { DeniedReason } from '@/model/types';\n\n@Component({})\nexport default class NoAccessMessage extends Vue {\n  @Prop({ required: true })\n  reason!: DeniedReason;\n\n  get networkUnsupported(): boolean {\n    return this.reason === DeniedReason.UNSUPPORTED_NETWORK;\n  }\n\n  get initializationFailed(): boolean {\n    return this.reason === DeniedReason.INITIALIZATION_FAILED;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoAccessMessage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoAccessMessage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NoAccessMessage.vue?vue&type=template&id=6b8163f4&scoped=true&\"\nimport script from \"./NoAccessMessage.vue?vue&type=script&lang=ts&\"\nexport * from \"./NoAccessMessage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./NoAccessMessage.vue?vue&type=style&index=0&id=6b8163f4&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6b8163f4\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\ninstallComponents(component, {VAlert})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Emit, Prop, Vue } from 'vue-property-decorator';\nimport { Web3Provider } from '@/services/web3-provider';\nimport { DeniedReason } from '@/model/types';\nimport { mapState } from 'vuex';\nimport NoAccessMessage from '@/components/NoAccessMessage.vue';\nimport ActionButton from '@/components/ActionButton.vue';\n\n@Component({\n  components: {\n    ActionButton,\n    NoAccessMessage\n  },\n  computed: mapState(['accessDenied'])\n})\nexport default class Loading extends Vue {\n  accessDenied!: DeniedReason;\n  name: string = 'Raiden dApp';\n\n  @Prop({ default: false, required: true, type: Boolean })\n  connecting!: boolean;\n\n  // noinspection JSMethodCanBeStatic\n  get injectedProvider(): boolean {\n    return Web3Provider.injectedWeb3Available();\n  }\n\n  @Emit()\n  connect() {}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SplashScreen.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SplashScreen.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SplashScreen.vue?vue&type=template&id=4b726f94&scoped=true&\"\nimport script from \"./SplashScreen.vue?vue&type=script&lang=ts&\"\nexport * from \"./SplashScreen.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SplashScreen.vue?vue&type=style&index=0&id=4b726f94&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b726f94\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCol,VContainer,VImg,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.loading && _vm.defaultAccount)?_c('div',{staticClass:\"app-header\"},[_c('v-row',{staticClass:\"app-header__top\",attrs:{\"justify\":\"center\",\"align\":\"center\",\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('div',{staticClass:\"app-header__top__content\"},[_c('div',{staticClass:\"app-header__top__content__back\"},[(_vm.canGoBack)?_c('v-btn',{attrs:{\"height\":\"40px\",\"width\":\"40px\",\"text\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.onBackClicked()}}},[_c('v-img',{attrs:{\"src\":require('../assets/back_arrow.svg'),\"max-width\":\"34px\"}})],1):_vm._e()],1),_c('v-spacer'),_c('v-col',{attrs:{\"align-self\":\"center\"}},[_c('div',{staticClass:\"app-header__top__content__title\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$route.meta.title)+\"\\n          \")]),_c('div',{staticClass:\"app-header__top__content__network\"},[_vm._v(\"\\n            \"+_vm._s(_vm.network)+\"\\n          \")])]),_c('v-spacer'),_c('div',[_c('v-img',{staticClass:\"app-header__top__content__blockie\",attrs:{\"src\":_vm.$blockie(_vm.defaultAccount),\"height\":\"36\",\"width\":\"36\",\"contain\":\"\",\"aspect-ratio\":\"1\"}})],1)],1)])],1),_c('v-row',{staticClass:\"app-header__bottom\",attrs:{\"align\":\"center\",\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('div',{staticClass:\"app-header__bottom__address text-left\"},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('span',_vm._g({},on),[_vm._v(\"\\n              \"+_vm._s(_vm._f(\"truncate\")(_vm.defaultAccount,8))+\"\\n            \")])]}}],null,false,3329657142)},[_c('span',[_vm._v(_vm._s(_vm.defaultAccount))])]),_c('v-tooltip',{attrs:{\"bottom\":\"\",\"dark\":\"\",\"close-delay\":\"1500\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"id\":\"copyBtn\",\"text\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.copy()}}},on),[_c('v-img',{staticClass:\"app-header__bottom__address__copy\",attrs:{\"src\":require('../assets/copy_icon.svg'),\"contain\":\"\"}})],1)]}}],null,false,121364382)},[_c('span',[_vm._v(\"\\n            \"+_vm._s(_vm.copied ? _vm.$t('app-header.copy-success') : _vm.$t('app-header.copy'))+\"\\n          \")])])],1)]),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('div',{staticClass:\"app-header__bottom__balance text-right\"},[_vm._v(\"\\n        \"+_vm._s(_vm._f(\"decimals\")(_vm.accountBalance))+\"\\n        \"),_c('span',{staticClass:\"app-header__bottom__balance__currency\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('app-header.currency'))+\"\\n        \")])])])],1),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.defaultAccount),expression:\"defaultAccount\"}],ref:\"copy\",staticClass:\"app-header__copy-area\",domProps:{\"value\":(_vm.defaultAccount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.defaultAccount=$event.target.value}}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins } from 'vue-property-decorator';\nimport { mapGetters, mapState } from 'vuex';\nimport BlockieMixin from '@/mixins/blockie-mixin';\nimport { RouteNames } from '@/route-names';\nimport NavigationMixin from '@/mixins/navigation-mixin';\n\n@Component({\n  computed: {\n    ...mapState(['loading', 'defaultAccount', 'accountBalance']),\n    ...mapGetters(['network'])\n  }\n})\nexport default class AppHeader extends Mixins(BlockieMixin, NavigationMixin) {\n  defaultAccount!: string;\n  loading!: boolean;\n  accountBalance!: string;\n  network!: string;\n\n  copied: boolean = false;\n  private timeout: number = 0;\n\n  get canGoBack(): boolean {\n    return this.$route.name !== RouteNames.HOME;\n  }\n\n  copy() {\n    const copyArea = this.$refs.copy as HTMLTextAreaElement;\n    copyArea.focus();\n    copyArea.select();\n    this.copied = document.execCommand('copy');\n\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n\n    this.timeout = (setTimeout(() => {\n      this.copied = false;\n    }, 2000) as unknown) as number;\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AppHeader.vue?vue&type=template&id=08e6cbd5&scoped=true&\"\nimport script from \"./AppHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./AppHeader.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AppHeader.vue?vue&type=style&index=0&id=08e6cbd5&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08e6cbd5\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VCol,VImg,VRow,VSpacer,VTooltip})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport SplashScreen from '@/components/SplashScreen.vue';\nimport AppHeader from '@/components/AppHeader.vue';\nimport { mapState } from 'vuex';\nimport { DeniedReason } from '@/model/types';\n\n@Component({\n  computed: mapState(['loading', 'accessDenied']),\n  components: { AppHeader, SplashScreen }\n})\nexport default class App extends Vue {\n  name: string;\n  connecting: boolean = false;\n  accessDenied!: DeniedReason;\n  loading!: boolean;\n\n  constructor() {\n    super();\n    this.name = 'Raiden dApp';\n  }\n\n  get inaccessible() {\n    return (\n      this.connecting ||\n      this.loading ||\n      this.accessDenied !== DeniedReason.UNDEFINED\n    );\n  }\n\n  async connect() {\n    this.connecting = true;\n    this.$store.commit('reset');\n    await this.$raiden.connect();\n    this.connecting = false;\n  }\n\n  destroyed() {\n    this.$raiden.disconnect();\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/vuetify-loader/lib/loader.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/vuetify-loader/lib/loader.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=36797782&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=36797782&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36797782\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\ninstallComponents(component, {VApp,VContainer,VContent})\n","/* istanbul ignore file */\nimport Component from 'vue-class-component';\n\n// Register the router hooks with their names\nComponent.registerHooks([\n  'beforeRouteEnter',\n  'beforeRouteLeave',\n  'beforeRouteUpdate' // for vue-router 2.2+\n]);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('app-core')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tokens')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{staticClass:\"fill-height\"},[_c('v-col',{staticClass:\"fill-height\",attrs:{\"cols\":\"12\"}},[_c('list-header',{staticClass:\"connected-tokens__header\",attrs:{\"header\":_vm.$t('tokens.connected.header')}}),_c('v-row',{attrs:{\"justify\":\"center\",\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-list',{staticClass:\"connected-tokens__tokens\",attrs:{\"expand\":\"\"}},_vm._l((_vm.tokens),function(token,index){return _c('v-list-group',{key:token.token,staticClass:\"connected-tokens__tokens__token\",attrs:{\"no-action\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('v-list-item',{attrs:{\"id\":(\"token-\" + index)}},[_c('v-list-item-avatar',{staticClass:\"list-blockie\"},[_c('img',{attrs:{\"src\":_vm.$blockie(token.address),\"alt\":_vm.$t('tokens.connected.token.blockie-alt')}})]),_c('v-list-item-content',[_c('v-list-item-title',{staticClass:\"connected-tokens__tokens__token__info\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.$t('tokens.connected.token.token-info', {\n                        symbol: token.symbol,\n                        name: token.name\n                      }))+\"\\n                  \")]),_c('v-list-item-subtitle',{staticClass:\"connected-tokens__tokens__token__address\"},[_vm._v(\"\\n                    \"+_vm._s(token.address)+\"\\n                  \")])],1)],1)]},proxy:true}],null,true)},[_c('div',{staticClass:\"connected-tokens__tokens__token__expanded\",attrs:{\"id\":(\"expanded-area-\" + index)}},[_c('v-row',{attrs:{\"justify\":\"center\",\"align\":\"center\",\"no-gutters\":\"\"}},[_c('v-btn',{staticClass:\"text-capitalize connected-tokens__tokens__token__button\",attrs:{\"disabled\":token.open === 0,\"id\":(\"transfer-\" + index),\"to\":(\"/transfer/\" + (token.address))}},[_vm._v(\"\\n                  \"+_vm._s(_vm.$t('general.buttons.transfer'))+\"\\n                \")]),_c('v-btn',{staticClass:\"text-capitalize connected-tokens__tokens__token__button leave\",attrs:{\"id\":(\"leave-\" + index)},on:{\"click\":function($event){return _vm.leaveNetwork(token)}}},[_vm._v(\"\\n                  \"+_vm._s(_vm.$t('tokens.connected.token.buttons.disconnect'))+\"\\n                \")]),_c('v-btn',{staticClass:\"text-capitalize connected-tokens__tokens__token__button\",attrs:{\"to\":(\"/channels/\" + (token.address))}},[_vm._v(\"\\n                  \"+_vm._s(_vm.$t('tokens.connected.token.buttons.view-channels'))+\"\\n                \")])],1)],1)])}),1)],1)],1),_c('action-button',{staticClass:\"connected-tokens__button\",attrs:{\"text\":_vm.$t('tokens.connect-new'),\"enabled\":\"\"},on:{\"click\":function($event){return _vm.navigateToTokenSelect()}}}),_c('confirmation-dialog',{attrs:{\"display\":_vm.leaveModalVisible},on:{\"confirm\":function($event){return _vm.leaveConfirmed()},\"cancel\":function($event){return _vm.leaveCancelled()}},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_vm._v(\"\\n        \"+_vm._s(_vm.$t('tokens.disconnect-dialog.header'))+\"\\n      \")]},proxy:true}])},[(_vm.selectedToken)?_c('i18n',{attrs:{\"path\":\"tokens.disconnect-dialog.confirmation-message\",\"tag\":\"div\"}},[_c('b',{attrs:{\"place\":\"symbol\"}},[_vm._v(_vm._s(_vm.selectedToken.symbol))]),_c('span',{staticClass:\"connected-tokens__tokens__token__leave__address\",attrs:{\"place\":\"address\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.selectedToken.address)+\"\\n        \")])]):_vm._e()],1),_c('stepper',{attrs:{\"display\":_vm.loading,\"steps\":_vm.steps,\"doneStep\":_vm.doneStep}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"625\"},model:{value:(_vm.display),callback:function ($$v) {_vm.display=$$v},expression:\"display\"}},[_c('v-card',[_c('v-card-title',[_c('v-col',[_c('h1',{staticClass:\"confirmation-dialog__header\"},[_vm._t(\"header\")],2)])],1),_c('v-card-text',[_c('p',{staticClass:\"confirmation-dialog__message\"},[_vm._t(\"default\")],2)]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{staticClass:\"confirmation-dialog__button\",attrs:{\"text\":\"\"},on:{\"click\":function($event){return _vm.cancel()}}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('confirmation-dialog.buttons.cancel'))+\"\\n        \")]),_c('v-btn',{staticClass:\"confirmation-dialog__button confirmation-dialog__button__primary\",attrs:{\"text\":\"\"},on:{\"click\":function($event){return _vm.confirm()}}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('confirmation-dialog.buttons.confirm'))+\"\\n        \")]),_c('v-spacer')],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n\n@Component({})\nexport default class ConfirmationDialog extends Vue {\n  @Prop({ required: true })\n  display!: boolean;\n\n  confirm() {\n    this.$emit('confirm');\n  }\n\n  cancel() {\n    this.$emit('cancel');\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmationDialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmationDialog.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ConfirmationDialog.vue?vue&type=template&id=2ef2cf74&scoped=true&\"\nimport script from \"./ConfirmationDialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./ConfirmationDialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ConfirmationDialog.vue?vue&type=style&index=0&id=2ef2cf74&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ef2cf74\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VDialog,VRow,VSpacer})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins } from 'vue-property-decorator';\nimport { mapGetters } from 'vuex';\nimport ConfirmationDialog from '@/components/ConfirmationDialog.vue';\nimport { emptyDescription, StepDescription, TokenModel } from '@/model/types';\nimport Stepper from '@/components/Stepper.vue';\nimport BlockieMixin from '@/mixins/blockie-mixin';\nimport ListHeader from '@/components/ListHeader.vue';\nimport ActionButton from '@/components/ActionButton.vue';\nimport NavigationMixin from '@/mixins/navigation-mixin';\n\n@Component({\n  components: { ListHeader, Stepper, ConfirmationDialog, ActionButton },\n  computed: mapGetters(['tokens'])\n})\nexport default class Tokens extends Mixins(BlockieMixin, NavigationMixin) {\n  tokens!: TokenModel[];\n  selectedToken: TokenModel | null = null;\n  leaveModalVisible: boolean = false;\n\n  loading: boolean = false;\n  steps: StepDescription[] = [];\n  doneStep: StepDescription = emptyDescription();\n\n  created() {\n    this.steps = [(this.$t('tokens.leave-progress') as any) as StepDescription];\n    this.doneStep = (this.$t('tokens.leave-done') as any) as StepDescription;\n  }\n\n  private dismissModal() {\n    this.leaveModalVisible = false;\n    this.selectedToken = null;\n  }\n\n  leaveNetwork(token: TokenModel) {\n    this.selectedToken = token;\n    this.leaveModalVisible = true;\n  }\n\n  async leaveConfirmed() {\n    const address = this.selectedToken!.address;\n    this.dismissModal();\n    this.loading = true;\n    await this.$raiden.leaveNetwork(address);\n    this.loading = false;\n  }\n\n  leaveCancelled() {\n    this.dismissModal();\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tokens.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tokens.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Tokens.vue?vue&type=template&id=107a7378&scoped=true&\"\nimport script from \"./Tokens.vue?vue&type=script&lang=ts&\"\nexport * from \"./Tokens.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Tokens.vue?vue&type=style&index=0&id=107a7378&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"107a7378\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListGroup } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VList,VListGroup,VListItem,VListItemAvatar,VListItemContent,VListItemSubtitle,VListItemTitle,VRow})\n","\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport Tokens from '@/components/Tokens.vue';\n\n@Component({\n  components: { Tokens }\n})\nexport default class AppCore extends Vue {}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppCore.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppCore.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AppCore.vue?vue&type=template&id=78c5b79c&\"\nimport script from \"./AppCore.vue?vue&type=script&lang=ts&\"\nexport * from \"./AppCore.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport AppCore from '@/components/AppCore.vue';\n\n@Component({\n  components: {\n    AppCore\n  }\n})\nexport default class Home extends Vue {}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=5122a23d&\"\nimport script from \"./Home.vue?vue&type=script&lang=ts&\"\nexport * from \"./Home.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* istanbul ignore file */\nimport Vue from 'vue';\nimport Router from 'vue-router';\n\nimport Home from './views/Home.vue';\nimport { RouteNames } from '@/route-names';\n\nVue.use(Router);\n\nconst router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [\n    {\n      path: '/',\n      name: RouteNames.HOME,\n      meta: {\n        title: 'Raiden dApp'\n      },\n      component: Home\n    },\n    {\n      path: '*',\n      redirect: '/'\n    },\n    {\n      path: '/transfer/:token',\n      name: RouteNames.TRANSFER,\n      meta: {\n        title: 'Send'\n      },\n      component: () => import('./views/Transfer.vue')\n    },\n    {\n      path: '/connect',\n      name: RouteNames.SELECT_TOKEN,\n      meta: {\n        title: 'Select token'\n      },\n      component: () => import('./views/SelectToken.vue')\n    },\n    {\n      path: '/connect/:token',\n      name: RouteNames.SELECT_HUB,\n      meta: {\n        title: 'Select hub'\n      },\n      component: () => import('./views/SelectHub.vue')\n    },\n    {\n      path: '/connect/:token/:partner',\n      name: RouteNames.OPEN_CHANNEL,\n      meta: {\n        title: 'Open channel'\n      },\n      component: () => import('./views/OpenChannel.vue')\n    },\n    {\n      path: '/channels/:token',\n      name: RouteNames.CHANNELS,\n      meta: {\n        title: 'Channels'\n      },\n      component: () => import('./views/Channels.vue')\n    }\n  ]\n});\n\nexport default router;\n","import Vue from 'vue';\nimport Vuex, { StoreOptions } from 'vuex';\nimport { RootState, Tokens } from '@/types';\nimport { ChannelState, RaidenChannel, RaidenChannels } from 'raiden-ts';\nimport {\n  AccTokenModel,\n  DeniedReason,\n  emptyTokenModel,\n  PlaceHolderNetwork,\n  Token,\n  TokenModel\n} from '@/model/types';\nimport map from 'lodash/map';\nimport flatMap from 'lodash/flatMap';\nimport filter from 'lodash/filter';\nimport clone from 'lodash/clone';\nimport reduce from 'lodash/reduce';\nimport orderBy from 'lodash/orderBy';\nimport isEqual from 'lodash/isEqual';\nimport isEmpty from 'lodash/isEmpty';\nimport { Network } from 'ethers/utils';\n\nVue.use(Vuex);\n\nconst _defaultState: RootState = {\n  loading: true,\n  defaultAccount: '',\n  accountBalance: '0.0',\n  providerDetected: true,\n  accessDenied: DeniedReason.UNDEFINED,\n  channels: {},\n  tokens: {},\n  network: PlaceHolderNetwork\n};\n\nexport function defaultState(): RootState {\n  return clone(_defaultState);\n}\n\nconst store: StoreOptions<RootState> = {\n  state: defaultState(),\n  mutations: {\n    noProvider(state: RootState) {\n      state.providerDetected = false;\n    },\n    accessDenied(state: RootState, reason: DeniedReason) {\n      state.accessDenied = reason;\n    },\n    account(state: RootState, account: string) {\n      state.defaultAccount = account;\n    },\n    loadComplete(state: RootState) {\n      state.loading = false;\n    },\n    balance(state: RootState, balance: string) {\n      state.accountBalance = balance;\n    },\n    updateChannels(state: RootState, channels: RaidenChannels) {\n      state.channels = channels;\n    },\n    updateTokens(state: RootState, tokens: Tokens) {\n      for (const [address, token] of Object.entries(tokens))\n        if (address in state.tokens && isEqual(token, state.tokens[address]))\n          continue;\n        else if (address in state.tokens)\n          state.tokens[address] = { ...state.tokens[address], ...token };\n        else state.tokens = { ...state.tokens, [address]: token };\n    },\n    network(state: RootState, network: Network) {\n      state.network = network;\n    },\n    reset(state: RootState) {\n      Object.assign(state, defaultState());\n    }\n  },\n  actions: {},\n  getters: {\n    tokens: function(state: RootState): TokenModel[] {\n      const reducer = (\n        acc: AccTokenModel,\n        channel: RaidenChannel\n      ): AccTokenModel => {\n        acc.address = channel.token;\n        (acc[channel.state] as number) += 1;\n        return acc;\n      };\n\n      return map(\n        filter(flatMap(state.channels), channels => !isEmpty(channels)),\n        tokenChannels => {\n          const model = reduce(tokenChannels, reducer, emptyTokenModel());\n          const tokenInfo = state.tokens[model.address];\n          if (tokenInfo) {\n            model.name = tokenInfo.name || '';\n            model.symbol = tokenInfo.symbol || '';\n          }\n\n          return model;\n        }\n      );\n    },\n    allTokens: (state: RootState): Token[] => {\n      return Object.values(state.tokens);\n    },\n    channels: (state: RootState) => (tokenAddress: string) => {\n      let channels: RaidenChannel[] = [];\n      const tokenChannels = state.channels[tokenAddress];\n      if (tokenChannels && !isEmpty(tokenChannels)) {\n        channels = flatMap(tokenChannels);\n      }\n      return channels;\n    },\n    token: (state: RootState) => (tokenAddress: string) => {\n      if (tokenAddress in state.tokens) {\n        return state.tokens[tokenAddress];\n      } else {\n        return null;\n      }\n    },\n    network: (state: RootState) => {\n      return state.network.name || `Chain ${state.network.chainId}`;\n    },\n    channelWithBiggestCapacity: (_, getters) => (tokenAddress: string) => {\n      const channels: RaidenChannel[] = getters.channels(tokenAddress);\n      const openChannels = channels.filter(\n        value => value.state === ChannelState.open\n      );\n      return orderBy(openChannels, ['capacity'], ['desc'])[0];\n    }\n  }\n};\n\nexport default new Vuex.Store(store);\n","/* eslint-disable no-console */\n/* istanbul ignore file */\n\nimport { register } from 'register-service-worker';\n\nif (\n  process.env.NODE_ENV === 'production' &&\n  !process.env.VUE_APP_RAIDEN_PACKAGE\n) {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready() {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n          'For more details, visit https://goo.gl/AFskqB'\n      );\n    },\n    registered() {\n      console.log('Service worker has been registered.');\n    },\n    cached() {\n      console.log('Content has been cached for offline use.');\n    },\n    updatefound() {\n      console.log('New content is downloading.');\n    },\n    updated() {\n      console.log('New content is available; please refresh.');\n    },\n    offline() {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    },\n    error(error) {\n      console.error('Error during service worker registration:', error);\n    }\n  });\n}\n","/* istanbul ignore file */\nimport Component from 'vue-class-component';\n\n// Register the router hooks with their names\nComponent.registerHooks([\n  'beforeRouteEnter',\n  'beforeRouteLeave',\n  'beforeRouteUpdate'\n]);\n","import _Vue from 'vue';\nimport RaidenService from '@/services/raiden-service';\nimport store from '@/store';\n\nexport function RaidenPlugin(Vue: typeof _Vue, _options?: any): void {\n  Vue.prototype.$raiden = new RaidenService(store);\n}\n\ndeclare module 'vue/types/vue' {\n  // 3. Declare augmentation for Vue\n  interface Vue {\n    $raiden: RaidenService;\n  }\n}\n","import makeBlockie from 'ethereum-blockies-base64';\n\nexport class IdenticonCache {\n  private cache: { [id: string]: string } = {};\n\n  constructor() {}\n\n  public getIdenticon(address: string): string {\n    const cached = this.cache[address];\n\n    if (!cached) {\n      const generated = makeBlockie(address);\n      this.cache[address] = generated;\n      return generated;\n    } else {\n      return cached;\n    }\n  }\n}\n","import _Vue from 'vue';\nimport { IdenticonCache } from '@/services/identicon-cache';\n\nexport function IdenticonPlugin(Vue: typeof _Vue, _options?: any): void {\n  Vue.prototype.$identicon = new IdenticonCache();\n}\n\ndeclare module 'vue/types/vue' {\n  // 3. Declare augmentation for Vue\n  interface Vue {\n    $identicon: IdenticonCache;\n  }\n}\n","/* istanbul ignore file */\nimport Vue from 'vue';\nimport VueI18n, { LocaleMessages } from 'vue-i18n';\n\nVue.use(VueI18n);\n\nfunction loadLocaleMessages(): LocaleMessages {\n  const locales = require.context(\n    './locales',\n    true,\n    /[A-Za-z0-9-_,\\s]+\\.json$/i\n  );\n  const messages: LocaleMessages = {};\n  locales.keys().forEach(key => {\n    const matched = key.match(/([A-Za-z0-9-_]+)\\./i);\n    if (matched && matched.length > 1) {\n      const locale = matched[1];\n      messages[locale] = locales(key);\n    }\n  });\n  return messages;\n}\n\nexport default new VueI18n({\n  locale: process.env.VUE_APP_I18N_LOCALE || 'en',\n  fallbackLocale: process.env.VUE_APP_I18N_FALLBACK_LOCALE || 'en',\n  messages: loadLocaleMessages()\n});\n","/* istanbul ignore file */\nimport '@mdi/font/css/materialdesignicons.css';\nimport Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n  icons: {\n    iconfont: 'mdi'\n  },\n  theme: {\n    dark: true,\n    themes: {\n      dark: {\n        primary: '#28A5C8',\n        secondary: '#0A6E87'\n      }\n    }\n  }\n});\n","/* istanbul ignore file */\nimport Vue from 'vue';\nimport App from './App.vue';\nimport '@/plugins/class-component.hooks';\nimport '@/filters';\nimport router from './router';\nimport store from './store';\nimport './registerServiceWorker';\nimport './class-component-hooks';\nimport { RaidenPlugin } from '@/plugins/raiden';\nimport { IdenticonPlugin } from '@/plugins/identicon-plugin';\nimport i18n from './i18n';\nimport vuetify from '@/plugins/vuetify';\nimport VueVirtualScroller from 'vue-virtual-scroller';\nimport 'vue-virtual-scroller/dist/vue-virtual-scroller.css';\nimport '@babel/polyfill';\n\nVue.config.productionTip = false;\n\nVue.use(RaidenPlugin);\nVue.use(IdenticonPlugin);\nVue.use(VueVirtualScroller);\n\nnew Vue({\n  vuetify,\n  router,\n  store,\n  i18n,\n  render: h => h(App)\n}).$mount('#app');\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{staticClass:\"list-header\",attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('div',{staticClass:\"list-header__header\"},[_vm._v(_vm._s(_vm.header))]),_c('div',{staticClass:\"list-header__divider\"})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n\n@Component({})\nexport default class ListHeader extends Vue {\n  @Prop({ required: true })\n  header!: string;\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ListHeader.vue?vue&type=template&id=046d9f4b&scoped=true&\"\nimport script from \"./ListHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./ListHeader.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ListHeader.vue?vue&type=style&index=0&id=046d9f4b&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"046d9f4b\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCol,VRow})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmationDialog.vue?vue&type=style&index=0&id=2ef2cf74&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmationDialog.vue?vue&type=style&index=0&id=2ef2cf74&scoped=true&lang=scss&\"","export class ConfigProvider {\n  static async fetch(\n    url?: string\n  ): Promise<{ INFURA_ENDPOINT: string; PRIVATE_KEY: string } | undefined> {\n    if (url) return await (await fetch(url)).json();\n\n    return undefined;\n  }\n}\n","import {\n  Raiden,\n  RaidenChannel,\n  RaidenSentTransfer,\n  RaidenPaths,\n  RaidenPFS\n} from 'raiden-ts';\nimport { Store } from 'vuex';\nimport { RootState } from '@/types';\nimport { Web3Provider } from '@/services/web3-provider';\nimport { BalanceUtils } from '@/utils/balance-utils';\nimport {\n  DeniedReason,\n  LeaveNetworkResult,\n  Progress,\n  Token,\n  TokenModel\n} from '@/model/types';\nimport { BigNumber } from 'ethers/utils';\nimport { Zero } from 'ethers/constants';\nimport { exhaustMap, filter, first } from 'rxjs/operators';\nimport asyncPool from 'tiny-async-pool';\nimport { ConfigProvider } from './config-provider';\n\nexport default class RaidenService {\n  private _raiden?: Raiden;\n  private store: Store<RootState>;\n\n  private static async createRaiden(\n    provider: any,\n    account: string | number = 0\n  ): Promise<Raiden> {\n    try {\n      return await Raiden.create(\n        provider,\n        account,\n        window.localStorage,\n        undefined,\n        { pfsSafetyMargin: 1.1 }\n      );\n    } catch (e) {\n      throw new RaidenInitializationFailed(e);\n    }\n  }\n\n  private get raiden(): Raiden {\n    if (this._raiden === undefined) {\n      throw new Error('Raiden instance was not initialized');\n    } else {\n      return this._raiden;\n    }\n  }\n\n  constructor(store: Store<RootState>) {\n    this._raiden = undefined;\n    this.store = store;\n  }\n\n  async ensResolve(name: string): Promise<string> {\n    try {\n      return await this.raiden.resolveName(name);\n    } catch (e) {\n      throw new EnsResolveFailed(e);\n    }\n  }\n\n  async connect() {\n    try {\n      const raidenPackageConfigUrl = process.env.VUE_APP_RAIDEN_PACKAGE;\n      let config;\n      let provider;\n      let raiden;\n\n      if (raidenPackageConfigUrl) {\n        config = await ConfigProvider.fetch(raidenPackageConfigUrl);\n        provider = await Web3Provider.provider(config);\n      } else {\n        provider = await Web3Provider.provider();\n      }\n\n      if (!provider) {\n        this.store.commit('noProvider');\n      } else {\n        if (config) {\n          raiden = await RaidenService.createRaiden(\n            provider,\n            config.PRIVATE_KEY\n          );\n        } else {\n          raiden = await RaidenService.createRaiden(provider);\n        }\n\n        this._raiden = raiden;\n\n        this.store.commit('account', await this.getAccount());\n        this.store.commit('balance', await this.getBalance());\n\n        // update connected tokens data on each newBlock\n        raiden.events$\n          .pipe(\n            filter(value => value.type === 'newBlock'),\n            exhaustMap(() =>\n              this.fetchTokenData(\n                this.store.getters.tokens.map((m: TokenModel) => m.address)\n              )\n            )\n          )\n          .subscribe();\n\n        raiden.events$\n          .pipe(filter(value => value.type === 'raidenShutdown'))\n          .subscribe(() => this.store.commit('reset'));\n\n        raiden.events$.subscribe(value => {\n          if (value.type === 'tokenMonitored') {\n            this.store.commit('updateTokens', {\n              [value.payload.token]: { address: value.payload.token }\n            });\n          }\n        });\n\n        raiden.channels$.subscribe(value => {\n          this.store.commit('updateChannels', value);\n        });\n\n        this.store.commit('network', raiden.network);\n\n        raiden.start();\n      }\n    } catch (e) {\n      console.error(e);\n      let deniedReason: DeniedReason;\n      if (e.message && e.message.indexOf('No deploy info provided') > -1) {\n        deniedReason = DeniedReason.UNSUPPORTED_NETWORK;\n      } else if (e instanceof RaidenInitializationFailed) {\n        deniedReason = DeniedReason.INITIALIZATION_FAILED;\n      } else {\n        deniedReason = DeniedReason.NO_ACCOUNT;\n      }\n      this.store.commit('accessDenied', deniedReason);\n    }\n\n    this.store.commit('loadComplete');\n  }\n  disconnect() {\n    this.raiden.stop();\n  }\n\n  async getAccount(): Promise<string> {\n    return this.raiden.address;\n  }\n\n  async getBalance(): Promise<string> {\n    const balance = await this.raiden.getBalance();\n    return BalanceUtils.toEth(balance);\n  }\n\n  private async getToken(tokenAddress: string): Promise<Token | null> {\n    const raiden = this.raiden;\n    try {\n      const [balance, { decimals, symbol, name }] = await Promise.all([\n        raiden.getTokenBalance(tokenAddress),\n        raiden.getTokenInfo(tokenAddress)\n      ]);\n      return {\n        name: name,\n        symbol: symbol,\n        balance: balance,\n        decimals: decimals,\n        address: tokenAddress\n      };\n    } catch (e) {\n      console.error(e);\n      return null;\n    }\n  }\n\n  async openChannel(\n    token: string,\n    partner: string,\n    amount: BigNumber,\n    progress?: (progress: Progress) => void\n  ): Promise<void> {\n    const progressUpdater = (current: number, total: number) => {\n      if (progress) {\n        progress({\n          current,\n          total\n        });\n      }\n    };\n\n    const raiden = this.raiden;\n    progressUpdater(1, 3);\n\n    try {\n      await raiden.openChannel(token, partner);\n    } catch (e) {\n      throw new ChannelOpenFailed(e);\n    }\n\n    progressUpdater(2, 3);\n\n    if (amount.gt(Zero)) {\n      await this.deposit(token, partner, amount);\n    }\n  }\n\n  async leaveNetwork(\n    address: string,\n    progress?: (progress: Progress) => void\n  ): Promise<LeaveNetworkResult> {\n    const channels: RaidenChannel[] = this.store.getters.channels(address);\n    const result = {\n      closed: 0,\n      failed: 0\n    };\n\n    const total = channels.length;\n    for (let i = 0; i < total; i++) {\n      if (progress) {\n        progress({\n          current: i + 1,\n          total: total\n        });\n      }\n\n      const channel = channels[i];\n      try {\n        await this.closeChannel(channel.token, channel.partner);\n        result.closed += 1;\n      } catch (e) {\n        result.failed += 1;\n      }\n    }\n\n    return result;\n  }\n\n  async closeChannel(token: string, partner: string) {\n    try {\n      await this.raiden.closeChannel(token, partner);\n    } catch (e) {\n      throw new ChannelCloseFailed(e);\n    }\n  }\n\n  async deposit(token: string, partner: string, amount: BigNumber) {\n    try {\n      await this.raiden.depositChannel(token, partner, amount);\n    } catch (e) {\n      throw new ChannelDepositFailed(e);\n    }\n  }\n\n  async settleChannel(token: string, partner: string) {\n    try {\n      await this.raiden.settleChannel(token, partner);\n    } catch (e) {\n      throw new ChannelSettleFailed(e);\n    }\n  }\n\n  async fetchTokenData(tokens: string[]): Promise<void> {\n    if (!tokens.length) return;\n    const fetchToken = async (address: string): Promise<void> =>\n      this.getToken(address).then(token => {\n        if (!token) return;\n        this.store.commit('updateTokens', { [token.address]: token });\n      });\n\n    await asyncPool(6, tokens, fetchToken);\n  }\n\n  async transfer(\n    token: string,\n    target: string,\n    amount: BigNumber,\n    paths: RaidenPaths\n  ) {\n    try {\n      const secretHash = await this.raiden.transfer(token, target, amount, {\n        paths: paths\n      });\n\n      // Wait for transaction to be completed\n      await this.raiden.transfers$\n        .pipe(\n          first(\n            (transfer: RaidenSentTransfer) =>\n              transfer.secrethash === secretHash && transfer.completed\n          )\n        )\n        .toPromise();\n    } catch (e) {\n      throw new TransferFailed(e);\n    }\n  }\n\n  async findRoutes(\n    token: string,\n    target: string,\n    amount: BigNumber,\n    raidenPFS?: RaidenPFS\n  ): Promise<RaidenPaths> {\n    let routes: RaidenPaths;\n\n    try {\n      await this.raiden.getAvailability(target);\n      routes = await this.raiden.findRoutes(token, target, amount, {\n        pfs: raidenPFS\n      });\n    } catch (e) {\n      throw new FindRoutesFailed(e);\n    }\n\n    return routes;\n  }\n\n  async fetchServices(): Promise<RaidenPFS[]> {\n    let raidenPFS: RaidenPFS[];\n    try {\n      raidenPFS = await this.raiden.findPFS();\n    } catch (e) {\n      throw new PFSRequestFailed(e);\n    }\n\n    return raidenPFS;\n  }\n\n  noPfsSelected(): boolean {\n    return this.raiden.config.pfs === undefined;\n  }\n}\n\nexport class ChannelSettleFailed extends Error {}\n\nexport class ChannelCloseFailed extends Error {}\n\nexport class ChannelOpenFailed extends Error {}\n\nexport class ChannelDepositFailed extends Error {}\n\nexport class EnsResolveFailed extends Error {}\n\nexport class TransferFailed extends Error {}\n\nexport class RaidenInitializationFailed extends Error {}\n\nexport class FindRoutesFailed extends Error {}\n\nexport class PFSRequestFailed extends Error {}\n","export class Web3Provider {\n  static async provider(config?: { INFURA_ENDPOINT: string }) {\n    const ethereum = window.ethereum;\n    let provider = null;\n\n    if (config) {\n      provider = `https://${config.INFURA_ENDPOINT}`;\n    } else if (typeof ethereum !== 'undefined') {\n      await ethereum.enable();\n      provider = ethereum;\n    } else if (window.web3) {\n      provider = window.web3.currentProvider;\n    }\n\n    if (provider && provider.isMetaMask) {\n      provider.autoRefreshOnNetworkChange = false;\n      provider.on('networkChanged', () =>\n        window.location.replace(window.location.origin)\n      );\n    }\n\n    return provider;\n  }\n\n  static injectedWeb3Available = (): boolean => window.ethereum || window.web3;\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport * as t from 'io-ts';\nimport { bigNumberify, getAddress, isHexString, hexDataLength } from 'ethers/utils';\nimport { Two, Zero } from 'ethers/constants';\nimport { LosslessNumber } from 'lossless-json';\nimport { memoize } from 'lodash';\nimport { isLeft } from 'fp-ts/lib/Either';\nimport { ThrowReporter } from 'io-ts/lib/ThrowReporter';\n/**\n * Decode/validate like codec.decode, but throw or return right instead of Either\n * TODO: add assert signature after TS 3.7\n *\n * @param codec - io-ts codec to be used for decoding/validation\n * @param data - data to decode/validate\n * @returns Decoded value of codec type\n */\nexport function decode(codec, data) {\n    const decoded = codec.decode(data);\n    // report already throw, so the throw here is just for type narrowing in context\n    if (isLeft(decoded))\n        throw ThrowReporter.report(decoded);\n    return decoded.right;\n}\nconst isStringifiable = (u) => \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nu !== null && u !== undefined && typeof u['toString'] === 'function';\nconst isBigNumber = (u) => u && u['_ethersType'] === 'BigNumber';\n/**\n * Codec of ethers.utils.BigNumber objects\n * Input can be anything bigNumberify-able: number, string, LosslessNumber or BigNumber\n * Output is LosslessNumber, so we can JSON-serialize with 'number' types bigger than JS VM limits\n * of 2^53, as Raiden full-client/python stdlib json encode/decode longs as json number.\n */\nexport const BigNumberC = new t.Type('BigNumber', isBigNumber, (u, c) => {\n    if (isBigNumber(u))\n        return t.success(u);\n    try {\n        if (isStringifiable(u))\n            return t.success(bigNumberify(u.toString()));\n    }\n    catch (err) {\n        return t.failure(u, c, err.message);\n    }\n    return t.failure(u, c);\n}, a => new LosslessNumber(a.toString()));\n/**\n * Helper function to create codecs to validate an arbitrary or variable-sized hex bytestring\n * A branded codec to indicate validated hex-strings\n *\n * @param size - Required number of bytes. Pass undefined or zero to have a variable-sized type\n * @returns branded codec for hex-encoded bytestrings\n */\nexport const HexString = memoize(function (size) {\n    return t.brand(t.string, (n) => typeof n === 'string' && (size ? hexDataLength(n) === size : isHexString(n)), 'HexString');\n});\n/**\n * Helper function to create codecs to validate an arbitrary or variable-sized BigNumbers\n * A branded codec/type to indicate size-validated BigNumbers\n *\n * @param size - Required number of bytes. Pass undefined to have a variable-sized type\n * @returns branded codec for hex-encoded bytestrings\n */\nexport const Int = memoize(function (size) {\n    const min = size ? Zero.sub(Two.pow(size * 8 - 1)) : undefined, max = size ? Two.pow(size * 8 - 1) : undefined;\n    return t.brand(BigNumberC, (n) => BigNumberC.is(n) && (!min || !max || (n.gte(min) && n.lt(max))), 'Int');\n});\n/**\n * Helper function to create codecs to validate an arbitrary or variable-sized BigNumbers\n * A branded codec/type to indicate size-validated BigNumbers\n *\n * @param size - Required number of bytes. Pass undefined to have a variable-sized type\n * @returns branded codec for hex-encoded bytestrings\n */\nexport const UInt = memoize(function (size) {\n    const min = size ? Zero : undefined, max = size ? Two.pow(size * 8) : undefined;\n    return t.brand(BigNumberC, (n) => BigNumberC.is(n) && (!min || !max || (n.gte(min) && n.lt(max))), 'UInt');\n});\n// specific types\n// strig brand: ECDSA signature as an hex-string\nexport const Signature = HexString(65);\n// string brand: 256-bit hash, usually keccak256 or sha256\nexport const Hash = HexString(32);\n// string brand: a secret bytearray, non-sized\nexport const Secret = HexString();\n// string brand: ECDSA private key, 32 bytes\nexport const PrivateKey = HexString(32);\n// string brand: checksummed address, 20 bytes\nexport const Address = t.brand(HexString(20), (u) => {\n    try {\n        return typeof u === 'string' && getAddress(u) === u;\n    }\n    catch (e) { }\n    return false;\n}, // type guard for branded values\n'Address');\n/**\n * Helper function to create codecs to validate [timestamp, value] tuples\n *\n * @param codec - Codec to compose with a timestamp in a tuple\n * @returns Codec of a tuple of timestamp and codec type\n */\nexport const Timed = memoize((codec) => t.tuple([t.number, codec]));\n/**\n * Given a value of type T, returns a Timed<T> tuple with current time as first value\n *\n * @param v - Value to return with time\n * @returns Tuple of call timestamp as first elemtn and value passed as parameter as second\n */\nexport function timed(v) {\n    return [Date.now(), v];\n}\n//# sourceMappingURL=types.js.map","import * as t from 'io-ts';\nimport { Address } from './utils/types';\n/**\n * A Raiden configuration object with required parameters and\n * optional parameters from [[PartialRaidenConfig]].\n *\n * - matrixServerLookup - Matrix server URL to fetch existing matrix servers from.\n *      After intializing a [[Raiden]] instance, the matrix server can't be changed later on.\n * - revealTimeout - Timeout for secrets to be revealed\n * - settleTimeout - Timeout for channels to be settled\n * - httpTimeout - Used in http fetch requests\n * - discoveryRoom - Discovery Room to auto-join, use null to disable\n * - pfsRoom - PFS Room to auto-join and send PFSCapacityUpdate to, use null to disable\n * - pfsSafetyMargin - Safety margin to be added to fees received from PFS. Use `1.1` to add a 10% safety margin.\n * - matrixExcessRooms - Keep this much rooms for a single user of interest (partner, target).\n *                       Leave LRU beyond this threshold.\n * - matrixServer? - Specify a matrix server to use.\n * - logger? - String specifying the console log level of redux-logger. Use '' to disable.\n *             Defaults to 'debug' if undefined and process.env.NODE_ENV === 'development'\n * - pfs - Path Finding Service URL or Address. Set to null to disable, or leave undefined to\n *             enable automatic fetching from ServiceRegistry.\n */\nexport const RaidenConfig = t.readonly(t.intersection([\n    t.type({\n        matrixServerLookup: t.string,\n        revealTimeout: t.number,\n        settleTimeout: t.number,\n        httpTimeout: t.number,\n        discoveryRoom: t.union([t.string, t.null]),\n        pfsRoom: t.union([t.string, t.null]),\n        pfsSafetyMargin: t.number,\n        matrixExcessRooms: t.number,\n    }),\n    t.partial({\n        matrixServer: t.string,\n        logger: t.keyof({ ['']: null, debug: null, log: null, info: null, warn: null, error: null }),\n        pfs: t.union([Address, t.string, t.null]),\n    }),\n]));\n/**\n * Create a RaidenConfig from some common options and an optional overwrites partial\n *\n * @param obj - Object containing common parameters for config\n * @param obj.network - ether's Network object for the current blockchain\n * @param overwrites - A partial object to overwrite top-level properties of the returned config\n * @returns A full config object\n */\nexport function makeDefaultConfig({ network }, overwrites = {}) {\n    return Object.assign({ matrixServerLookup: 'https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml', settleTimeout: 500, revealTimeout: 50, httpTimeout: 30e3, discoveryRoom: `raiden_${network.name !== 'unknown' ? network.name : network.chainId}_discovery`, pfsRoom: `raiden_${network.name !== 'unknown' ? network.name : network.chainId}_path_finding`, matrixExcessRooms: 3, pfsSafetyMargin: 1.0 }, overwrites);\n}\n//# sourceMappingURL=config.js.map","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Two } from 'ethers/constants';\nimport { bigNumberify } from 'ethers/utils';\nimport { hexlify, isArrayish, hexZeroPad, hexDataLength } from 'ethers/utils/bytes';\nimport { parse } from 'lossless-json';\nimport { BigNumberC } from './types';\n/**\n * Encode data to hex string of exactly length size (in bytes)\n * Throw if data can't be made to fit in length.\n *\n * @param data - May be of multiple types:\n *      - number|BigNumber: Encoded in the big-endian byte-order and left-zero-padded to length\n *      - string: Must be hex-encoded string of length bytes\n *      - number[] Must be of exactly of length size (left/right-pad it before if needed)\n * @param length - The expected length of the hex string, in bytes\n * @returns HexString byte-array of length\n */\nexport function encode(data, length) {\n    let hex;\n    if (typeof data === 'number')\n        data = bigNumberify(data);\n    if (BigNumberC.is(data)) {\n        if (data.lt(0))\n            throw new Error('Number is negative');\n        if (data.gte(Two.pow(length * 8)))\n            throw new Error('Number too large');\n        hex = hexZeroPad(hexlify(data), length);\n    }\n    else if (typeof data === 'string' || isArrayish(data)) {\n        const str = hexlify(data);\n        if (hexDataLength(str) !== length)\n            throw new Error('Uint8Array or hex string must be of exact length');\n        hex = str;\n    }\n    else {\n        throw new Error('data is not a HexString or Uint8Array');\n    }\n    return hex;\n}\nconst isLosslessNumber = (u) => \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nu && u['isLosslessNumber'] === true;\n/**\n * Opportunistic JSON.parse regarding numbers\n * If possible to decode a JSON number as JS number (i.e. value < 2^53) and return 'number',\n * otherwise returns LosslessNumber object, which can be decoded as BigNumber by BigNumberC\n * Throws if handled invalid JSON\n *\n * @param text - JSON string to parse\n * @returns Decoded object\n */\nexport function losslessParse(text) {\n    return parse(text, ({}, value) => {\n        if (isLosslessNumber(value)) {\n            try {\n                return value.valueOf(); // return number, if possible, or throw if > 2^53\n            }\n            catch (e) { } // else, pass to return LosslessNumber, which can be decoded by BigNumberC\n        }\n        return value;\n    });\n}\nexport { stringify as losslessStringify } from 'lossless-json';\n//# sourceMappingURL=data.js.map","import * as t from 'io-ts';\nimport { Address, Hash, Signature, UInt } from '../utils/types';\n// Represents a HashTime-Locked amount in a channel\nexport const Lock = t.type({\n    amount: UInt(32),\n    expiration: UInt(32),\n    secrethash: Hash,\n}, 'Lock');\n/**\n * Balance Proof constructed from an EnvelopeMessage\n * Either produced by us or received from the partner, the BPs are generated from the messages\n * because BP signature requires the hash of the message, for authentication of data not included\n * nor relevant for the smartcontract/BP itself, but so for the peers (e.g. payment_id)\n */\nexport const SignedBalanceProof = t.type({\n    // channel data\n    chainId: UInt(32),\n    tokenNetworkAddress: Address,\n    channelId: UInt(32),\n    // balance proof data\n    nonce: UInt(8),\n    transferredAmount: UInt(32),\n    lockedAmount: UInt(32),\n    locksroot: Hash,\n    messageHash: Hash,\n    signature: Signature,\n    sender: Address,\n});\n//# sourceMappingURL=types.js.map","import * as t from 'io-ts';\nimport { UInt } from '../utils/types';\nimport { Lock, SignedBalanceProof } from './types';\nexport var ChannelState;\n(function (ChannelState) {\n    ChannelState[\"opening\"] = \"opening\";\n    ChannelState[\"open\"] = \"open\";\n    ChannelState[\"closing\"] = \"closing\";\n    ChannelState[\"closed\"] = \"closed\";\n    ChannelState[\"settleable\"] = \"settleable\";\n    ChannelState[\"settling\"] = \"settling\";\n    ChannelState[\"settled\"] = \"settled\";\n})(ChannelState || (ChannelState = {}));\n/**\n * Contains info of each side of a channel\n */\nexport const ChannelEnd = t.readonly(t.intersection([\n    t.type({\n        deposit: UInt(32),\n    }),\n    t.partial({\n        locks: t.array(Lock),\n        balanceProof: SignedBalanceProof,\n        withdraw: UInt(32),\n    }),\n]));\nexport const Channel = t.intersection([\n    t.readonly(t.type({\n        own: ChannelEnd,\n        partner: ChannelEnd,\n    })),\n    t.union([\n        /* union of types with literals intersection allows narrowing other props presence. e.g.:\n         * if (channel.state === ChannelState.open) {\n         *   id = channel.id; // <- id can't be undefined\n         *   closeBlock = channel.closeBlock; // error: closeBlock only exist on states closed|settling\n         * }\n         */\n        t.readonly(t.type({ state: t.literal(ChannelState.opening) })),\n        t.readonly(t.type({\n            state: t.union([t.literal(ChannelState.open), t.literal(ChannelState.closing)]),\n            id: t.number,\n            settleTimeout: t.number,\n            openBlock: t.number,\n            isFirstParticipant: t.boolean,\n        })),\n        t.readonly(t.type({\n            state: t.union([\n                t.literal(ChannelState.closed),\n                t.literal(ChannelState.settleable),\n                t.literal(ChannelState.settling),\n            ]),\n            id: t.number,\n            settleTimeout: t.number,\n            openBlock: t.number,\n            isFirstParticipant: t.boolean,\n            closeBlock: t.number,\n        })),\n    ]),\n]);\n//# sourceMappingURL=state.js.map","/* istanbul ignore file */\n/* eslint-disable @typescript-eslint/camelcase */\n/**\n * These io-ts codecs validate and decode JSON Raiden messages\n * They include BigNumber strings validation, enum validation (if needed), Address checksum\n * validation, etc, and converting everything to its respective object, where needed.\n */\nimport * as t from 'io-ts';\nimport { memoize } from 'lodash';\n// import { ThrowReporter } from 'io-ts/lib/ThrowReporter';\nimport { Address, Hash, Secret, Signature, UInt } from '../utils/types';\nimport { Lock } from '../channels/types';\n// types\nexport var MessageType;\n(function (MessageType) {\n    MessageType[\"DELIVERED\"] = \"Delivered\";\n    MessageType[\"PROCESSED\"] = \"Processed\";\n    MessageType[\"SECRET_REQUEST\"] = \"SecretRequest\";\n    MessageType[\"SECRET_REVEAL\"] = \"RevealSecret\";\n    MessageType[\"LOCKED_TRANSFER\"] = \"LockedTransfer\";\n    MessageType[\"REFUND_TRANSFER\"] = \"RefundTransfer\";\n    MessageType[\"UNLOCK\"] = \"Unlock\";\n    MessageType[\"LOCK_EXPIRED\"] = \"LockExpired\";\n    MessageType[\"TO_DEVICE\"] = \"ToDevice\";\n    MessageType[\"WITHDRAW_REQUEST\"] = \"WithdrawRequest\";\n    MessageType[\"WITHDRAW_CONFIRMATION\"] = \"WithdrawConfirmation\";\n    MessageType[\"WITHDRAW_EXPIRED\"] = \"WithdrawExpired\";\n    MessageType[\"PFS_CAPACITY_UPDATE\"] = \"PFSCapacityUpdate\";\n})(MessageType || (MessageType = {}));\n// Mixin of a message that contains an identifier and should be ack'ed with a respective Delivered\nconst RetrieableMessage = t.readonly(t.type({ message_identifier: UInt(8) }));\n// Acknowledges to the sender that a RetrieableMessage was received\nexport const Delivered = t.readonly(t.type({\n    type: t.literal(MessageType.DELIVERED),\n    delivered_message_identifier: UInt(8),\n}));\n// Confirms some message that required state validation was successfuly processed\nexport const Processed = t.readonly(t.intersection([\n    t.type({\n        type: t.literal(MessageType.PROCESSED),\n    }),\n    RetrieableMessage,\n]));\n// Requests the initiator to reveal the secret for a LockedTransfer targeted to us\nexport const SecretRequest = t.readonly(t.intersection([\n    t.type({\n        type: t.literal(MessageType.SECRET_REQUEST),\n        payment_identifier: UInt(8),\n        secrethash: Hash,\n        amount: UInt(32),\n        expiration: UInt(32),\n    }),\n    RetrieableMessage,\n]));\n// Reveal to the target or the previous hop a secret we just learned off-chain\nexport const SecretReveal = t.readonly(t.intersection([\n    t.type({\n        type: t.literal(MessageType.SECRET_REVEAL),\n        secret: Secret,\n    }),\n    RetrieableMessage,\n]));\n// Mixin for messages containing a balance proof\nexport const EnvelopeMessage = t.readonly(t.intersection([\n    t.type({\n        chain_id: UInt(32),\n        token_network_address: Address,\n        channel_identifier: UInt(32),\n        nonce: UInt(8),\n        transferred_amount: UInt(32),\n        locked_amount: UInt(32),\n        locksroot: Hash,\n    }),\n    RetrieableMessage,\n]));\nexport const RouteMetadata = t.readonly(t.type({\n    route: t.readonlyArray(Address),\n}));\nexport const Metadata = t.readonly(t.type({\n    routes: t.readonlyArray(RouteMetadata),\n}));\n// base for locked and refund transfer, they differentiate only on the type tag\nconst LockedTransferBase = t.readonly(t.intersection([\n    t.type({\n        payment_identifier: UInt(8),\n        token: Address,\n        recipient: Address,\n        lock: Lock,\n        target: Address,\n        initiator: Address,\n        fee: UInt(32),\n        metadata: Metadata,\n    }),\n    EnvelopeMessage,\n]));\n// a mediated transfer containing a locked amount\nexport const LockedTransfer = t.readonly(t.intersection([\n    t.type({\n        type: t.literal(MessageType.LOCKED_TRANSFER),\n    }),\n    LockedTransferBase,\n]));\n// if a mediated transfer didn't succeed, mediator can refund the amount with the same secrethash\n// so the previous hop can retry it with another neighbor\nexport const RefundTransfer = t.readonly(t.intersection([\n    t.type({\n        type: t.literal(MessageType.REFUND_TRANSFER),\n    }),\n    LockedTransferBase,\n]));\n// when the secret is revealed, unlock sends a new balance proof without the lock and increasing\n// the total transfered to finish the offchain transfer\nexport const Unlock = t.readonly(t.intersection([\n    t.type({\n        type: t.literal(MessageType.UNLOCK),\n        payment_identifier: UInt(8),\n        secret: Secret,\n    }),\n    EnvelopeMessage,\n]));\n// after mediated transfer fails and the lock expire, clean it from the locks tree\nexport const LockExpired = t.readonly(t.intersection([\n    t.type({\n        type: t.literal(MessageType.LOCK_EXPIRED),\n        recipient: Address,\n        secrethash: Hash,\n    }),\n    EnvelopeMessage,\n]));\nexport const ToDevice = t.readonly(t.type({\n    type: t.literal(MessageType.TO_DEVICE),\n    message_identifier: UInt(8),\n}));\nexport const WithdrawBase = t.readonly(t.type({\n    chain_id: UInt(32),\n    token_network_address: Address,\n    channel_identifier: UInt(32),\n    participant: Address,\n    total_withdraw: UInt(32),\n    nonce: UInt(8),\n    expiration: UInt(32),\n}));\nexport const WithdrawRequest = t.readonly(t.intersection([\n    t.type({\n        type: t.literal(MessageType.WITHDRAW_REQUEST),\n    }),\n    WithdrawBase,\n    RetrieableMessage,\n]));\nexport const WithdrawConfirmation = t.readonly(t.intersection([\n    t.type({\n        type: t.literal(MessageType.WITHDRAW_CONFIRMATION),\n    }),\n    WithdrawBase,\n    RetrieableMessage,\n]));\nexport const WithdrawExpired = t.readonly(t.intersection([\n    t.type({\n        type: t.literal(MessageType.WITHDRAW_EXPIRED),\n    }),\n    WithdrawBase,\n    RetrieableMessage,\n]));\nexport const PFSCapacityUpdate = t.readonly(t.type({\n    type: t.literal(MessageType.PFS_CAPACITY_UPDATE),\n    canonical_identifier: t.readonly(t.type({\n        chain_identifier: UInt(32),\n        token_network_address: Address,\n        channel_identifier: UInt(32),\n    })),\n    updating_participant: Address,\n    other_participant: Address,\n    updating_nonce: UInt(8),\n    other_nonce: UInt(8),\n    updating_capacity: UInt(32),\n    other_capacity: UInt(32),\n    reveal_timeout: t.number,\n}));\nexport const Message = t.union([\n    Delivered,\n    Processed,\n    SecretRequest,\n    SecretReveal,\n    LockedTransfer,\n    RefundTransfer,\n    Unlock,\n    LockExpired,\n    ToDevice,\n    WithdrawRequest,\n    WithdrawConfirmation,\n    WithdrawExpired,\n    PFSCapacityUpdate,\n]);\n// generic type codec for messages that must be signed\n// use it like: Codec = Signed(Message)\n// The t.TypeOf<typeof codec> will be Signed<Message>, defined later\nexport const Signed = memoize((codec) => t.intersection([codec, t.readonly(t.type({ signature: Signature }))]));\n//# sourceMappingURL=types.js.map","import * as t from 'io-ts';\nexport const RaidenMatrixSetup = t.readonly(t.type({\n    userId: t.string,\n    accessToken: t.string,\n    deviceId: t.string,\n    displayName: t.string,\n}));\n//# sourceMappingURL=state.js.map","import * as t from 'io-ts';\nimport { Signed, LockedTransfer, Processed, SecretReveal, Unlock, LockExpired, RefundTransfer, } from '../messages/types';\nimport { Timed, Hash, Int } from '../utils/types';\n/**\n * This struct holds the relevant messages exchanged in a transfer\n * The transfer state is defined by the exchanged messages\n */\nexport const SentTransfer = t.readonly(t.intersection([\n    t.type({\n        /** -> outgoing locked transfer */\n        transfer: Timed(Signed(LockedTransfer)),\n        fee: Int(32),\n    }),\n    t.partial({\n        /** <- incoming processed for locked transfer */\n        transferProcessed: Timed(Signed(Processed)),\n        /**\n         * <- incoming refund transfer (if so)\n         * If this is set, transfer failed and partner tried refunding the transfer to us. We don't\n         * handle receiving transfers, but just store it here to mark this transfer as failed with a\n         * refund, until the lock expires normally\n         */\n        refund: Timed(Signed(RefundTransfer)),\n        /**\n         * !! channel was closed !!\n         * In the case a channel is closed (possibly middle transfer), this will be the txHash of the\n         * CloseChannel transaction. No further actions are possible after it's set.\n         */\n        channelClosed: Timed(Hash),\n        /**\n         * -> outgoing secret reveal to target\n         * If this is set, it means the secret was revealed (so transfer succeeded, even if it didn't\n         * complete yet)\n         */\n        secretReveal: Timed(Signed(SecretReveal)),\n        /**\n         * -> outgoing unlock to recipient\n         * If this is set, it means the Unlock was sent (even if partner didn't acknowledge it yet)\n         */\n        unlock: Timed(Signed(Unlock)),\n        /**\n         * -> outgoing lock expired (if so)\n         * If this is set, transfer failed, and we expired the lock (retrieving the locked amount).\n         * Transfer failed may not have completed yet, e.g. waiting for LockExpired's Processed reply\n         */\n        lockExpired: Timed(Signed(LockExpired)),\n        /**\n         * <- incoming processed for Unlock message\n         * If this is set, the protocol completed by the transfer succeeding and partner\n         * acknowledging validity of our off-chain unlock\n         */\n        unlockProcessed: Timed(Signed(Processed)),\n        /**\n         * <- incoming processed for LockExpired message\n         * If this is set, the protocol completed by the transfer failing and partner acknowledging\n         * this transfer can't be claimed anymore\n         */\n        lockExpiredProcessed: Timed(Signed(Processed)),\n    }),\n]));\n/**\n * Mapping of outgoing transfers, indexed by the secrethash\n */\nexport const SentTransfers = t.readonly(t.record(t.string /* secrethash: Hash */, SentTransfer));\nexport var RaidenSentTransferStatus;\n(function (RaidenSentTransferStatus) {\n    RaidenSentTransferStatus[\"pending\"] = \"PENDING\";\n    RaidenSentTransferStatus[\"received\"] = \"RECEIVED\";\n    RaidenSentTransferStatus[\"refunded\"] = \"REFUNDED\";\n    RaidenSentTransferStatus[\"closed\"] = \"CLOSED\";\n    RaidenSentTransferStatus[\"revealed\"] = \"REVEALED\";\n    RaidenSentTransferStatus[\"unlocking\"] = \"UNLOCKING\";\n    RaidenSentTransferStatus[\"expiring\"] = \"EXPIRING\";\n    RaidenSentTransferStatus[\"unlocked\"] = \"UNLOCKED\";\n    RaidenSentTransferStatus[\"expired\"] = \"EXPIRED\";\n})(RaidenSentTransferStatus || (RaidenSentTransferStatus = {}));\n//# sourceMappingURL=state.js.map","import * as t from 'io-ts';\nimport { AddressZero } from 'ethers/constants';\nimport { getNetwork } from 'ethers/utils';\nimport { RaidenConfig, makeDefaultConfig } from './config';\nimport { losslessParse, losslessStringify } from './utils/data';\nimport { Address, Secret, decode } from './utils/types';\nimport { Channel } from './channels/state';\nimport { RaidenMatrixSetup } from './transport/state';\nimport { SentTransfers } from './transfers/state';\n// types\nexport const RaidenState = t.readonly(t.type({\n    address: Address,\n    chainId: t.number,\n    registry: Address,\n    blockNumber: t.number,\n    config: RaidenConfig,\n    channels: t.readonly(t.record(t.string /* tokenNetwork: Address */, t.readonly(t.record(t.string /* partner: Address */, Channel)))),\n    tokens: t.readonly(t.record(t.string /* token: Address */, Address)),\n    transport: t.readonly(t.partial({\n        matrix: t.readonly(t.intersection([\n            t.type({\n                server: t.string,\n            }),\n            t.partial({\n                setup: RaidenMatrixSetup,\n                rooms: t.readonly(t.record(t.string /* partner: Address */, t.array(t.string))),\n            }),\n        ])),\n    })),\n    secrets: t.readonly(t.record(t.string /* secrethash: Hash */, t.readonly(t.intersection([t.type({ secret: Secret }), t.partial({ registerBlock: t.number })])))),\n    sent: SentTransfers,\n}));\n// helpers, utils & constants\n/**\n * Encode RaidenState to a JSON string\n * For Raiden client compliance, this JSON encodes BigNumbers as 'number' (using lossless-json lib)\n * which is valid json though not very common as common JS implementations lose precision when\n * decoding through JSON.parse. This is solved in SDK by both encoding and decoding BigNumbers\n * using lossless-json, without going through the intermediary JS-number form.\n *\n * @param state - RaidenState object\n * @returns JSON encoded string\n */\nexport function encodeRaidenState(state) {\n    return losslessStringify(RaidenState.encode(state), undefined, 2);\n}\n/**\n * Try to decode any data as a RaidenState.\n * If handled a string, will parse it with lossless-json, to preserve BigNumbers encoded as JSON\n * 'number'.\n *\n * @param data - string | any which may be decoded as RaidenState\n * @returns RaidenState parsed and validated\n */\nexport function decodeRaidenState(data) {\n    if (typeof data === 'string')\n        data = losslessParse(data);\n    return decode(RaidenState, data);\n}\n/**\n * Create an initial RaidenState from common parameters (including default config)\n *\n * @param obj - Object containing common parameters for state\n * @param obj.network - ether's Network object for the current blockchain\n * @param obj.address - current account's address\n * @param overwrites - A partial object to overwrite top-level properties of the returned config\n * @returns A full config object\n */\nexport function makeInitialState({ network, address, contractsInfo, }, overwrites = {}) {\n    return {\n        address,\n        chainId: network.chainId,\n        registry: contractsInfo.TokenNetworkRegistry.address,\n        blockNumber: contractsInfo.TokenNetworkRegistry.block_number || 0,\n        config: makeDefaultConfig({ network }, overwrites.config),\n        channels: {},\n        tokens: {},\n        transport: {},\n        secrets: {},\n        sent: {},\n    };\n}\n/**\n * state constant used as default state reducer parameter only.\n * To build an actual initial state at runtime, use [[makeInitialState]] instead.\n */\nexport const initialState = makeInitialState({\n    network: getNetwork('unspecified'),\n    address: AddressZero,\n    contractsInfo: {\n        // eslint-disable-next-line @typescript-eslint/camelcase\n        TokenNetworkRegistry: { address: AddressZero, block_number: 0 },\n        // eslint-disable-next-line @typescript-eslint/camelcase\n        ServiceRegistry: { address: AddressZero, block_number: 0 },\n    },\n});\n//# sourceMappingURL=state.js.map","import { padZeros } from 'ethers/utils';\nexport const SignatureZero = padZeros([], 65);\nexport var ShutdownReason;\n(function (ShutdownReason) {\n    ShutdownReason[\"STOP\"] = \"raidenStopped\";\n    ShutdownReason[\"ACCOUNT_CHANGED\"] = \"providerAccountChanged\";\n    ShutdownReason[\"NETWORK_CHANGED\"] = \"providerNetworkChanged\";\n})(ShutdownReason || (ShutdownReason = {}));\n//# sourceMappingURL=constants.js.map","/* Generated by ts-generator ver. 0.0.8 */\n/* tslint:disable */\nimport { Contract } from \"ethers\";\nexport class TokenNetworkRegistryFactory {\n    static connect(address, signerOrProvider) {\n        return new Contract(address, _abi, signerOrProvider);\n    }\n}\nconst _abi = [\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        name: \"token_to_token_networks\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"settlement_timeout_max\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"deprecation_executor\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"chain_id\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"contract_address\",\n                type: \"address\"\n            }\n        ],\n        name: \"contractExists\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"max_token_networks\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"token_network_created\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"settlement_timeout_min\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"_token_address\",\n                type: \"address\"\n            },\n            {\n                name: \"_channel_participant_deposit_limit\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_token_network_deposit_limit\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"createERC20TokenNetwork\",\n        outputs: [\n            {\n                name: \"token_network_address\",\n                type: \"address\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"secret_registry_address\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        inputs: [\n            {\n                name: \"_secret_registry_address\",\n                type: \"address\"\n            },\n            {\n                name: \"_chain_id\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_settlement_timeout_min\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_settlement_timeout_max\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_max_token_networks\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"constructor\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"token_address\",\n                type: \"address\"\n            },\n            {\n                indexed: true,\n                name: \"token_network_address\",\n                type: \"address\"\n            }\n        ],\n        name: \"TokenNetworkCreated\",\n        type: \"event\"\n    }\n];\n//# sourceMappingURL=TokenNetworkRegistryFactory.js.map","/* Generated by ts-generator ver. 0.0.8 */\n/* tslint:disable */\nimport { Contract } from \"ethers\";\nexport class TokenNetworkFactory {\n    static connect(address, signerOrProvider) {\n        return new Contract(address, _abi, signerOrProvider);\n    }\n}\nconst _abi = [\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                name: \"receiver\",\n                type: \"address\"\n            },\n            {\n                name: \"sender\",\n                type: \"address\"\n            },\n            {\n                name: \"locks\",\n                type: \"bytes\"\n            }\n        ],\n        name: \"unlock\",\n        outputs: [],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"participant1\",\n                type: \"address\"\n            },\n            {\n                name: \"participant2\",\n                type: \"address\"\n            },\n            {\n                name: \"settle_timeout\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"openChannel\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [],\n        name: \"deprecate\",\n        outputs: [],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"settlement_timeout_max\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"deprecation_executor\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"secret_registry\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"chain_id\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"token_network_deposit_limit\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"\",\n                type: \"bytes32\"\n            }\n        ],\n        name: \"participants_hash_to_channel_identifier\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"channel_participant_deposit_limit\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                name: \"participant\",\n                type: \"address\"\n            },\n            {\n                name: \"total_deposit\",\n                type: \"uint256\"\n            },\n            {\n                name: \"partner\",\n                type: \"address\"\n            }\n        ],\n        name: \"setTotalDeposit\",\n        outputs: [],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"channel_counter\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"MAX_SAFE_UINT256\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"contract_address\",\n                type: \"address\"\n            }\n        ],\n        name: \"contractExists\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"participant\",\n                type: \"address\"\n            },\n            {\n                name: \"partner\",\n                type: \"address\"\n            }\n        ],\n        name: \"getParticipantsHash\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"bytes32\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"pure\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                name: \"non_closing_participant\",\n                type: \"address\"\n            },\n            {\n                name: \"closing_participant\",\n                type: \"address\"\n            },\n            {\n                name: \"balance_hash\",\n                type: \"bytes32\"\n            },\n            {\n                name: \"nonce\",\n                type: \"uint256\"\n            },\n            {\n                name: \"additional_hash\",\n                type: \"bytes32\"\n            },\n            {\n                name: \"non_closing_signature\",\n                type: \"bytes\"\n            },\n            {\n                name: \"closing_signature\",\n                type: \"bytes\"\n            }\n        ],\n        name: \"closeChannel\",\n        outputs: [],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                name: \"participant1\",\n                type: \"address\"\n            },\n            {\n                name: \"participant2\",\n                type: \"address\"\n            }\n        ],\n        name: \"getChannelInfo\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            },\n            {\n                name: \"\",\n                type: \"uint8\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"signature_prefix\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"string\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"participant\",\n                type: \"address\"\n            },\n            {\n                name: \"partner\",\n                type: \"address\"\n            }\n        ],\n        name: \"getChannelIdentifier\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                name: \"participant1\",\n                type: \"address\"\n            },\n            {\n                name: \"participant1_transferred_amount\",\n                type: \"uint256\"\n            },\n            {\n                name: \"participant1_locked_amount\",\n                type: \"uint256\"\n            },\n            {\n                name: \"participant1_locksroot\",\n                type: \"bytes32\"\n            },\n            {\n                name: \"participant2\",\n                type: \"address\"\n            },\n            {\n                name: \"participant2_transferred_amount\",\n                type: \"uint256\"\n            },\n            {\n                name: \"participant2_locked_amount\",\n                type: \"uint256\"\n            },\n            {\n                name: \"participant2_locksroot\",\n                type: \"bytes32\"\n            }\n        ],\n        name: \"settleChannel\",\n        outputs: [],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                name: \"participant\",\n                type: \"address\"\n            },\n            {\n                name: \"total_withdraw\",\n                type: \"uint256\"\n            },\n            {\n                name: \"expiration_block\",\n                type: \"uint256\"\n            },\n            {\n                name: \"participant_signature\",\n                type: \"bytes\"\n            },\n            {\n                name: \"partner_signature\",\n                type: \"bytes\"\n            }\n        ],\n        name: \"setTotalWithdraw\",\n        outputs: [],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"safety_deprecation_switch\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"settlement_timeout_min\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"channels\",\n        outputs: [\n            {\n                name: \"settle_block_number\",\n                type: \"uint256\"\n            },\n            {\n                name: \"state\",\n                type: \"uint8\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                name: \"participant\",\n                type: \"address\"\n            },\n            {\n                name: \"partner\",\n                type: \"address\"\n            }\n        ],\n        name: \"getChannelParticipantInfo\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            },\n            {\n                name: \"\",\n                type: \"uint256\"\n            },\n            {\n                name: \"\",\n                type: \"bool\"\n            },\n            {\n                name: \"\",\n                type: \"bytes32\"\n            },\n            {\n                name: \"\",\n                type: \"uint256\"\n            },\n            {\n                name: \"\",\n                type: \"bytes32\"\n            },\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                name: \"closing_participant\",\n                type: \"address\"\n            },\n            {\n                name: \"non_closing_participant\",\n                type: \"address\"\n            },\n            {\n                name: \"balance_hash\",\n                type: \"bytes32\"\n            },\n            {\n                name: \"nonce\",\n                type: \"uint256\"\n            },\n            {\n                name: \"additional_hash\",\n                type: \"bytes32\"\n            },\n            {\n                name: \"closing_signature\",\n                type: \"bytes\"\n            },\n            {\n                name: \"non_closing_signature\",\n                type: \"bytes\"\n            }\n        ],\n        name: \"updateNonClosingBalanceProof\",\n        outputs: [],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"token\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                name: \"sender\",\n                type: \"address\"\n            },\n            {\n                name: \"receiver\",\n                type: \"address\"\n            }\n        ],\n        name: \"getUnlockIdentifier\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"bytes32\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"pure\",\n        type: \"function\"\n    },\n    {\n        inputs: [\n            {\n                name: \"_token_address\",\n                type: \"address\"\n            },\n            {\n                name: \"_secret_registry\",\n                type: \"address\"\n            },\n            {\n                name: \"_chain_id\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_settlement_timeout_min\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_settlement_timeout_max\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_deprecation_executor\",\n                type: \"address\"\n            },\n            {\n                name: \"_channel_participant_deposit_limit\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_token_network_deposit_limit\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"constructor\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                indexed: true,\n                name: \"participant1\",\n                type: \"address\"\n            },\n            {\n                indexed: true,\n                name: \"participant2\",\n                type: \"address\"\n            },\n            {\n                indexed: false,\n                name: \"settle_timeout\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"ChannelOpened\",\n        type: \"event\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                indexed: true,\n                name: \"participant\",\n                type: \"address\"\n            },\n            {\n                indexed: false,\n                name: \"total_deposit\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"ChannelNewDeposit\",\n        type: \"event\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: false,\n                name: \"new_value\",\n                type: \"bool\"\n            }\n        ],\n        name: \"DeprecationSwitch\",\n        type: \"event\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                indexed: true,\n                name: \"participant\",\n                type: \"address\"\n            },\n            {\n                indexed: false,\n                name: \"total_withdraw\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"ChannelWithdraw\",\n        type: \"event\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                indexed: true,\n                name: \"closing_participant\",\n                type: \"address\"\n            },\n            {\n                indexed: true,\n                name: \"nonce\",\n                type: \"uint256\"\n            },\n            {\n                indexed: false,\n                name: \"balance_hash\",\n                type: \"bytes32\"\n            }\n        ],\n        name: \"ChannelClosed\",\n        type: \"event\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                indexed: true,\n                name: \"receiver\",\n                type: \"address\"\n            },\n            {\n                indexed: true,\n                name: \"sender\",\n                type: \"address\"\n            },\n            {\n                indexed: false,\n                name: \"locksroot\",\n                type: \"bytes32\"\n            },\n            {\n                indexed: false,\n                name: \"unlocked_amount\",\n                type: \"uint256\"\n            },\n            {\n                indexed: false,\n                name: \"returned_tokens\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"ChannelUnlocked\",\n        type: \"event\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                indexed: true,\n                name: \"closing_participant\",\n                type: \"address\"\n            },\n            {\n                indexed: true,\n                name: \"nonce\",\n                type: \"uint256\"\n            },\n            {\n                indexed: false,\n                name: \"balance_hash\",\n                type: \"bytes32\"\n            }\n        ],\n        name: \"NonClosingBalanceProofUpdated\",\n        type: \"event\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"channel_identifier\",\n                type: \"uint256\"\n            },\n            {\n                indexed: false,\n                name: \"participant1_amount\",\n                type: \"uint256\"\n            },\n            {\n                indexed: false,\n                name: \"participant1_locksroot\",\n                type: \"bytes32\"\n            },\n            {\n                indexed: false,\n                name: \"participant2_amount\",\n                type: \"uint256\"\n            },\n            {\n                indexed: false,\n                name: \"participant2_locksroot\",\n                type: \"bytes32\"\n            }\n        ],\n        name: \"ChannelSettled\",\n        type: \"event\"\n    }\n];\n//# sourceMappingURL=TokenNetworkFactory.js.map","/* Generated by ts-generator ver. 0.0.8 */\n/* tslint:disable */\nimport { Contract } from \"ethers\";\nexport class HumanStandardTokenFactory {\n    static connect(address, signerOrProvider) {\n        return new Contract(address, _abi, signerOrProvider);\n    }\n}\nconst _abi = [\n    {\n        constant: true,\n        inputs: [],\n        name: \"name\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"string\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"_spender\",\n                type: \"address\"\n            },\n            {\n                name: \"_value\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"approve\",\n        outputs: [\n            {\n                name: \"success\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"totalSupply\",\n        outputs: [\n            {\n                name: \"supply\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"_from\",\n                type: \"address\"\n            },\n            {\n                name: \"_to\",\n                type: \"address\"\n            },\n            {\n                name: \"_value\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"transferFrom\",\n        outputs: [\n            {\n                name: \"success\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        name: \"balances\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"decimals\",\n        outputs: [\n            {\n                name: \"decimals\",\n                type: \"uint8\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"_decimals\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint8\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"version\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"string\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"_owner\",\n                type: \"address\"\n            }\n        ],\n        name: \"balanceOf\",\n        outputs: [\n            {\n                name: \"balance\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"symbol\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"string\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"_to\",\n                type: \"address\"\n            },\n            {\n                name: \"_value\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"transfer\",\n        outputs: [\n            {\n                name: \"success\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"_spender\",\n                type: \"address\"\n            },\n            {\n                name: \"_value\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_extraData\",\n                type: \"bytes\"\n            }\n        ],\n        name: \"approveAndCall\",\n        outputs: [\n            {\n                name: \"success\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"_owner\",\n                type: \"address\"\n            },\n            {\n                name: \"_spender\",\n                type: \"address\"\n            }\n        ],\n        name: \"allowance\",\n        outputs: [\n            {\n                name: \"remaining\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        inputs: [\n            {\n                name: \"_initialAmount\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_decimalUnits\",\n                type: \"uint8\"\n            },\n            {\n                name: \"_tokenName\",\n                type: \"string\"\n            },\n            {\n                name: \"_tokenSymbol\",\n                type: \"string\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"constructor\"\n    },\n    {\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"fallback\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"_from\",\n                type: \"address\"\n            },\n            {\n                indexed: true,\n                name: \"_to\",\n                type: \"address\"\n            },\n            {\n                indexed: false,\n                name: \"_value\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"Transfer\",\n        type: \"event\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"_owner\",\n                type: \"address\"\n            },\n            {\n                indexed: true,\n                name: \"_spender\",\n                type: \"address\"\n            },\n            {\n                indexed: false,\n                name: \"_value\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"Approval\",\n        type: \"event\"\n    }\n];\n//# sourceMappingURL=HumanStandardTokenFactory.js.map","/* Generated by ts-generator ver. 0.0.8 */\n/* tslint:disable */\nimport { Contract } from \"ethers\";\nexport class ServiceRegistryFactory {\n    static connect(address, signerOrProvider) {\n        return new Contract(address, _abi, signerOrProvider);\n    }\n}\nconst _abi = [\n    {\n        constant: true,\n        inputs: [],\n        name: \"price_bump_denominator\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"deprecated\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"set_price\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"_set_price\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_seconds_passed\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"decayedPrice\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"_price_bump_numerator\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_price_bump_denominator\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_decay_constant\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_min_price\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_registration_duration\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"changeParameters\",\n        outputs: [\n            {\n                name: \"_success\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"set_price_at\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"everMadeDepositsLen\",\n        outputs: [\n            {\n                name: \"_len\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"contract_address\",\n                type: \"address\"\n            }\n        ],\n        name: \"contractExists\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"new_url\",\n                type: \"string\"\n            }\n        ],\n        name: \"setURL\",\n        outputs: [\n            {\n                name: \"_success\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"decay_constant\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        name: \"service_valid_till\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"currentPrice\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"registration_duration\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"ever_made_deposits\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [\n            {\n                name: \"_limit_amount\",\n                type: \"uint256\"\n            }\n        ],\n        name: \"deposit\",\n        outputs: [\n            {\n                name: \"_success\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: false,\n        inputs: [],\n        name: \"setDeprecationSwitch\",\n        outputs: [\n            {\n                name: \"_success\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"min_price\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        name: \"urls\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"string\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [\n            {\n                name: \"_address\",\n                type: \"address\"\n            }\n        ],\n        name: \"hasValidRegistration\",\n        outputs: [\n            {\n                name: \"_has_registration\",\n                type: \"bool\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"controller\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"token\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"address\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        constant: true,\n        inputs: [],\n        name: \"price_bump_numerator\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"view\",\n        type: \"function\"\n    },\n    {\n        inputs: [\n            {\n                name: \"_token_for_registration\",\n                type: \"address\"\n            },\n            {\n                name: \"_controller\",\n                type: \"address\"\n            },\n            {\n                name: \"_initial_price\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_price_bump_numerator\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_price_bump_denominator\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_decay_constant\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_min_price\",\n                type: \"uint256\"\n            },\n            {\n                name: \"_registration_duration\",\n                type: \"uint256\"\n            }\n        ],\n        payable: false,\n        stateMutability: \"nonpayable\",\n        type: \"constructor\"\n    },\n    {\n        anonymous: false,\n        inputs: [\n            {\n                indexed: true,\n                name: \"service\",\n                type: \"address\"\n            },\n            {\n                indexed: false,\n                name: \"valid_till\",\n                type: \"uint256\"\n            },\n            {\n                indexed: false,\n                name: \"deposit_amount\",\n                type: \"uint256\"\n            },\n            {\n                indexed: false,\n                name: \"deposit_contract\",\n                type: \"address\"\n            }\n        ],\n        name: \"RegisteredService\",\n        type: \"event\"\n    }\n];\n//# sourceMappingURL=ServiceRegistryFactory.js.map","import { Zero } from 'ethers/constants';\nimport { ChannelState } from './state';\n/**\n * Calculates and returns partial and total amounts of given channel state\n *\n * @param channel - A Channel state to calculate amounts from\n * @returns An object holding own&partner's deposit, withdraw, transferred, locked, balance and\n *          capacity.\n */\nexport function channelAmounts(channel) {\n    const Zero32 = Zero;\n    if (channel.state !== ChannelState.open)\n        return {\n            ownDeposit: Zero32,\n            ownWithdraw: Zero32,\n            ownTransferred: Zero32,\n            ownLocked: Zero32,\n            ownBalance: Zero32,\n            ownCapacity: Zero32,\n            partnerDeposit: Zero32,\n            partnerWithdraw: Zero32,\n            partnerTransferred: Zero32,\n            partnerLocked: Zero32,\n            partnerBalance: Zero32,\n            partnerCapacity: Zero32,\n        };\n    const ownWithdraw = channel.own.withdraw || Zero32, partnerWithdraw = channel.partner.withdraw || Zero32, ownTransferred = channel.own.balanceProof\n        ? channel.own.balanceProof.transferredAmount\n        : Zero32, partnerTransferred = channel.partner.balanceProof\n        ? channel.partner.balanceProof.transferredAmount\n        : Zero32, ownLocked = channel.own.balanceProof ? channel.own.balanceProof.lockedAmount : Zero32, partnerLocked = channel.partner.balanceProof\n        ? channel.partner.balanceProof.lockedAmount\n        : Zero32, ownBalance = partnerTransferred.sub(ownTransferred), partnerBalance = ownTransferred.sub(partnerTransferred), // == -ownBalance\n    ownCapacity = channel.own.deposit\n        .sub(ownWithdraw)\n        .sub(ownLocked)\n        .add(ownBalance), partnerCapacity = channel.partner.deposit\n        .sub(partnerWithdraw)\n        .sub(partnerLocked)\n        .add(partnerBalance);\n    return {\n        ownDeposit: channel.own.deposit,\n        ownWithdraw,\n        ownTransferred,\n        ownLocked,\n        ownBalance,\n        ownCapacity,\n        partnerDeposit: channel.partner.deposit,\n        partnerWithdraw,\n        partnerTransferred,\n        partnerLocked,\n        partnerBalance,\n        partnerCapacity,\n    };\n}\n//# sourceMappingURL=utils.js.map","/**\n * Like redux's combineReducers, but allows passing only a partial reducer mapping\n * redux's combineReducers output state must be exactly the mapping passed as parameter,\n * which doesn't allow to only provide a partial set of reducers and passthrough the other state's\n * keys. This function allows that, also preserving state/object reference when reducers doesn't\n * change state value.\n *\n * @param reducers - A mapping of a subset of state's key to nested reducers functions\n * @param initialState - global initial state, required when initializing first object with partial\n *                      reducers\n * @returns Full reducer for state S and actions A\n */\nexport function partialCombineReducers(reducers, initialState) {\n    return function (state = initialState, action) {\n        for (const key in reducers) {\n            const reducer = reducers[key];\n            if (!reducer)\n                continue; // shouldn't happen, only here for type safety below\n            const subState = state[key] || initialState[key];\n            const newSubState = reducer(subState, action);\n            if (newSubState !== subState) {\n                state = Object.assign({}, state, { [key]: newSubState });\n            }\n        }\n        return state;\n    };\n}\n//# sourceMappingURL=redux.js.map","import { createStandardAction } from 'typesafe-actions';\n/* A new head in the blockchain is detected by provider */\nexport const newBlock = createStandardAction('newBlock')();\n/**\n * A new token network is detected in the TokenNetworkRegistry instance\n * fromBlock is only set on the first time, to fetch and handle past events\n */\nexport const tokenMonitored = createStandardAction('tokenMonitored')();\n/**\n * Channel actions receive ChannelId as 'meta' action property\n * This way, 'meta' can be used equally for request, success and error actions\n */\n/* Request a channel to be opened with meta={ tokenNetwork, partner } and payload.settleTimeout */\nexport const channelOpen = createStandardAction('channelOpen')();\n/* A channel is detected on-chain. Also works as 'success' for channelOpen action */\nexport const channelOpened = createStandardAction('channelOpened')();\n/* A channelOpen request action (with meta: ChannelId) failed with payload=Error */\nexport const channelOpenFailed = createStandardAction('channelOpenFailed').map((payload, meta) => ({ payload, error: true, meta }));\n/* Channel with meta:ChannelId + payload.id should be monitored */\nexport const channelMonitored = createStandardAction('channelMonitored')();\n/* Request a payload.deposit to be made to channel meta:ChannelId */\nexport const channelDeposit = createStandardAction('channelDeposit')();\n/* A deposit is detected on-chain. Also works as 'success' for channelDeposit action */\nexport const channelDeposited = createStandardAction('channelDeposited')();\n/* A channelDeposit request action (with meta: ChannelId) failed with payload=Error */\nexport const channelDepositFailed = createStandardAction('channelDepositFailed').map((payload, meta) => ({ payload, error: true, meta }));\n/* A withdraw is detected on-chain */\nexport const channelWithdrawn = createStandardAction('channelWithdrawn')();\n/* Request channel meta:ChannelId to be closed */\nexport const channelClose = createStandardAction('channelClose')();\n/* A close channel event is detected on-chain. Also works as 'success' for channelClose action */\nexport const channelClosed = createStandardAction('channelClosed')();\n/* A channelClose request action (with meta: ChannelId) failed with payload=Error */\nexport const channelCloseFailed = createStandardAction('channelCloseFailed').map((payload, meta) => ({ payload, error: true, meta }));\n/* A channel meta:ChannelId becomes settleable, starting from payload.settleableBlock */\nexport const channelSettleable = createStandardAction('channelSettleable')();\n/* Request channel meta:ChannelId to be settled */\nexport const channelSettle = createStandardAction('channelSettle')();\n/* A settle channel event is detected on-chain. Also works as 'success' for channelSettle action */\nexport const channelSettled = createStandardAction('channelSettled')();\n/* A channelSettle request action (with meta: ChannelId) failed with payload=Error */\nexport const channelSettleFailed = createStandardAction('channelSettleFailed').map((payload, meta) => ({ payload, error: true, meta }));\n//# sourceMappingURL=actions.js.map","import { isActionOf } from 'typesafe-actions';\nimport { get, set, unset } from 'lodash/fp';\nimport { Zero } from 'ethers/constants';\nimport { partialCombineReducers } from '../utils/redux';\nimport { initialState } from '../state';\nimport { channelClose, channelClosed, channelDeposited, channelOpen, channelOpened, channelOpenFailed, channelSettle, channelSettleable, channelSettled, newBlock, tokenMonitored, channelWithdrawn, } from './actions';\nimport { ChannelState } from './state';\n// state.blockNumber specific reducer, handles only newBlock action\nfunction blockNumber(state = initialState.blockNumber, action) {\n    if (isActionOf(newBlock, action))\n        return action.payload.blockNumber;\n    else\n        return state;\n}\n// state.tokens specific reducer, handles only tokenMonitored action\nfunction tokens(state = initialState.tokens, action) {\n    if (isActionOf(tokenMonitored, action))\n        return set([action.payload.token], action.payload.tokenNetwork, state);\n    else\n        return state;\n}\n// handles all channel actions and requests\nfunction channels(state = initialState.channels, action) {\n    if (isActionOf(channelOpen, action)) {\n        const path = [action.meta.tokenNetwork, action.meta.partner];\n        if (get(path, state))\n            return state; // there's already a channel with partner\n        const channel = {\n            state: ChannelState.opening,\n            own: { deposit: Zero },\n            partner: { deposit: Zero },\n        };\n        return set(path, channel, state);\n    }\n    else if (isActionOf(channelOpened, action)) {\n        const path = [action.meta.tokenNetwork, action.meta.partner], channel = {\n            state: ChannelState.open,\n            own: { deposit: Zero },\n            partner: { deposit: Zero },\n            id: action.payload.id,\n            settleTimeout: action.payload.settleTimeout,\n            openBlock: action.payload.openBlock,\n            isFirstParticipant: action.payload.isFirstParticipant,\n        };\n        return set(path, channel, state);\n    }\n    else if (isActionOf(channelOpenFailed, action)) {\n        const path = [action.meta.tokenNetwork, action.meta.partner];\n        if (get([...path, 'state'], state) !== ChannelState.opening)\n            return state;\n        return unset(path, state);\n    }\n    else if (isActionOf(channelDeposited, action)) {\n        const path = [action.meta.tokenNetwork, action.meta.partner];\n        let channel = get(path, state);\n        if (!channel || channel.state !== ChannelState.open || channel.id !== action.payload.id)\n            return state;\n        if (action.payload.participant === action.meta.partner)\n            channel = Object.assign({}, channel, { partner: Object.assign({}, channel.partner, { deposit: action.payload.totalDeposit }) });\n        else\n            channel = Object.assign({}, channel, { own: Object.assign({}, channel.own, { deposit: action.payload.totalDeposit }) });\n        return set(path, channel, state);\n    }\n    else if (isActionOf(channelWithdrawn, action)) {\n        const path = [action.meta.tokenNetwork, action.meta.partner];\n        let channel = get(path, state);\n        if (!channel || channel.state !== ChannelState.open || channel.id !== action.payload.id)\n            return state;\n        if (action.payload.participant === action.meta.partner)\n            channel = Object.assign({}, channel, { partner: Object.assign({}, channel.partner, { withdraw: action.payload.totalWithdraw }) });\n        else\n            channel = Object.assign({}, channel, { own: Object.assign({}, channel.own, { withdraw: action.payload.totalWithdraw }) });\n        return set(path, channel, state);\n    }\n    else if (isActionOf(channelClose, action)) {\n        const path = [action.meta.tokenNetwork, action.meta.partner];\n        let channel = get(path, state);\n        if (!channel || channel.state !== ChannelState.open)\n            return state;\n        channel = Object.assign({}, channel, { state: ChannelState.closing });\n        return set(path, channel, state);\n    }\n    else if (isActionOf(channelClosed, action)) {\n        const path = [action.meta.tokenNetwork, action.meta.partner];\n        let channel = get(path, state);\n        if (!channel ||\n            !(channel.state === ChannelState.open || channel.state === ChannelState.closing) ||\n            channel.id !== action.payload.id)\n            return state;\n        channel = Object.assign({}, channel, { state: ChannelState.closed, closeBlock: action.payload.closeBlock });\n        return set(path, channel, state);\n    }\n    else if (isActionOf(channelSettleable, action)) {\n        const path = [action.meta.tokenNetwork, action.meta.partner];\n        let channel = get(path, state);\n        if (!channel || channel.state !== ChannelState.closed)\n            return state;\n        channel = Object.assign({}, channel, { state: ChannelState.settleable });\n        return set(path, channel, state);\n    }\n    else if (isActionOf(channelSettle, action)) {\n        const path = [action.meta.tokenNetwork, action.meta.partner];\n        let channel = get(path, state);\n        if (!channel || channel.state !== ChannelState.settleable)\n            return state;\n        channel = Object.assign({}, channel, { state: ChannelState.settling });\n        return set(path, channel, state);\n    }\n    else if (isActionOf(channelSettled, action)) {\n        const path = [action.meta.tokenNetwork, action.meta.partner];\n        const channel = get(path, state);\n        if (!channel ||\n            ![ChannelState.closed, ChannelState.settleable, ChannelState.settling].includes(channel.state))\n            return state;\n        return unset(path, state);\n    }\n    else\n        return state;\n}\n/**\n * Nested/combined reducer for channels\n * blockNumber, tokens & channels reducers get its own slice of the state, corresponding to the\n * name of the reducer. channels root reducer instead must be handled the complete state instead,\n * so it compose the output with each key/nested/combined state.\n */\nexport const channelsReducer = partialCombineReducers({ blockNumber, tokens, channels }, initialState);\n//# sourceMappingURL=reducer.js.map","import { createStandardAction } from 'typesafe-actions';\n/* MatrixClient instance is ready and logged in to payload.server with credentials payload.setup */\nexport const matrixSetup = createStandardAction('matrixSetup')();\n/* Request matrix to start monitoring presence updates for meta.address */\nexport const matrixRequestMonitorPresence = createStandardAction('matrixRequestMonitorPresence')();\n/**\n * Monitored user meta.address presence updated.\n * First event for this address also works as 'success' for matrixRequestMonitorPresence\n */\nexport const matrixPresenceUpdate = createStandardAction('matrixPresenceUpdate').map(({ userId, available, ts }, meta) => ({ payload: { userId, available, ts: ts || Date.now() }, meta }));\n/* A matrixRequestMonitorPresence request action (with meta.address) failed with payload=Error */\nexport const matrixRequestMonitorPresenceFailed = createStandardAction('matrixRequestMonitorPresenceFailed').map((payload, meta) => ({ payload, error: true, meta }));\n/* payload.roomId must go front on meta.address's room queue */\nexport const matrixRoom = createStandardAction('matrixRoom')();\n/* payload.roomId must be excluded from meta.address room queue, if present */\nexport const matrixRoomLeave = createStandardAction('matrixRoomLeave')();\n//# sourceMappingURL=actions.js.map","import { isActionOf } from 'typesafe-actions';\nimport { get, getOr, isEmpty, set, unset } from 'lodash/fp';\nimport { partialCombineReducers } from '../utils/redux';\nimport { initialState } from '../state';\nimport { matrixSetup, matrixRoom, matrixRoomLeave } from './actions';\n/**\n * state.transport reducer\n * Handles all transport actions and requests\n *\n * @param state - Current RaidenState['transport'] slice\n * @param action - RaidenAction to handle\n * @returns New RaidenState['transport'] slice\n */\nfunction transport(state = initialState.transport, action) {\n    if (isActionOf(matrixSetup, action)) {\n        return Object.assign({}, state, { matrix: Object.assign({}, state.matrix, action.payload) });\n    }\n    else if (isActionOf(matrixRoom, action)) {\n        const path = ['matrix', 'rooms', action.meta.address];\n        return set(path, [\n            action.payload.roomId,\n            ...getOr([], path, state).filter(room => room !== action.payload.roomId),\n        ], state);\n    }\n    else if (isActionOf(matrixRoomLeave, action)) {\n        const path = ['matrix', 'rooms', action.meta.address];\n        state = set(path, getOr([], path, state).filter(r => r !== action.payload.roomId), state);\n        if (isEmpty(get(path, state)))\n            state = unset(path, state);\n        return state;\n    }\n    else\n        return state;\n}\n/**\n * Nested/combined reducer for transport\n * Currently only handles 'transport' substate\n */\nexport const transportReducer = partialCombineReducers({ transport }, initialState);\n//# sourceMappingURL=reducer.js.map","import { concat, hexlify } from 'ethers/utils/bytes';\nimport { keccak256, randomBytes, bigNumberify, sha256 } from 'ethers/utils';\nimport { encode } from '../utils/data';\nimport { RaidenSentTransferStatus } from './state';\n/**\n * Get the locksroot of a given array of pending locks\n * On Alderaan, it's the keccak256 hash of the concatenation of the ordered locks data\n *\n * @param locks - Lock array to calculate the locksroot from\n * @returns hash of the locks array\n */\nexport function getLocksroot(locks) {\n    const encoded = [];\n    for (const lock of locks)\n        encoded.push(encode(lock.expiration, 32), encode(lock.amount, 32), lock.secrethash);\n    return keccak256(concat(encoded));\n}\n/**\n * Return the secrethash of a given secret\n * On Alderaan, the sha256 hash is used for the secret.\n *\n * @param secret - Secret to get the hash from\n * @returns hash of the secret\n */\nexport function getSecrethash(secret) {\n    return sha256(secret);\n}\n/**\n * Generates a random secret of given length, as an HexString<32>\n *\n * @param length - of the secret to generate\n * @returns HexString<32>\n */\nexport function makeSecret(length = 32) {\n    return hexlify(randomBytes(length));\n}\n/**\n * Generates a random payment identifier, as an UInt<8> (64 bits)\n *\n * @returns UInt<8>\n */\nexport function makePaymentId() {\n    return bigNumberify(randomBytes(8));\n}\n/**\n * Generates a message identifier, as an UInt<8> (64 bits)\n *\n * @returns UInt<8>\n */\nexport function makeMessageId() {\n    return bigNumberify(Date.now());\n}\n/**\n * Convert a state.sent: SentTransfer to a public RaidenSentTransfer object\n *\n * @param sent - RaidenState.sent value\n * @returns Public raiden sent transfer info object\n */\nexport function raidenSentTransfer(sent) {\n    const [status, changedAt] = sent.lockExpiredProcessed\n        ? [RaidenSentTransferStatus.expired, sent.lockExpiredProcessed[0]]\n        : sent.unlockProcessed\n            ? [RaidenSentTransferStatus.unlocked, sent.unlockProcessed[0]]\n            : sent.lockExpired\n                ? [RaidenSentTransferStatus.expiring, sent.lockExpired[0]]\n                : sent.unlock\n                    ? [RaidenSentTransferStatus.unlocking, sent.unlock[0]]\n                    : sent.secretReveal\n                        ? [RaidenSentTransferStatus.revealed, sent.secretReveal[0]]\n                        : sent.channelClosed // channelClosed before revealing\n                            ? [RaidenSentTransferStatus.closed, sent.channelClosed[0]]\n                            : sent.refund\n                                ? [RaidenSentTransferStatus.refunded, sent.refund[0]]\n                                : sent.transferProcessed\n                                    ? [RaidenSentTransferStatus.received, sent.transferProcessed[0]]\n                                    : [RaidenSentTransferStatus.pending, sent.transfer[0]], success = sent.secretReveal || sent.unlock\n        ? true\n        : sent.refund || sent.lockExpired || sent.channelClosed\n            ? false\n            : undefined, completed = !!(sent.unlockProcessed || sent.lockExpiredProcessed || sent.channelClosed);\n    return {\n        secrethash: sent.transfer[1].lock.secrethash,\n        status,\n        initiator: sent.transfer[1].initiator,\n        recipient: sent.transfer[1].recipient,\n        target: sent.transfer[1].target,\n        metadata: sent.transfer[1].metadata,\n        paymentId: sent.transfer[1].payment_identifier,\n        chainId: sent.transfer[1].chain_id.toNumber(),\n        token: sent.transfer[1].token,\n        tokenNetwork: sent.transfer[1].token_network_address,\n        channelId: sent.transfer[1].channel_identifier,\n        value: sent.transfer[1].lock.amount.sub(sent.fee),\n        fee: sent.fee,\n        amount: sent.transfer[1].lock.amount,\n        expirationBlock: sent.transfer[1].lock.expiration.toNumber(),\n        startedAt: new Date(sent.transfer[0]),\n        changedAt: new Date(changedAt),\n        success,\n        completed,\n    };\n}\n//# sourceMappingURL=utils.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n// import * as t from 'io-ts';\nimport { ThrowReporter } from 'io-ts/lib/ThrowReporter';\nimport { isLeft } from 'fp-ts/lib/Either';\nimport { keccak256, RLP, verifyMessage } from 'ethers/utils';\nimport { arrayify, concat, hexlify } from 'ethers/utils/bytes';\nimport { HashZero } from 'ethers/constants';\nimport { Signature } from '../utils/types';\nimport { encode, losslessParse, losslessStringify } from '../utils/data';\nimport { Message, MessageType, Signed } from './types';\nconst CMDIDs = {\n    [MessageType.DELIVERED]: 12,\n    [MessageType.PROCESSED]: 0,\n    [MessageType.SECRET_REQUEST]: 3,\n    [MessageType.SECRET_REVEAL]: 11,\n    [MessageType.LOCKED_TRANSFER]: 7,\n    [MessageType.REFUND_TRANSFER]: 8,\n    [MessageType.UNLOCK]: 4,\n    [MessageType.LOCK_EXPIRED]: 13,\n    [MessageType.TO_DEVICE]: 14,\n    [MessageType.WITHDRAW_REQUEST]: 15,\n    [MessageType.WITHDRAW_CONFIRMATION]: 16,\n    [MessageType.WITHDRAW_EXPIRED]: 17,\n    [MessageType.PFS_CAPACITY_UPDATE]: -1,\n};\n// raiden_contracts.constants.MessageTypeId\nvar MessageTypeId;\n(function (MessageTypeId) {\n    MessageTypeId[MessageTypeId[\"BALANCE_PROOF\"] = 1] = \"BALANCE_PROOF\";\n    MessageTypeId[MessageTypeId[\"WITHDRAW\"] = 3] = \"WITHDRAW\";\n})(MessageTypeId || (MessageTypeId = {}));\n/**\n * Create the hash of Metadata structure.\n *\n * @param metadata - The LockedTransfer metadata\n * @returns Hash of the metadata.\n */\nexport function createMetadataHash(metadata) {\n    const routeHashes = metadata.routes.map(value => keccak256(RLP.encode(value.route)));\n    return keccak256(RLP.encode(routeHashes));\n}\n/**\n * Returns a balance_hash from transferred&locked amounts & locksroot\n *\n * @param transferredAmount - EnvelopeMessage.transferred_amount\n * @param lockedAmount - EnvelopeMessage.locked_amount\n * @param locksroot - Hash of all current locks\n * @returns Hash of the balance\n */\nexport function createBalanceHash(transferredAmount, lockedAmount, locksroot) {\n    return (transferredAmount.isZero() && lockedAmount.isZero() && locksroot === HashZero\n        ? HashZero\n        : keccak256(concat([encode(transferredAmount, 32), encode(lockedAmount, 32), encode(locksroot, 32)])));\n}\n/**\n * Create the messageHash for a given EnvelopeMessage\n *\n * @param message - EnvelopeMessage to pack\n * @returns Hash of the message pack\n */\nexport function createMessageHash(message) {\n    switch (message.type) {\n        case MessageType.LOCKED_TRANSFER:\n        case MessageType.REFUND_TRANSFER:\n            // hash of packed representation of the whole message\n            let packed = concat([\n                encode(CMDIDs[message.type], 1),\n                encode(message.message_identifier, 8),\n                encode(message.payment_identifier, 8),\n                encode(message.lock.expiration, 32),\n                encode(message.token, 20),\n                encode(message.recipient, 20),\n                encode(message.target, 20),\n                encode(message.initiator, 20),\n                encode(message.lock.secrethash, 32),\n                encode(message.lock.amount, 32),\n                encode(message.fee, 32),\n            ]);\n            if (message.type === MessageType.LOCKED_TRANSFER)\n                packed = concat([packed, createMetadataHash(message.metadata)]);\n            return keccak256(packed);\n        case MessageType.UNLOCK:\n            return keccak256(concat([\n                encode(CMDIDs[message.type], 1),\n                encode(message.message_identifier, 8),\n                encode(message.payment_identifier, 8),\n                encode(message.secret, 32),\n            ]));\n        case MessageType.LOCK_EXPIRED:\n            return keccak256(concat([\n                encode(CMDIDs[message.type], 1),\n                encode(message.message_identifier, 8),\n                encode(message.recipient, 20),\n                encode(message.secrethash, 32),\n            ]));\n    }\n}\n/**\n * Pack a message in a hex-string format, **without** signature\n * This packed hex-byte-array can then be used for signing.\n * On Raiden python client, this is the output of `_data_to_sign` method of the messages, as the\n * actual packed encoding was once used for binary transport protocols, but nowadays is used only\n * for generating data to be signed, which is the purpose of our implementation.\n *\n * @param message - Message to be packed\n * @returns HexBytes hex-encoded string data representing message in binary format\n */\nexport function packMessage(message) {\n    switch (message.type) {\n        case MessageType.DELIVERED:\n            return hexlify(concat([\n                encode(CMDIDs[message.type], 1),\n                encode(0, 3),\n                encode(message.delivered_message_identifier, 8),\n            ]));\n        case MessageType.PROCESSED:\n            return hexlify(concat([\n                encode(CMDIDs[message.type], 1),\n                encode(0, 3),\n                encode(message.message_identifier, 8),\n            ]));\n        case MessageType.LOCKED_TRANSFER:\n        case MessageType.REFUND_TRANSFER:\n        case MessageType.UNLOCK:\n        case MessageType.LOCK_EXPIRED: {\n            const messageHash = createMessageHash(message), balanceHash = createBalanceHash(message.transferred_amount, message.locked_amount, message.locksroot);\n            return hexlify(concat([\n                encode(message.token_network_address, 20),\n                encode(message.chain_id, 32),\n                encode(MessageTypeId.BALANCE_PROOF, 32),\n                encode(message.channel_identifier, 32),\n                encode(balanceHash, 32),\n                encode(message.nonce, 32),\n                encode(messageHash, 32),\n            ]));\n        }\n        case MessageType.SECRET_REQUEST:\n            return hexlify(concat([\n                encode(CMDIDs[message.type], 1),\n                encode(0, 3),\n                encode(message.message_identifier, 8),\n                encode(message.payment_identifier, 8),\n                encode(message.secrethash, 32),\n                encode(message.amount, 32),\n                encode(message.expiration, 32),\n            ]));\n        case MessageType.SECRET_REVEAL:\n            return hexlify(concat([\n                encode(CMDIDs[message.type], 1),\n                encode(0, 3),\n                encode(message.message_identifier, 8),\n                encode(message.secret, 32),\n            ]));\n        case MessageType.TO_DEVICE:\n            return hexlify(concat([\n                encode(CMDIDs[message.type], 1),\n                encode(0, 3),\n                encode(message.message_identifier, 8),\n            ]));\n        case MessageType.WITHDRAW_REQUEST:\n        case MessageType.WITHDRAW_CONFIRMATION:\n            return hexlify(concat([\n                encode(message.token_network_address, 20),\n                encode(message.chain_id, 32),\n                encode(MessageTypeId.WITHDRAW, 32),\n                encode(message.channel_identifier, 32),\n                encode(message.participant, 20),\n                encode(message.total_withdraw, 32),\n                encode(message.expiration, 32),\n            ]));\n        case MessageType.WITHDRAW_EXPIRED:\n            return hexlify(concat([\n                encode(CMDIDs[message.type], 1),\n                encode(0, 3),\n                encode(message.nonce, 32),\n                encode(message.message_identifier, 8),\n                encode(message.token_network_address, 20),\n                encode(message.chain_id, 32),\n                encode(MessageTypeId.WITHDRAW, 32),\n                encode(message.channel_identifier, 32),\n                encode(message.participant, 20),\n                encode(message.total_withdraw, 32),\n                encode(message.expiration, 32),\n            ]));\n        case MessageType.PFS_CAPACITY_UPDATE:\n            return hexlify(concat([\n                encode(message.canonical_identifier.chain_identifier, 32),\n                encode(message.canonical_identifier.token_network_address, 20),\n                encode(message.canonical_identifier.channel_identifier, 32),\n                encode(message.updating_participant, 20),\n                encode(message.other_participant, 20),\n                encode(message.updating_nonce, 8),\n                encode(message.other_nonce, 8),\n                encode(message.updating_capacity, 32),\n                encode(message.other_capacity, 32),\n                encode(message.reveal_timeout, 32),\n            ]));\n    }\n}\n/**\n * Typeguard to check if a message contains a valid signature\n *\n * @param message - May or may not be a signed message\n * @returns Boolean if message is signed\n */\nexport function isSigned(message) {\n    return Signature.is(message.signature);\n}\n/**\n * Requires a signed message and returns its signer address\n *\n * @param message - Signed message to retrieve signer address\n * @returns Address which signed message\n */\nexport function getMessageSigner(message) {\n    return verifyMessage(arrayify(packMessage(message)), message.signature);\n}\n/**\n * Get the SignedBalanceProof associated with an EnvelopeMessage\n *\n * @param message - Signed EnvelopeMessage\n * @returns SignedBalanceProof object for message\n */\nexport function getBalanceProofFromEnvelopeMessage(message) {\n    return {\n        chainId: message.chain_id,\n        tokenNetworkAddress: message.token_network_address,\n        channelId: message.channel_identifier,\n        nonce: message.nonce,\n        transferredAmount: message.transferred_amount,\n        lockedAmount: message.locked_amount,\n        locksroot: message.locksroot,\n        messageHash: createMessageHash(message),\n        signature: message.signature,\n        sender: getMessageSigner(message),\n    };\n}\n/**\n * Encode a Message as a JSON string\n * Uses lossless-json to encode BigNumbers as JSON 'number' type, as Raiden\n *\n * @param message - Message object to be serialized\n * @returns JSON string\n */\nexport function encodeJsonMessage(message) {\n    return losslessStringify(Signed(Message).encode(message));\n}\n/**\n * Try to decode text as a Message, using lossless-json to decode BigNumbers\n * Throws if can't decode, or message is invalid regarding any of the encoded constraints\n *\n * @param text - JSON string to try to decode\n * @returns Message object\n */\nexport function decodeJsonMessage(text) {\n    const parsed = losslessParse(text), decoded = Signed(Message).decode(parsed);\n    if (isLeft(decoded))\n        throw ThrowReporter.report(decoded); // throws if decode failed\n    return decoded.right;\n}\n/**\n * Pack message and request signer to sign it, and returns signed message\n *\n * @param signer - Signer instance\n * @param message - Unsigned message to pack and sign\n * @returns Promise to signed message\n */\nexport function signMessage(signer, message) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (isSigned(message))\n            return message;\n        const signature = (yield signer.signMessage(arrayify(packMessage(message))));\n        return Object.assign({}, message, { signature });\n    });\n}\n//# sourceMappingURL=utils.js.map","import { createStandardAction } from 'typesafe-actions';\n/** A request to initiate a transfer */\nexport const transfer = createStandardAction('transfer')();\n/** A LockedTransfer was signed and should be sent to partner */\nexport const transferSigned = createStandardAction('transferSigned')();\n/** Partner acknowledge they received and processed our LockedTransfer */\nexport const transferProcessed = createStandardAction('transferProcessed')();\n/** Register a secret */\nexport const transferSecret = createStandardAction('transferSecret')();\n/** A valid SecretRequest received from target */\nexport const transferSecretRequest = createStandardAction('transferSecretRequest')();\n/** A SecretReveal sent to target */\nexport const transferSecretReveal = createStandardAction('transferSecretReveal')();\n/** Unlock request after partner also revealed they know the secret */\nexport const transferUnlock = createStandardAction('transferUnlock')();\n/** Signed Unlock to be sent to partner */\nexport const transferUnlocked = createStandardAction('transferUnlocked')();\n/** Partner acknowledge they received and processed our Unlock */\nexport const transferUnlockProcessed = createStandardAction('transferUnlockProcessed')();\n/** A request to expire a given transfer */\nexport const transferExpire = createStandardAction('transferExpire')();\n/** A transfer LockExpired message/BalanceProof successfuly generated */\nexport const transferExpired = createStandardAction('transferExpired')();\n/**\n * A transfer expiration request failed for any reason\n * e.g. user rejected sign promopt. It should eventually get prompted again, on a future newBlock\n * action which sees this transfer should be expired but sent.lockExpired didn't get set yet.\n */\nexport const transferExpireFailed = createStandardAction('transferExpireFailed').map((payload, meta) => ({ payload, error: true, meta }));\n/** Partner acknowledge they received and processed our LockExpired */\nexport const transferExpireProcessed = createStandardAction('transferExpireProcessed')();\n/** A transfer was refunded */\nexport const transferRefunded = createStandardAction('transferRefunded')();\n/**\n * A transfer completed successfuly\n *\n * A transfer is considered as having succeeded from the time the secret is revealed to the target,\n * as from there, target and mediators can claim the payment down to us. But the full off-chain\n * happy case completes only after partner/neighbor acknowledges receiving the Unlock.\n * So, we usually only emits this action in the end of the happy case, and it'll then contain the\n * unlock's balanceProof, which indicates the full off-chain path succeeded.\n * It'll be emitted without a balanceProof if something forces the transfer to complete\n * (e.g.  channel closed), the secret was revealed (so target was paid) but for any reason the\n * unlock didn't happen yet.\n */\nexport const transferred = createStandardAction('transferred')();\n/**\n * A transfer failed and can't succeed anymore\n *\n * It is emitted as soon as we know the transfer failed definitely, like when a RefundTransfer is\n * received or the lock expires before revealing the secret. It notifies the user (e.g. pending\n * Promises) that the transfer failed and won't be paid (eventually, locked amount will be\n * recovered by expiring the lock).\n */\nexport const transferFailed = createStandardAction('transferFailed').map((payload, meta) => ({ payload, error: true, meta }));\n/** A pending transfer isn't needed anymore and should be cleared from state */\nexport const transferClear = createStandardAction('transferClear')();\n/** A WithdrawRequest was received from partner */\nexport const withdrawReceiveRequest = createStandardAction('withdrawReceiveRequest')();\n/** A WithdrawConfirmation was signed and must be sent to partner */\nexport const withdrawSendConfirmation = createStandardAction('withdrawSendConfirmation')();\n//# sourceMappingURL=actions.js.map","import { isActionOf } from 'typesafe-actions';\nimport { get, set, unset, mapValues } from 'lodash/fp';\nimport { Zero, HashZero } from 'ethers/constants';\nimport { hexlify } from 'ethers/utils';\nimport { initialState } from '../state';\nimport { ChannelState } from '../channels/state';\nimport { channelClosed } from '../channels/actions';\nimport { getLocksroot } from './utils';\nimport { SignatureZero } from '../constants';\nimport { timed } from '../utils/types';\nimport { getBalanceProofFromEnvelopeMessage } from '../messages/utils';\nimport { transferSigned, transferSecret, transferProcessed, transferUnlocked, transferExpired, transferSecretReveal, transferRefunded, transferUnlockProcessed, transferExpireProcessed, transferClear, withdrawSendConfirmation, } from './actions';\n/**\n * Handles all transfers actions and requests\n *\n * @param state - Current RaidenState\n * @param action - RaidenAction to handle\n * @returns New RaidenState (or current, if action didn't change anything)\n */\nexport function transfersReducer(state = initialState, action) {\n    if (isActionOf(transferSecret, action)) {\n        if (action.meta.secrethash in state.secrets &&\n            state.secrets[action.meta.secrethash].registerBlock)\n            return state; // avoid storing without registerBlock if we already got with\n        return Object.assign({}, state, { secrets: Object.assign({}, state.secrets, { [action.meta.secrethash]: action.payload }) });\n    }\n    else if (isActionOf(transferSigned, action)) {\n        const transfer = action.payload.message, lock = transfer.lock, secrethash = lock.secrethash;\n        // transferSigned must be the first action, to init SentTransfer state\n        if (secrethash in state.sent)\n            return state;\n        const channelPath = ['channels', transfer.token_network_address, transfer.recipient];\n        let channel = get(channelPath, state);\n        if (!channel)\n            return state;\n        const locks = [...(channel.own.locks || []), lock], // append lock\n        locksroot = getLocksroot(locks);\n        if (transfer.locksroot !== locksroot ||\n            !transfer.nonce.eq((channel.own.balanceProof ? channel.own.balanceProof.nonce : Zero).add(1)) || // nonce must be next\n            !transfer.transferred_amount.eq(channel.own.balanceProof ? channel.own.balanceProof.transferredAmount : Zero) ||\n            !transfer.locked_amount.eq((channel.own.balanceProof ? channel.own.balanceProof.lockedAmount : Zero).add(lock.amount)))\n            return state;\n        channel = Object.assign({}, channel, { own: Object.assign({}, channel.own, { locks, \n                // set current/latest channel.own.balanceProof to LockedTransfer's\n                balanceProof: getBalanceProofFromEnvelopeMessage(transfer) }) });\n        const sentTransfer = { transfer: timed(transfer), fee: action.payload.fee };\n        state = set(channelPath, channel, state);\n        state = set(['sent', secrethash], sentTransfer, state);\n        return state;\n    }\n    else if (isActionOf(transferProcessed, action)) {\n        if (!(action.meta.secrethash in state.sent))\n            return state;\n        return Object.assign({}, state, { sent: Object.assign({}, state.sent, { [action.meta.secrethash]: Object.assign({}, state.sent[action.meta.secrethash], { transferProcessed: timed(action.payload.message) }) }) });\n    }\n    else if (isActionOf(transferSecretReveal, action)) {\n        if (!(action.meta.secrethash in state.sent) || state.sent[action.meta.secrethash].secretReveal)\n            return state;\n        return Object.assign({}, state, { sent: Object.assign({}, state.sent, { [action.meta.secrethash]: Object.assign({}, state.sent[action.meta.secrethash], { secretReveal: timed(action.payload.message) }) }) });\n    }\n    else if (isActionOf(transferUnlocked, action)) {\n        const unlock = action.payload.message, secrethash = action.meta.secrethash;\n        if (!(secrethash in state.sent) || state.sent[secrethash].unlock)\n            return state;\n        const transfer = state.sent[secrethash].transfer[1], lock = transfer.lock;\n        const channelPath = ['channels', transfer.token_network_address, transfer.recipient];\n        let channel = get(channelPath, state);\n        if (!channel || !channel.own.locks || !channel.own.balanceProof)\n            return state;\n        const locks = channel.own.locks.filter(l => l.secrethash !== secrethash), locksroot = getLocksroot(locks);\n        if (unlock.locksroot !== locksroot ||\n            !channel.own.balanceProof.nonce.add(1).eq(unlock.nonce) || // nonce must be next\n            !unlock.transferred_amount.eq(channel.own.balanceProof.transferredAmount.add(lock.amount)) ||\n            !unlock.locked_amount.eq(channel.own.balanceProof.lockedAmount.sub(lock.amount)))\n            return state;\n        channel = Object.assign({}, channel, { own: Object.assign({}, channel.own, { locks, \n                // set current/latest channel.own.balanceProof to Unlock's\n                balanceProof: getBalanceProofFromEnvelopeMessage(unlock) }) });\n        const sentTransfer = Object.assign({}, state.sent[secrethash], { unlock: timed(unlock) });\n        state = set(channelPath, channel, state);\n        state = set(['sent', secrethash], sentTransfer, state);\n        return state;\n    }\n    else if (isActionOf(transferExpired, action)) {\n        const lockExpired = action.payload.message, secrethash = action.meta.secrethash;\n        if (!(secrethash in state.sent) ||\n            state.sent[secrethash].unlock || // don't accept expire if already unlocked\n            state.sent[secrethash].lockExpired // already expired\n        )\n            return state;\n        const transfer = state.sent[secrethash].transfer[1], lock = transfer.lock;\n        const channelPath = ['channels', transfer.token_network_address, transfer.recipient];\n        let channel = get(channelPath, state);\n        if (!channel || !channel.own.locks || !channel.own.balanceProof)\n            return state;\n        const locks = channel.own.locks.filter(l => l.secrethash !== secrethash), locksroot = getLocksroot(locks);\n        if (lockExpired.locksroot !== locksroot ||\n            !channel.own.balanceProof.nonce.add(1).eq(lockExpired.nonce) || // nonce must be next\n            !lockExpired.transferred_amount.eq(channel.own.balanceProof.transferredAmount) ||\n            !lockExpired.locked_amount.eq(channel.own.balanceProof.lockedAmount.sub(lock.amount)))\n            return state;\n        channel = Object.assign({}, channel, { own: Object.assign({}, channel.own, { locks, \n                // set current/latest channel.own.balanceProof to LockExpired's\n                balanceProof: getBalanceProofFromEnvelopeMessage(lockExpired) }) });\n        const sentTransfer = Object.assign({}, state.sent[secrethash], { lockExpired: timed(lockExpired) });\n        state = set(channelPath, channel, state);\n        state = set(['sent', secrethash], sentTransfer, state);\n        return state;\n    }\n    else if (isActionOf(transferUnlockProcessed, action)) {\n        if (!(action.meta.secrethash in state.sent))\n            return state;\n        return Object.assign({}, state, { sent: Object.assign({}, state.sent, { [action.meta.secrethash]: Object.assign({}, state.sent[action.meta.secrethash], { unlockProcessed: timed(action.payload.message) }) }) });\n    }\n    else if (isActionOf(transferExpireProcessed, action)) {\n        if (!(action.meta.secrethash in state.sent))\n            return state;\n        return Object.assign({}, state, { sent: Object.assign({}, state.sent, { [action.meta.secrethash]: Object.assign({}, state.sent[action.meta.secrethash], { lockExpiredProcessed: timed(action.payload.message) }) }) });\n    }\n    else if (isActionOf(transferRefunded, action)) {\n        if (!(action.meta.secrethash in state.sent))\n            return state;\n        return Object.assign({}, state, { sent: Object.assign({}, state.sent, { [action.meta.secrethash]: Object.assign({}, state.sent[action.meta.secrethash], { refund: timed(action.payload.message) }) }) });\n    }\n    else if (isActionOf(channelClosed, action)) {\n        return Object.assign({}, state, { sent: mapValues((v) => \n            // if transfer was on this channel, persist CloseChannel txHash, else pass\n            v.transfer[1].channel_identifier.eq(action.payload.id) &&\n                v.transfer[1].recipient === action.meta.partner &&\n                v.transfer[1].token_network_address === action.meta.tokenNetwork\n                ? Object.assign({}, v, { channelClosed: timed(action.payload.txHash) }) : v)(state.sent) });\n    }\n    else if (isActionOf(transferClear, action)) {\n        if (!(action.meta.secrethash in state.sent))\n            return state;\n        state = unset(['sent', action.meta.secrethash], state);\n        state = unset(['secrets', action.meta.secrethash], state);\n        return state;\n    }\n    else if (isActionOf(withdrawSendConfirmation, action)) {\n        const message = action.payload.message, channelPath = ['channels', action.meta.tokenNetwork, action.meta.partner];\n        let channel = get(channelPath, state);\n        if (!channel || channel.state !== ChannelState.open)\n            return state;\n        // current own balanceProof, or zero balance proof, with some known fields filled\n        const balanceProof = channel.own.balanceProof || {\n            chainId: message.chain_id,\n            tokenNetworkAddress: action.meta.tokenNetwork,\n            channelId: message.channel_identifier,\n            // balance proof data\n            nonce: Zero,\n            transferredAmount: Zero,\n            lockedAmount: Zero,\n            locksroot: HashZero,\n            messageHash: HashZero,\n            signature: hexlify(SignatureZero),\n            sender: state.address,\n        };\n        // if it's the next nonce, update balance proof\n        if (message.nonce.eq(balanceProof.nonce.add(1)) && message.expiration.gt(state.blockNumber)) {\n            channel = Object.assign({}, channel, { own: Object.assign({}, channel.own, { balanceProof: Object.assign({}, balanceProof, { nonce: message.nonce }) }) });\n            state = set(channelPath, channel, state);\n        }\n        return state;\n    }\n    else\n        return state;\n}\n//# sourceMappingURL=reducer.js.map","import { createStandardAction } from 'typesafe-actions';\n/** One-shot send payload.message to meta.address user in transport */\nexport const messageSend = createStandardAction('messageSend')();\n/**\n * Success action when message is actually sent\n * messageSend doesn't fail (except unexpectedly, like network errors), instead just hang there\n * until a suitable set of conditions is met, i.e.: there's a room for recipient's address, an\n * online validated user for this address, and it had joined that room, then the message is sent\n * and this success action is emitted. 'payload.message' and 'meta.address' should be kept strictly\n * equal to messageSend (even by reference, in case of Message), to ease filtering.\n * Useful to control retry without queueing multiple identical messages while the first is still\n * pending\n */\nexport const messageSent = createStandardAction('messageSent')();\n/** One-shot send payload.message to a global room in transport */\nexport const messageGlobalSend = createStandardAction('messageGlobalSend')();\n/**\n * payload.message was received on payload.ts (timestamp) from meta.address\n * payload.userId and payload.roomId are optional and specific to matrix transport, as sender info\n */\nexport const messageReceived = createStandardAction('messageReceived').map(({ text, message, ts, userId, roomId, }, meta) => ({ payload: { text, message, ts: ts || Date.now(), userId, roomId }, meta }));\n//# sourceMappingURL=actions.js.map","import { createStandardAction } from 'typesafe-actions';\nexport const pathFind = createStandardAction('pathFind')();\nexport const pathFound = createStandardAction('pathFound')();\nexport const pathFindFailed = createStandardAction('pathFindFailed').map((payload, meta) => ({ payload, error: true, meta }));\nexport const pfsListUpdated = createStandardAction('pfsListUpdated')();\n//# sourceMappingURL=actions.js.map","/**\n * Aggregate types and exported properties from actions from all modules\n */\nimport { pick } from 'lodash';\nimport { createStandardAction, getType } from 'typesafe-actions';\nimport * as ChannelsActions from './channels/actions';\nimport * as TransportActions from './transport/actions';\nimport * as MessagesActions from './messages/actions';\nimport * as TransfersActions from './transfers/actions';\nimport * as PathFindActions from './path/actions';\nexport const raidenShutdown = createStandardAction('raidenShutdown')();\nexport const raidenConfigUpdate = createStandardAction('raidenConfigUpdate')();\nexport const RaidenActions = Object.assign({ raidenShutdown,\n    raidenConfigUpdate }, ChannelsActions, TransportActions, MessagesActions, TransfersActions, PathFindActions);\n/* Mapping { [type: string]: Action } of a subset of RaidenActions exposed as events */\nexport const RaidenEvents = pick(RaidenActions, [\n    RaidenActions.raidenShutdown,\n    RaidenActions.newBlock,\n    RaidenActions.matrixPresenceUpdate,\n    RaidenActions.tokenMonitored,\n].map(getType));\n//# sourceMappingURL=actions.js.map","import { isActionOf } from 'typesafe-actions';\nimport { isEmpty } from 'lodash/fp';\nimport { channelsReducer } from './channels/reducer';\nimport { transportReducer } from './transport/reducer';\nimport { transfersReducer } from './transfers/reducer';\nimport { raidenConfigUpdate } from './actions';\nimport { initialState } from './state';\n// update state.config on raidenConfigUpdate action\nconst configReducer = (state = initialState, action) => {\n    if (isActionOf(raidenConfigUpdate, action)) {\n        if (!isEmpty(action.payload.config))\n            return Object.assign({}, state, { config: Object.assign({}, state.config, action.payload.config) });\n    }\n    return state;\n};\nconst raidenReducers = {\n    configReducer,\n    channelsReducer,\n    transportReducer,\n    transfersReducer,\n};\n/**\n * Raiden root reducer\n * Apply action over each submodule root reducer in a flattened manner (iteratively).\n * Notice the submodules reducers aren't handled only a partial/deep property of the state\n * (as combineReducers), but instead receive the whole state, so they can act on any part of the\n * state. This approach is similar to `reduce-reducers` util.\n * Each submodule root reducer may then choose to split its concerns into nested or flattened\n * reducers (like this one).\n *\n * @param state - Current RaidenState to reduce\n * @param action - RaidenAction to apply over state\n * @returns New RaidenState\n */\nexport const raidenReducer = (state = initialState, action) => Object.values(raidenReducers).reduce((s, reducer) => reducer(s, action), state);\n//# sourceMappingURL=reducer.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getNetwork as parseNetwork } from 'ethers/utils/networks';\nimport { flatten, sortBy } from 'lodash';\nimport { fromEventPattern, merge, from, of, defer, EMPTY, combineLatest } from 'rxjs';\nimport { filter, first, map, switchMap, mergeMap } from 'rxjs/operators';\n/**\n * Like rxjs' fromEvent, but event can be an EventFilter\n *\n * @param target - Object to hook event listener, maybe a Provider or Contract\n * @param event - EventFilter or string representing the event to listen to\n * @param resultSelector - A map of events arguments to output parameters\n *      Default is to pass only first parameter\n * @returns Observable of target.on(event) events\n */\nexport function fromEthersEvent(target, event, resultSelector) {\n    return fromEventPattern((handler) => target.on(event, handler), (handler) => target.removeListener(event, handler), resultSelector);\n}\n/**\n * getEventsStream returns a stream of T-type tuples (arrays) from Contract's\n * events from filters. These events are polled since provider's [re]setEventsBlock to newest\n * polled block. If both 'fromBlock$' and 'lastSeenBlock$' are specified, also fetch past events\n * since fromBlock up to lastSeenBlock$ === provider.resetEventsBlock - 1\n * T must be a tuple-like type receiving all filters arguments plus the respective Event in the end\n *\n * @param contract - Contract source instance for filters, connected to a provider\n * @param filters - array of OR filters from tokenNetwork\n * @param fromBlock$ - Observable of a past blockNumber since when to fetch past events\n * @param lastSeenBlock$ - Observable of latest seen block, to be used as toBlock of pastEvents.\n *      lastSeenBlock + 1 is supposed to be first one fetched by contract.on newEvents$\n *      Both fromBlock$ and lastSeenBlock$ need to be set to fetch pastEvents$\n * @returns Observable of contract's events\n */\nexport function getEventsStream(contract, filters, fromBlock$, lastSeenBlock$) {\n    const provider = contract.provider;\n    // past events (in the closed-interval=[fromBlock, lastSeenBlock]),\n    // fetch once, sort by blockNumber, emit all, complete\n    let pastEvents$ = EMPTY;\n    if (fromBlock$ && lastSeenBlock$) {\n        pastEvents$ = combineLatest(fromBlock$, defer(() => (provider.blockNumber ? of(provider.blockNumber) : lastSeenBlock$))).pipe(first(), switchMap(([fromBlock, toBlock]) => Promise.all(filters.map(filter => provider.getLogs(Object.assign({}, filter, { fromBlock, toBlock }))))), \n        // flatten array of each getLogs query response and sort them\n        // emit log array elements as separate logs into stream (unwind)\n        mergeMap(logs => from(sortBy(flatten(logs), ['blockNumber']))), map(log => {\n            // parse log into [...args, event: Event] array,\n            // the same that contract.on events/callbacks\n            const parsed = contract.interface.parseLog(log);\n            if (!parsed)\n                return;\n            const args = Array.prototype.slice.call(parsed.values);\n            // not all parameters quite needed right now, but let's comply with the interface\n            const event = Object.assign({}, log, parsed, { args, removeListener: () => { }, getBlock: () => provider.getBlock(log.blockHash), getTransaction: () => provider.getTransaction(log.transactionHash), getTransactionReceipt: () => provider.getTransactionReceipt(log.transactionHash), decode: undefined });\n            return [...args, event];\n        }), filter((event) => !!event));\n    }\n    // new events (in open-interval=]lastSeenBlock, latest])\n    // where lastSeenBlock is the currentBlock at call time\n    // doesn't complete, keep emitting events for each new block (if any) until unsubscription\n    const newEvents$ = from(filters).pipe(mergeMap(filter => fromEthersEvent(contract, filter, (...args) => args)));\n    return merge(pastEvents$, newEvents$);\n}\n/**\n * Like Provider.getNetwork, but fetches every time instead of using cached property\n *\n * @param provider - Provider to fetch data from\n * @returns Promise of Network info\n */\nexport function getNetwork(provider) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return parseNetwork(parseInt(yield provider.send('net_version', [])));\n    });\n}\n/**\n * Patch JsonRpcProvider.send to try personal_sign first, and fallback to eth_sign if it fails\n * Call it once on the provider instance\n *\n * @param provider - A JsonRpcProvider instance to patch\n */\nexport function patchSignSend(provider) {\n    const origSend = provider.send;\n    provider.send = function (method, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (method === 'eth_sign') {\n                // try 'personal_sign' by default instead of 'eth_sign'\n                return origSend.apply(this, ['personal_sign', [params[1], params[0]]]).catch(err => {\n                    // on first error, if personal_sign isn't available\n                    if (err instanceof Error &&\n                        (err.message.includes('The method personal_sign does not exist') ||\n                            err.message.includes('Method personal_sign not supported'))) {\n                        provider.send = origSend; // un-patch\n                        return provider.send(method, params); // and retry with eth_sign\n                    }\n                    throw err; // else, re-raise\n                });\n            }\n            return origSend.apply(this, [method, params]);\n        });\n    };\n}\n//# sourceMappingURL=ethers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { from, of, EMPTY, merge, interval } from 'rxjs';\nimport { catchError, filter, map, mergeMap, mergeMapTo, tap, takeWhile, withLatestFrom, groupBy, exhaustMap, first, publishReplay, switchMap, pluck, } from 'rxjs/operators';\nimport { isActionOf } from 'typesafe-actions';\nimport { findKey, get, isEmpty, negate } from 'lodash';\nimport { hexlify, concat } from 'ethers/utils';\nimport { HashZero, Zero } from 'ethers/constants';\nimport { raidenShutdown } from '../actions';\nimport { ChannelState } from '../channels';\nimport { newBlock, tokenMonitored, channelOpenFailed, channelMonitored, channelDepositFailed, channelCloseFailed, channelSettleFailed, channelOpen, channelOpened, channelDeposit, channelClose, channelSettle, channelSettleable, channelDeposited, channelClosed, channelSettled, channelWithdrawn, } from './actions';\nimport { SignatureZero, ShutdownReason } from '../constants';\nimport { fromEthersEvent, getEventsStream, getNetwork } from '../utils/ethers';\nimport { encode } from '../utils/data';\n/**\n * Fetch current blockNumber, register for new block events and emit newBlock actions\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param provider - RaidenEpicDeps members\n * @returns Observable of newBlock actions\n */\nexport const initNewBlockEpic = ({}, {}, { provider }) => from(provider.getBlockNumber()).pipe(mergeMap(blockNumber => merge(of(blockNumber), fromEthersEvent(provider, 'block'))), map(blockNumber => newBlock({ blockNumber })));\n/**\n * Monitor registry for new token networks and monitor them\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param registryContract,contractsInfo - RaidenEpicDeps members\n * @returns Observable of tokenMonitored actions\n */\nexport const initMonitorRegistryEpic = ({}, state$, { registryContract, contractsInfo }) => state$.pipe(publishReplay(1, undefined, state$ => state$.pipe(first(), switchMap(state => merge(\n// monitor old (in case of empty tokens) and new registered tokens\n// and starts monitoring every registered token\ngetEventsStream(registryContract, [registryContract.filters.TokenNetworkCreated(null, null)], isEmpty(state.tokens)\n    ? of(contractsInfo.TokenNetworkRegistry.block_number)\n    : undefined, isEmpty(state.tokens) ? state$.pipe(pluck('blockNumber')) : undefined).pipe(withLatestFrom(state$), map(([[token, tokenNetwork, event], state]) => tokenMonitored({\n    token,\n    tokenNetwork,\n    fromBlock: !(token in state.tokens) ? event.blockNumber : undefined,\n}))), \n// monitor previously monitored tokens\nfrom(Object.entries(state.tokens)).pipe(map(([token, tokenNetwork]) => tokenMonitored({ token: token, tokenNetwork }))))))));\n/**\n * Monitor channels previously already on state\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of channelMonitored actions\n */\nexport const initMonitorChannelsEpic = ({}, state$) => state$.pipe(first(), mergeMap(function* (state) {\n    for (const [tokenNetwork, obj] of Object.entries(state.channels)) {\n        for (const [partner, channel] of Object.entries(obj)) {\n            if (channel.state === ChannelState.opening)\n                continue;\n            yield channelMonitored({ id: channel.id }, { tokenNetwork: tokenNetwork, partner: partner });\n        }\n    }\n}));\n/**\n * Monitor provider to ensure account continues to be available and network stays the same\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param address,network,provider - RaidenEpicDeps members\n * @returns Observable of raidenShutdown actions\n */\nexport const initMonitorProviderEpic = ({}, {}, { address, network, provider }) => from(provider.listAccounts()).pipe(\n// at init time, check if our address is in provider's accounts list\n// if not, it means Signer is a local Wallet or another non-provider-side account\n// if yes, poll accounts every 1s and monitors if address is still there\n// also, every 1s poll current provider network and monitors if it's the same\n// if any check fails, emits RaidenShutdownAction, nothing otherwise\n// Poll reason from: https://github.com/MetaMask/faq/blob/master/DEVELOPERS.md\n// first/init-time check\nmap(accounts => accounts.includes(address)), mergeMap(isProviderAccount => interval(provider.pollingInterval).pipe(mergeMap(() => merge(\n// if isProviderAccount, also polls and monitors accounts list\nisProviderAccount\n    ? from(provider.listAccounts()).pipe(mergeMap(accounts => !accounts.includes(address)\n        ? of(raidenShutdown({ reason: ShutdownReason.ACCOUNT_CHANGED }))\n        : EMPTY))\n    : EMPTY, \n// unconditionally monitors network changes\nfrom(getNetwork(provider)).pipe(mergeMap(curNetwork => curNetwork.chainId !== network.chainId\n    ? of(raidenShutdown({ reason: ShutdownReason.NETWORK_CHANGED }))\n    : EMPTY)))))));\n/**\n * Starts monitoring a token network for events\n * When this action goes through (because a former or new token registry event was deteceted),\n * subscribe to events and emit respective actions to the stream. Currently:\n * - ChannelOpened events with us or by us\n *\n * @param action$ - Observable of tokenMonitored actions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Observable of channelOpened actions\n */\nexport const tokenMonitoredEpic = (action$, state$, { address, getTokenNetworkContract }) => state$.pipe(pluck('blockNumber'), publishReplay(1, undefined, blockNumber$ => action$.pipe(filter(isActionOf(tokenMonitored)), groupBy(action => action.payload.tokenNetwork), mergeMap(grouped$ => grouped$.pipe(exhaustMap(action => {\n    const tokenNetworkContract = getTokenNetworkContract(action.payload.tokenNetwork);\n    const filters = [\n        tokenNetworkContract.filters.ChannelOpened(null, address, null, null),\n        tokenNetworkContract.filters.ChannelOpened(null, null, address, null),\n    ];\n    return getEventsStream(tokenNetworkContract, filters, \n    // if first time monitoring this token network,\n    // fetch TokenNetwork's pastEvents since registry deployment as fromBlock$\n    action.payload.fromBlock ? of(action.payload.fromBlock) : undefined, action.payload.fromBlock ? blockNumber$ : undefined).pipe(filter(([, p1, p2]) => p1 === address || p2 === address), map(([id, p1, p2, settleTimeout, event]) => channelOpened({\n        id: id.toNumber(),\n        settleTimeout: settleTimeout.toNumber(),\n        openBlock: event.blockNumber,\n        isFirstParticipant: address === p1,\n        txHash: event.transactionHash,\n    }, {\n        tokenNetwork: tokenNetworkContract.address,\n        partner: address === p1 ? p2 : p1,\n    })));\n}))))));\n/**\n * Monitors a channel for channel Events\n * Can be called either at initialization time (for previously known channels on previously\n * monitored TokenNetwork) or by a new detected ChannelOpenedAction. On the later case,\n * also fetches events since Channel.openBlock.\n * Currently monitored events:\n * - ChannelNewDeposit, fires a channelDeposited action\n * - ChannelClosedEvent, fires a channelClosed action\n * - ChannelSettledEvent, fires a channelSettled action and completes that channel observable\n *\n * @param action$ - Observable of channelMonitored actions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Observable of channelDeposited,channelClosed,channelSettled actions\n */\nexport const channelMonitoredEpic = (action$, state$, { getTokenNetworkContract }) => state$.pipe(pluck('blockNumber'), publishReplay(1, undefined, blockNumber$ => action$.pipe(filter(isActionOf(channelMonitored)), groupBy(action => `${action.payload.id}#${action.meta.partner}@${action.meta.tokenNetwork}`), mergeMap(grouped$ => grouped$.pipe(exhaustMap(action => {\n    const tokenNetworkContract = getTokenNetworkContract(action.meta.tokenNetwork);\n    // TODO: instead of one filter for each event, optimize to one filter per channel\n    // it requires ethers to support OR filters for topics:\n    // https://github.com/ethers-io/ethers.js/issues/437\n    // can we hook to provider.on directly and decoding the events ourselves?\n    const depositFilter = tokenNetworkContract.filters.ChannelNewDeposit(action.payload.id, null, null), withdrawFilter = tokenNetworkContract.filters.ChannelWithdraw(action.payload.id, null, null), closedFilter = tokenNetworkContract.filters.ChannelClosed(action.payload.id, null, null, null), settledFilter = tokenNetworkContract.filters.ChannelSettled(action.payload.id, null, null, null, null);\n    return merge(getEventsStream(tokenNetworkContract, [depositFilter], \n    // if channelMonitored triggered by ChannelOpenedAction,\n    // fetch Channel's pastEvents since channelOpened blockNumber as fromBlock$\n    action.payload.fromBlock ? of(action.payload.fromBlock) : undefined, action.payload.fromBlock ? blockNumber$ : undefined).pipe(map(([id, participant, totalDeposit, event]) => channelDeposited({\n        id: id.toNumber(),\n        participant,\n        totalDeposit,\n        txHash: event.transactionHash,\n    }, action.meta))), getEventsStream(tokenNetworkContract, [withdrawFilter], action.payload.fromBlock ? of(action.payload.fromBlock) : undefined, action.payload.fromBlock ? blockNumber$ : undefined).pipe(map(([id, participant, totalWithdraw, event]) => channelWithdrawn({\n        id: id.toNumber(),\n        participant,\n        totalWithdraw,\n        txHash: event.transactionHash,\n    }, action.meta))), getEventsStream(tokenNetworkContract, [closedFilter], action.payload.fromBlock ? of(action.payload.fromBlock) : undefined, action.payload.fromBlock ? blockNumber$ : undefined).pipe(map(([id, participant, , , event]) => channelClosed({\n        id: id.toNumber(),\n        participant,\n        closeBlock: event.blockNumber,\n        txHash: event.transactionHash,\n    }, action.meta))), getEventsStream(tokenNetworkContract, [settledFilter], action.payload.fromBlock ? of(action.payload.fromBlock) : undefined, action.payload.fromBlock ? blockNumber$ : undefined).pipe(map(([id, , , , , event]) => channelSettled({\n        id: id.toNumber(),\n        settleBlock: event.blockNumber,\n        txHash: event.transactionHash,\n    }, action.meta)))).pipe(\n    // takeWhile tends to broad input to generic Action. We need to narrow it by hand\n    takeWhile(negate(isActionOf(channelSettled)), true));\n}))))));\n/**\n * A channelOpen action requested by user\n * Needs to be called on a previously monitored tokenNetwork. Calls TokenNetwork.openChannel\n * with given parameters. If tx goes through successfuly, stop as ChannelOpened success action\n * will instead be detected and fired by tokenMonitoredEpic. If anything detectable goes wrong,\n * fires a ChannnelOpenActionFailed instead\n *\n * @param action$ - Observable of channelOpen actions\n * @param state$ - Observable of RaidenStates\n * @param getTokenNetworkContract - RaidenEpicDeps members\n * @returns Observable of channelOpenFailed actions\n */\nexport const channelOpenEpic = (action$, state$, { getTokenNetworkContract, config$ }) => action$.pipe(filter(isActionOf(channelOpen)), withLatestFrom(state$, config$), mergeMap(([action, state, config]) => {\n    const tokenNetwork = getTokenNetworkContract(action.meta.tokenNetwork);\n    const channelState = get(state.channels, [\n        action.meta.tokenNetwork,\n        action.meta.partner,\n        'state',\n    ]);\n    // proceed only if channel is in 'opening' state, set by this action\n    if (channelState !== ChannelState.opening)\n        return of(channelOpenFailed(new Error(`Invalid channel state: ${channelState}`), action.meta));\n    // send openChannel transaction !!!\n    return from(tokenNetwork.functions.openChannel(state.address, action.meta.partner, action.payload.settleTimeout || config.settleTimeout)).pipe(mergeMap((tx) => __awaiter(this, void 0, void 0, function* () { return ({ receipt: yield tx.wait(), tx }); })), map(({ receipt, tx }) => {\n        if (!receipt.status)\n            throw new Error(`openChannel transaction \"${tx.hash}\" failed`);\n        return tx.hash;\n    }), \n    // if succeeded, return a empty/completed observable\n    // actual ChannelOpenedAction will be detected and handled by tokenMonitoredEpic\n    // if any error happened on tx call/pipeline, mergeMap below won't be hit, and catchError\n    // will then emit the channelOpenFailed action instead\n    mergeMapTo(EMPTY), catchError(error => of(channelOpenFailed(error, action.meta))));\n}));\n/**\n * When we see a new ChannelOpenedAction event, starts monitoring channel\n *\n * @param action$ - Observable of channelOpened actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of channelMonitored actions\n */\nexport const channelOpenedEpic = (action$, state$) => action$.pipe(filter(isActionOf(channelOpened)), withLatestFrom(state$), \n// proceed only if channel is in 'open' state and a deposit is required\nfilter(([action, state]) => {\n    const channel = get(state.channels, [\n        action.meta.tokenNetwork,\n        action.meta.partner,\n    ]);\n    return !!channel && channel.state === ChannelState.open;\n}), map(([action]) => channelMonitored({\n    id: action.payload.id,\n    fromBlock: action.payload.openBlock,\n}, action.meta)));\n/**\n * A ChannelDeposit action requested by user\n * Needs to be called on a previously monitored channel. Calls Token.approve for TokenNetwork\n * and then set respective setTotalDeposit. If all tx go through successfuly, stop as\n * ChannelDeposited success action will instead be detected and reacted by\n * channelMonitoredEpic. If anything detectable goes wrong, fires a ChannelDepositActionFailed\n * instead\n *\n * @param action$ - Observable of channelDeposit actions\n * @param state$ - Observable of RaidenStates\n * @param address,getTokenContract,getTokenNetworkContract - RaidenEpicDeps members\n * @returns Observable of channelDepositFailed actions\n */\nexport const channelDepositEpic = (action$, state$, { address, getTokenContract, getTokenNetworkContract }) => action$.pipe(filter(isActionOf(channelDeposit)), withLatestFrom(state$), mergeMap(([action, state]) => {\n    const token = findKey(state.tokens, tn => tn === action.meta.tokenNetwork);\n    if (!token) {\n        const error = new Error(`token for tokenNetwork \"${action.meta.tokenNetwork}\" not found`);\n        return of(channelDepositFailed(error, action.meta));\n    }\n    const tokenContract = getTokenContract(token);\n    const tokenNetworkContract = getTokenNetworkContract(action.meta.tokenNetwork);\n    const channel = get(state.channels, [\n        action.meta.tokenNetwork,\n        action.meta.partner,\n    ]);\n    if (!channel || channel.state !== ChannelState.open || channel.id === undefined) {\n        const error = new Error(`channel for \"${action.meta.tokenNetwork}\" and \"${action.meta.partner}\" not found or not in 'open' state`);\n        return of(channelDepositFailed(error, action.meta));\n    }\n    const channelId = channel.id;\n    // send approve transaction\n    return from(tokenContract.functions.approve(action.meta.tokenNetwork, action.payload.deposit))\n        .pipe(tap(tx => console.log(`sent approve tx \"${tx.hash}\" to \"${token}\"`)), mergeMap((tx) => __awaiter(this, void 0, void 0, function* () { return ({ receipt: yield tx.wait(), tx }); })), map(({ receipt, tx }) => {\n        if (!receipt.status)\n            throw new Error(`token \"${token}\" approve transaction \"${tx.hash}\" failed`);\n        return tx.hash;\n    }), tap(txHash => console.log(`approve tx \"${txHash}\" successfuly mined!`)))\n        .pipe(withLatestFrom(state$), mergeMap(([, state]) => \n    // send setTotalDeposit transaction\n    tokenNetworkContract.functions.setTotalDeposit(channelId, address, state.channels[action.meta.tokenNetwork][action.meta.partner].own.deposit.add(action.payload.deposit), action.meta.partner, { gasLimit: 100e3 })), tap(tx => console.log(`sent setTotalDeposit tx \"${tx.hash}\" to \"${action.meta.tokenNetwork}\"`)), mergeMap((tx) => __awaiter(this, void 0, void 0, function* () { return ({ receipt: yield tx.wait(), tx }); })), map(({ receipt, tx }) => {\n        if (!receipt.status)\n            throw new Error(`tokenNetwork \"${action.meta.tokenNetwork}\" setTotalDeposit transaction \"${tx.hash}\" failed`);\n        return tx.hash;\n    }), tap(txHash => console.log(`setTotalDeposit tx \"${txHash}\" successfuly mined!`)), \n    // if succeeded, return a empty/completed observable\n    // actual ChannelDepositedAction will be detected and handled by channelMonitoredEpic\n    // if any error happened on tx call/pipeline, mergeMap below won't be hit, and catchError\n    // will then emit the channelDepositFailed action instead\n    mergeMapTo(EMPTY), catchError(error => of(channelDepositFailed(error, action.meta))));\n}));\n/**\n * A ChannelClose action requested by user\n * Needs to be called on an opened or closing (for retries) channel.\n * If tx goes through successfuly, stop as ChannelClosed success action will instead be\n * detected and reacted by channelMonitoredEpic. If anything detectable goes wrong, fires a\n * ChannelCloseActionFailed instead\n *\n * @param action$ - Observable of channelClose actions\n * @param state$ - Observable of RaidenStates\n * @param getTokenNetworkContract - RaidenEpicDeps members\n * @returns Observable of channelCloseFailed actions\n */\nexport const channelCloseEpic = (action$, state$, { address, network, getTokenNetworkContract, signer }) => action$.pipe(filter(isActionOf(channelClose)), withLatestFrom(state$), mergeMap(([action, state]) => {\n    const tokenNetworkContract = getTokenNetworkContract(action.meta.tokenNetwork);\n    const channel = get(state.channels, [\n        action.meta.tokenNetwork,\n        action.meta.partner,\n    ]);\n    if (!channel ||\n        !(channel.state === ChannelState.open || channel.state === ChannelState.closing) ||\n        !channel.id) {\n        const error = new Error(`channel for \"${action.meta.tokenNetwork}\" and \"${action.meta.partner}\" not found or not in 'open' or 'closing' state`);\n        return of(channelCloseFailed(error, action.meta));\n    }\n    const channelId = channel.id;\n    const balanceHash = HashZero, nonce = Zero, additionalHash = HashZero, nonClosingSignature = hexlify(SignatureZero);\n    // TODO: enable this after we're able to receive transfers\n    // if (channel.partner.balanceProof) {\n    //   balanceHash = createBalanceHash(\n    //     channel.partner.balanceProof.transferredAmount,\n    //     channel.partner.balanceProof.lockedAmount,\n    //     channel.partner.balanceProof.locksroot,\n    //   );\n    //   nonce = channel.partner.balanceProof.nonce;\n    //   additionalHash = channel.partner.balanceProof.messageHash;\n    //   nonClosingSignature = channel.partner.balanceProof.signature;\n    // }\n    const closingMessage = concat([\n        encode(action.meta.tokenNetwork, 20),\n        encode(network.chainId, 32),\n        encode(1, 32),\n        encode(channelId, 32),\n        encode(balanceHash, 32),\n        encode(nonce, 32),\n        encode(additionalHash, 32),\n        encode(nonClosingSignature, 65),\n    ]); // UInt8Array of 277 bytes\n    // sign counter balance proof (while we don't receive transfers yet, it's always zero),\n    // then send closeChannel transaction with our signature\n    return from(signer.signMessage(closingMessage)).pipe(mergeMap(closingSignature => tokenNetworkContract.functions.closeChannel(channelId, action.meta.partner, address, balanceHash, nonce, additionalHash, nonClosingSignature, closingSignature)), tap(tx => console.log(`sent closeChannel tx \"${tx.hash}\" to \"${action.meta.tokenNetwork}\"`)), mergeMap((tx) => __awaiter(this, void 0, void 0, function* () { return ({ receipt: yield tx.wait(), tx }); })), map(({ receipt, tx }) => {\n        if (!receipt.status)\n            throw new Error(`tokenNetwork \"${action.meta.tokenNetwork}\" closeChannel transaction \"${tx.hash}\" failed`);\n        console.log(`closeChannel tx \"${tx.hash}\" successfuly mined!`);\n        return tx.hash;\n    }), \n    // if succeeded, return a empty/completed observable\n    // actual ChannelClosedAction will be detected and handled by channelMonitoredEpic\n    // if any error happened on tx call/pipeline, mergeMap below won't be hit, and catchError\n    // will then emit the channelCloseFailed action instead\n    mergeMapTo(EMPTY), catchError(error => of(channelCloseFailed(error, action.meta))));\n}));\n/**\n * A ChannelSettle action requested by user\n * Needs to be called on an settleable or settling (for retries) channel.\n * If tx goes through successfuly, stop as ChannelSettled success action will instead be\n * detected and reacted by channelMonitoredEpic. If anything detectable goes wrong, fires a\n * ChannelSettleActionFailed instead\n *\n * @param action$ - Observable of channelSettle actions\n * @param state$ - Observable of RaidenStates\n * @param address,getTokenNetworkContract - RaidenEpicDeps members\n * @returns Observable of channelSettleFailed actions\n */\nexport const channelSettleEpic = (action$, state$, { address, getTokenNetworkContract }) => action$.pipe(filter(isActionOf(channelSettle)), withLatestFrom(state$), mergeMap(([action, state]) => {\n    const tokenNetworkContract = getTokenNetworkContract(action.meta.tokenNetwork);\n    const channel = get(state.channels, [\n        action.meta.tokenNetwork,\n        action.meta.partner,\n    ]);\n    if (!channel ||\n        !(channel.state === ChannelState.settleable || channel.state === ChannelState.settling) ||\n        !channel.id) {\n        const error = new Error(`channel for \"${action.meta.tokenNetwork}\" and \"${action.meta.partner}\" not found or not in 'settleable' or 'settling' state`);\n        return of(channelSettleFailed(error, action.meta));\n    }\n    const channelId = channel.id;\n    const zeroBalanceProof = {\n        transferredAmount: Zero,\n        lockedAmount: Zero,\n        locksroot: HashZero,\n    };\n    let part1 = Object.assign({ address: action.meta.partner }, (channel.partner.balanceProof || zeroBalanceProof)), part2 = Object.assign({ address }, (channel.own.balanceProof || zeroBalanceProof));\n    if (channel.isFirstParticipant)\n        [part1, part2] = [part2, part1];\n    // send settleChannel transaction\n    return from(tokenNetworkContract.functions.settleChannel(channelId, part1.address, part1.transferredAmount, part1.lockedAmount, part1.locksroot, part2.address, part2.transferredAmount, part2.lockedAmount, part2.locksroot)).pipe(tap(tx => console.log(`sent settleChannel tx \"${tx.hash}\" to \"${action.meta.tokenNetwork}\"`)), mergeMap((tx) => __awaiter(this, void 0, void 0, function* () { return ({ receipt: yield tx.wait(), tx }); })), map(({ receipt, tx }) => {\n        if (!receipt.status)\n            throw new Error(`tokenNetwork \"${action.meta.tokenNetwork}\" settleChannel transaction \"${tx.hash}\" failed`);\n        console.log(`settleChannel tx \"${tx.hash}\" successfuly mined!`);\n        return tx.hash;\n    }), \n    // if succeeded, return a empty/completed observable\n    // actual ChannelSettledAction will be detected and handled by channelMonitoredEpic\n    // if any error happened on tx call/pipeline, mergeMap below won't be hit, and catchError\n    // will then emit the channelSettleFailed action instead\n    mergeMapTo(EMPTY), catchError(error => of(channelSettleFailed(error, action.meta))));\n}));\n/**\n * Process newBlocks, emits ChannelSettleableAction if any closed channel is now settleable\n *\n * @param action$ - Observable of newBlock actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of channelSettleable actions\n */\nexport const channelSettleableEpic = (action$, state$) => action$.pipe(filter(isActionOf(newBlock)), withLatestFrom(state$), mergeMap(function* ([{ payload: { blockNumber }, }, state,]) {\n    for (const tokenNetwork in state.channels) {\n        for (const partner in state.channels[tokenNetwork]) {\n            const channel = state.channels[tokenNetwork][partner];\n            if (channel.state === ChannelState.closed &&\n                channel.settleTimeout && // closed channels always have settleTimeout & closeBlock set\n                channel.closeBlock &&\n                blockNumber > channel.closeBlock + channel.settleTimeout) {\n                yield channelSettleable({ settleableBlock: blockNumber }, { tokenNetwork: tokenNetwork, partner: partner });\n            }\n        }\n    }\n}));\n//# sourceMappingURL=epics.js.map","import { defer, of } from 'rxjs';\nimport { fromFetch } from 'rxjs/fetch';\nimport { map, catchError, timeout } from 'rxjs/operators';\nimport { encodeUri } from 'matrix-js-sdk/lib/utils';\n/**\n * From a yaml list string, return as Array\n * E.g. yamlListToArray(`\n * # comment\n *   - test1\n *   - test2\n *   - test3\n * `) === ['test1', 'test2', 'test3']\n *\n * @param yml - String containing only YAML list\n * @returns List of strings inside yml-encoded text\n */\nexport function yamlListToArray(yml) {\n    // match all strings starting with optional spaces followed by a dash + space\n    // capturing only the content of the list item, trimming spaces\n    const reg = /^\\s*-\\s*(.+?)\\s*$/gm;\n    const results = [];\n    let match;\n    while ((match = reg.exec(yml))) {\n        results.push(match[1]);\n    }\n    return results;\n}\n/**\n * Given a server name (with or without schema and port), return HTTP GET round trip time\n *\n * @param server - Server name with or without schema\n * @param httpTimeout - Optional timeout for the HTTP request\n * @returns Promise to a { server, rtt } object, where `rtt` may be NaN\n */\nexport function matrixRTT(server, httpTimeout) {\n    let url = server;\n    if (!url.includes('://')) {\n        url = `https://${url}`;\n    }\n    url += `/_matrix/client/versions`;\n    return defer(() => {\n        const start = Date.now();\n        return fromFetch(url).pipe(map(response => (response.ok ? Date.now() : NaN)), timeout(httpTimeout || Number.MAX_SAFE_INTEGER), catchError(() => of(NaN)), map(end => end - start), map(rtt => ({ server, rtt })));\n    });\n}\n/**\n * Return server name without schema or path\n *\n * @param server - any URL\n * @returns server URL with domain and port (if present), without schema, paths or query params\n */\nexport function getServerName(server) {\n    const match = /^(?:\\w*:?\\/\\/)?([^/#?&]+)/.exec(server);\n    return match && match[1];\n}\n/**\n * MatrixClient doesn't expose this API, but it does exist, so we create it here\n *\n * @param matrix - an already setup and started MatrixClient\n * @param userId - to fetch status/presence from\n * @returns Promise to object containing status data\n */\nexport function getUserPresence(matrix, userId) {\n    const path = encodeUri('/presence/$userId/status', { $userId: userId });\n    return matrix._http.authedRequest(undefined, 'GET', path);\n}\n//# sourceMappingURL=matrix.js.map","/**\n * Simple Map-based LRU cache\n *\n * @param max - Maximum size of cache\n */\nexport class LruCache {\n    constructor(max) {\n        this.values = new Map();\n        this.max = max;\n    }\n    get(key) {\n        const entry = this.values.get(key);\n        if (entry) {\n            // peek the entry, re-insert for LRU strategy\n            this.values.delete(key);\n            this.values.set(key, entry);\n        }\n        return entry;\n    }\n    put(key, value) {\n        if (this.values.size >= this.max) {\n            // least-recently used cache eviction strategy\n            const keyToDelete = this.values.keys().next().value;\n            this.values.delete(keyToDelete);\n        }\n        this.values.set(key, value);\n    }\n}\n//# sourceMappingURL=lru.js.map","import { of, fromEvent } from 'rxjs';\nimport { filter, scan, startWith, share, take } from 'rxjs/operators';\nimport { isActionOf } from 'typesafe-actions';\nimport { memoize, curry } from 'lodash';\nimport { matrixPresenceUpdate } from './actions';\n/**\n * Helper to map/get an aggregated Presences observable from action$ bus\n * Known presences as { address: <last seen MatrixPresenceUpdateAction> } mapping\n * It's memoized and shared, so all subscriptions share the same mapped/output object\n *\n * @param action$ - Observable\n * @returns Observable of aggregated Presences from subscription to now\n */\nexport const getPresences$ = memoize((action$) => action$.pipe(filter(isActionOf(matrixPresenceUpdate)), scan(\n// scan all presence update actions and populate/output a per-address mapping\n(presences, update) => (Object.assign({}, presences, { [update.meta.address]: update })), {}), share(), startWith({})));\n/**\n * Return the array of configured global rooms\n *\n * @param config - object to gather the list from\n * @returns Array of room names\n */\nexport function globalRoomNames(config) {\n    return [config.discoveryRoom, config.pfsRoom].filter((g) => !!g);\n}\n/**\n * Curried function (arity=2) which matches room passed as second argument based on roomId, name or\n * alias passed as first argument\n *\n * @param roomIdOrAlias - Room Id, name, canonical or normal alias for room\n * @param room - Room to test\n * @returns True if room matches term, false otherwise\n */\nexport const roomMatch = curry((roomIdOrAlias, room) => roomIdOrAlias === room.roomId ||\n    roomIdOrAlias === room.name ||\n    roomIdOrAlias === room.getCanonicalAlias() ||\n    room.getAliases().includes(roomIdOrAlias));\n/**\n * Returns an observable to a (possibly pending) room matching roomId or some alias\n * This method doesn't try to join the room, just wait for it to show up in MatrixClient.\n *\n * @param matrix - Client instance to fetch room info from\n * @param roomIdOrAlias - room id or alias to look for\n * @returns Observable to populated room instance\n */\nexport function getRoom$(matrix, roomIdOrAlias) {\n    let room = matrix.getRoom(roomIdOrAlias);\n    if (!room)\n        room = matrix.getRooms().find(roomMatch(roomIdOrAlias));\n    if (room)\n        return of(room);\n    return fromEvent(matrix, 'Room').pipe(filter(roomMatch(roomIdOrAlias)), take(1));\n}\n//# sourceMappingURL=utils.js.map","/* eslint-disable @typescript-eslint/camelcase */\nimport { combineLatest, from, of, EMPTY, fromEvent, timer, throwError, merge, } from 'rxjs';\nimport { catchError, concatMap, delay, distinctUntilChanged, filter, groupBy, ignoreElements, map, mergeMap, withLatestFrom, scan, startWith, switchMap, take, takeUntil, tap, toArray, mapTo, finalize, first, timeout, publishReplay, pluck, } from 'rxjs/operators';\nimport { fromFetch } from 'rxjs/fetch';\nimport { isActionOf } from 'typesafe-actions';\nimport { find, get, minBy, sortBy } from 'lodash';\nimport { getAddress, verifyMessage } from 'ethers/utils';\nimport { createClient } from 'matrix-js-sdk';\nimport { channelMonitored } from '../channels/actions';\nimport { MessageType, Processed, SecretRequest, SecretReveal, Signed, } from '../messages/types';\nimport { decodeJsonMessage, encodeJsonMessage, getMessageSigner, signMessage, } from '../messages/utils';\nimport { messageSend, messageReceived, messageSent, messageGlobalSend } from '../messages/actions';\nimport { getServerName, getUserPresence, matrixRTT, yamlListToArray } from '../utils/matrix';\nimport { LruCache } from '../utils/lru';\nimport { matrixPresenceUpdate, matrixRequestMonitorPresenceFailed, matrixRoom, matrixRoomLeave, matrixSetup, matrixRequestMonitorPresence, } from './actions';\nimport { getPresences$, getRoom$, roomMatch, globalRoomNames } from './utils';\n// unavailable just means the user didn't do anything over a certain amount of time, but they're\n// still there, so we consider the user as available/online then\nconst AVAILABLE = ['online', 'unavailable'];\nconst userRe = /^@(0x[0-9a-f]{40})[.:]/i;\n/**\n * Initialize matrix transport\n * The matrix client instance will be outputed to RaidenEpicDeps.matrix$ AsyncSubject\n * The setup info (including credentials, for persistence) will be the matrixSetup output action\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param address,network,signer,matrix$ - RaidenEpicDeps members\n * @returns Observable of matrixSetup generated by initializing matrix client\n */\nexport const initMatrixEpic = ({}, state$, { address, signer, matrix$, config$ }) => state$.pipe(first(), withLatestFrom(config$), mergeMap(([state, { matrixServer, matrixServerLookup, httpTimeout }]) => {\n    const server = get(state, ['transport', 'matrix', 'server']), setup = get(state, ['transport', 'matrix', 'setup']);\n    if (server && (!matrixServer || matrixServer === server)) {\n        // reuse server&setup from state iff set and either matrixServer equal or undefined\n        return of({ server, setup });\n    }\n    else if (matrixServer) {\n        // [re]auth on [new] server if matrixServer is set and different from state or first run\n        return of({ server: matrixServer, setup: undefined });\n    }\n    else {\n        // fetch servers list and use the one with shortest http round trip time (rtt)\n        return fromFetch(matrixServerLookup).pipe(mergeMap(response => {\n            if (!response.ok)\n                return throwError(new Error(`Could not fetch server list from \"${matrixServerLookup}\" => ${response.status}`));\n            return response.text();\n        }), timeout(httpTimeout), mergeMap(text => from(yamlListToArray(text))), mergeMap(server => matrixRTT(server, httpTimeout)), toArray(), map(rtts => sortBy(rtts, ['rtt'])), map(rtts => {\n            if (!rtts[0] || typeof rtts[0].rtt !== 'number' || isNaN(rtts[0].rtt))\n                throw new Error(`Could not contact any matrix servers: ${JSON.stringify(rtts)}`);\n            return rtts[0].server;\n        }), map(server => ({\n            server: server.includes('://') ? server : `https://${server}`,\n            setup: undefined,\n        })));\n    }\n}), mergeMap(function ({ server, setup, }) {\n    let { userId, accessToken, deviceId } = setup || {};\n    if (setup) {\n        // if matrixSetup was already issued before, and credentials are already in state\n        const matrix = createClient({\n            baseUrl: server,\n            userId,\n            accessToken,\n            deviceId,\n        });\n        return of({ matrix, server, setup });\n    }\n    else {\n        const serverName = getServerName(server);\n        if (!serverName)\n            return throwError(new Error(`Could not get serverName from \"${server}\"`));\n        const matrix = createClient({ baseUrl: server });\n        const userName = address.toLowerCase();\n        userId = `@${userName}:${serverName}`;\n        // create password as signature of serverName, then try login or register\n        return from(signer.signMessage(serverName)).pipe(mergeMap(password => from(matrix.loginWithPassword(userName, password)).pipe(catchError(() => from(matrix.register(userName, password))))), tap(result => {\n            // matrix.register implementation doesn't set returned credentials\n            // which would require an unnecessary additional login request if we didn't\n            // set it here, and login doesn't set deviceId, so we set all credential\n            // parameters again here after successful login or register\n            matrix.deviceId = result.device_id;\n            matrix._http.opts.accessToken = result.access_token;\n            matrix.credentials = {\n                userId: result.user_id,\n            };\n            // set vars for later MatrixSetupAction\n            accessToken = result.access_token;\n            deviceId = result.device_id;\n        }), \n        // displayName must be signature of full userId for our messages to be accepted\n        mergeMap(() => signer.signMessage(userId)), map(signedUserId => ({\n            matrix,\n            server,\n            setup: {\n                userId: userId,\n                accessToken: accessToken,\n                deviceId: deviceId,\n                displayName: signedUserId,\n            },\n        })));\n    }\n}), withLatestFrom(config$), mergeMap(([{ matrix, server, setup }, config]) => \n// ensure displayName is set even on restarts\nfrom(matrix.setDisplayName(setup.displayName)).pipe(mergeMap(() => merge(\n// ensure we joined global rooms\n...globalRoomNames(config).map(globalRoom => from(matrix.joinRoom(`#${globalRoom}:${getServerName(server)}`))))), toArray(), // wait all promises to complete\nmapTo({ matrix, server, setup }))), mergeMap(({ matrix, server, setup }) => merge(\n// wait for matrixSetup to be persisted in state, then resolves matrix$ with instance\nstate$.pipe(pluck('transport', 'matrix', 'server'), filter((_server) => !!_server), take(1), tap(() => {\n    matrix$.next(matrix);\n    matrix$.complete();\n}), switchMap(() => matrix$), delay(1e3), // wait 1s before starting matrix, so event listeners can be registered\nmergeMap(matrix => matrix.startClient({ initialSyncLimit: 0 })), ignoreElements()), of(matrixSetup({ server, setup })))));\n/**\n * Calls matrix.stopClient when raiden is shutting down, i.e. action$ completes\n *\n * @param action$ - Observable of matrixSetup actions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Empty observable (whole side-effect on matrix instance)\n */\nexport const matrixShutdownEpic = (action$, {}, { matrix$ }) => matrix$.pipe(mergeMap(matrix => action$.pipe(finalize(() => matrix.stopClient()))), ignoreElements());\n/**\n * Handles MatrixRequestMonitorPresenceAction and emits a MatrixPresenceUpdateAction\n * If presence is already known, emits it, else fetch from user profile\n * Even if the presence stays the same, we emit a MatrixPresenceUpdateAction, as this may be a\n * request being waited by a promise or something like that\n * IOW: every request should be followed by a presence update or a failed action, but presence\n * updates may happen later without new requests (e.g. when the user goes offline)\n *\n * @param action$ - Observable of matrixRequestMonitorPresence actions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Observable of presence updates or fail action\n */\nexport const matrixMonitorPresenceEpic = (action$, {}, { matrix$ }) => action$.pipe(filter(isActionOf(matrixRequestMonitorPresence)), \n// this mergeMap is like withLatestFrom, but waits until matrix$ emits its only value\nmergeMap(action => matrix$.pipe(map(matrix => ({ action, matrix })))), withLatestFrom(getPresences$(action$)), \n// TODO: groupBy(address)+concatMap serialize presence fetching\nmergeMap(([{ action, matrix }, presences]) => {\n    if (action.meta.address in presences)\n        // we already monitored/saw this user's presence\n        return of(presences[action.meta.address]);\n    const validUsers = [];\n    for (const user of matrix.getUsers()) {\n        if (!user.displayName)\n            continue;\n        if (!user.presence)\n            continue;\n        let recovered;\n        try {\n            const match = userRe.exec(user.userId);\n            if (!match || getAddress(match[1]) !== action.meta.address)\n                continue;\n            recovered = verifyMessage(user.userId, user.displayName);\n            if (!recovered || recovered !== action.meta.address)\n                continue;\n        }\n        catch (err) {\n            continue;\n        }\n        validUsers.push(user);\n    }\n    // IFF we see a cached/stored user (matrix.getUsers), with displayName and presence already\n    // populated, which displayName signature verifies to our address of interest,\n    // then construct and return the MatrixPresenceUpdateAction from the stored data\n    if (validUsers.length > 0) {\n        const user = minBy(validUsers, 'lastPresenceTs');\n        return of(matrixPresenceUpdate({ userId: user.userId, available: AVAILABLE.includes(user.presence) }, action.meta));\n    }\n    // if anything failed up to here, go the slow path: searchUserDirectory + getUserPresence\n    return from(\n    // search user directory for any user containing the address of interest in its userId\n    matrix.searchUserDirectory({ term: action.meta.address.toLowerCase() })).pipe(\n    // for every result matches, verify displayName signature is address of interest\n    mergeMap(function* ({ results }) {\n        for (const user of results) {\n            if (!user.display_name)\n                continue;\n            try {\n                const match = userRe.exec(user.user_id);\n                if (!match || getAddress(match[1]) !== action.meta.address)\n                    continue;\n                const recovered = verifyMessage(user.user_id, user.display_name);\n                if (!recovered || recovered !== action.meta.address)\n                    continue;\n            }\n            catch (err) {\n                continue;\n            }\n            yield user.user_id;\n        }\n    }), mergeMap(userId => getUserPresence(matrix, userId)\n        .then(presence => (Object.assign({}, presence, { user_id: userId })))\n        .catch(err => {\n        console.log('Error fetching user presence, ignoring:', err);\n        return { presence: '', user_id: userId };\n    })), filter(presence => !!presence && !!presence.presence), toArray(), \n    // for all matched/verified users, get its presence through dedicated API\n    // it's required because, as the user events could already have been handled and\n    // filtered out by matrixPresenceUpdateEpic because it wasn't yet a user-of-interest,\n    // we could have missed presence updates, then we need to fetch it here directly,\n    // and from now on, that other epic will monitor its updates, and sort by most recently\n    // seen user\n    map(presences => {\n        if (!presences.length)\n            throw new Error(`Could not find any user with valid signature for ${action.meta.address}`);\n        return minBy(presences, 'last_active_ago');\n    }), map(({ presence, user_id: userId }) => matrixPresenceUpdate({\n        userId,\n        available: AVAILABLE.includes(presence),\n    }, action.meta)), catchError(err => of(matrixRequestMonitorPresenceFailed(err, action.meta))));\n}));\n/**\n * Monitor peers matrix presence from User.presence events\n * We aggregate all users of interest (i.e. for which a monitor request was emitted at some point)\n * and emit presence updates for any presence change happening to a user validating to this address\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Observable of presence updates\n */\nexport const matrixPresenceUpdateEpic = (action$, {}, { matrix$ }) => matrix$.pipe(\n// when matrix finishes initialization, register to matrix presence events\nswitchMap(matrix => \n// matrix's 'User.presence' sometimes fail to fire, but generic 'event' is always fired,\n// and User (retrieved via matrix.getUser) is up-to-date before 'event' emits\nfromEvent(matrix, 'event').pipe(map(event => ({ event, matrix })))), filter(({ event }) => event.getType() === 'm.presence'), \n// parse peer address from userId\nmap(({ event, matrix }) => {\n    // as 'event' is emitted after user is (created and) updated, getUser always returns it\n    const user = matrix.getUser(event.getSender()), match = userRe.exec(user.userId), peerAddress = match && match[1];\n    // getAddress will convert any valid address into checksummed-format\n    return {\n        user,\n        matrix,\n        peerAddress: (peerAddress && getAddress(peerAddress)),\n    };\n}), \n// filter out events without userId in the right format (startWith hex-address)\nfilter(({ user, peerAddress }) => !!(user.presence && peerAddress)), withLatestFrom(\n// observable of all addresses whose presence monitoring was requested since init\naction$.pipe(filter(isActionOf(matrixRequestMonitorPresence)), scan((toMonitor, request) => toMonitor.add(request.meta.address), new Set()), startWith(new Set())), \n// known presences as { address: <last seen MatrixPresenceUpdateAction> } mapping\ngetPresences$(action$)), \n// filter out events from users we don't care about\n// i.e.: presence monitoring never requested\nfilter(([{ peerAddress }, toMonitor]) => toMonitor.has(peerAddress)), mergeMap(([{ user, matrix, peerAddress }, , presences]) => {\n    // first filter can't tell typescript this property will always be set!\n    const userId = user.userId, address = peerAddress, presence = user.presence, available = AVAILABLE.includes(presence);\n    if (address in presences &&\n        presences[address].payload.userId === userId &&\n        presences[address].payload.available === available)\n        // even if signature verification passes, this wouldn't change presence, so return early\n        return EMPTY;\n    // fetch profile info if user doesn't contain a displayName\n    const displayName$ = user.displayName\n        ? of(user.displayName)\n        : from(matrix.getProfileInfo(userId, 'displayname')).pipe(map(profile => profile.displayname), catchError(() => of(undefined)));\n    return displayName$.pipe(map(displayName => {\n        // errors raised here will be logged and ignored on catchError below\n        if (!displayName)\n            throw new Error(`Could not get displayName of \"${userId}\"`);\n        // ecrecover address, validating displayName is the signature of the userId\n        const recovered = verifyMessage(userId, displayName);\n        if (!recovered || recovered !== peerAddress)\n            throw new Error(`Could not verify displayName signature of \"${userId}\": got \"${recovered}\"`);\n        return recovered;\n    }), map(address => matrixPresenceUpdate({ userId, available, ts: user.lastPresenceTs }, { address })));\n}), catchError(err => (console.log('Error validating presence event, ignoring', err), EMPTY)));\n/**\n * Upon receiving a MessageSendAction, ensure there's a room for the given address\n * Requires address to have its presence monitored.\n *\n * @param action$ - Observable of messageSend actions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Observable of matrixRoom actions\n */\nexport const matrixCreateRoomEpic = (action$, state$, { matrix$ }) => combineLatest(getPresences$(action$), state$).pipe(\n// multicasting combined presences+state with a ReplaySubject makes it act as withLatestFrom\n// but working inside concatMap, which is called only at outer next and subscribe delayed\npublishReplay(1, undefined, presencesStateReplay$ => \n// actual output observable, handles MessageSendAction serially and create room if needed\naction$.pipe(filter(isActionOf(messageSend)), \n// this mergeMap is like withLatestFrom, but waits until matrix$ emits its only value\nmergeMap(action => matrix$.pipe(map(matrix => ({ action, matrix })))), \n// concatMap is used to prevent bursts of messages for a given address (eg. on startup)\n// of creating multiple rooms for same address\nconcatMap(({ action, matrix }) => \n// presencesStateReplay$+take(1) acts like withLatestFrom with cached result\npresencesStateReplay$.pipe(\n// wait for user to be monitored\nfilter(([presences]) => action.meta.address in presences), take(1), \n// if there's already a room state for address and it's present in matrix, skip\nfilter(([, state]) => !get(state, ['transport', 'matrix', 'rooms', action.meta.address, 0])), \n// else, create a room, invite known user and dispatch the respective MatrixRoomAction\n// to store it in state\nmergeMap(([presences]) => matrix.createRoom({\n    visibility: 'private',\n    invite: [presences[action.meta.address].payload.userId],\n})), map(({ room_id: roomId }) => matrixRoom({ roomId }, action.meta)))))));\n/**\n * Invites users coming online to rooms we may have with them\n *\n * @param action$ - Observable of matrixPresenceUpdate actions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Empty observable (whole side-effect on matrix instance)\n */\nexport const matrixInviteEpic = (action$, state$, { matrix$ }) => action$.pipe(filter(isActionOf(matrixPresenceUpdate)), filter(action => action.payload.available), \n// this mergeMap is like withLatestFrom, but waits until matrix$ emits its only value\nmergeMap(action => matrix$.pipe(map(matrix => ({ action, matrix })))), withLatestFrom(state$), mergeMap(([{ action, matrix }, state]) => {\n    const roomId = get(state, [\n        'transport',\n        'matrix',\n        'rooms',\n        action.meta.address,\n        0,\n    ]);\n    if (roomId) {\n        const room = matrix.getRoom(roomId);\n        if (room) {\n            const member = room.getMember(action.payload.userId);\n            if (!member)\n                return from(matrix.invite(roomId, action.payload.userId));\n        }\n    }\n    return EMPTY;\n}), ignoreElements());\n/**\n * Handle invites sent to us and accepts them iff sent by a monitored user\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Observable of matrixRoom actions\n */\nexport const matrixHandleInvitesEpic = (action$, {}, { matrix$ }) => matrix$.pipe(\n// when matrix finishes initialization, register to matrix invite events\nswitchMap(matrix => fromEvent(matrix, 'RoomMember.membership', (event, member) => ({ event, member, matrix }))), filter(\n// filter for invite events to us\n({ member, matrix }) => member.userId === matrix.getUserId() && member.membership === 'invite'), withLatestFrom(getPresences$(action$)), mergeMap(([{ event, member, matrix }, presences]) => {\n    const sender = event.getSender(), cachedPresence = find(presences, p => p.payload.userId === sender), senderPresence$ = cachedPresence\n        ? of(cachedPresence)\n        : action$.pipe(\n        // as these membership events can come up quite early, we delay continue processing\n        // them a while, to see if the sender is of interest to us (presence monitored)\n        filter(isActionOf(matrixPresenceUpdate)), filter(a => a.payload.userId === sender), take(1), \n        // Don't wait more than some arbitrary time for this sender presence update to show\n        // up; completes without emitting anything otherwise, ending this pipeline.\n        // This also works as a filter to continue processing invites only for monitored\n        // users, as it'll complete without emitting if no MatrixPresenceUpdateAction is\n        // found for sender in time\n        takeUntil(timer(30e3)));\n    return senderPresence$.pipe(map(senderPresence => ({ matrix, member, senderPresence })));\n}), mergeMap(({ matrix, member, senderPresence }) => \n// join room and emit MatrixRoomAction to make it default/first option for sender address\nfrom(matrix.joinRoom(member.roomId, { syncRoom: true })).pipe(map(() => matrixRoom({ roomId: member.roomId }, { address: senderPresence.meta.address })))));\n/**\n * Leave any excess room for a partner when creating or joining a new one.\n * Excess rooms are LRU beyond a given threshold (configurable, default=3) in address's rooms\n * queue and are checked (only) when a new one is added to it.\n *\n * @param action$ - Observable of matrixRoom actions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Observable of matrixRoomLeave actions\n */\nexport const matrixLeaveExcessRoomsEpic = (action$, state$, { matrix$, config$ }) => action$.pipe(\n// act whenever a new room is added to the address queue in state\nfilter(isActionOf(matrixRoom)), \n// this mergeMap is like withLatestFrom, but waits until matrix$ emits its only value\nmergeMap(action => matrix$.pipe(map(matrix => ({ action, matrix })))), withLatestFrom(state$, config$), mergeMap(([{ action, matrix }, state, { matrixExcessRooms }]) => {\n    const rooms = state.transport.matrix.rooms[action.meta.address];\n    return from(rooms.filter(({}, i) => i >= matrixExcessRooms)).pipe(mergeMap(roomId => matrix.leave(roomId).then(() => roomId)), map(roomId => matrixRoomLeave({ roomId }, action.meta)));\n}));\n/**\n * Leave any room which is neither global nor known as a room for some user of interest\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Empty observable (whole side-effect on matrix instance)\n */\nexport const matrixLeaveUnknownRoomsEpic = ({}, state$, { matrix$, config$ }) => matrix$.pipe(\n// when matrix finishes initialization, register to matrix Room events\nswitchMap(matrix => fromEvent(matrix, 'Room').pipe(map(room => ({ matrix, roomId: room.roomId })))), delay(180e3), // this room may become known later for some reason, so wait a little\nwithLatestFrom(state$, config$), \n// filter for leave events to us\nfilter(([{ matrix, roomId }, state, config]) => {\n    const room = matrix.getRoom(roomId);\n    if (!room)\n        return false; // room already gone while waiting\n    const globalRooms = globalRoomNames(config);\n    if (room.name && globalRooms.some(g => room.name.match(`#${g}:`)))\n        return false;\n    const rooms = get(state, ['transport', 'matrix', 'rooms'], {});\n    for (const address in rooms) {\n        for (const roomId of rooms[address]) {\n            if (roomId === room.roomId)\n                return false;\n        }\n    }\n    return true;\n}), mergeMap(([{ matrix, roomId }]) => matrix.leave(roomId)), ignoreElements());\n/**\n * If we leave a room for any reason (eg. a kick event), purge it from state\n * Notice excess rooms left by matrixLeaveExcessRoomsEpic are cleaned before the matrix event is\n * detected, and then no MatrixRoomLeaveAction is emitted for them by this epic.\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Observable of matrixRoomLeave actions\n */\nexport const matrixCleanLeftRoomsEpic = ({}, state$, { matrix$ }) => matrix$.pipe(\n// when matrix finishes initialization, register to matrix invite events\nswitchMap(matrix => fromEvent(matrix, 'Room.myMembership', (room, membership) => ({ room, membership, matrix }))), \n// filter for leave events to us\nfilter(({ membership }) => membership === 'leave'), withLatestFrom(state$), mergeMap(function* ([{ room }, state]) {\n    const rooms = get(state, ['transport', 'matrix', 'rooms'], {});\n    for (const address in rooms) {\n        for (const roomId of rooms[address]) {\n            if (roomId === room.roomId) {\n                yield matrixRoomLeave({ roomId }, { address: address });\n            }\n        }\n    }\n}));\n/**\n * Handles a [[messageSend]] action and send its message to the first room on queue for address\n *\n * @param action$ - Observable of messageSend actions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Observable of messageSent actions\n */\nexport const matrixMessageSendEpic = (action$, state$, { matrix$ }) => combineLatest(getPresences$(action$), state$).pipe(\n// multicasting combined presences+state with a ReplaySubject makes it act as withLatestFrom\n// but working inside concatMap, called only at outer emit and subscription delayed\npublishReplay(1, undefined, presencesStateReplay$ => \n// actual output observable, gets/wait for the user to be in a room, and then sendMessage\naction$.pipe(filter(isActionOf(messageSend)), \n// this mergeMap is like withLatestFrom, but waits until matrix$ emits its only value\nmergeMap(action => matrix$.pipe(map(matrix => ({ action, matrix })))), groupBy(({ action }) => action.meta.address), \n// merge all inner/grouped observables, so different user's \"queues\" can be parallel\nmergeMap(grouped$ => \n// per-user \"queue\"\ngrouped$.pipe(\n// each per-user \"queue\" (observable) are processed serially (because concatMap)\n// TODO: batch all pending messages in a single send message request, with retry\nconcatMap(({ action, matrix }) => presencesStateReplay$.pipe(\n// wait for address to be monitored, online and roomId to be in state.\n// ReplaySubject ensures it happens immediatelly if all conditions are satisfied\nfilter(([presences, state]) => action.meta.address in presences &&\n    presences[action.meta.address].payload.available &&\n    get(state, ['transport', 'matrix', 'rooms', action.meta.address, 0])), map(([, state]) => state.transport.matrix.rooms[action.meta.address][0]), distinctUntilChanged(), \n// get/wait room object for roomId\n// may wait for the room state to be populated (happens after createRoom resolves)\nswitchMap(roomId => getRoom$(matrix, roomId)), \n// get up-to-date/last presences at this point in time, which may have been updated\nwithLatestFrom(presencesStateReplay$), \n// get room member for partner userId\nmergeMap(([room, [presences]]) => {\n    // get latest known userId for address at this point in time\n    const userId = presences[action.meta.address].payload.userId;\n    const member = room.getMember(userId);\n    // if it's already present in room, return its membership\n    if (member && member.membership === 'join')\n        return of(member);\n    // else, wait for the user to join our newly created room\n    return fromEvent(matrix, 'RoomMember.membership', ({}, member) => member).pipe(\n    // use up-to-date presences again, which may have been updated while\n    // waiting for member join event (e.g. user roamed and was re-invited)\n    withLatestFrom(presencesStateReplay$), filter(([member, [presences]]) => member.roomId === room.roomId &&\n        member.userId === presences[action.meta.address].payload.userId &&\n        member.membership === 'join'), take(1), map(([member]) => member));\n}), take(1), // use first room/user which meets all requirements/filters so far\n// send message!\nmergeMap(member => {\n    const body = typeof action.payload.message === 'string'\n        ? action.payload.message\n        : encodeJsonMessage(action.payload.message);\n    return matrix.sendEvent(member.roomId, 'm.room.message', { body, msgtype: 'm.text' }, '');\n}), map(() => messageSent(action.payload, action.meta)))))))));\n/**\n * Handles a [[messageGlobalSend]] action and send one-shot message to a global room\n *\n * @param action$ - Observable of messageSend actions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Empty observable (whole side-effect on matrix instance)\n */\nexport const matrixMessageGlobalSendEpic = (action$, {}, { matrix$, config$ }) => \n// actual output observable, gets/wait for the user to be in a room, and then sendMessage\naction$.pipe(filter(isActionOf(messageGlobalSend)), \n// this mergeMap is like withLatestFrom, but waits until matrix$ emits its only value\nmergeMap(action => matrix$.pipe(map(matrix => ({ action, matrix })))), withLatestFrom(config$), mergeMap(([{ action, matrix }, config]) => {\n    const globalRooms = globalRoomNames(config);\n    if (!globalRooms.includes(action.meta.roomName)) {\n        console.warn('messageGlobalSend for unknown global room, ignoring', action.meta.roomName, globalRooms);\n        return EMPTY;\n    }\n    const serverName = getServerName(matrix.baseUrl), roomAlias = `#${action.meta.roomName}:${serverName}`;\n    return getRoom$(matrix, roomAlias).pipe(\n    // send message!\n    mergeMap(room => {\n        const body = typeof action.payload.message === 'string'\n            ? action.payload.message\n            : encodeJsonMessage(action.payload.message);\n        return matrix.sendEvent(room.roomId, 'm.room.message', { body, msgtype: 'm.text' }, '');\n    }));\n}), ignoreElements());\n/**\n * Subscribe to matrix messages and emits MessageReceivedAction upon receiving a valid message from\n * an user of interest (one valid signature from an address we monitor) in a room we have for them\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param matrix$ - RaidenEpicDeps members\n * @returns Observable of messageReceived actions\n */\nexport const matrixMessageReceivedEpic = (action$, state$, { matrix$, config$ }) => combineLatest(getPresences$(action$), state$).pipe(\n// multicasting combined presences+state with a ReplaySubject makes it act as withLatestFrom\n// but working inside concatMap, called only at outer emit and subscription delayed\npublishReplay(1, undefined, presencesStateReplay$ => \n// actual output observable, gets/wait for the user to be in a room, and then sendMessage\nmatrix$.pipe(\n// when matrix finishes initialization, register to matrix timeline events\nswitchMap(matrix => fromEvent(matrix, 'Room.timeline', (event, room) => ({ matrix, event, room }))), withLatestFrom(config$), \n// filter for text messages not from us and not from global rooms\nfilter(([{ matrix, event, room }, config]) => event.getType() === 'm.room.message' &&\n    event.event.content.msgtype === 'm.text' &&\n    event.getSender() !== matrix.getUserId() &&\n    !globalRoomNames(config).some(g => \n    // generate an alias for global room of given name, and check if room matches\n    roomMatch(`#${g}:${getServerName(matrix.getHomeserverUrl())}`, room))), mergeMap(([{ event, room }]) => presencesStateReplay$.pipe(filter(([presences, state]) => {\n    const presence = find(presences, ['payload.userId', event.getSender()]);\n    if (!presence)\n        return false;\n    const rooms = get(state, ['transport', 'matrix', 'rooms', presence.meta.address], []);\n    if (!rooms.includes(room.roomId))\n        return false;\n    return true;\n}), take(1), \n// take up to an arbitrary timeout to presence status for the sender\n// AND the room in which this message was sent to be in sender's address room queue\ntakeUntil(timer(30e3)), mergeMap(function* ([presences]) {\n    const presence = find(presences, ['payload.userId', event.getSender()]);\n    for (const line of (event.event.content.body || '').split('\\n')) {\n        let message;\n        try {\n            message = decodeJsonMessage(line);\n            const signer = getMessageSigner(message);\n            if (signer !== presence.meta.address)\n                throw new Error(`Signature mismatch: sender=${presence.meta.address} != signer=${signer}`);\n        }\n        catch (err) {\n            console.warn(`Could not decode message: ${line}: ${err}`);\n            message = undefined;\n        }\n        yield messageReceived({\n            text: line,\n            message,\n            ts: event.event.origin_server_ts,\n            userId: presence.payload.userId,\n            roomId: room.roomId,\n        }, presence.meta);\n    }\n}))))));\n/**\n * If matrix received a message from user in a room we have with them, but not the first on queue,\n * update queue so this room goes to the front and will be used as send message room from now on\n *\n * @param action$ - Observable of messageReceived actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of matrixRoom actions\n */\nexport const matrixMessageReceivedUpdateRoomEpic = (action$, state$) => action$.pipe(filter(isActionOf(messageReceived)), withLatestFrom(state$), filter(([action, state]) => {\n    const rooms = get(state, ['transport', 'matrix', 'rooms', action.meta.address], []);\n    return (!!action.payload.roomId &&\n        rooms.includes(action.payload.roomId) &&\n        rooms[0] !== action.payload.roomId);\n}), map(([action]) => matrixRoom({ roomId: action.payload.roomId }, action.meta)));\n/**\n * Channel monitoring triggers matrix presence monitoring for partner\n *\n * @param action$ - Observable of RaidenActions\n * @returns Observable of matrixRequestMonitorPresence actions\n */\nexport const matrixMonitorChannelPresenceEpic = (action$) => action$.pipe(filter(isActionOf(channelMonitored)), map(action => matrixRequestMonitorPresence(undefined, { address: action.meta.partner })));\n/**\n * Sends Delivered for specific messages\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param signer - RaidenEpicDeps members\n * @returns Observable of messageSend actions\n */\nexport const deliveredEpic = (action$, {}, { signer }) => {\n    const cache = new LruCache(32);\n    return action$.pipe(filter(isActionOf(messageReceived)), concatMap(action => {\n        const message = action.payload.message;\n        if (!message ||\n            !(Signed(Processed).is(message) ||\n                Signed(SecretRequest).is(message) ||\n                Signed(SecretReveal).is(message)))\n            return EMPTY;\n        const msgId = message.message_identifier, key = msgId.toString();\n        const cached = cache.get(key);\n        if (cached)\n            return of(messageSend({ message: cached }, action.meta));\n        const delivered = {\n            type: MessageType.DELIVERED,\n            delivered_message_identifier: msgId,\n        };\n        return from(signMessage(signer, delivered)).pipe(tap(signed => cache.put(key, signed)), map(signed => messageSend({ message: signed }, action.meta)));\n    }));\n};\n//# sourceMappingURL=epics.js.map","/* eslint-disable @typescript-eslint/camelcase */\nimport { combineLatest, EMPTY, from, merge, of } from 'rxjs';\nimport { catchError, concatMap, delay, exhaustMap, filter, first, ignoreElements, map, mergeMap, publishReplay, repeatWhen, take, takeUntil, tap, withLatestFrom, } from 'rxjs/operators';\nimport { isActionOf } from 'typesafe-actions';\nimport { bigNumberify } from 'ethers/utils';\nimport { Zero, One } from 'ethers/constants';\nimport { findKey, get } from 'lodash';\nimport { LruCache } from '../utils/lru';\nimport { messageReceived, messageSend, messageSent } from '../messages/actions';\nimport { LockedTransfer, LockExpired, MessageType, Processed, RefundTransfer, SecretRequest, SecretReveal, Signed, WithdrawExpired, WithdrawRequest, } from '../messages/types';\nimport { getBalanceProofFromEnvelopeMessage, signMessage } from '../messages/utils';\nimport { ChannelState } from '../channels/state';\nimport { channelClose, channelClosed, newBlock } from '../channels/actions';\nimport { matrixRequestMonitorPresence } from '../transport/actions';\nimport { transfer, transferExpire, transferExpired, transferExpireFailed, transferExpireProcessed, transferFailed, transferProcessed, transferred, transferRefunded, transferSecret, transferSecretRequest, transferSecretReveal, transferSigned, transferUnlock, transferUnlocked, transferUnlockProcessed, withdrawReceiveRequest, withdrawSendConfirmation, } from './actions';\nimport { getLocksroot, getSecrethash, makeMessageId } from './utils';\n/**\n * Return the next nonce for a (possibly missing) balanceProof, or else BigNumber(1)\n *\n * @param balanceProof - Balance proof to increase nonce from\n * @returns Increased nonce, or One if no balance proof provided\n */\nfunction nextNonce(balanceProof) {\n    if (balanceProof)\n        return balanceProof.nonce.add(1);\n    else\n        return One;\n}\n/**\n * Create an observable to compose and sign a LockedTransfer message/transferSigned action\n * As it's an async observable which depends on state and may return an action which changes it,\n * the returned observable must be subscribed in a serialized context that ensures non-concurrent\n * write access to the channel's balance proof (e.g. concatMap)\n *\n * @param state$ - Observable of current state\n * @param action - transfer request action to be sent\n * @param network,address,signer - RaidenEpicDeps members\n * @returns Observable of transferSigned|transferSecret|transferFailed actions\n */\nfunction makeAndSignTransfer(state$, action, { network, address, signer, config$ }) {\n    return combineLatest(state$, config$).pipe(first(), mergeMap(([state, { revealTimeout }]) => {\n        if (action.meta.secrethash in state.sent) {\n            // don't throw to avoid emitting transferFailed, to just wait for already pending transfer\n            console.error('transfer already present', action.meta);\n            return EMPTY;\n        }\n        // assume paths are valid and recipient is first hop of first route\n        // compose metadata from it, and use first path fee\n        const metadata = {\n            routes: action.payload.paths.map(({ path }) => ({ route: path })),\n        }, fee = action.payload.paths[0].fee, recipient = action.payload.paths[0].path[0];\n        const channel = state.channels[action.payload.tokenNetwork][recipient];\n        // check below shouldn't fail because of route validation in pathFindServiceEpic\n        // used here mostly for type narrowing on channel union\n        if (!channel || channel.state !== ChannelState.open)\n            throw new Error('not open');\n        const lock = {\n            amount: action.payload.value.add(fee),\n            expiration: bigNumberify(state.blockNumber + revealTimeout * 2),\n            secrethash: action.meta.secrethash,\n        }, locks = [...(channel.own.locks || []), lock], locksroot = getLocksroot(locks), token = findKey(state.tokens, tn => tn === action.payload.tokenNetwork);\n        console.log('Signing transfer of value', action.payload.value.toString(), 'of token', token, ', to', action.payload.target, ', through routes', action.payload.paths, ', paying', fee.toString(), 'in fees.');\n        const message = {\n            type: MessageType.LOCKED_TRANSFER,\n            message_identifier: makeMessageId(),\n            chain_id: bigNumberify(network.chainId),\n            token_network_address: action.payload.tokenNetwork,\n            channel_identifier: bigNumberify(channel.id),\n            nonce: nextNonce(channel.own.balanceProof),\n            transferred_amount: (channel.own.balanceProof\n                ? channel.own.balanceProof.transferredAmount\n                : Zero),\n            locked_amount: (channel.own.balanceProof\n                ? channel.own.balanceProof.lockedAmount\n                : Zero).add(lock.amount),\n            locksroot,\n            payment_identifier: action.payload.paymentId,\n            token,\n            recipient,\n            lock,\n            target: action.payload.target,\n            initiator: address,\n            fee: Zero,\n            metadata,\n        };\n        return from(signMessage(signer, message)).pipe(mergeMap(function* (signed) {\n            // besides transferSigned, also yield transferSecret (for registering) if we know it\n            if (action.payload.secret)\n                yield transferSecret({ secret: action.payload.secret }, action.meta);\n            yield transferSigned({ message: signed, fee }, action.meta);\n            // messageSend LockedTransfer handled by transferSignedRetryMessageEpic\n        }));\n    }), catchError(err => of(transferFailed(err, action.meta))));\n}\n/**\n * Create an observable to compose and sign a Unlock message/transferUnlocked action\n * As it's an async observable which depends on state and may return an action which changes it,\n * the returned observable must be subscribed in a serialized context that ensures non-concurrent\n * write access to the channel's balance proof (e.g. concatMap)\n *\n * @param state$ - Observable of current state\n * @param action - transferUnlock request action to be sent\n * @param signer - RaidenEpicDeps members\n * @returns Observable of transferUnlocked actions\n */\nfunction makeAndSignUnlock(state$, action, { signer }) {\n    return state$.pipe(first(), mergeMap(state => {\n        const secrethash = action.meta.secrethash;\n        if (!(secrethash in state.sent))\n            throw new Error('unknown transfer');\n        const transfer = state.sent[secrethash].transfer[1], channel = get(state.channels, [\n            transfer.token_network_address,\n            transfer.recipient,\n        ]);\n        // shouldn't happen, channel close clears transfers, but unlock may already have been queued\n        if (!channel || channel.state !== ChannelState.open || !channel.own.balanceProof)\n            throw new Error('channel gone, not open or no balanceProof');\n        let signed$;\n        if (state.sent[secrethash].unlock) {\n            // unlock already signed, use cached\n            signed$ = of(state.sent[secrethash].unlock[1]);\n        }\n        else {\n            // don't forget to check after signature too, may have expired by then\n            if (transfer.lock.expiration.lte(state.blockNumber))\n                throw new Error('lock expired');\n            const locks = (channel.own.locks || []).filter(l => l.secrethash !== secrethash), locksroot = getLocksroot(locks);\n            const message = {\n                type: MessageType.UNLOCK,\n                message_identifier: makeMessageId(),\n                chain_id: transfer.chain_id,\n                token_network_address: transfer.token_network_address,\n                channel_identifier: transfer.channel_identifier,\n                nonce: nextNonce(channel.own.balanceProof),\n                transferred_amount: channel.own.balanceProof.transferredAmount.add(transfer.lock.amount),\n                locked_amount: channel.own.balanceProof.lockedAmount.sub(transfer.lock.amount),\n                locksroot,\n                payment_identifier: transfer.payment_identifier,\n                secret: state.secrets[action.meta.secrethash].secret,\n            };\n            signed$ = from(signMessage(signer, message));\n        }\n        return signed$.pipe(withLatestFrom(state$), mergeMap(function* ([signed, state]) {\n            if (transfer.lock.expiration.lte(state.blockNumber))\n                throw new Error('lock expired!');\n            if (state.sent[secrethash].channelClosed)\n                throw new Error('channel closed!');\n            yield transferUnlocked({ message: signed }, action.meta);\n            // messageSend Unlock handled by transferUnlockedRetryMessageEpic\n            // we don't check if transfer was refunded. If partner refunded the transfer but still\n            // forwarded the payment, we still act honestly and unlock if they revealed\n        }));\n    }), catchError(err => {\n        console.error('Error when trying to unlock after SecretReveal', err);\n        return EMPTY;\n    }));\n}\n/**\n * Create an observable to compose and sign a LockExpired message/transferExpired action\n * As it's an async observable which depends on state and may return an action which changes it,\n * the returned observable must be subscribed in a serialized context that ensures non-concurrent\n * write access to the channel's balance proof (e.g. concatMap)\n *\n * @param state$ - Observable of current state\n * @param action - transfer request action to be sent\n * @param signer - RaidenEpicDeps members\n * @returns Observable of transferExpired|transferExpireFailed actions\n */\nfunction makeAndSignLockExpired(state$, action, { signer }) {\n    return state$.pipe(first(), mergeMap(state => {\n        const secrethash = action.meta.secrethash;\n        if (!(secrethash in state.sent))\n            throw new Error('unknown transfer');\n        const transfer = state.sent[secrethash].transfer[1], channel = get(state.channels, [\n            transfer.token_network_address,\n            transfer.recipient,\n        ]);\n        if (!channel || channel.state !== ChannelState.open || !channel.own.balanceProof)\n            throw new Error('channel gone, not open or no balanceProof');\n        let signed$;\n        if (state.sent[secrethash].lockExpired) {\n            // lockExpired already signed, use cached\n            signed$ = of(state.sent[secrethash].lockExpired[1]);\n        }\n        else {\n            if (transfer.lock.expiration.gte(state.blockNumber))\n                throw new Error('lock not yet expired');\n            else if (state.sent[secrethash].unlock)\n                throw new Error('transfer already unlocked');\n            const locks = (channel.own.locks || []).filter(l => l.secrethash !== secrethash), locksroot = getLocksroot(locks);\n            const message = {\n                type: MessageType.LOCK_EXPIRED,\n                message_identifier: makeMessageId(),\n                chain_id: transfer.chain_id,\n                token_network_address: transfer.token_network_address,\n                channel_identifier: transfer.channel_identifier,\n                nonce: nextNonce(channel.own.balanceProof),\n                transferred_amount: channel.own.balanceProof.transferredAmount,\n                locked_amount: channel.own.balanceProof.lockedAmount.sub(transfer.lock.amount),\n                locksroot,\n                recipient: transfer.recipient,\n                secrethash,\n            };\n            signed$ = from(signMessage(signer, message));\n        }\n        return signed$.pipe(\n        // messageSend LockExpired handled by transferExpiredRetryMessageEpic\n        map(signed => transferExpired({ message: signed }, action.meta)));\n    }), catchError(err => of(transferExpireFailed(err, action.meta))));\n}\n/**\n * Create an observable to compose and sign a [[WithdrawConfirmation]] message\n *\n * Validate we're inside expiration timeout, channel exists and is open, and that total_withdraw is\n * less than or equal withdrawable amount (while we don't receive, partner.deposit +\n * own.transferredAmount).\n * We need it inside [[transferGenerateAndSignEnvelopeMessageEpic]] concatMap/lock because we read\n * and change the 'nonce', even though WithdrawConfirmation doesn't carry a full balanceProof.\n * Also, instead of storing the messages in state and retrying, we just cache it and send cached\n * signed message on each received request.\n *\n * TODO: once we're able to receive transfers, instead of considering only own.transferredAmount,\n * we must also listen to ChannelWithdraw events, store it alongside pending withdraw requests and\n * take that into account before accepting a transfer and also total balance/capacity for accepting\n * a total_withdraw from a WithdrawRequest.\n *\n * @param state$ - Observable of current state\n * @param action - Withdraw request which caused this handling\n * @param signer - RaidenEpicDeps members\n * @param cache - A Map to store and reuse previously Signed<WithdrawConfirmation>\n * @returns Observable of transferExpired|transferExpireFailed actions\n */\nfunction makeAndSignWithdrawConfirmation(state$, action, { signer }, cache) {\n    return state$.pipe(first(), mergeMap(state => {\n        const request = action.payload.message;\n        const channel = get(state.channels, [\n            action.meta.tokenNetwork,\n            action.meta.partner,\n        ]);\n        // check channel is in valid state and requested total_withdraw is valid\n        // withdrawable amount is: total_withdraw <= partner.deposit + own.transferredAmount\n        if (!channel ||\n            channel.state !== ChannelState.open ||\n            !request.channel_identifier.eq(channel.id))\n            throw new Error('channel gone or not open');\n        else if (request.expiration.lte(state.blockNumber))\n            throw new Error('WithdrawRequest expired');\n        else if (request.total_withdraw.gt(channel.partner.deposit.add(channel.own.balanceProof ? channel.own.balanceProof.transferredAmount : Zero)))\n            throw new Error('invalid total_withdraw, greater than partner.deposit + own.transferredAmount');\n        let signed$;\n        const key = request.message_identifier.toString();\n        const cached = cache.get(key);\n        // ensure all parameters are equal the cached one before returning it, or else sign again\n        if (cached &&\n            cached.chain_id.eq(request.chain_id) &&\n            cached.token_network_address === request.token_network_address &&\n            cached.channel_identifier.eq(request.channel_identifier) &&\n            cached.participant === request.participant &&\n            cached.total_withdraw.eq(request.total_withdraw) &&\n            cached.expiration.eq(request.expiration)) {\n            signed$ = of(cached);\n        }\n        else {\n            const confirmation = {\n                type: MessageType.WITHDRAW_CONFIRMATION,\n                message_identifier: request.message_identifier,\n                chain_id: request.chain_id,\n                token_network_address: request.token_network_address,\n                channel_identifier: request.channel_identifier,\n                participant: request.participant,\n                total_withdraw: request.total_withdraw,\n                nonce: nextNonce(channel.own.balanceProof),\n                expiration: request.expiration,\n            };\n            signed$ = from(signMessage(signer, confirmation)).pipe(tap(signed => cache.put(key, signed)));\n        }\n        return signed$.pipe(map(signed => withdrawSendConfirmation({ message: signed }, action.meta)));\n    }), catchError(err => {\n        console.error('Error trying to handle WithdrawRequest, ignoring:', err);\n        return EMPTY;\n    }));\n}\n/**\n * Serialize creation and signing of BalanceProof-changing messages or actions\n * Actions which change any data in any channel balance proof must only ever be created reading\n * state inside the serialization flow provided by the concatMap, and also be composed and produced\n * inside it (inner, subscribed observable)\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param deps - RaidenEpicDeps\n * @returns Observable of output actions for this epic\n */\nexport const transferGenerateAndSignEnvelopeMessageEpic = (action$, state$, deps) => state$.pipe(publishReplay(1, undefined, state$ => {\n    const withdrawCache = new LruCache(32);\n    return action$.pipe(filter(isActionOf([transfer, transferUnlock, transferExpire, withdrawReceiveRequest])), concatMap(action => isActionOf(transfer, action)\n        ? makeAndSignTransfer(state$, action, deps)\n        : isActionOf(transferUnlock, action)\n            ? makeAndSignUnlock(state$, action, deps)\n            : isActionOf(transferExpire, action)\n                ? makeAndSignLockExpired(state$, action, deps)\n                : makeAndSignWithdrawConfirmation(state$, action, deps, withdrawCache)));\n}));\n/**\n * Handles a transferSigned action and retry messageSend until transfer is gone (completed with\n * success or error) OR Processed message for LockedTransfer received.\n * transferSigned for pending LockedTransfer's may be re-emitted on startup for pending transfer,\n * to start retrying sending the message again until stop condition is met.\n *\n * @param action$ - Observable of transferSigned actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of messageSend actions\n */\nexport const transferSignedRetryMessageEpic = (action$, state$) => state$.pipe(publishReplay(1, undefined, state$ => action$.pipe(filter(isActionOf(transferSigned)), mergeMap(action => {\n    const secrethash = action.meta.secrethash, signed = action.payload.message, send = messageSend({ message: signed }, { address: signed.recipient });\n    // emit Send once immediatelly, then wait until respective messageSent, then completes\n    const sendOnceAndWaitSent$ = merge(of(send), action$.pipe(filter(a => isActionOf(messageSent, a) &&\n        a.payload.message === send.payload.message &&\n        a.meta.address === send.meta.address), take(1), \n    // don't output messageSent, just wait for it before completing\n    ignoreElements()));\n    return sendOnceAndWaitSent$.pipe(\n    // Resubscribe/retry every 30s after messageSend succeeds with messageSent\n    // Notice first (or any) messageSend can wait for a long time before succeeding, as it\n    // waits for address's user in transport to be online and joined room before actually\n    // sending the message. That's why repeatWhen emits/resubscribe only some time after\n    // sendOnceAndWaitSent$ completes, instead of a plain 'interval'\n    // TODO: configurable retry delay, possibly use an exponential backoff timeout strat\n    repeatWhen(completed$ => completed$.pipe(delay(30e3))), \n    // until transferProcessed received OR transfer completed OR channelClosed\n    takeUntil(state$.pipe(filter(state => !!state.sent[secrethash].transferProcessed ||\n        !!state.sent[secrethash].unlockProcessed ||\n        !!state.sent[secrethash].lockExpiredProcessed ||\n        !!state.sent[secrethash].channelClosed))));\n}))));\n/**\n * Handles a transferUnlocked action and retry messageSend until transfer is gone (completed with\n * success or error).\n * transferUnlocked for pending Unlock's may be re-emitted on startup for pending transfer, to\n * start retrying sending the message again until stop condition is met.\n *\n * @param action$ - Observable of transferUnlocked actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of messageSend actions\n */\nexport const transferUnlockedRetryMessageEpic = (action$, state$) => state$.pipe(publishReplay(1, undefined, state$ => action$.pipe(filter(isActionOf(transferUnlocked)), withLatestFrom(state$), mergeMap(([action, state]) => {\n    const secrethash = action.meta.secrethash;\n    if (!(secrethash in state.sent))\n        return EMPTY; // shouldn't happen\n    const unlock = action.payload.message, transfer = state.sent[secrethash].transfer[1], send = messageSend({ message: unlock }, { address: transfer.recipient });\n    // emit Send once immediatelly, then wait until respective messageSent, then completes\n    const sendOnceAndWaitSent$ = merge(of(send), action$.pipe(filter(a => isActionOf(messageSent, a) &&\n        a.payload.message === send.payload.message &&\n        a.meta.address === send.meta.address), take(1), \n    // don't output messageSent, just wait for it before completing\n    ignoreElements()));\n    return sendOnceAndWaitSent$.pipe(\n    // Resubscribe/retry every 30s after messageSend succeeds with messageSent\n    // Notice first (or any) messageSend can wait for a long time before succeeding, as it\n    // waits for address's user in transport to be online and joined room before actually\n    // sending the message. That's why repeatWhen emits/resubscribe only some time after\n    // sendOnceAndWaitSent$ completes, instead of a plain 'interval'\n    // TODO: configurable retry delay, possibly use an exponential backoff timeout strat\n    repeatWhen(completed$ => completed$.pipe(delay(30e3))), \n    // until transferUnlockProcessed OR channelClosed\n    takeUntil(state$.pipe(filter(state => !!state.sent[secrethash].unlockProcessed ||\n        !!state.sent[secrethash].channelClosed))));\n}))));\n/**\n * Handles a transferExpired action and retry messageSend until transfer is gone (completed with\n * success or error).\n * transferExpired for pending LockExpired's may be re-emitted on startup for pending transfer, to\n * start retrying sending the message again until stop condition is met.\n *\n * @param action$ - Observable of transferExpired actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of messageSend actions\n */\nexport const transferExpiredRetryMessageEpic = (action$, state$) => state$.pipe(publishReplay(1, undefined, state$ => action$.pipe(filter(isActionOf(transferExpired)), withLatestFrom(state$), mergeMap(([action, state]) => {\n    const secrethash = action.meta.secrethash;\n    if (!(secrethash in state.sent))\n        return EMPTY; // shouldn't happen\n    const lockExpired = action.payload.message, send = messageSend({ message: lockExpired }, { address: state.sent[secrethash].transfer[1].recipient });\n    // emit Send once immediatelly, then wait until respective messageSent, then completes\n    const sendOnceAndWaitSent$ = merge(of(send), action$.pipe(filter(a => isActionOf(messageSent, a) &&\n        a.payload.message === send.payload.message &&\n        a.meta.address === send.meta.address), take(1), \n    // don't output messageSent, just wait for it before completing\n    ignoreElements()));\n    return sendOnceAndWaitSent$.pipe(\n    // Resubscribe/retry every 30s after messageSend succeeds with messageSent\n    // Notice first (or any) messageSend can wait for a long time before succeeding, as it\n    // waits for address's user in transport to be online and joined room before actually\n    // sending the message. That's why repeatWhen emits/resubscribe only some time after\n    // sendOnceAndWaitSent$ completes, instead of a plain 'interval'\n    // TODO: configurable retry delay, possibly use an exponential backoff timeout strat\n    repeatWhen(completed$ => completed$.pipe(delay(30e3))), \n    // until transferExpireProcessed OR channelClosed\n    takeUntil(state$.pipe(filter(state => !!state.sent[secrethash].lockExpiredProcessed ||\n        !!state.sent[secrethash].channelClosed))));\n}))));\n/**\n * Process newBlocks, emits transferExpire (request to compose&sign LockExpired for a transfer)\n * if pending transfer's lock expired and transfer didn't unlock (succeed) in time\n * Also, emits transferFailed, to notify users that a transfer has failed (although it'll only be\n * considered as completed with fail once the transferExpireProcessed arrives).\n *\n * @param action$ - Observable of newBlock|transferExpired|transferExpireFailed actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of transferExpire|transferFailed actions\n */\nexport const transferAutoExpireEpic = (action$, state$) => action$.pipe(filter(isActionOf(newBlock)), withLatestFrom(state$), \n// exhaustMap ignores new blocks while previous request batch is still pending\nexhaustMap(([{ payload: { blockNumber } }, state]) => {\n    const requests$ = [];\n    for (const [key, sent] of Object.entries(state.sent)) {\n        if (sent.unlock ||\n            sent.lockExpired ||\n            sent.channelClosed ||\n            sent.transfer[1].lock.expiration.gte(blockNumber))\n            continue;\n        const secrethash = key;\n        // this observable acts like a Promise: emits request once, completes on success/failure\n        const requestAndWait$ = merge(\n        // output once tranferExpire\n        of(transferExpire(undefined, { secrethash })), \n        // but wait until respective success/failure action is seen before completing\n        action$.pipe(filter(a => isActionOf([transferExpired, transferExpireFailed], a) &&\n            a.meta.secrethash === secrethash), take(1), \n        // don't output success/failure action, just wait for first match to complete\n        ignoreElements()));\n        requests$.push(requestAndWait$);\n        // notify users that this transfer failed definitely\n        requests$.push(of(transferFailed(new Error(`transfer expired at block=${sent.transfer[1].lock.expiration.toString()}`), { secrethash })));\n    }\n    // process all requests before completing and restart handling newBlocks (in exhaustMap)\n    return merge(...requests$);\n}));\n/**\n * Re-queue pending transfer's BalanceProof/Envelope messages for retry on init\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of transferSigned|transferUnlocked actions\n */\nexport const initQueuePendingEnvelopeMessagesEpic = ({}, state$) => state$.pipe(first(), mergeMap(function* (state) {\n    // loop over all pending transfers\n    for (const [key, sent] of Object.entries(state.sent)) {\n        const secrethash = key;\n        // transfer already completed or channelClosed\n        if (sent.unlockProcessed || sent.lockExpiredProcessed || sent.channelClosed)\n            continue;\n        // on init, request monitor presence of any pending transfer target\n        yield matrixRequestMonitorPresence(undefined, { address: sent.transfer[1].target });\n        // Processed not received yet for LockedTransfer\n        if (!sent.transferProcessed)\n            yield transferSigned({ message: sent.transfer[1], fee: sent.fee }, { secrethash });\n        // already unlocked, but Processed not received yet for Unlock\n        if (sent.unlock)\n            yield transferUnlocked({ message: sent.unlock[1] }, { secrethash });\n        // lock expired, but Processed not received yet for LockExpired\n        if (sent.lockExpired)\n            yield transferExpired({ message: sent.lockExpired[1] }, { secrethash });\n    }\n}));\n/**\n * Handles receiving a signed Processed for some sent LockedTransfer\n * This will persist the Processed reply in transfer state and stop message retry\n *\n * @param action$ - Observable of messageReceived actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of transferProcessed actions\n */\nexport const transferProcessedReceivedEpic = (action$, state$) => action$.pipe(filter(isActionOf(messageReceived)), withLatestFrom(state$), mergeMap(function* ([action, state]) {\n    const message = action.payload.message;\n    if (!message || !Signed(Processed).is(message))\n        return;\n    let secrethash = undefined;\n    for (const [key, sent] of Object.entries(state.sent)) {\n        if (sent.transfer[1].message_identifier.eq(message.message_identifier) &&\n            sent.transfer[1].recipient === action.meta.address) {\n            secrethash = key;\n            break;\n        }\n    }\n    if (!secrethash)\n        return;\n    yield transferProcessed({ message }, { secrethash });\n}));\n/**\n * Handles receiving a signed SecretRequest from target for some sent LockedTransfer\n * Emits a transferSecretRequest action only if all conditions are met\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of output actions for this epic\n */\nexport const transferSecretRequestedEpic = (action$, state$) => action$.pipe(filter(isActionOf(messageReceived)), withLatestFrom(state$), mergeMap(function* ([action, state]) {\n    const message = action.payload.message;\n    if (!message || !Signed(SecretRequest).is(message))\n        return;\n    // proceed only if we know the secret and the transfer\n    if (!(message.secrethash in state.secrets) || !(message.secrethash in state.sent))\n        return;\n    const transfer = state.sent[message.secrethash].transfer[1], fee = state.sent[message.secrethash].fee, value = transfer.lock.amount.sub(fee);\n    if (transfer.target !== action.meta.address || // reveal only to target\n        !transfer.payment_identifier.eq(message.payment_identifier)) {\n        console.warn('Invalid SecretRequest for transfer', message, transfer);\n    }\n    else if (!message.expiration.lte(transfer.lock.expiration) ||\n        !message.expiration.gt(state.blockNumber)) {\n        console.warn('SecretRequest for expired transfer', message, transfer);\n    }\n    else if (!message.amount.gte(value)) {\n        console.warn('SecretRequest for amount too small!', message, transfer);\n    } /* accept request */\n    else {\n        if (!message.amount.eq(value))\n            console.warn('Accepted SecretRequest for amount different than sent', message, transfer);\n        yield transferSecretRequest({ message }, { secrethash: message.secrethash });\n    }\n    // we don't check if transfer was refunded. If partner refunded the transfer but still\n    // forwarded the payment, they would be in risk of losing their money, not us\n}));\n/**\n * Handles a transferSecretRequest action to send the respective secret to target\n * It both emits transferSecretReveal (to persist sent SecretReveal in state and indicate that\n * the secret was revealed and thus the transfer should be assumed as succeeded) as well as\n * triggers sending the message once. New SecretRequests will cause a new transferSecretRequest,\n * which will re-send the cached SecretReveal.\n *\n * @param action$ - Observable of transferSecretRequest actions\n * @param state$ - Observable of RaidenStates\n * @param signer - RaidenEpicDeps signer\n * @returns Observable of transferSecretReveal|messageSend actions\n */\nexport const transferSecretRevealEpic = (action$, state$, { signer }) => state$.pipe(publishReplay(1, undefined, state$ => action$.pipe(filter(isActionOf(transferSecretRequest)), concatMap(action => state$.pipe(first(), mergeMap(state => {\n    const target = state.sent[action.meta.secrethash].transfer[1].target;\n    let reveal$;\n    if (state.sent[action.meta.secrethash].secretReveal)\n        reveal$ = of(state.sent[action.meta.secrethash].secretReveal[1]);\n    else {\n        const message = {\n            type: MessageType.SECRET_REVEAL,\n            message_identifier: makeMessageId(),\n            secret: state.secrets[action.meta.secrethash].secret,\n        };\n        reveal$ = from(signMessage(signer, message));\n    }\n    return reveal$.pipe(mergeMap(function* (message) {\n        yield transferSecretReveal({ message }, action.meta);\n        yield messageSend({ message }, { address: target });\n    }));\n}))))));\n/**\n * Handles receiving a valid SecretReveal from recipient (neighbor/partner)\n * This indicates that the partner knowws the secret, and we should Unlock to avoid going on-chain.\n * The transferUnlock action is a request for the unlocking to be generated and sent.\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of output actions for this epic\n */\nexport const transferSecretRevealedEpic = (action$, state$) => action$.pipe(filter(isActionOf(messageReceived)), withLatestFrom(state$), mergeMap(function* ([action, state]) {\n    const message = action.payload.message;\n    if (!message || !Signed(SecretReveal).is(message))\n        return;\n    const secrethash = getSecrethash(message.secret);\n    if (!(secrethash in state.sent) ||\n        action.meta.address !== state.sent[secrethash].transfer[1].recipient ||\n        // don't unlock if channel closed\n        state.sent[secrethash].channelClosed ||\n        // don't unlock again if already unlocked, retry handled by transferUnlockedRetryMessageEpic\n        // in the future, we may avoid retry until Processed, and [re]send once per SecretReveal\n        state.sent[secrethash].unlock)\n        return;\n    // transferSecret is noop if we already know the secret (e.g. we're the initiator)\n    yield transferSecret({ secret: message.secret }, { secrethash });\n    // request unlock to be composed, signed & sent to partner\n    yield transferUnlock(undefined, { secrethash });\n}));\n/**\n * Handles receiving a signed Processed for some sent Unlock\n * It sends the success action for transfer (which resolves any pending Promise), marking it as\n * completed successfuly by setting sent.unlockProcessed\n *\n * @param action$ - Observable of messageReceived actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of transferred|transferUnlockProcessed actions\n */\nexport const transferUnlockProcessedReceivedEpic = (action$, state$) => action$.pipe(filter(isActionOf(messageReceived)), withLatestFrom(state$), mergeMap(function* ([action, state]) {\n    const message = action.payload.message;\n    if (!message || !Signed(Processed).is(message))\n        return;\n    let secrethash;\n    for (const [key, sent] of Object.entries(state.sent)) {\n        if (sent.unlock &&\n            sent.unlock[1].message_identifier.eq(message.message_identifier) &&\n            sent.transfer[1].recipient === action.meta.address) {\n            secrethash = key;\n            break;\n        }\n    }\n    if (!secrethash)\n        return;\n    yield transferred({\n        balanceProof: getBalanceProofFromEnvelopeMessage(state.sent[secrethash].unlock[1]),\n    }, { secrethash });\n    yield transferUnlockProcessed({ message }, { secrethash });\n}));\n/**\n * Handles receiving a signed Processed for some sent LockExpired\n * It marks the end of the unhappy case, by setting sent.lockExpiredProcessed\n * transferFailed was already sent at newBlock handling/transferExpire time\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of output actions for this epic\n */\nexport const transferExpireProcessedEpic = (action$, state$) => action$.pipe(filter(isActionOf(messageReceived)), withLatestFrom(state$), mergeMap(function* ([action, state]) {\n    const message = action.payload.message;\n    if (!message || !Signed(Processed).is(message))\n        return;\n    let secrethash;\n    for (const [key, sent] of Object.entries(state.sent)) {\n        if (sent.lockExpired &&\n            sent.lockExpired[1].message_identifier.eq(message.message_identifier) &&\n            sent.transfer[1].recipient === action.meta.address) {\n            secrethash = key;\n            break;\n        }\n    }\n    if (!secrethash)\n        return;\n    yield transferExpireProcessed({ message }, { secrethash });\n}));\n/**\n * Complete or fail any pending transfer for any closing or closed channels\n * Transfer is considered successful if secret was revealed (as it could be claimed on-chain),\n * else it's considered as failed as couldn't succeed inside expiration timeout\n *\n * @param action$ - Observable of channelClose|channelClosed actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of transferred|transferFailed actions\n */\nexport const transferChannelClosedEpic = (action$, state$) => action$.pipe(filter(isActionOf([channelClose, channelClosed])), withLatestFrom(state$), mergeMap(function* ([action, state]) {\n    for (const [key, sent] of Object.entries(state.sent)) {\n        const secrethash = key, transfer = sent.transfer[1];\n        if (transfer.token_network_address !== action.meta.tokenNetwork ||\n            transfer.recipient !== action.meta.partner)\n            continue;\n        // as we can't know for sure if recipient/partner received the secret or unlock,\n        //consider transfer failed iff neither the secret was revealed nor the unlock happened\n        if (!sent.secretReveal && !sent.unlock)\n            yield transferFailed(new Error(`Channel closed before revealing or unlocking`), {\n                secrethash,\n            });\n        else if (state.sent[secrethash].unlock)\n            yield transferred({\n                balanceProof: getBalanceProofFromEnvelopeMessage(state.sent[secrethash].unlock[1]),\n            }, { secrethash });\n        else\n            yield transferred({}, { secrethash });\n    }\n}));\n/**\n * Receiving RefundTransfer for pending transfer fails it\n *\n * @param action$ - Observable of messageReceived actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of transferFailed|transferRefunded actions\n */\nexport const transferRefundedEpic = (action$, state$) => action$.pipe(filter(isActionOf(messageReceived)), withLatestFrom(state$), mergeMap(function* ([action, state]) {\n    const message = action.payload.message;\n    if (!message || !Signed(RefundTransfer).is(message))\n        return;\n    const secrethash = message.lock.secrethash;\n    if (!(secrethash in state.sent))\n        return;\n    const [, transfer] = state.sent[secrethash].transfer;\n    if (message.initiator !== transfer.recipient ||\n        !message.payment_identifier.eq(transfer.payment_identifier) ||\n        !message.lock.amount.eq(transfer.lock.amount) ||\n        !message.lock.expiration.eq(transfer.lock.expiration) ||\n        state.sent[secrethash].unlock || // already unlocked\n        state.sent[secrethash].lockExpired || // already expired\n        state.sent[secrethash].channelClosed || // channel closed\n        message.lock.expiration.lte(state.blockNumber) // lock expired but transfer didn't yet\n    )\n        return;\n    yield transferRefunded({ message }, { secrethash });\n    yield transferFailed(new Error('transfer refunded'), { secrethash });\n}));\n/**\n * Sends Processed for unhandled nonce'd messages\n *\n * We don't yet support receiving nor mediating transfers (LockedTransfer, RefundTransfer), but\n * also don't want the partner to keep retrying any messages intended for us indefinitely.\n * That's why we decided to just answer them with Processed, to clear their queue. Of course, we\n * still don't validate, store state for these messages nor handle them in any way (e.g. requesting\n * secret from initiator), so any transfer is going to expire, and then we also reply Processed for\n * the respective LockExpired.\n * Additionally, we hook in sending Processed for other messages which contain nonces (and require\n * Processed reply to stop being retried) but are safe to be ignored, like WithdrawExpired.\n *\n * @param action$ - Observable of messageReceived actions\n * @param state$ - Observable of RaidenStates\n * @param signer - RaidenEpicDeps members\n * @returns Observable of messageSend actions\n */\nexport const transferReceivedReplyProcessedEpic = (action$, {}, { signer }) => {\n    const cache = new LruCache(32);\n    return action$.pipe(filter(isActionOf(messageReceived)), concatMap(action => {\n        const message = action.payload.message;\n        if (!message ||\n            !(Signed(LockedTransfer).is(message) ||\n                Signed(RefundTransfer).is(message) ||\n                Signed(LockExpired).is(message) ||\n                Signed(WithdrawExpired).is(message)))\n            return EMPTY;\n        const msgId = message.message_identifier, key = msgId.toString();\n        const cached = cache.get(key);\n        if (cached)\n            return of(messageSend({ message: cached }, action.meta));\n        const processed = {\n            type: MessageType.PROCESSED,\n            message_identifier: msgId,\n        };\n        return from(signMessage(signer, processed)).pipe(tap(signed => cache.put(key, signed)), map(signed => messageSend({ message: signed }, action.meta)));\n    }));\n};\n/**\n * When receiving a [[WithdrawRequest]] message, create the respective [[withdrawReceiveRequest]]\n * action\n *\n * @param action$ - Observable of messageReceived actions\n * @returns Observable of withdrawReceiveRequest actions\n */\nexport const withdrawRequestReceivedEpic = (action$) => action$.pipe(filter(isActionOf(messageReceived)), mergeMap(function* (action) {\n    const message = action.payload.message;\n    if (!message ||\n        !Signed(WithdrawRequest).is(message) ||\n        message.participant !== action.meta.address)\n        return;\n    yield withdrawReceiveRequest({ message }, {\n        tokenNetwork: message.token_network_address,\n        partner: message.participant,\n        totalWithdraw: message.total_withdraw,\n        expiration: message.expiration.toNumber(),\n    });\n}));\n/**\n * sendMessage when a [[withdrawSendConfirmation]] action is fired\n *\n * @param action$ - Observable of withdrawSendConfirmation actions\n * @returns Observable of messageSend actions\n */\nexport const withdrawSendConfirmationEpic = (action$) => action$.pipe(filter(isActionOf(withdrawSendConfirmation)), map(action => messageSend({ message: action.payload.message }, { address: action.meta.partner })));\n//# sourceMappingURL=epics.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/* eslint-disable @typescript-eslint/camelcase */\nimport * as t from 'io-ts';\nimport { from, of, EMPTY } from 'rxjs';\nimport { mergeMap, map, timeout, withLatestFrom, catchError, toArray } from 'rxjs/operators';\nimport { fromFetch } from 'rxjs/fetch';\nimport { memoize } from 'lodash';\nimport { Address, UInt, decode } from '../utils/types';\nimport { losslessParse } from '../utils/data';\nimport { ChannelState } from '../channels/state';\nimport { channelAmounts } from '../channels/utils';\n/**\n * Either returns true if given channel can route a payment, or a reason as string if not\n *\n * @param state - current RaidenState\n * @param presences - latest Presences mapping\n * @param tokenNetwork - tokenNetwork where the channel is\n * @param partner - possibly a partner on given tokenNetwork\n * @param value - amount of tokens to check if channel can route\n * @returns true if channel can route, string containing reason if not\n */\nexport function channelCanRoute(state, presences, tokenNetwork, partner, value) {\n    if (!(partner in presences) || !presences[partner].payload.available)\n        return `path: partner \"${partner}\" not available in transport`;\n    if (!(partner in state.channels[tokenNetwork]))\n        return `path: there's no direct channel with partner \"${partner}\"`;\n    const channel = state.channels[tokenNetwork][partner];\n    if (channel.state !== ChannelState.open)\n        return `path: channel with \"${partner}\" in state \"${channel.state}\" instead of \"${ChannelState.open}\"`;\n    const { ownCapacity: capacity } = channelAmounts(channel);\n    if (capacity.lt(value))\n        return `path: channel with \"${partner}\" don't have enough capacity=${capacity.toString()}`;\n    return true;\n}\nconst serviceRegistryToken = memoize((serviceRegistryContract) => __awaiter(this, void 0, void 0, function* () { return serviceRegistryContract.functions.token(); }));\n/**\n * Returns a cold observable which fetch PFS info & validate for a given server address or URL\n *\n * @param pfsAddrOrUrl - PFS account/address or URL\n * @param deps - RaidenEpicDeps needed for various parameters\n * @returns Observable containing PFS server info\n */\nexport function pfsInfo(pfsAddrOrUrl, { serviceRegistryContract, network, contractsInfo, config$ }) {\n    /**\n     * Codec for PFS /api/v1/info result schema\n     */\n    const PathInfo = t.type({\n        message: t.string,\n        network_info: t.type({\n            // literals will fail if trying to decode anything different from these constants\n            chain_id: t.literal(network.chainId),\n            registry_address: t.literal(contractsInfo.TokenNetworkRegistry.address),\n        }),\n        operator: t.string,\n        payment_address: Address,\n        price_info: UInt(32),\n        version: t.string,\n    });\n    // if it's an address, fetch url from ServiceRegistry, else it's already the URL\n    const url$ = Address.is(pfsAddrOrUrl)\n        ? from(serviceRegistryContract.functions.urls(pfsAddrOrUrl))\n        : of(pfsAddrOrUrl);\n    return url$.pipe(withLatestFrom(config$), mergeMap(([url, { httpTimeout }]) => {\n        if (!url || !url.includes('://'))\n            throw new Error(`Invalid URL: ${url}`);\n        const start = Date.now();\n        return fromFetch(`${url}/api/v1/info`).pipe(timeout(httpTimeout), mergeMap((res) => __awaiter(this, void 0, void 0, function* () {\n            return [\n                decode(PathInfo, losslessParse(yield res.text())),\n                yield serviceRegistryToken(serviceRegistryContract),\n            ];\n        })), map(([info, token]) => ({\n            address: info.payment_address,\n            url,\n            rtt: Date.now() - start,\n            price: info.price_info,\n            token,\n        })));\n    }));\n}\n/**\n * Retrieve pfsInfo for these servers & return sorted PFS info\n *\n * Sort order is price then response time (rtt).\n * Throws if no server can be validated, meaning either there's none in the current network or\n * we're out-of-sync (outdated or ahead of PFS's deployment network version).\n *\n * @param pfsList - Array of PFS addresses, as notified by pfsListUpdated action\n * @param deps - RaidenEpicDeps array\n * @returns Observable of online, validated & sorted PFS info array\n */\nexport function pfsListInfo(pfsList, deps) {\n    return from(pfsList).pipe(mergeMap(addr => pfsInfo(addr, deps).pipe(catchError(err => {\n        console.warn(`Error trying to fetch PFS info for \"${addr}\" - ignoring:`, err);\n        return EMPTY;\n    })), 5), toArray(), map(list => {\n        if (!list.length)\n            throw new Error('Could not validate any PFS info. Possibly out-of-sync with PFSs version.');\n        return list.sort((a, b) => {\n            const dif = a.price.sub(b.price);\n            // first, sort by price\n            if (dif.lt(0))\n                return -1;\n            else if (dif.gt(0))\n                return 1;\n            // if it's equal, tiebreak on rtt\n            else\n                return a.rtt - b.rtt;\n        });\n    }));\n}\n//# sourceMappingURL=utils.js.map","import * as t from 'io-ts';\nimport { Address, Int, UInt } from '../utils/types';\n/**\n * Codec for PFS API returned data\n */\nexport const PathResults = t.readonly(t.intersection([\n    t.type({\n        result: t.array(t.readonly(t.type({\n            path: t.readonlyArray(Address),\n            /* eslint-disable-next-line @typescript-eslint/camelcase */\n            estimated_fee: Int(32),\n        }))),\n    }),\n    t.partial({\n        /* eslint-disable-next-line @typescript-eslint/camelcase */\n        feedback_token: t.string,\n    }),\n]));\n/**\n * Codec for raiden-ts internal representation of a PFS result/routes\n */\nexport const Paths = t.array(t.readonly(t.type({\n    path: t.readonlyArray(Address),\n    fee: Int(32),\n})));\n/**\n * A PFS server/service instance info\n */\nexport const PFS = t.readonly(t.type({\n    address: Address,\n    url: t.string,\n    rtt: t.number,\n    price: UInt(32),\n    token: Address,\n}));\n//# sourceMappingURL=types.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/* eslint-disable @typescript-eslint/camelcase */\nimport { of, combineLatest, from, EMPTY, merge } from 'rxjs';\nimport { filter, mergeMap, publishReplay, first, catchError, concatMap, map, withLatestFrom, timeout, debounceTime, pluck, distinctUntilChanged, groupBy, switchMap, scan, startWith, tap, delay, } from 'rxjs/operators';\nimport { fromFetch } from 'rxjs/fetch';\nimport { isActionOf } from 'typesafe-actions';\nimport { bigNumberify } from 'ethers/utils';\nimport { Zero, Two } from 'ethers/constants';\nimport { isNil } from 'lodash';\nimport { getPresences$ } from '../transport/utils';\nimport { messageGlobalSend } from '../messages/actions';\nimport { MessageType } from '../messages/types';\nimport { signMessage } from '../messages/utils';\nimport { channelDeposited } from '../channels/actions';\nimport { ChannelState } from '../channels/state';\nimport { channelAmounts } from '../channels/utils';\nimport { UInt, decode } from '../utils/types';\nimport { losslessStringify, losslessParse } from '../utils/data';\nimport { getEventsStream } from '../utils/ethers';\nimport { pathFind, pathFound, pathFindFailed, pfsListUpdated } from './actions';\nimport { channelCanRoute, pfsInfo, pfsListInfo } from './utils';\nimport { PathResults } from './types';\n/**\n * Check if a transfer can be made and return a set of paths for it.\n *\n * @param action$ - Observable of pathFind actions\n * @param state$ - Observable of RaidenStates\n * @param deps - RaidenEpicDeps object\n * @returns Observable of pathFound|pathFindFailed actions\n */\nexport const pathFindServiceEpic = (action$, state$, deps) => combineLatest(state$, getPresences$(action$), deps.config$, // don't need to be cached, but here to avoid separate withLatestFrom\naction$.pipe(filter(isActionOf(pfsListUpdated)), pluck('payload', 'pfsList'), startWith([]))).pipe(publishReplay(1, undefined, cached$ => {\n    return action$.pipe(filter(isActionOf(pathFind)), concatMap(action => cached$.pipe(first(), mergeMap(([state, presences, { pfs: configPfs, httpTimeout, pfsSafetyMargin }]) => {\n        const { tokenNetwork, target } = action.meta;\n        if (!(tokenNetwork in state.channels))\n            throw new Error(`PFS: unknown tokenNetwork ${tokenNetwork}`);\n        if (!(target in presences) || !presences[target].payload.available)\n            throw new Error(`PFS: target ${target} not online`);\n        // if pathFind received a set of paths, pass it through to validation/cleanup\n        if (action.payload.paths)\n            return of(action.payload.paths);\n        // else, if possible, use a direct transfer\n        else if (channelCanRoute(state, presences, tokenNetwork, target, action.meta.value) === true) {\n            return of([{ path: [state.address, target], fee: Zero }]);\n        }\n        else if (!action.payload.pfs && configPfs === null) {\n            // pfs not specified in action and disabled (null) in config\n            throw new Error(`PFS disabled and no direct route available`);\n        }\n        else {\n            // else, request a route from PFS.\n            // pfs$ - Observable which emits one PFS info and then completes\n            const pfs$ = action.payload.pfs\n                ? // first, honor action.payload.pfs\n                    of(action.payload.pfs)\n                : !isNil(configPfs)\n                    ? // or if config.pfs isn't disabled nor auto (undefined), use it\n                        // configPfs is addr or url, so fetch pfsInfo from it\n                        pfsInfo(configPfs, deps)\n                    : // else (config.pfs undefined, auto mode)\n                        cached$.pipe(pluck(3), // get cached pfsList (4th combined value)\n                        // if needed, wait for list to be populated\n                        first(pfsList => pfsList.length > 0), \n                        // fetch pfsInfo from whole list & sort it\n                        mergeMap(pfsList => pfsListInfo(pfsList, deps)), tap(pfss => console.log('Auto-selecting best PFS from:', pfss)), \n                        // pop best ranked\n                        pluck(0));\n            return pfs$.pipe(\n            // TODO: use pfs.price to create & sign IOU\n            mergeMap(pfs => fromFetch(`${pfs.url}/api/v1/${tokenNetwork}/paths`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: losslessStringify({\n                    from: deps.address,\n                    to: target,\n                    value: UInt(32).encode(action.meta.value),\n                    max_paths: 10,\n                }),\n            })), timeout(httpTimeout), mergeMap((response) => __awaiter(this, void 0, void 0, function* () {\n                const text = yield response.text();\n                if (!response.ok)\n                    throw new Error(`PFS: paths request: code=${response.status} => body=\"${text}\"`);\n                return decode(PathResults, losslessParse(text));\n            })), map((results) => results.result.map(r => ({\n                path: r.path,\n                // Add PFS safety margin to estimated fees\n                fee: r.estimated_fee\n                    .mul(Math.round(pfsSafetyMargin * 1e6))\n                    .div(1e6),\n            }))));\n        }\n    }), withLatestFrom(cached$), \n    // validate/cleanup received routes/paths/results\n    map(([paths, [state, presences]]) => {\n        const filteredPaths = [], invalidatedRecipients = new Set();\n        // eslint-disable-next-line prefer-const\n        for (let { path, fee } of paths) {\n            // if route has us as first hop, cleanup/shift\n            if (path[0] === state.address)\n                path = path.slice(1);\n            const recipient = path[0];\n            // if this recipient was already invalidated in a previous iteration, skip\n            if (invalidatedRecipients.has(recipient))\n                continue;\n            // if we already found some valid route, allow only new routes through this peer\n            const canTransferOrReason = !filteredPaths.length\n                ? channelCanRoute(state, presences, action.meta.tokenNetwork, recipient, action.meta.value.add(fee))\n                : recipient !== filteredPaths[0].path[0]\n                    ? 'path: already selected another recipient'\n                    : fee.gt(filteredPaths[0].fee)\n                        ? 'path: already selected a smaller fee'\n                        : true;\n            if (canTransferOrReason !== true) {\n                console.log('Invalidated received route. Reason:', canTransferOrReason, 'Route:', path);\n                invalidatedRecipients.add(recipient);\n                continue;\n            }\n            filteredPaths.push({ path, fee });\n        }\n        if (!filteredPaths.length)\n            throw new Error(`PFS: no valid routes found`);\n        return pathFound({ paths: filteredPaths }, action.meta);\n    }), catchError(err => of(pathFindFailed(err, action.meta))))));\n}));\n/**\n * Sends a [[PFSCapacityUpdate]] to PFS global room on new deposit on our side of channels\n *\n * @param action$ - Observable of channelDeposited actions\n * @param state$ - Observable of RaidenStates\n * @returns Observable of messageGlobalSend actions\n */\nexport const pfsCapacityUpdateEpic = (action$, state$, { address, network, signer, config$ }) => action$.pipe(filter(isActionOf(channelDeposited)), filter(action => action.payload.participant === address), debounceTime(10e3), withLatestFrom(state$, config$), filter(([, , { pfsRoom }]) => !!pfsRoom), // ignore actions while/if config.pfsRoom isn't set\nmergeMap(([action, state, { revealTimeout, pfsRoom }]) => {\n    const channel = state.channels[action.meta.tokenNetwork][action.meta.partner];\n    if (!channel || channel.state !== ChannelState.open)\n        return EMPTY;\n    const { ownCapacity, partnerCapacity } = channelAmounts(channel);\n    const message = {\n        type: MessageType.PFS_CAPACITY_UPDATE,\n        canonical_identifier: {\n            chain_identifier: bigNumberify(network.chainId),\n            token_network_address: action.meta.tokenNetwork,\n            channel_identifier: bigNumberify(channel.id),\n        },\n        updating_participant: address,\n        other_participant: action.meta.partner,\n        updating_nonce: channel.own.balanceProof\n            ? channel.own.balanceProof.nonce\n            : Zero,\n        other_nonce: channel.partner.balanceProof\n            ? channel.partner.balanceProof.nonce\n            : Zero,\n        updating_capacity: ownCapacity,\n        other_capacity: partnerCapacity,\n        reveal_timeout: revealTimeout,\n    };\n    return from(signMessage(signer, message)).pipe(map(signed => messageGlobalSend({ message: signed }, { roomName: pfsRoom })));\n}), catchError(err => {\n    console.error('Error trying to generate & sign PFSCapacityUpdate', err);\n    return EMPTY;\n}));\n/**\n * Fetch & monitors ServiceRegistry's RegisteredService events, keep track of valid_till expiration\n * and aggregate list of valid service addresses\n *\n * Notice this epic only deals with the events & addresses, and don't fetch URLs, which need to be\n * fetched on-demand through [[pfsInfo]] & [[pfsListInfo]].\n *\n * @param action$ - Observable of RaidenActions\n * @param state$ - Observable of RaidenStates\n * @param deps - RaidenEpicDeps object\n * @returns Observable of pfsListUpdated actions\n */\nexport const pfsServiceRegistryMonitorEpic = ({}, state$, { serviceRegistryContract, contractsInfo, config$ }) => state$.pipe(pluck('blockNumber'), distinctUntilChanged(), publishReplay(1, undefined, blockNumber$ => config$.pipe(\n// monitors config.pfs, and only monitors contract if it's undefined\npluck('pfs'), distinctUntilChanged(), switchMap(pfs => pfs !== undefined\n    ? // disable ServiceRegistry monitoring if/while pfs is null=disabled or set\n        EMPTY\n    : // type of elements emitted by getEventsStream (past and new events coming from contract):\n        // [service, valid_till, deposit_amount, deposit_contract, Event]\n        getEventsStream(serviceRegistryContract, [serviceRegistryContract.filters.RegisteredService(null, null, null, null)], of(contractsInfo.ServiceRegistry.block_number), // at boot, always fetch from deploy block\n        blockNumber$).pipe(groupBy(([service]) => service), mergeMap(grouped$ => grouped$.pipe(\n        // switchMap ensures new events for each server (grouped$) picks latest event\n        switchMap(([service, valid_till]) => {\n            const now = Date.now(), validTill = valid_till.mul(1000); // milliseconds valid_till\n            if (validTill.lt(now))\n                return EMPTY; // this event already expired\n            // end$ will emit valid=false iff <2^31 ms in the future (setTimeout limit)\n            const end$ = validTill.sub(now).lt(Two.pow(31))\n                ? of({ service, valid: false }).pipe(delay(new Date(validTill.toNumber())))\n                : EMPTY;\n            return merge(of({ service, valid: true }), end$);\n        }))), scan((acc, { service, valid }) => !valid && acc.includes(service)\n            ? acc.filter(s => s !== service)\n            : valid && !acc.includes(service)\n                ? [...acc, service]\n                : acc, []), distinctUntilChanged(), debounceTime(1e3), // debounce burst of updates on initial fetch\n        map(pfsList => pfsListUpdated({ pfsList })))))));\n//# sourceMappingURL=epics.js.map","import { from, of } from 'rxjs';\nimport { catchError, filter, mergeMap, takeWhile, takeUntil, pluck, distinctUntilChanged, } from 'rxjs/operators';\nimport { isActionOf } from 'typesafe-actions';\nimport { negate } from 'lodash';\nimport { raidenShutdown } from './actions';\nimport * as ChannelsEpics from './channels/epics';\nimport * as TransportEpics from './transport/epics';\nimport * as TransfersEpics from './transfers/epics';\nimport * as PathFindEpics from './path/epics';\nexport const RaidenEpics = Object.assign({}, ChannelsEpics, TransportEpics, TransfersEpics, PathFindEpics);\nexport const raidenRootEpic = (action$, state$, deps) => {\n    // observable which emits once when a raidenShutdown action goes through actions pipeline\n    const shutdownNotification = action$.pipe(filter(isActionOf(raidenShutdown))), \n    // actions pipeline, but ends with (including) a raidenShutdown action\n    limitedAction$ = action$.pipe(takeWhile(negate(isActionOf(raidenShutdown)), true)), \n    // states pipeline, but ends when shutdownNotification emits\n    limitedState$ = state$.pipe(takeUntil(shutdownNotification));\n    // wire state$ & action$ to output subjects, to expose them to Raiden public class,\n    // including complete notifications (these observables don't error, because error would end\n    // subscriptions at the returned observable instead of feed-backing them)\n    limitedState$.subscribe(deps.stateOutput$);\n    limitedAction$.subscribe(deps.actionOutput$);\n    // wire state.config to deps.config$ BehaviorSubject\n    limitedState$\n        .pipe(pluck('config'), distinctUntilChanged())\n        .subscribe(deps.config$);\n    // like combineEpics, but completes action$, state$ & output$ when a raidenShutdown goes through\n    return from(Object.values(RaidenEpics)).pipe(mergeMap(epic => epic(limitedAction$, limitedState$, deps)), catchError(err => of(raidenShutdown({ reason: err }))), takeUntil(shutdownNotification));\n};\n//# sourceMappingURL=epics.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Signer } from 'ethers';\nimport { Wallet } from 'ethers/wallet';\nimport { Web3Provider, JsonRpcProvider } from 'ethers/providers';\nimport { applyMiddleware, createStore } from 'redux';\nimport { createEpicMiddleware } from 'redux-observable';\nimport { isActionOf } from 'typesafe-actions';\nimport { createLogger } from 'redux-logger';\nimport { debounce, findKey, transform, constant, memoize, pick, isEmpty, merge as _merge, } from 'lodash';\nimport { Subject, BehaviorSubject, AsyncSubject, from, merge, defer, EMPTY, ReplaySubject, } from 'rxjs';\nimport { first, filter, map, distinctUntilChanged, scan, concatMap, mergeMap, pluck, } from 'rxjs/operators';\nimport './polyfills';\nimport { TokenNetworkRegistryFactory } from './contracts/TokenNetworkRegistryFactory';\nimport { TokenNetworkFactory } from './contracts/TokenNetworkFactory';\nimport { HumanStandardTokenFactory } from './contracts/HumanStandardTokenFactory';\nimport { ServiceRegistryFactory } from './contracts/ServiceRegistryFactory';\nimport ropstenDeploy from './deployment/deployment_ropsten.json';\nimport rinkebyDeploy from './deployment/deployment_rinkeby.json';\nimport goerliDeploy from './deployment/deployment_goerli.json';\nimport ropstenServicesDeploy from './deployment/deployment_services_ropsten.json';\nimport rinkebyServicesDeploy from './deployment/deployment_services_rinkeby.json';\nimport goerliServicesDeploy from './deployment/deployment_services_goerli.json';\nimport { ShutdownReason } from './constants';\nimport { RaidenState, makeInitialState, encodeRaidenState, decodeRaidenState } from './state';\nimport { channelAmounts } from './channels/utils';\nimport { raidenReducer } from './reducer';\nimport { raidenRootEpic } from './epics';\nimport { RaidenEvents, raidenShutdown, raidenConfigUpdate, } from './actions';\nimport { channelOpened, channelOpenFailed, channelOpen, channelDeposited, channelDepositFailed, channelDeposit, channelClosed, channelCloseFailed, channelClose, channelSettled, channelSettleFailed, channelSettle, } from './channels/actions';\nimport { matrixPresenceUpdate, matrixRequestMonitorPresenceFailed, matrixRequestMonitorPresence, } from './transport/actions';\nimport { transfer, transferFailed, transferSigned } from './transfers/actions';\nimport { makeSecret, raidenSentTransfer, getSecrethash, makePaymentId } from './transfers/utils';\nimport { pathFind, pathFound, pathFindFailed, pfsListUpdated } from './path/actions';\nimport { Paths, PFS } from './path/types';\nimport { pfsListInfo } from './path/utils';\nimport { Address, PrivateKey, Secret, Hash, UInt, decode } from './utils/types';\nimport { patchSignSend } from './utils/ethers';\nimport { losslessParse } from './utils/data';\nexport class Raiden {\n    constructor(provider, network, signer, contractsInfo, state) {\n        this.resolveName = provider.resolveName.bind(provider);\n        const address = state.address;\n        // use next from latest known blockNumber as start block when polling\n        provider.resetEventsBlock(state.blockNumber + 1);\n        const state$ = new BehaviorSubject(state);\n        this.state$ = state$;\n        const action$ = new Subject();\n        this.action$ = action$;\n        this.channels$ = state$.pipe(map(state => transform(\n        // transform state.channels to token-partner-raidenChannel map\n        state.channels, (result, partner2channel, tokenNetwork) => {\n            const token = findKey(state.tokens, tn => tn === tokenNetwork);\n            if (!token)\n                return; // shouldn't happen, token mapping is always bi-directional\n            result[token] = transform(\n            // transform Channel to RaidenChannel, with more info\n            partner2channel, (partner2raidenChannel, channel, partner) => {\n                const { ownDeposit, partnerDeposit, ownBalance: balance, ownCapacity: capacity, } = channelAmounts(channel);\n                partner2raidenChannel[partner] = Object.assign({ state: channel.state }, pick(channel, ['id', 'settleTimeout', 'openBlock', 'closeBlock']), { token, tokenNetwork: tokenNetwork, partner: partner, ownDeposit,\n                    partnerDeposit,\n                    balance,\n                    capacity });\n            });\n        })));\n        this.transfers$ = state$.pipe(pluck('sent'), distinctUntilChanged(), concatMap(sent => from(Object.entries(sent))), \n        /* this scan stores a reference to each [key,value] in 'acc', and emit as 'changed' iff it\n         * changes from last time seen. It relies on value references changing only if needed */\n        scan(({ acc }, [secrethash, sent]) => \n        // if ref didn't change, emit previous accumulator, without 'changed' value\n        acc[secrethash] === sent\n            ? { acc }\n            : // else, update ref in 'acc' and emit value in 'changed' prop\n                { acc: Object.assign({}, acc, { [secrethash]: sent }), changed: sent }, { acc: {} }), filter(({ changed }) => !!changed), // filter out if reference didn't change from last emit\n        map(({ changed }) => changed), // get the changed object only\n        // from here, we get SentTransfer objects which changed from previous state (all on first)\n        map(raidenSentTransfer));\n        this.events$ = action$.pipe(filter(isActionOf(Object.values(RaidenEvents))));\n        this.getTokenInfo = memoize((token) => __awaiter(this, void 0, void 0, function* () {\n            if (!Address.is(token))\n                throw new Error('Invalid address');\n            if (!(token in this.state.tokens))\n                throw new Error(`token \"${token}\" not monitored`);\n            const tokenContract = this.deps.getTokenContract(token);\n            const [totalSupply, decimals, name, symbol] = yield Promise.all([\n                tokenContract.functions.totalSupply(),\n                tokenContract.functions.decimals(),\n                tokenContract.functions.name().catch(constant(undefined)),\n                tokenContract.functions.symbol().catch(constant(undefined)),\n            ]);\n            return { totalSupply, decimals, name, symbol };\n        }));\n        // pipe pfsListUpdated action payloead to pfsList$ replay subject, to keep latest seen emission\n        // around. Epics don't need this, as they can monitor/multicast action$ directly\n        const pfsList$ = new ReplaySubject(1);\n        this.pfsList$ = pfsList$;\n        action$\n            .pipe(filter(isActionOf(pfsListUpdated)), pluck('payload', 'pfsList'))\n            .subscribe(pfsList$);\n        const middlewares = [\n            createLogger({\n                level: () => this.deps.config$.value.logger !== undefined\n                    ? this.deps.config$.value.logger\n                    : process.env.NODE_ENV === 'development'\n                        ? 'debug'\n                        : '',\n            }),\n        ];\n        this.deps = {\n            stateOutput$: state$,\n            actionOutput$: action$,\n            config$: new BehaviorSubject(state.config),\n            matrix$: new AsyncSubject(),\n            provider,\n            network,\n            signer,\n            address,\n            contractsInfo,\n            registryContract: TokenNetworkRegistryFactory.connect(contractsInfo.TokenNetworkRegistry.address, signer),\n            getTokenNetworkContract: memoize((address) => TokenNetworkFactory.connect(address, signer)),\n            getTokenContract: memoize((address) => HumanStandardTokenFactory.connect(address, signer)),\n            serviceRegistryContract: ServiceRegistryFactory.connect(contractsInfo.ServiceRegistry.address, signer),\n        };\n        // minimum blockNumber of contracts deployment as start scan block\n        this.epicMiddleware = createEpicMiddleware({ dependencies: this.deps });\n        this.store = createStore(raidenReducer, state, applyMiddleware(...middlewares, this.epicMiddleware));\n    }\n    /**\n     * Async helper factory to make a Raiden instance from more common parameters.\n     *\n     * An async factory is needed so we can do the needed async requests to construct the required\n     * parameters ahead of construction time, and avoid partial initialization then\n     *\n     * @param connection - A URL or provider to connect to, one of:\n     *     <ul>\n     *       <li>JsonRpcProvider instance,</li>\n     *       <li>a Metamask's web3.currentProvider object or,</li>\n     *       <li>a hostname or remote json-rpc connection string</li>\n     *     </ul>\n     * @param account - An account to use as main account, one of:\n     *     <ul>\n     *       <li>Signer instance (e.g. Wallet) loadded with account/private key or</li>\n     *       <li>hex-encoded string address of a remote account in provider or</li>\n     *       <li>hex-encoded string local private key or</li>\n     *       <li>number index of a remote account loaded in provider\n     *            (e.g. 0 for Metamask's loaded account)</li>\n     *     </ul>\n     * @param storageOrState - Storage/localStorage-like synchronous object where to load and store\n     *     current state or initial RaidenState-like object instead. In this case, user must listen\n     *     state$ changes and update them on whichever persistency option is used\n     * @param contracts - Contracts deployment info\n     * @param config - Raiden configuration\n     * @returns Promise to Raiden SDK client instance\n     **/\n    static create(connection, account, storageOrState, contracts, config) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let provider;\n            if (typeof connection === 'string') {\n                provider = new JsonRpcProvider(connection);\n            }\n            else if (connection instanceof JsonRpcProvider) {\n                provider = connection;\n            }\n            else {\n                provider = new Web3Provider(connection);\n            }\n            // Patch provider's sign method (https://github.com/raiden-network/light-client/issues/223)\n            patchSignSend(provider);\n            const network = yield provider.getNetwork();\n            // if no ContractsInfo, try to populate from defaults\n            if (!contracts) {\n                switch (network.name) {\n                    case 'rinkeby':\n                        contracts = Object.assign({}, rinkebyDeploy.contracts, rinkebyServicesDeploy.contracts);\n                        break;\n                    case 'ropsten':\n                        contracts = Object.assign({}, ropstenDeploy.contracts, ropstenServicesDeploy.contracts);\n                        break;\n                    case 'goerli':\n                        contracts = Object.assign({}, goerliDeploy.contracts, goerliServicesDeploy.contracts);\n                        break;\n                    default:\n                        throw new Error(`No deploy info provided nor recognized network: ${JSON.stringify(network)}`);\n                }\n            }\n            let signer;\n            if (Signer.isSigner(account)) {\n                if (account.provider === provider)\n                    signer = account;\n                else if (account instanceof Wallet)\n                    signer = account.connect(provider);\n                else\n                    throw new Error(`Signer ${account} not connected to ${provider}`);\n            }\n            else if (typeof account === 'number') {\n                // index of account in provider\n                signer = provider.getSigner(account);\n            }\n            else if (Address.is(account)) {\n                // address\n                const accounts = yield provider.listAccounts();\n                if (!accounts.includes(account))\n                    throw new Error(`Account \"${account}\" not found in provider, got=${accounts}`);\n                signer = provider.getSigner(account);\n            }\n            else if (PrivateKey.is(account)) {\n                // private key\n                signer = new Wallet(account, provider);\n            }\n            else {\n                throw new Error('String account must be either a 0x-encoded address or private key');\n            }\n            const address = (yield signer.getAddress());\n            // build an initial state and default config!\n            let loadedState = makeInitialState({ network, address, contractsInfo: contracts }, { config });\n            // type guard\n            function isStorage(storageOrState) {\n                return storageOrState && typeof storageOrState.getItem === 'function';\n            }\n            let onState = undefined, onStateComplete = undefined;\n            if (storageOrState && isStorage(storageOrState)) {\n                const ns = `raiden_${network.name || network.chainId}_${contracts.TokenNetworkRegistry.address}_${address}`;\n                const loaded = _merge({}, loadedState, losslessParse((yield storageOrState.getItem(ns)) || 'null'));\n                loadedState = decodeRaidenState(loaded);\n                // to be subscribed on raiden.state$\n                const debouncedState = debounce((state) => {\n                    storageOrState.setItem(ns, encodeRaidenState(state));\n                }, 1000, { maxWait: 5000 });\n                onState = debouncedState;\n                onStateComplete = () => debouncedState.flush();\n            }\n            else if (storageOrState && RaidenState.is(storageOrState)) {\n                loadedState = storageOrState;\n            }\n            else if (storageOrState /* typeof storageOrState === unknown */) {\n                loadedState = decodeRaidenState(storageOrState);\n            }\n            if (address !== loadedState.address)\n                throw new Error(`Mismatch between provided account and loaded state: \"${address}\" !== \"${loadedState.address}\"`);\n            if (network.chainId !== loadedState.chainId ||\n                contracts.TokenNetworkRegistry.address !== loadedState.registry)\n                throw new Error(`Mismatch between network or registry address and loaded state`);\n            const raiden = new Raiden(provider, network, signer, contracts, loadedState);\n            if (onState)\n                raiden.state$.subscribe(onState, onStateComplete, onStateComplete);\n            return raiden;\n        });\n    }\n    /**\n     * Starts redux/observables by subscribing to all epics and emitting initial state and action\n     *\n     * No event should be emitted before start is called\n     */\n    start() {\n        if (!this.epicMiddleware)\n            throw new Error('Already started or stopped!');\n        this.epicMiddleware.run(raidenRootEpic);\n        // prevent start from being called again, turns this.started to true\n        this.epicMiddleware = undefined;\n        // dispatch a first, noop action, to next first state$ as current/initial state\n        this.store.dispatch(raidenConfigUpdate({ config: {} }));\n    }\n    /**\n     * Gets the running state of the instance\n     *\n     * @returns undefined if not yet started, true if running, false if already stopped\n     */\n    get started() {\n        // !epicMiddleware -> undefined | null -> undefined ? true/started : null/stopped;\n        if (!this.epicMiddleware)\n            return this.epicMiddleware === undefined;\n        // else -> !!epicMiddleware -> not yet started -> returns undefined\n    }\n    /**\n     * Triggers all epics to be unsubscribed\n     */\n    stop() {\n        // start still can't be called again, but turns this.started to false\n        this.epicMiddleware = null;\n        this.store.dispatch(raidenShutdown({ reason: ShutdownReason.STOP }));\n    }\n    get state() {\n        return this.store.getState();\n    }\n    /**\n     * Get current account address\n     *\n     * @returns Instance address\n     */\n    get address() {\n        return this.deps.address;\n    }\n    /**\n     * Get current network from provider\n     *\n     * @returns Network object containing blockchain's name & chainId\n     */\n    get network() {\n        return this.deps.network;\n    }\n    /**\n     * Returns a promise to current block number, as seen in provider and state\n     *\n     * @returns Promise to current block number\n     */\n    getBlockNumber() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.deps.provider.blockNumber || (yield this.deps.provider.getBlockNumber());\n        });\n    }\n    /**\n     * Getter for current Raiden Config\n     *\n     * @returns Current Raiden config\n     */\n    get config() {\n        return this.state.config;\n    }\n    /**\n     * Update Raiden Config with a partial (shallow) object\n     *\n     * @param config - Partial object containing keys and values to update in config\n     */\n    updateConfig(config) {\n        this.store.dispatch(raidenConfigUpdate({ config }));\n    }\n    /**\n     * Get ETH balance for given address or self\n     *\n     * @param address - Optional target address. If omitted, gets own balance\n     * @returns BigNumber of ETH balance\n     */\n    getBalance(address) {\n        address = address || this.address;\n        if (!Address.is(address))\n            throw new Error('Invalid address');\n        return this.deps.provider.getBalance(address);\n    }\n    /**\n     * Get token balance and token decimals for given address or self\n     *\n     * @param token - Token address to fetch balance. Must be one of the monitored tokens.\n     * @param address - Optional target address. If omitted, gets own balance\n     * @returns BigNumber containing address's token balance\n     */\n    getTokenBalance(token, address) {\n        return __awaiter(this, void 0, void 0, function* () {\n            address = address || this.address;\n            if (!Address.is(address) || !Address.is(token))\n                throw new Error('Invalid address');\n            if (!(token in this.state.tokens))\n                throw new Error(`token \"${token}\" not monitored`);\n            const tokenContract = this.deps.getTokenContract(token);\n            return tokenContract.functions.balanceOf(address);\n        });\n    }\n    /**\n     * Returns a list of all token addresses registered as token networks in registry\n     *\n     * @returns Promise to list of token addresses\n     */\n    getTokenList() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // here we assume there'll be at least one token registered on a registry\n            // so, if the list is empty (e.g. on first init), raidenInitializationEpic is still fetching\n            // the TokenNetworkCreated events from registry, so we wait until some token is found\n            return this.state$\n                .pipe(first(state => !isEmpty(state.tokens)), map(state => Object.keys(state.tokens)))\n                .toPromise();\n        });\n    }\n    /**\n     * Open a channel on the tokenNetwork for given token address with partner\n     *\n     * @param token - Token address on currently configured token network registry\n     * @param partner - Partner address\n     * @param options - (optional) option parameter\n     * @param options.settleTimeout - Custom, one-time settle timeout\n     * @returns txHash of channelOpen call, iff it succeeded\n     */\n    openChannel(token, partner, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!Address.is(token) || !Address.is(partner))\n                throw new Error('Invalid address');\n            const state = this.state;\n            const tokenNetwork = state.tokens[token];\n            if (!tokenNetwork)\n                throw new Error('Unknown token network');\n            const promise = this.action$\n                .pipe(filter(isActionOf([channelOpened, channelOpenFailed])), filter(action => action.meta.tokenNetwork === tokenNetwork && action.meta.partner === partner), first(), map(action => {\n                if (isActionOf(channelOpenFailed, action))\n                    throw action.payload;\n                return action.payload.txHash;\n            }))\n                .toPromise();\n            this.store.dispatch(channelOpen(Object.assign({}, options), { tokenNetwork, partner }));\n            return promise;\n        });\n    }\n    /**\n     * Deposit tokens on channel between us and partner on tokenNetwork for token\n     *\n     * @param token - Token address on currently configured token network registry\n     * @param partner - Partner address\n     * @param amount - Number of tokens to deposit on channel\n     * @returns txHash of setTotalDeposit call, iff it succeeded\n     */\n    depositChannel(token, partner, amount) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!Address.is(token) || !Address.is(partner))\n                throw new Error('Invalid address');\n            const state = this.state;\n            const tokenNetwork = state.tokens[token];\n            if (!tokenNetwork)\n                throw new Error('Unknown token network');\n            const deposit = decode(UInt(32), amount);\n            const promise = this.action$\n                .pipe(filter(isActionOf([channelDeposited, channelDepositFailed])), filter(action => action.meta.tokenNetwork === tokenNetwork && action.meta.partner === partner), first(), map(action => {\n                if (isActionOf(channelDepositFailed, action))\n                    throw action.payload;\n                return action.payload.txHash;\n            }))\n                .toPromise();\n            this.store.dispatch(channelDeposit({ deposit }, { tokenNetwork, partner }));\n            return promise;\n        });\n    }\n    /**\n     * Close channel between us and partner on tokenNetwork for token\n     * This method will fail if called on a channel not in 'opened' or 'closing' state.\n     * When calling this method on an 'opened' channel, its state becomes 'closing', and from there\n     * on, no payments can be performed on the channel. If for any reason the closeChannel\n     * transaction fails, channel's state stays as 'closing', and this method can be called again\n     * to retry sending 'closeChannel' transaction. After it's successful, channel becomes 'closed',\n     * and can be settled after 'settleTimeout' blocks (when it then becomes 'settleable').\n     *\n     * @param token - Token address on currently configured token network registry\n     * @param partner - Partner address\n     * @returns txHash of closeChannel call, iff it succeeded\n     */\n    closeChannel(token, partner) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!Address.is(token) || !Address.is(partner))\n                throw new Error('Invalid address');\n            const state = this.state;\n            const tokenNetwork = state.tokens[token];\n            if (!tokenNetwork)\n                throw new Error('Unknown token network');\n            const promise = this.action$\n                .pipe(filter(isActionOf([channelClosed, channelCloseFailed])), filter(action => action.meta.tokenNetwork === tokenNetwork && action.meta.partner === partner), first(), map(action => {\n                if (isActionOf(channelCloseFailed, action))\n                    throw action.payload;\n                return action.payload.txHash;\n            }))\n                .toPromise();\n            this.store.dispatch(channelClose(undefined, { tokenNetwork, partner }));\n            return promise;\n        });\n    }\n    /**\n     * Settle channel between us and partner on tokenNetwork for token\n     * This method will fail if called on a channel not in 'settleable' or 'settling' state.\n     * Channel becomes 'settleable' settleTimeout blocks after closed (detected automatically\n     * while Raiden Light Client is running or later on restart). When calling it, channel state\n     * becomes 'settling'. If for any reason transaction fails, it'll stay on this state, and this\n     * method can be called again to re-send a settleChannel transaction.\n     *\n     * @param token - Token address on currently configured token network registry\n     * @param partner - Partner address\n     * @returns txHash of settleChannel call, iff it succeeded\n     */\n    settleChannel(token, partner) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!Address.is(token) || !Address.is(partner))\n                throw new Error('Invalid address');\n            const state = this.state;\n            const tokenNetwork = state.tokens[token];\n            if (!tokenNetwork)\n                throw new Error('Unknown token network');\n            // wait for the corresponding success or error action\n            const promise = this.action$\n                .pipe(filter(isActionOf([channelSettled, channelSettleFailed])), filter(action => action.meta.tokenNetwork === tokenNetwork && action.meta.partner === partner), first(), map(action => {\n                if (isActionOf(channelSettleFailed, action))\n                    throw action.payload;\n                return action.payload.txHash;\n            }))\n                .toPromise();\n            this.store.dispatch(channelSettle(undefined, { tokenNetwork, partner }));\n            return promise;\n        });\n    }\n    /**\n     * Returns object describing address's users availability on transport\n     * After calling this method, any further presence update to valid transport peers of this\n     * address will trigger a corresponding MatrixPresenceUpdateAction on events$\n     *\n     * @param address - checksummed address to be monitored\n     * @returns Promise to object describing availability and last event timestamp\n     */\n    getAvailability(address) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!Address.is(address))\n                throw new Error('Invalid address');\n            const promise = this.action$\n                .pipe(filter(isActionOf([matrixPresenceUpdate, matrixRequestMonitorPresenceFailed])), filter(action => action.meta.address === address), first(), map(action => {\n                if (isActionOf(matrixRequestMonitorPresenceFailed, action))\n                    throw action.payload;\n                return action.payload;\n            }))\n                .toPromise();\n            this.store.dispatch(matrixRequestMonitorPresence(undefined, { address }));\n            return promise;\n        });\n    }\n    /**\n     * Send a Locked Transfer!\n     * This will reject if LockedTransfer signature prompt is canceled/signature fails, or be\n     * resolved to the transfer unique identifier (secrethash) otherwise, and transfer status can be\n     * queried with this id on this.transfers$ observable, which will just have emitted the 'pending'\n     * transfer. Any following transfer state change will be notified through this observable.\n     *\n     * @param token - Token address on currently configured token network registry\n     * @param target - Target address (must be getAvailability before)\n     * @param value - Amount to try to transfer\n     * @param options - Optional parameters for transfer:\n     *    <ul>\n     *      <li>paymentId - payment identifier, a random one will be generated if missing</li>\n     *      <li>secret - Secret to register, a random one will be generated if missing</li>\n     *      <li>secrethash - Must match secret, if both provided, or else, secret must be\n     *          informed to target by other means, and reveal can't be performed</li>\n     *      <li>paths - Used to specify possible routes & fees instead of querying PFS.</li>\n     *      <li>pfs - Use this PFS instead of configured or automatically choosen ones.\n     *          Is ignored if paths were already provided. If neither are set and config.pfs is not\n     *          disabled (null), use it if set or if undefined (auto mode), fetches the best\n     *          PFS from ServiceRegistry and automatically fetch routes from it.</li>\n     *    </ul>\n     * @returns A promise to transfer's secrethash (unique id) when it's accepted\n     */\n    transfer(token, target, value, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!Address.is(token) || !Address.is(target))\n                throw new Error('Invalid address');\n            const tokenNetwork = this.state.tokens[token];\n            if (!tokenNetwork)\n                throw new Error('Unknown token network');\n            const decodedValue = decode(UInt(32), value), paymentId = options.paymentId ? decode(UInt(8), options.paymentId) : makePaymentId(), paths = options.paths ? decode(Paths, options.paths) : undefined, pfs = options.pfs ? decode(PFS, options.pfs) : undefined;\n            if (options.secret !== undefined && !Secret.is(options.secret))\n                throw new Error('Invalid options.secret');\n            if (options.secrethash !== undefined && !Hash.is(options.secrethash))\n                throw new Error('Invalid options.secrethash');\n            // use provided secret or create one if no secrethash was provided\n            const secret = options.secret\n                ? options.secret\n                : !options.secrethash\n                    ? makeSecret()\n                    : undefined, secrethash = options.secrethash || getSecrethash(secret);\n            if (secret && getSecrethash(secret) !== secrethash)\n                throw new Error('Provided secrethash must match the sha256 hash of provided secret');\n            return merge(\n            // wait for pathFind response\n            this.action$.pipe(filter(isActionOf([pathFound, pathFindFailed])), first(action => action.meta.tokenNetwork === tokenNetwork &&\n                action.meta.target === target &&\n                action.meta.value.eq(value)), map(action => {\n                if (isActionOf(pathFindFailed, action))\n                    throw action.payload;\n                return action.payload.paths;\n            })), \n            // request pathFind; even if paths were provided, send it again for validation\n            // this is done at 'merge' subscription time (i.e. when above action filter is subscribed)\n            defer(() => {\n                this.store.dispatch(pathFind({ paths, pfs }, { tokenNetwork, target, value: decodedValue }));\n                return EMPTY;\n            }))\n                .pipe(mergeMap(paths => merge(\n            // wait for transfer response\n            this.action$.pipe(filter(isActionOf([transferSigned, transferFailed])), first(action => action.meta.secrethash === secrethash), map(action => {\n                if (isActionOf(transferFailed, action))\n                    throw action.payload;\n                return secrethash;\n            })), \n            // request transfer with returned/validated paths at 'merge' subscription time\n            defer(() => {\n                this.store.dispatch(transfer({\n                    tokenNetwork,\n                    target,\n                    value: decodedValue,\n                    paths,\n                    paymentId,\n                    secret,\n                }, { secrethash }));\n                return EMPTY;\n            }))))\n                .toPromise();\n        });\n    }\n    /**\n     * Request a path from PFS\n     *\n     * If a direct route is possible, it'll be returned. Else if PFS is set up, a request will be\n     * performed and the cleaned/validated path results will be resolved.\n     * Else, if no route can be found, promise is rejected with respective error.\n     *\n     * @param token - Token address on currently configured token network registry\n     * @param target - Target address (must be getAvailability before)\n     * @param value - Minimum capacity required on routes\n     * @param options - Optional parameters\n     * @param options.pfs - Use this PFS instead of configured or automatically choosen ones\n     * @returns A promise to returned routes/paths result\n     */\n    findRoutes(token, target, value, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!Address.is(token) || !Address.is(target))\n                throw new Error('Invalid address');\n            const tokenNetwork = this.state.tokens[token];\n            if (!tokenNetwork)\n                throw new Error('Unknown token network');\n            const decodedValue = decode(UInt(32), value), pfs = options.pfs ? decode(PFS, options.pfs) : undefined;\n            const promise = this.action$\n                .pipe(filter(isActionOf([pathFound, pathFindFailed])), first(action => action.meta.tokenNetwork === tokenNetwork &&\n                action.meta.target === target &&\n                action.meta.value.eq(value)), map(action => {\n                if (isActionOf(pathFindFailed, action))\n                    throw action.payload;\n                return action.payload.paths;\n            }))\n                .toPromise();\n            this.store.dispatch(pathFind({ pfs }, { tokenNetwork, target, value: decodedValue }));\n            return promise;\n        });\n    }\n    /**\n     * Returns a sorted array of info of available PFS\n     *\n     * It uses data polled from ServiceRegistry, which is available only when config.pfs is\n     * undefined, instead of set or disabled (null), and will reject if not.\n     * It can reject if the validated list is empty, meaning we can be out-of-sync (we're outdated or\n     * they are) with PFSs deployment, or no PFS is available on this TokenNetwork/blockchain.\n     *\n     * @returns Promise to array of PFS, which is the interface which describes a PFS\n     */\n    findPFS() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.config.pfs !== undefined)\n                throw new Error(\"config.pfs isn't auto (undefined)\");\n            return this.pfsList$\n                .pipe(first(), mergeMap(pfsList => pfsListInfo(pfsList, this.deps)))\n                .toPromise();\n        });\n    }\n}\nexport default Raiden;\n//# sourceMappingURL=raiden.js.map","/* istanbul ignore file */\nexport { RaidenState } from './state';\nexport { ShutdownReason } from './constants';\nexport { RaidenSentTransferStatus } from './transfers/state';\nexport { ChannelState } from './channels/state';\nexport { Raiden } from './raiden';\nexport { RaidenConfig } from './config';\nexport * from './utils/types';\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}