(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,f=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);p&&p(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2cae49de":"8aea2fb2","chunk-3ce80f0e":"4d67d9ee","chunk-ad3f536a":"c1dce60b","chunk-1bcf9c2c":"8066baf4","chunk-3f992048":"fd5e71a8","chunk-7a48be95":"bbe9a9dd","chunk-a2f6d7d4":"b31bedfb","chunk-e417861e":"04b5d5df","chunk-0c6b6cba":"c604b050","chunk-69970a6a":"7e7f8116","chunk-69afa954":"0d425104","chunk-794ff9f6":"535f6be6","chunk-8fa2d0c4":"7101c472","chunk-ee4fd88e":"112c831f","chunk-01872d34":"8f48a183","chunk-4910697b":"a6004345","chunk-351ac455":"ceb90647","chunk-057d4805":"2777de99","chunk-bc39380e":"8e498607"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-2cae49de":1,"chunk-3ce80f0e":1,"chunk-ad3f536a":1,"chunk-1bcf9c2c":1,"chunk-3f992048":1,"chunk-7a48be95":1,"chunk-a2f6d7d4":1,"chunk-e417861e":1,"chunk-0c6b6cba":1,"chunk-69970a6a":1,"chunk-69afa954":1,"chunk-794ff9f6":1,"chunk-8fa2d0c4":1,"chunk-ee4fd88e":1,"chunk-01872d34":1,"chunk-4910697b":1,"chunk-351ac455":1,"chunk-057d4805":1,"chunk-bc39380e":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-2cae49de":"284343a3","chunk-3ce80f0e":"c2e1e777","chunk-ad3f536a":"f0caf6ea","chunk-1bcf9c2c":"3eb41cc2","chunk-3f992048":"26e6eef1","chunk-7a48be95":"42e3e78c","chunk-a2f6d7d4":"1747eb60","chunk-e417861e":"35e60451","chunk-0c6b6cba":"1157883c","chunk-69970a6a":"de8d9b38","chunk-69afa954":"82659aff","chunk-794ff9f6":"6f993e48","chunk-8fa2d0c4":"4641a76f","chunk-ee4fd88e":"a9f4933e","chunk-01872d34":"fda03424","chunk-4910697b":"4c2a0c88","chunk-351ac455":"9ddd6f20","chunk-057d4805":"ff6905ca","chunk-bc39380e":"d21ee989"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){u=f[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],p.parentNode.removeChild(p),n(i)},p.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var f=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",f.name="ChunkLoadError",f.type=r,f.request=a,n[1](f)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/staging/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"017c":function(e,t,n){"use strict";var r=n("5595"),a=n.n(r);a.a},"07e6":function(e,t,n){e.exports=n.p+"img/info.c9b975f7.svg"},"0a08":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"blurred-overlay",class:{fullscreen:e.fullscreen}},[e._t("default")],2):e._e()},a=[],o=n("e921"),i=n("66ba");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=f(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(i["e"]);Object(o["a"])([Object(i["d"])({type:Boolean,required:!0})],m.prototype,"show",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],m.prototype,"fullscreen",void 0),m=Object(o["a"])([Object(i["a"])({})],m);var h=m,v=h,g=(n("71a0"),n("3c13")),O=Object(g["a"])(v,r,a,!1,null,"2c6136c2",null);t["a"]=O.exports},"0f75":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("4f30"),a=n("a3d5"),o=n("230b"),i=n.n(o),c=n("5287"),s=n.n(c);function u(e,t){return b(e)||d(e,t)||f(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function b(e){if(Array.isArray(e))return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=function(){function e(){y(this,e)}return h(e,null,[{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";var n="...";if(e.length<=t)return e;var r=Math.floor(t/2);return e.substr(0,r)+n+e.substr(e.length-r)}},{key:"decimals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return parseFloat(e).toFixed(t)}},{key:"upper",value:function(e){return e?e.toLocaleUpperCase():""}},{key:"displayFormat",value:function(t,n){var r=a["a"].toUnits(t,null!==n&&void 0!==n?n:18),o=parseFloat(r);return 0===o?0===n?"0":"0.0":o<1e-6?"<0.000001":e.formatValue(r,n)}},{key:"formatValue",value:function(e,t){var n=i()(e,"."),r=u(n,2),a=r[0],o=r[1];if(o&&o.length>6){var c=o.substring(0,6);return"≈".concat(a,".").concat(c)}return 0===t?a:e}},{key:"capitalizeFirst",value:function(e){return s()(e)}}]),e}();v.toUnits=function(e,t){return a["a"].toUnits(e,null!==t&&void 0!==t?t:18)},v.formatDate=function(e){return"".concat(new Intl.DateTimeFormat("en-US").format(e)," ").concat(e.toLocaleTimeString("en-US"))},r["a"].filter("truncate",v.truncate),r["a"].filter("decimals",v.decimals),r["a"].filter("upper",v.upper),r["a"].filter("displayFormat",v.displayFormat),r["a"].filter("capitalizeFirst",v.capitalizeFirst),r["a"].filter("toUnits",v.toUnits),r["a"].filter("formatDate",v.formatDate)},"0ff6":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"ServiceRegistry":{"address":"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","transaction_hash":"0xd9d8ac1821c2f4ac47af6f44e3c2e6da49fae8acac936e851dd21833e86684f9","block_number":6515467,"gas_cost":1999628,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","transaction_hash":"0xfdefb83579530c6bc54f732a9d15a8c8e8bff3f88e85b6fbbcb1ffc55f8ff0de","block_number":6515468,"gas_cost":1530470,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737",1.157920892373162e+77]},"MonitoringService":{"address":"0x9D5fF7860dcFc1EB6bCF230D911Fe0df0f8C0e31","transaction_hash":"0x21fbe2880e3168989a1f53cec9e83e765e00aa0f43eded08612caefc7359ba9b","block_number":6515469,"gas_cost":1949901,"constructor_arguments":["0x2488C9445b405E0fbbD60e89813f8b8652973737","0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C","0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE","0xC1e1F66c196738E6E38728Cac797E658631C8580"]},"OneToN":{"address":"0xd392CE4c8A44d3D22c24a2812EF7c11e27F3E194","transaction_hash":"0xb41df6abc165200fe335d23008ef82e6febb948984fc6df3d35d473fcd439af7","block_number":6515470,"gas_cost":1097797,"constructor_arguments":["0x9d87E6E25029dAa79E064Db04f3Dc1a785025FcE",4,"0xe44921f1F63B6369A1Ef0Ae497b2620D68C40f3C"]}}}')},1:function(e,t){},"152b":function(e,t,n){"use strict";var r=n("e921"),a=n("66ba"),o=n("80bf");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=y();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var h=function(e){l(n,e);var t=p(n);function n(){return c(this,n),t.apply(this,arguments)}return u(n,[{key:"navigateToSelectHub",value:function(e){this.$router.push({name:o["a"].SELECT_HUB,params:{token:e}})}},{key:"navigateToHome",value:function(){this.$router.push({name:o["a"].HOME}).catch((function(){}))}},{key:"navigateToOpenChannel",value:function(e,t){this.$router.push({name:o["a"].OPEN_CHANNEL,params:{token:e,partner:t}})}},{key:"navigateToChannels",value:function(e){this.$router.push({name:o["a"].CHANNELS,params:{token:e}})}},{key:"navigateToSelectTransferTarget",value:function(e,t,n){var r={name:o["a"].TRANSFER,params:{token:e},query:{}};t&&n&&(r.query={target:t,amount:n}),this.$router.push(r)}},{key:"navigateToTokenSelect",value:function(){this.$router.push({name:o["a"].SELECT_TOKEN})}},{key:"navigateToTransferSteps",value:function(e,t){this.$router.push({name:o["a"].TRANSFER_STEPS,params:{target:e},query:{amount:t}})}},{key:"navigateToNotifications",value:function(){this.$router.push({name:o["a"].NOTIFICATIONS})}},{key:"navigateToAccoount",value:function(){this.$router.push({name:o["a"].ACCOUNT_ROOT})}},{key:"navigateToBackupState",value:function(){this.$router.push({name:o["a"].ACCOUNT_BACKUP})}},{key:"navigateToRaidenAccountTransfer",value:function(){this.$router.push({name:o["a"].ACCOUNT_RAIDEN})}},{key:"navigateToSettings",value:function(){this.$router.push({name:o["a"].ACCOUNT_SETTINGS})}},{key:"navigateToWithdrawal",value:function(){this.$router.push({name:o["a"].ACCOUNT_WITHDRAWAL})}},{key:"navigateToUDC",value:function(){this.$router.push({name:o["a"].ACCOUNT_UDC})}},{key:"onModalBackClicked",value:function(){this.$router.go(-1)}},{key:"onBackClicked",value:function(){switch(this.$route.name){case o["a"].TRANSFER_STEPS:this.navigateToSelectTransferTarget(this.$route.params.token,this.$route.params.target,this.$route.params.amount);break;case o["a"].TRANSFER:case o["a"].CHANNELS:case o["a"].SELECT_TOKEN:this.navigateToHome();break;case o["a"].SELECT_HUB:this.navigateToTokenSelect();break;case o["a"].OPEN_CHANNEL:this.navigateToSelectHub(this.$route.params.token);break}}}]),n}(a["e"]);h=Object(r["a"])([a["a"]],h),t["a"]=h},"1aef":function(e,t,n){"use strict";var r=n("a164"),a=n.n(r);a.a},"1c30":function(e,t,n){"use strict";var r=n("8235"),a=n.n(r);a.a},"1f0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"ServiceRegistry":{"address":"0xa80aEc9eebD8058A1468e563C025999590F32C08","transaction_hash":"0x5aea719cdc67247db8f24da779a3cf817daab629ad2f743bf4c6b0b067339804","block_number":10095929,"gas_cost":1999694,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xbBF11c2f66E1887681C902095CEfB1018C854c0f",8.420485356775965e+21,5,4,2836573,842048535677596500000,15552000]},"UserDeposit":{"address":"0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","transaction_hash":"0xa810cc5afd8eef2f056fe8d9895b32b81927d76643d8965aaa40d2e24d63dc97","block_number":10095932,"gas_cost":1530140,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6",8.420485356775965e+23]},"MonitoringService":{"address":"0x727DDdBD042d891180A252C7A20634a696A16925","transaction_hash":"0x8404ad70bd1a42ad0bf27c41d720a78ebdc0a8c23621f479ca1f700773ddfc03","block_number":10095941,"gas_cost":1949835,"constructor_arguments":["0x255Aa6DF07540Cb5d3d297f0D0D4D84cb52bc8e6","0xa80aEc9eebD8058A1468e563C025999590F32C08","0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10","0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c"]},"OneToN":{"address":"0x960f01E9E219E1c8564784a050fD1cA51651592D","transaction_hash":"0xd775a9e8b2baa0005d84cc9d0ff5efa627163e80b05d53712a5b19b44b552836","block_number":10095943,"gas_cost":1097785,"constructor_arguments":["0x1c62fF66aF8aaD410065E02338F5bFbbe23e1f10",1,"0xa80aEc9eebD8058A1468e563C025999590F32C08"]}}}')},"1ffc":function(e,t,n){e.exports=n.p+"img/state.ff4426c1.svg"},2:function(e,t){},"21f4":function(e,t,n){},"233e":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-identicon"},[n("v-img",{class:{"header-identicon__blockie":e.defaultAccount,"header-identicon__blockie header-identicon__blockie__grayscale":!e.defaultAccount},attrs:{src:e.$blockie(e.defaultAccount),contain:"","aspect-ratio":"1"}})],1)},a=[],o=n("e921"),i=n("66ba"),c=n("2b7f"),s=n("77fd");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function m(e){var t=g();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var w=function(e){b(n,e);var t=m(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(Object(i["c"])(s["a"]));w=Object(o["a"])([Object(i["a"])({computed:f({},Object(c["f"])(["defaultAccount"]))})],w);var _=w,k=_,j=(n("1aef"),n("3c13")),E=n("0c90"),T=n.n(E),S=n("d27f"),A=Object(j["a"])(k,r,a,!1,null,"0e385849",null);t["a"]=A.exports;T()(A,{VImg:S["a"]})},2886:function(e,t,n){e.exports=n.p+"img/sent_transfer.087bd404.svg"},"298c":function(e,t,n){},"2a59":function(e,t,n){"use strict";var r=n("21f4"),a=n.n(r);a.a},"2d14":function(e,t,n){e.exports=n.p+"img/down_arrow.d7fcc637.svg"},"2e1f":function(e,t,n){e.exports=n.p+"img/done.51f3a970.svg"},"2ee5":function(e,t,n){e.exports=n.p+"img/error.f52d5069.svg"},"2fca":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("4bf2"),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return d(e)||p(e,t)||l(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function d(e){if(Array.isArray(e))return e}function b(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,c,"next",e)}function c(e){b(o,r,a,i,c,"throw",e)}i(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var g=function(){function e(){m(this,e)}return v(e,null,[{key:"contracts",value:function(){var e=y(a.a.mark((function e(){var t,n,r,o,c,u,l,f,p,d,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}),n=t.VUE_APP_DEPLOYMENT_INFO,r=t.VUE_APP_DEPLOYMENT_SERVICES_INFO,!n||!r){e.next=15;break}return e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:return o=e.sent,c=s(o,2),u=c[0],l=c[1],e.next=10,Promise.all([u.json(),l.json()]);case 10:return f=e.sent,p=s(f,2),d=p[0],b=p[1],e.abrupt("return",i(i({},d.contracts),b.contracts));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"configuration",value:function(){var e=y(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_CONFIGURATION_URL||"./config.json",e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}()},3:function(e,t){},"31a7":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":4,"contracts":{"SecretRegistry":{"address":"0x84df710E901299486F120B06e85b9f22AF913387","transaction_hash":"0x3bf1a9f9f03720a51c593d466c007a65d69c1ca197ac4b572ba9d689773936d3","block_number":6515460,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xC1e1F66c196738E6E38728Cac797E658631C8580","transaction_hash":"0x0072b99e7cac9134c5769044c9d7d4bafa32cad2a95afaaa3c10b30a8493ddb7","block_number":6515461,"gas_cost":4001594,"constructor_arguments":["0x84df710E901299486F120B06e85b9f22AF913387",4,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x5CEd7CfC56B4249296108B00DbA70b1b903371D8","constructor_arguments":{"_token_address":"0xD7bB0F9D05766c0149C1A3BE14c634310C4B7719","_secret_registry":"0x84df710E901299486F120B06e85b9f22AF913387","_chain_id":4,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},"31e8":function(e,t,n){var r={"./back_arrow.svg":"73da","./bug.svg":"c0e3","./deposit.svg":"d989","./done.svg":"2e1f","./down_arrow.svg":"2d14","./error.svg":"2ee5","./eth.svg":"b872","./eth_transfer_arrow.svg":"e2f5","./gear.svg":"5cc9","./generic.svg":"ec79","./info.svg":"07e6","./input_invalid.svg":"c2ff","./input_valid.svg":"b376","./logo.svg":"9b19","./metamask.svg":"d6c5","./notifications.svg":"4170","./received_transfer.svg":"5b9b","./sent_transfer.svg":"2886","./state.svg":"1ffc","./udc.svg":"8fe8","./warning.svg":"afb7","./withdrawal.svg":"45f0"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="31e8"},3465:function(e,t,n){"use strict";var r=n("298c"),a=n.n(r);a.a},"3eea":function(e,t,n){"use strict";var r=n("904f"),a=n.n(r);a.a},4:function(e,t){},4170:function(e,t,n){e.exports=n.p+"img/notifications.9b9982fe.svg"},"45f0":function(e,t,n){e.exports=n.p+"img/withdrawal.c80c3337.svg"},"49c4":function(e,t,n){},"49f8":function(e,t,n){var r={"./en.json":"edd4"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="49f8"},"4e0b":function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"ServiceRegistry":{"address":"0x3bc9C8d34f5714327095358668fD436D7c457C6C","transaction_hash":"0xcec06ceaf6c15357177391017580bb0debdec890eb745c192d137e9ac57678d5","block_number":2723632,"gas_cost":1999628,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","transaction_hash":"0x50508f3c0a34284cf45d1f710e7cfe1c09ee0635a44c3bb2a72227ac9c1f1802","block_number":2723633,"gas_cost":1530470,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A",1.157920892373162e+77]},"MonitoringService":{"address":"0x20e8e5181000e60799A523a2023d630868f378Fd","transaction_hash":"0x72080b163a9b759f3b27cc207c5237826e8c7e525a44b28dba033a359416e494","block_number":2723634,"gas_cost":1949901,"constructor_arguments":["0x5Fc523e13fBAc2140F056AD7A96De2cC0C4Cc63A","0x3bc9C8d34f5714327095358668fD436D7c457C6C","0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5","0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98"]},"OneToN":{"address":"0xA514Da2418576CeC4070C82996f30532dDa99706","transaction_hash":"0xaba87d45cfed63d3b69945de2bf9c7aa65d636a6163b54d305b369f28a3a5eaa","block_number":2723635,"gas_cost":1097797,"constructor_arguments":["0x0794F09913AA8C77C8c5bdd1Ec4Bb51759Ee0cC5",5,"0x3bc9C8d34f5714327095358668fD436D7c457C6C"]}}}')},5:function(e,t){},"51f6":function(e,t,n){},5595:function(e,t,n){},"58a8":function(e,t,n){"use strict";var r=n("dcec"),a=n.n(r);a.a},"5b9b":function(e,t,n){e.exports=n.p+"img/received_transfer.ef6596cc.svg"},"5cc9":function(e,t,n){e.exports=n.p+"img/gear.263a7ddf.svg"},6:function(e,t){},6691:function(e,t,n){"use strict";var r=n("d678"),a=n.n(r);a.a},"66bc":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("blurred-overlay",{attrs:{show:e.visible,fullscreen:""}},[n("v-dialog",{attrs:{value:e.visible,width:"350","hide-overlay":"",dark:"",persistent:e.hideClose},on:{"click:outside":function(t){return e.close()}}},[n("v-card",{staticClass:"raiden-dialog"},[e.hideClose?e._e():n("v-btn",{staticClass:"raiden-dialog__close",attrs:{icon:""},on:{click:function(t){return e.close()}}},[n("v-icon",[e._v("mdi-close")])],1),e._t("default")],2)],1)],1)},a=[],o=n("e921"),i=n("0a08"),c=n("66ba");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){p(n,e);var t=b(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"close",value:function(){}}]),n}(c["e"]);Object(o["a"])([Object(c["d"])({required:!0,default:!1,type:Boolean})],g.prototype,"visible",void 0),Object(o["a"])([Object(c["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"hideClose",void 0),Object(o["a"])([Object(c["b"])()],g.prototype,"close",null),g=Object(o["a"])([Object(c["a"])({components:{BlurredOverlay:i["a"]}})],g);var O=g,w=O,_=(n("1c30"),n("3c13")),k=n("0c90"),j=n.n(k),E=n("f710"),T=n("4d90"),S=n("871c"),A=n("cf2c"),x=Object(_["a"])(w,r,a,!1,null,"188eebce",null);t["a"]=x.exports;j()(x,{VBtn:E["a"],VCard:T["a"],VDialog:S["a"],VIcon:A["a"]})},6707:function(e,t,n){"use strict";var r=n("49c4"),a=n.n(r);a.a},7:function(e,t){},"71a0":function(e,t,n){"use strict";var r=n("a70b"),a=n.n(r);a.a},"73da":function(e,t,n){e.exports=n.p+"img/back_arrow.268247fb.svg"},"750b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"action-button",class:{sticky:e.sticky},attrs:{"no-gutters":"","align-content":"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:e.sticky?12:10}},[n("v-btn",{staticClass:"text-capitalize action-button__button",class:{sticky:e.sticky,"action-button__button--ghost":e.ghost,"action-button__button--full-width":e.fullWidth},attrs:{type:"submit",disabled:!e.enabled,loading:e.loading,depressed:"",large:""},on:{click:function(t){return e.click()}}},[e._v(" "+e._s(e.text)+" "),e.arrow?n("v-icon",{attrs:{right:""}},[e._v("keyboard_arrow_right")]):e._e()],1)],1)],1)},a=[],o=n("e921"),i=n("66ba");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=m();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v=function(e){f(n,e);var t=d(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"click",value:function(){}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0,type:Boolean})],v.prototype,"enabled",void 0),Object(o["a"])([Object(i["d"])({required:!0})],v.prototype,"text",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"loading",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"sticky",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"arrow",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"ghost",void 0),Object(o["a"])([Object(i["d"])({type:Boolean,default:!1})],v.prototype,"fullWidth",void 0),Object(o["a"])([Object(i["b"])()],v.prototype,"click",null),v=Object(o["a"])([Object(i["a"])({})],v);var g=v,O=g,w=(n("3eea"),n("3c13")),_=n("0c90"),k=n.n(_),j=n("f710"),E=n("6c75"),T=n("cf2c"),S=n("609e"),A=Object(w["a"])(O,r,a,!1,null,"07afaaa8",null);t["a"]=A.exports;k()(A,{VBtn:j["a"],VCol:E["a"],VIcon:T["a"],VRow:S["a"]})},"753f":function(e,t,n){"use strict";var r=n("51f6"),a=n.n(r);a.a},"77fd":function(e,t,n){"use strict";var r=n("e921"),a=n("66ba");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=b();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){u(n,e);var t=f(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n,[{key:"$blockie",value:function(e){return e?this.$identicon.getIdenticon(e):this.$identicon.getIdenticon("0x000")}}]),n}(a["e"]);m=Object(r["a"])([a["a"]],m),t["a"]=m},"80bf":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e["DISCLAIMER"]="disclaimer",e["TRANSFER"]="transfer",e["TRANSFER_STEPS"]="transfer-steps",e["SELECT_TOKEN"]="select-token",e["SELECT_HUB"]="select-hub",e["HOME"]="home",e["CHANNELS"]="channels",e["OPEN_CHANNEL"]="open-channel",e["ACCOUNT"]="account",e["ACCOUNT_ROOT"]="account-root",e["ACCOUNT_BACKUP"]="account-backup",e["ACCOUNT_RAIDEN"]="account-raiden",e["ACCOUNT_SETTINGS"]="account-settings",e["ACCOUNT_WITHDRAWAL"]="account-withdrawal",e["ACCOUNT_UDC"]="account-udc",e["NOTIFICATIONS"]="notifications"}(r||(r={}))},8235:function(e,t,n){},"87a2":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var r,a=function(){return{label:"",title:"",description:""}},o=function(){return{name:"",symbol:"",address:"",opening:0,open:0,closing:0,closed:0,settling:0,settled:0}},i={name:"",chainId:-1};(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["NO_ACCOUNT"]=1]="NO_ACCOUNT",e[e["UNSUPPORTED_NETWORK"]=2]="UNSUPPORTED_NETWORK",e[e["INITIALIZATION_FAILED"]=3]="INITIALIZATION_FAILED",e[e["RDN_STATE_MIGRATION"]=4]="RDN_STATE_MIGRATION"})(r||(r={}))},"8aa9":function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return B}));var r=n("4bf2"),a=n.n(r),o=n("7e01"),i=n.n(o),c=n("5da6");function s(e){return f(e)||l(e)||h(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return v(e)}function p(e,t){return y(e)||b(e,t)||h(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function y(e){if(Array.isArray(e))return e}function m(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function h(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){g(o,r,a,i,c,"next",e)}function c(e){g(o,r,a,i,c,"throw",e)}i(void 0)}))}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j,E="logs",T=void 0;function S(e){var t=e.toString();return e.stack?e.stack.startsWith(t)?e.stack:"".concat(t,"\n").concat(e.stack):t}function A(e){var t,n,r,a;if("%c prev state"!==e[0]&&!(null===(t=e[0])||void 0===t||null===(n=t.startsWith)||void 0===n?void 0:n.call(t,"action %c"))&&"—— log end ——"!==e[0]){var o=null===(r=e[2])||void 0===r||null===(a=r.payload)||void 0===a?void 0:a.blockNumber;if(!o)return e=e.map((function(e){return e instanceof Error?S(e):(null===e||void 0===e?void 0:e.payload)instanceof Error?_(_({},e),{},{payload:S(e.payload)}):e})),"string"===typeof e[1]&&e[1].startsWith("color:")&&e.splice(1,1),e;T=o}}function x(e){if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){try{return e.toString()}catch(t){return"<unserializable>"}}}function N(e){return D.apply(this,arguments)}function D(){return D=O(a.a.mark((function e(t){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if((null===(n=j)||void 0===n?void 0:n.name)!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(c["a"])(t,1,{upgrade:function(e){var t=e.createObjectStore(E);t.createIndex("by-logger","logger"),t.createIndex("by-level","level")}});case 4:j=e.sent;case 5:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var R=/^raiden:(0x[0-9a-f]{40})$/i;function C(e){return P.apply(this,arguments)}function P(){return P=O(a.a.mark((function e(t){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(R.test(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N(t);case 4:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function I(){return L.apply(this,arguments)}function L(){return L=O(a.a.mark((function e(){var t,n,r,o,c=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:["matrix"],"undefined"===typeof j){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,N("raiden");case 5:for(n=function(){var e=o[r],t=e.methodFactory;e.methodFactory=function(e,n,r){var a=t(e,n,r);return C(r),function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];a.apply(void 0,n);var i=A(n);i&&j.put(E,_({logger:r,level:e,message:i},T?{block:T}:{}),Date.now()).catch((function(){return j.put(E,_({logger:r,level:e,message:n.map(x)},T?{block:T}:{}),Date.now())}))}}},r=0,o=[i.a].concat(s(t.map(i.a.getLogger)));r<o.length;r++)n();case 7:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}var U=[[/("?access_?token"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"],[/("?secret"?\s*[=:]\s*)\[[^\]]+\]/gi,'$1["<redacted>"]'],[/("?secret"?\s*[=:]\s*)("?)\w+("?)/gi,"$1$2<redacted>$3"]];function M(e){var t,n=m(U);try{for(n.s();!(t=n.n()).done;){var r=p(t.value,2),a=r[0],o=r[1];e=e.replace(a,o)}}catch(i){n.e(i)}finally{n.f()}return e}function B(){return F.apply(this,arguments)}function F(){return F=O(a.a.mark((function e(){var t,n,r,o,i,c,s,u,l,f,p,d,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,j.transaction(E).store.openCursor();case 3:n=e.sent,r=Date.now(),o=!0;case 6:if(!n){e.next=20;break}return i=n.value,c=i.logger,s=i.level,u=i.message,l=i.block,f=u.map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" "),r=+n.key,p=new Date(n.key).toISOString(),d=l?" #".concat(l):"",b=void 0,c!==j.name||o?(b=" @ ".concat(c),o=!1):b="",t+="".concat(p).concat(d).concat(b," [").concat(s,"] \t=> ").concat(f,"\n"),e.next=17,n.continue();case 17:n=e.sent,e.next=6;break;case 20:return t=M(t),e.abrupt("return",[r,t]);case 22:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}},"8fe8":function(e,t,n){e.exports=n.p+"img/udc.a4ddd71a.svg"},"904f":function(e,t,n){},9302:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address__container"},[n("v-tooltip",{attrs:{bottom:"","close-delay":"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("p",e._g({staticClass:"address__label",on:{click:e.copy}},r),[e._v(" "+e._s(e.addressOutput)+" ")])]}}])},[n("div",{staticClass:"address__tooltip"},[n("input",{ref:"copy",staticClass:"address__input",domProps:{value:e.address}}),n("div",[e._v(" "+e._s(e.copied?e.$t("address-display.copied"):e.$t("address-display.copy"))+" ")])])])],1)},a=[],o=n("e921"),i=n("66ba"),c=n("0f75");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function b(e){var t=h();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var g=function(e){p(n,e);var t=b(n);function n(){var e;return u(this,n),e=t.apply(this,arguments),e.copied=!1,e.timeout=0,e}return f(n,[{key:"selectAddress",value:function(e){e&&(e.focus(),e.select())}},{key:"deselectAddress",value:function(e){e&&e.blur()}},{key:"copy",value:function(e){var t=this;e.stopPropagation(),this.selectAddress(this.$refs.copy),this.copied=document.execCommand("copy"),this.deselectAddress(this.$refs.copy),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.copied=!1}),2e3)}},{key:"addressOutput",get:function(){return this.fullAddress?this.address:c["a"].truncate(this.address,8)}}]),n}(i["e"]);Object(o["a"])([Object(i["d"])({required:!0})],g.prototype,"address",void 0),Object(o["a"])([Object(i["d"])({required:!1,default:!1,type:Boolean})],g.prototype,"fullAddress",void 0),g=Object(o["a"])([Object(i["a"])({})],g);var O=g,w=O,_=(n("58a8"),n("3c13")),k=n("0c90"),j=n.n(k),E=n("a372"),T=Object(_["a"])(w,r,a,!1,null,"0b75904e",null);t["a"]=T.exports;j()(T,{VTooltip:E["a"]})},"959b":function(e,t,n){"use strict";var r=n("b41b"),a=n.n(r);a.a},"9b19":function(e,t,n){e.exports=n.p+"img/logo.5c4b022d.svg"},a0df:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"SecretRegistry":{"address":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","transaction_hash":"0xa344e1897011a18229421d25bb69968fad7c3e78da39c7d975d502d7efc183db","block_number":7931782,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443","transaction_hash":"0x111e0bacec7f113f78463923046d545516bb35bdccb813e9dcc03ca707cdbf1e","block_number":7931794,"gas_cost":4001594,"constructor_arguments":["0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490",3,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x2FA965fE214570bab9D676B5DE7EAffd5b82fcAe","constructor_arguments":{"_token_address":"0x342d1D825B1c8790522E0B8999DB876ddEE82052","_secret_registry":"0xC6CD0b14519DACA6c8784c1c35619Bda5F90f490","_chain_id":3,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},a164:function(e,t,n){},a32b:function(e){e.exports=JSON.parse('{"PFS_EMPTY_URL":"A registered Pathfinding Service returned an empty service URL.","PFS_INVALID_URL":"A registered Pathfinding Service returned an invalid service URL.","PFS_INVALID_INFO":"Could not find any valid Pathfinding service. Client and PFS versions are possibly out-of-sync.","PFS_TOO_EXPENSIVE":"Pathfinding Service price higher than pfsMaxFee.","PFS_NO_ROUTES_FOUND":"No valid routes found.","PFS_ERROR_RESPONSE":"Pathfinding Service request returned an error","PFS_DISABLED":"Pathfinding Service is disabled and no direct route is available.","PFS_UNKNOWN_TOKEN_NETWORK":"No open channels on this token network.","PFS_TARGET_OFFLINE":"The requested target is offline.","PFS_TARGET_NO_RECEIVE":"The requested target doesn\'t receive transfers.","PFS_LAST_IOU_REQUEST_FAILED":"The request for the last IOU has failed.","PFS_IOU_SIGNATURE_MISMATCH":"The signature of the last IOU did not match.","PFS_NO_ROUTES_BETWEEN_NODES":"No route between nodes found.","CNL_INVALID_STATE":"Invalid channel state.","CNL_NO_OPEN_CHANNEL_FOUND":"No open channel has been found.","CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND":"No open or closing channel has been found.","CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND":"No settleable or settling channel has been found.","CNL_APPROVE_TRANSACTION_FAILED":"Token approve transaction reverted.","CNL_OPENCHANNEL_FAILED":"TokenNetwork.openChannel transaction reverted.","CNL_SETTOTALDEPOSIT_FAILED":"TokenNetwork.setTotalDeposit transaction reverted.","CNL_CLOSECHANNEL_FAILED":"TokenNetwork.closeChannel transaction reverted.","CNL_SETTLECHANNEL_INVALID_BALANCEHASH":"Could not find BalanceProof matching on-chain closing data. This client may have had its state cleared and can\'t settle.","CNL_SETTLECHANNEL_FAILED":"TokenNetwork.settleChannel transaction reverted.","CNL_UPDATE_NONCLOSING_BP_FAILED":"updateNonClosingBalanceProof transaction reverted.","CNL_ONCHAIN_UNLOCK_FAILED":"on-chain unlock transaction reverted.","CNL_WITHDRAW_TRANSACTION_FAILED":"Withdraw transaction has failed.","CNL_WITHDRAW_PARTNER_OFFLINE":"Channel partner isn\'t online.","CNL_WITHDRAW_EXPIRES_SOON":"Withdraw request expired or expires too soon.","CNL_WITHDRAW_EXPIRED":"Withdraw request expired.","CNL_WITHDRAW_AMOUNT_TOO_LOW":"Withdraw request contains an amount smaller than already withdrawn.","CNL_WITHDRAW_AMOUNT_TOO_HIGH":"Withdraw request contains an amount bigger than channel\'s liquidity.","XFER_EXPIRED":"Transfer expired.","XFER_CHANNEL_CLOSED_PREMATURELY":"Channel was closed before secret got reveiled or transfer unlocked.","XFER_REFUNDED":"Transfer has been refunded.","XFER_INVALID_SECRETREQUEST":"Invalid SecretRequest received","XFER_ALREADY_COMPLETED":"Not waiting for transfer, it\'s already completed.","XFER_REGISTERSECRET_TX_FAILED":"SecretRegistry.registerSecret transaction reverted","TRNS_NO_MATRIX_SERVERS":"Could not contact any Matrix servers.","TRNS_NO_VALID_USER":"Could not find a user with a valid signature.","TRNS_NO_SERVERNAME":"Could not get server name from Matrix server.","TRNS_MESSAGE_SIGNATURE_MISMATCH":"Unable to decode message due to signature mismatch.","RDN_GENERAL_ERROR":"An unknown error occured.","RDN_ASSERT_ERROR":"An unknown assertion failed.","RDN_MINT_FAILED":"Failed to mint tokens.","RDN_MINT_MAINNET":"Minting is only allowed on test networks.","RDN_APPROVE_TRANSACTION_FAILED":"Approve transaction has failed.","RDN_DEPOSIT_TRANSACTION_FAILED":"Deposit transaction has failed.","RDN_TRANSFER_ONCHAIN_BALANCE_FAILED":"Failed to transfer on-chain balance.","RDN_TRANSFER_ONCHAIN_TOKENS_FAILED":"Failed to transfer on-chain tokens.","RDN_UNRECOGNIZED_NETWORK":"No deploy info provided nor recognized network.","RDN_SIGNER_NOT_CONNECTED":"The signing account is not connected to the provider.","RDN_ACCOUNT_NOT_FOUND":"Account not found in provider.","RDN_STRING_ACCOUNT_INVALID":"String account must be either a 0x-encoded address or private key.","RDN_TRANSACTION_REORG":"Transaction has been mined but got removed by a reorg.","RDN_STATE_MIGRATION":"Could not replace stored state with older, provided state.","RDN_SUBKEY_NOT_SET":"Can\'t send tx from subkey if not set.","RDN_INSUFFICIENT_BALANCE":"Insufficient balance.","RDN_INSUFFICIENT_ALLOWANCE":"Requested allowance smaller than deposit.","RDN_NOT_A_TOKEN":"Not a token contract.","RDN_STATE_ADDRESS_MISMATCH":"Mismatch between provided account and loaded state.","RDN_STATE_NETWORK_MISMATCH":"Mismatch between network or registry address and loaded state","RDN_ALREADY_STARTED":"Already started or stopped!","RDN_UNKNOWN_TOKEN_NETWORK":"Unknown Tokennetwork","RDN_INVALID_SECRET":"Invalid provided secret.","RDN_INVALID_SECRETHASH":"Invalid provided secrethash.","RDN_SECRET_SECRETHASH_MISMATCH":"Provided secrethash must match the sha256 hash of provided secret.","RDN_UNKNOWN_TRANSFER":"Unknown transfer.","DTA_NEGATIVE_NUMBER":"Encountered negative number while encoding to HEX string.","DTA_NUMBER_TOO_LARGE":"Encountered a number that is too large to be encoded.","DTA_ARRAY_LENGTH_DIFFERENCE":"Expected length of HEX string differs from integer array input.","DTA_UNENCODABLE_DATA":"Passed data is not a HEX string nor integer array.","DTA_NON_POSITIVE_NUMBER":"Number must be positive.","DTA_INVALID_ADDRESS":"Invalid address parameter.","DTA_INVALID_DEPOSIT":"Invalid deposit parameter.","DTA_INVALID_TIMEOUT":"Invalid timeout parameter.","DTA_INVALID_AMOUNT":"Invalid amount parameter.","DTA_INVALID_PAYMENT_ID":"Invalid payment identifier parameter.","DTA_INVALID_PATH":"Invalid path parameter.","DTA_INVALID_PFS":"Invalid path finding service parameter.","UDC_DEPOSIT_OUTDATED":"The UDC contains a target balance different than requested deposit","UDC_PLAN_WITHDRAW_FAILED":"An error occurred while planning to withdraw from the User Deposit contract.","UDC_PLAN_WITHDRAW_GT_ZERO":"The planned withdraw amount has to be greater than zero.","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE":"The planned withdraw amount exceeds the total amount available for withdrawing.","UDC_WITHDRAW_NO_BALANCE":"There is no balances left to withdraw from UDC.","UDC_WITHDRAW_FAILED":"An error occurred while withdrawing from the UDC."}')},a3d5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("38dd");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c=function(){function e(){a(this,e)}return i(e,null,[{key:"toEth",value:function(e){return Object(r["formatEther"])(e)}},{key:"toUnits",value:function(e,t){var n=Object(r["formatUnits"])(e,t);return 0===t?n.split(".")[0]:n}},{key:"decimalsOverflow",value:function(e,t){var n;return n=e.indexOf(".")>0?e.split(".")[1]:"",n.length>t}},{key:"parse",value:function(e,t){return Object(r["parseUnits"])(e.endsWith(".")?e.substring(0,e.length-1):e,t)}}]),e}()},a70b:function(e,t,n){},afb7:function(e,t,n){e.exports=n.p+"img/warning.49bc56a9.svg"},afd6:function(e,t,n){},b376:function(e,t,n){e.exports=n.p+"img/input_valid.762cb0ae.svg"},b41b:function(e,t,n){},b4cc:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":3,"contracts":{"ServiceRegistry":{"address":"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","transaction_hash":"0x4d02a48e464d2b9d1e15f86e20b9bee240bac2919c0e6671ae3027106f2943b2","block_number":7931820,"gas_cost":1999628,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x062C12c01D0f17fC9eAa33940D994594d91a0182",2e+21,6,5,17280000,1000,15552000]},"UserDeposit":{"address":"0x70e27B28Ce6BF060889D6606169B88519edf83E2","transaction_hash":"0x4d6606b19fed986698af1784c2aa37654d94dd32f273a9efc985286092ab02eb","block_number":7931832,"gas_cost":1530470,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1",1.157920892373162e+77]},"MonitoringService":{"address":"0xBf86C5d8cC05Ff64419d3cDe505509397869ef06","transaction_hash":"0xde25f2d4a4a7f594c139512a246c9ba006a5f0ce9cd801c3f3d8f6e625411584","block_number":7931856,"gas_cost":1949889,"constructor_arguments":["0x78BaE89c310B2bc53981176a0bc95F6caf1C86d1","0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8","0x70e27B28Ce6BF060889D6606169B88519edf83E2","0xAe40f2c0a6c72498F330a1e4CCF1527D9F028443"]},"OneToN":{"address":"0xCC911b7292157A41170C103E6fE2fE10A3B504F5","transaction_hash":"0xafcf5f55b6bb9845f7ed95079c952fbd13e867e30277cc0455901072e38536b9","block_number":7931882,"gas_cost":1097785,"constructor_arguments":["0x70e27B28Ce6BF060889D6606169B88519edf83E2",3,"0x3b47ae7d1B6B73341c7C9238669500DC3EE322c8"]}}}')},b872:function(e,t,n){e.exports=n.p+"img/eth.640d53f2.svg"},bb51:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"home",attrs:{fluid:""}},[!e.inaccessible&&e.isConnected?r("no-tokens"):r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__logo-container"},[r("v-img",{staticClass:"home__logo-container__logo",attrs:{src:n("9b19"),"aspect-ratio":"1",contain:""}})],1)])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__app-welcome text-center"},[e._v(" "+e._s(e.$t("home.welcome"))+" ")])])],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"home__disclaimer text-center font-weight-light"},[e._v(" "+e._s(e.$t("home.disclaimer"))+" ")]),r("i18n",{staticClass:"home__getting-started text-center font-weight-light",attrs:{path:"home.getting-started.description",tag:"div"}},[r("a",{attrs:{href:"https://github.com/raiden-network/light-client#getting-started",target:"_blank"}},[e._v(" "+e._s(e.$t("home.getting-started.link-name"))+" ")])]),e.accessDenied?r("no-access-message",{staticClass:"home__no-access",attrs:{reason:e.accessDenied}}):e._e()],1)],1),r("action-button",{attrs:{text:e.$t("home.connect-button"),loading:e.connecting,enabled:!e.connecting,sticky:""},on:{click:e.connect}}),r("connect-dialog",{attrs:{connecting:e.connecting,visible:e.connectDialog,"has-provider":e.hasProvider},on:{connect:e.connect,close:function(t){e.connectDialog=!1}}})],1)],1)},a=[],o=n("4bf2"),i=n.n(o),c=n("e921"),s=n("66ba"),u=n("2b7f"),l=n("87a2"),f=n("750b"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("raiden-dialog",{staticClass:"connect",attrs:{visible:e.visible,"hide-close":e.hideClose},on:{close:e.close}},[n("v-card-title",[e._v(" "+e._s(e.$t("home.connect-dialog.title"))+" ")]),e.hasProvider?n("div",[n("div",{staticClass:"connect__button"},[n("action-button",{attrs:{text:e.$t("home.connect-dialog.raiden-account"),enabled:!e.connecting,loading:e.connecting},on:{click:function(t){return e.connect()}}})],1),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-raiden-account"))+" ")]),n("p",{staticClass:"text-center connect__description"},[e._v(" "+e._s(e.$t("home.connect-dialog.description-web3-account"))+" ")])]):e._e(),e.accessDenied?n("no-access-message",{attrs:{reason:e.accessDenied}}):e._e(),e.hasProvider?e._e():n("v-card-text",[n("div",{staticClass:"text-center"},[e._v(" "+e._s(e.$t("home.connect-dialog.no-provider"))+" ")])])],1)},d=[],b=n("66bc"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-alert",{staticClass:"no-access-message",attrs:{value:!0,color:"error",icon:"warning"}},[n("div",{staticClass:"font-weight-light no-access-message__message"},[e.networkUnsupported?n("span",[e._v(" "+e._s(e.$t("no-access.unsupported-network"))+" ")]):e._e(),e.initializationFailed?n("span",[e._v(" "+e._s(e.$t("no-access.sdk-initialization-failure"))+" ")]):e._e(),e.rdnStateMigration?n("span",[e._v(" "+e._s(e.$t("no-access.rdn-state-migration"))+" ")]):n("span",[e._v(e._s(e.$t("no-access.generic-error")))])])])},m=[];function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function k(e){var t=T();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var A=function(e){w(n,e);var t=k(n);function n(){return v(this,n),t.apply(this,arguments)}return O(n,[{key:"networkUnsupported",get:function(){return this.reason===l["a"].UNSUPPORTED_NETWORK}},{key:"initializationFailed",get:function(){return this.reason===l["a"].INITIALIZATION_FAILED}},{key:"rdnStateMigration",get:function(){return this.reason===l["a"].RDN_STATE_MIGRATION}}]),n}(s["e"]);Object(c["a"])([Object(s["d"])({required:!0})],A.prototype,"reason",void 0),A=Object(c["a"])([Object(s["a"])({})],A);var x=A,N=x,D=(n("753f"),n("3c13")),R=n("0c90"),C=n.n(R),P=n("a4ab"),I=Object(D["a"])(N,y,m,!1,null,"7b92b083",null),L=I.exports;function U(e){return U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),e}function V(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}function q(e,t){return q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},q(e,t)}function K(e){var t=X();return function(){var n,r=Y(e);if(t){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==U(t)&&"function"!==typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}C()(I,{VAlert:P["a"]});var Q=function(e){V(n,e);var t=K(n);function n(){var e;return W(this,n),e=t.apply(this,arguments),e.hideClose=!1,e}return H(n,[{key:"close",value:function(){}},{key:"connect",value:function(){this.$store.commit("updateSettings",B(B({},this.$store.state.settings),{},{isFirstTimeConnect:!1}))}}]),n}(s["e"]);Object(c["a"])([Object(s["d"])({required:!0,type:Boolean,default:!1})],Q.prototype,"visible",void 0),Object(c["a"])([Object(s["d"])({default:!1,required:!0,type:Boolean})],Q.prototype,"connecting",void 0),Object(c["a"])([Object(s["d"])({required:!0})],Q.prototype,"hasProvider",void 0),Object(c["a"])([Object(s["b"])()],Q.prototype,"close",null),Object(c["a"])([Object(s["b"])()],Q.prototype,"connect",null),Q=Object(c["a"])([Object(s["a"])({components:{RaidenDialog:b["a"],ActionButton:f["a"],NoAccessMessage:L},computed:Object(u["f"])(["accessDenied"])})],Q);var J=Q,z=J,ee=(n("e4b6"),n("dac3")),te=Object(D["a"])(z,p,d,!1,null,"469a86df",null),ne=te.exports;C()(te,{VCardText:ee["b"],VCardTitle:ee["c"]});var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tokens.length?e._e():n("v-container",{staticClass:"new-token fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"new-token__button",attrs:{cols:"12"}},[n("v-btn",{attrs:{fab:"",color:"primary"},on:{click:function(t){return e.navigateToTokenSelect()}}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus")])],1)],1),n("v-col",{staticClass:"new-token__header",attrs:{cols:"12"}},[e._v(" "+e._s(e.$t("tokens.connect-new"))+" ")])],1)],1)},ae=[],oe=n("152b");function ie(e){return ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function de(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}function be(e,t){return be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},be(e,t)}function ye(e){var t=ve();return function(){var n,r=ge(e);if(t){var a=ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){return!t||"object"!==ie(t)&&"function"!==typeof t?he(e):t}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}var Oe=function(e){de(n,e);var t=ye(n);function n(){return le(this,n),t.apply(this,arguments)}return pe(n,[{key:"onChange",value:function(e){e.length&&this.navigateToSelectTransferTarget(e[0].address)}}]),n}(Object(s["c"])(oe["a"]));Object(c["a"])([Object(s["f"])("tokens",{immediate:!0})],Oe.prototype,"onChange",null),Oe=Object(c["a"])([Object(s["a"])({computed:se({},Object(u["d"])(["tokens"]))})],Oe);var we=Oe,_e=we,ke=(n("959b"),n("f710")),je=n("6c75"),Ee=n("948a"),Te=n("cf2c"),Se=n("609e"),Ae=Object(D["a"])(_e,re,ae,!1,null,"593703f5",null),xe=Ae.exports;C()(Ae,{VBtn:ke["a"],VCol:je["a"],VContainer:Ee["a"],VIcon:Te["a"],VRow:Se["a"]});var Ne=n("f15c"),De=n("2fca");function Re(e){return Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Le(o,r,a,i,c,"next",e)}function c(e){Le(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function We(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function He(e){var t=Ke();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?qe(e):t}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}var Ze=function(e){We(n,e);var t=He(n);function n(){var e;return Me(this,n),e=t.apply(this,arguments),e.connectDialog=!1,e.connecting=!1,e.hasProvider=!1,e}return Fe(n,[{key:"created",value:function(){var e=Ue(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Ne["a"].injectedWeb3Available()){e.next=3;break}return this.hasProvider=!0,e.abrupt("return");case 3:return e.next=5,De["a"].configuration();case 5:t=e.sent,this.hasProvider=!!t.rpc_endpoint;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=Ue(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.settings,n=t.useRaidenAccount,r=t.isFirstTimeConnect,!r||!n){e.next=4;break}return this.connectDialog=!0,e.abrupt("return");case 4:return this.connectDialog=!1,this.connecting=!0,this.$store.commit("reset"),this.$store.commit("accessDenied",l["a"].UNDEFINED),e.next=10,this.$raiden.connect(this.stateBackup,!!n||void 0);case 10:this.connecting=!1,this.accessDenied||(this.connectDialog=!1);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"inaccessible",get:function(){return this.connecting||this.loading||this.accessDenied!==l["a"].UNDEFINED}}]),n}(s["e"]);Ze=Object(c["a"])([Object(s["a"])({computed:Pe(Pe({},Object(u["f"])(["loading","accessDenied","stateBackup","settings"])),Object(u["d"])(["isConnected"])),components:{ActionButton:f["a"],ConnectDialog:ne,NoTokens:xe,NoAccessMessage:L}})],Ze);var Xe=Ze,Ye=Xe,Qe=(n("3465"),n("d27f")),Je=Object(D["a"])(Ye,r,a,!1,null,"3ad2829a",null);t["a"]=Je.exports;C()(Je,{VCol:je["a"],VContainer:Ee["a"],VImg:Qe["a"],VRow:Se["a"]})},bf6c2:function(e){e.exports=JSON.parse('{"sdk":"0.11.1","contracts":"0.37.1"}')},c0e3:function(e,t,n){e.exports=n.p+"img/bug.4e8b8f1b.svg"},c2ff:function(e,t,n){e.exports=n.p+"img/input_invalid.4e8b2468.svg"},c998:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":5,"contracts":{"SecretRegistry":{"address":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","transaction_hash":"0x74e45a70fbfe991b9dcee98b248a8165c5cb1cbfe0a8e8b5cca07219e958bce9","block_number":2723613,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x5a5CF4A63022F61F1506D1A2398490c2e8dfbb98","transaction_hash":"0x229a818e87c41e5ca1818e7f102d02edb22018475706846071b2f0e7dc59eca6","block_number":2723614,"gas_cost":4001594,"constructor_arguments":["0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e",5,20,555428,1.157920892373162e+77]}},"token_networks":[{"token_network_address":"0x812650FB6Acdf9dD47E631cBB5518B32FFD4D129","constructor_arguments":{"_token_address":"0xC563388e2e2fdD422166eD5E76971D11eD37A466","_secret_registry":"0x9fC80eb1939d8147aB90BAC01AD585f3a71BeE7e","_chain_id":5,"_settlement_timeout_min":20,"_settlement_timeout_max":555428,"_deprecation_executor":"0x062C12c01D0f17fC9eAa33940D994594d91a0182","_channel_participant_deposit_limit":1.157920892373162e+77,"_token_network_deposit_limit":1.157920892373162e+77}}]}')},cd49:function(e,t,n){"use strict";n.r(t);var r=n("4f30"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("div",{attrs:{id:"application-wrapper"}},[n("router-view",{attrs:{name:"modal"}}),n("router-view",{attrs:{name:"notifications"}}),n("div",{attrs:{id:"application-content"}},[n("app-header"),n("v-main",[n("v-container",{staticClass:"application__container fill-height",attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1),n("div",{staticClass:"policy"},[n("a",{attrs:{href:"https://raiden.network/privacy.html",target:"_blank"}},[e._v(" "+e._s(e.$t("application.privacy-policy"))+" ")])]),n("offline-snackbar"),n("update-snackbar"),n("notification-area")],1)},o=[],i=n("e921"),c=n("66ba"),s=n("152b"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-header"},[r("v-row",{staticClass:"app-header__top",attrs:{justify:"center",align:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"app-header__top__content"},[r("div",{staticClass:"app-header__top__content__back"},[e.canGoBack?r("v-btn",{attrs:{height:"40px",width:"40px",text:"",icon:""},on:{click:function(t){return e.onBackClicked()}}},[r("v-img",{attrs:{src:n("73da"),"max-width":"34px"}})],1):e._e()],1),r("v-col",[r("div",{staticClass:"app-header__top__content__title"},[e._v(" "+e._s(e.$route.meta.title)+" ")]),e.showTitleOnly?e._e():r("div",{staticClass:"app-header__top__content__network"},[e._v(" "+e._s(e.network)+" ")])]),e.showTitleOnly?e._e():r("span",{staticClass:"app-header__notifications-wrapper"},[r("v-btn",{attrs:{icon:"",height:"30px",width:"25px"},nativeOn:{click:function(t){return e.notificationPanel()}}},[e.newNotifications?r("v-badge",{attrs:{color:"notification",overlap:"",bordered:"",dot:""}},[r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1):r("v-img",{attrs:{height:"30px",width:"25px",src:n("4170")}})],1)],1),e.isDisclaimerRoute?e._e():r("span",{staticClass:"app-header__account-wrapper"},[r("header-identicon",{nativeOn:{click:function(t){return e.navigateToAccoount()}}})],1)],1)])],1)],1)},l=[],f=n("2b7f"),p=n("80bf"),d=n("233e"),b=n("9302");function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=S();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var x=Object(f["a"])("notifications"),N=x.mapState,D=x.mapMutations,R=function(e){_(n,e);var t=j(n);function n(){return g(this,n),t.apply(this,arguments)}return w(n,[{key:"notificationPanel",value:function(){this.notificationsViewed(),this.navigateToNotifications()}},{key:"isDisclaimerRoute",get:function(){return this.$route.name===p["a"].DISCLAIMER}},{key:"canGoBack",get:function(){var e=[p["a"].HOME,p["a"].TRANSFER];return this.isConnected&&!this.isDisclaimerRoute&&!e.includes(this.$route.name)}},{key:"showTitleOnly",get:function(){return this.isDisclaimerRoute||!this.isConnected}}]),n}(Object(c["c"])(s["a"]));R=Object(i["a"])([Object(c["a"])({components:{HeaderIdenticon:d["a"],AddressDisplay:b["a"]},computed:h(h(h({},Object(f["f"])(["defaultAccount"])),N(["newNotifications"])),Object(f["d"])(["network","isConnected"])),methods:h({},D(["notificationsViewed"]))})],R);var C=R,P=C,I=(n("017c"),n("3c13")),L=n("0c90"),U=n.n(L),M=n("d5a4"),B=n("f710"),F=n("6c75"),W=n("d27f"),$=n("609e"),H=Object(I["a"])(P,u,l,!1,null,"71cd3860",null),V=H.exports;U()(H,{VBadge:M["a"],VBtn:B["a"],VCol:F["a"],VImg:W["a"],VRow:$["a"]});var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.offline?n("span",[n("blurred-overlay",{attrs:{show:e.offline,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"error"},model:{value:e.offline,callback:function(t){e.offline=t},expression:"offline"}},[e._v(" "+e._s(e.$t("general.offline"))+" "),n("v-icon",[e._v("mdi-alert")])],1)],1):e._e()},K=[],G=n("0a08");function Z(e){return Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function J(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}function ee(e){var t=re();return function(){var n,r=ae(e);if(t){var a=ae(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return te(this,n)}}function te(e,t){return!t||"object"!==Z(t)&&"function"!==typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var oe=function(e){J(n,e);var t=ee(n);function n(){var e;return X(this,n),e=t.apply(this,arguments),e.offline=!1,e}return Q(n,[{key:"handleOnline",value:function(){this.offline=!1}},{key:"handleOffline",value:function(){this.offline=!0}},{key:"mounted",value:function(){this.offline=!navigator.onLine,window.addEventListener("offline",this.handleOffline),window.addEventListener("online",this.handleOnline)}},{key:"beforeDestroy",value:function(){window.removeEventListener("offline",this.handleOffline),window.removeEventListener("online",this.handleOnline)}}]),n}(c["e"]);oe=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:G["a"]}})],oe);var ie=oe,ce=ie,se=n("cf2c"),ue=n("7c2b"),le=Object(I["a"])(ce,q,K,!1,null,null,null),fe=le.exports;U()(le,{VIcon:se["a"],VSnackbar:ue["a"]});var pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.updateAvailable?n("span",[n("blurred-overlay",{attrs:{show:e.updateAvailable,fullscreen:!0}}),n("v-snackbar",{attrs:{timeout:-1,color:"primary"},model:{value:e.updateAvailable,callback:function(t){e.updateAvailable=t},expression:"updateAvailable"}},[e._v(" "+e._s(e.$t("update.available"))+" "),n("v-btn",{attrs:{dark:"",text:"",loading:e.isUpdating},on:{click:e.update}},[e._v(" "+e._s(e.$t("update.update"))+" ")])],1)],1):e._e()},de=[];function be(e){return be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}function ve(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function Oe(e){var t=ke();return function(){var n,r=je(e);if(t){var a=je(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){return!t||"object"!==be(t)&&"function"!==typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}var Ee=function(e){ve(n,e);var t=Oe(n);function n(){var e;return ye(this,n),e=t.apply(this,arguments),e.isUpdating=!1,e.updateAvailable=!1,e.swRegistration=null,e}return he(n,[{key:"created",value:function(){var e=this;document.addEventListener("swUpdated",this.handleSWUpdate,{once:!0}),navigator.serviceWorker.addEventListener("controllerchange",(function(){setTimeout((function(){e.updateAvailable=!1,window.location.reload()}),1500)}))}},{key:"beforeDestroy",value:function(){document.removeEventListener("swUpdated",this.handleSWUpdate)}},{key:"handleSWUpdate",value:function(e){this.swRegistration=e.detail,this.updateAvailable=!0}},{key:"update",value:function(){this.isUpdating=!0,this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage("skipWaiting")}}]),n}(c["e"]);Ee=Object(i["a"])([Object(c["a"])({components:{BlurredOverlay:G["a"]}})],Ee);var Te=Ee,Se=Te,Ae=Object(I["a"])(Se,pe,de,!1,null,null,null),xe=Ae.exports;U()(Ae,{VBtn:B["a"],VSnackbar:ue["a"]});var Ne,De,Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-snackbar",{attrs:{timeout:e.notification.duration,top:"",centered:"",vertical:"",app:"",rounded:"","max-width":"550px"},on:{input:function(t){return e.notificationShown(e.notification.id)}},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{dark:"",text:"",left:""},on:{click:function(t){return e.dismiss(e.notification.id)}}},"v-btn",n,!1),[e._v(" "+e._s(e.$t("notification-area.dismiss"))+" ")])]}}]),model:{value:e.notification.display,callback:function(t){e.$set(e.notification,"display",t)},expression:"notification.display"}},[r("v-row",{staticClass:"notification-area__notification__content",attrs:{"no-gutters":""}},["none"!==e.notification.context?r("v-col",{staticClass:"notification-area__notification__content__icon d-flex flex-column",attrs:{cols:"auto"}},[r("v-img",{class:"notification-area__notification__content__icon--"+e.notification.context,attrs:{"aspect-ratio":"1",contain:"",src:n("31e8")("./"+e.notification.context+".svg"),height:"48px",width:"48px"}})],1):e._e(),r("v-col",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("h3",{staticClass:"text--primary title"},[e._v(e._s(e.notification.title))])]),e.notificationQueue.length>=1?r("v-col",{attrs:{cols:"auto"}},[r("v-badge",{staticClass:"notification-area__notification__content__count",attrs:{inline:"",content:e.notificationQueue.length,color:"info"}})],1):e._e()],1),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",[r("p",{staticClass:"text--secondary caption notification-area__notification__content__description text-justify"},[e._v(" "+e._s(e.notification.description)+" ")])])],1)],1)],1)],1)},Ce=[];function Pe(e){return Pe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}function We(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function He(e){var t=Ke();return function(){var n,r=Ge(e);if(t){var a=Ge(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==Pe(t)&&"function"!==typeof t?qe(e):t}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}(function(e){e[e["LOW"]=0]="LOW",e[e["HIGH"]=1]="HIGH"})(Ne||(Ne={})),function(e){e["NONE"]="none",e["INFO"]="info",e["WARNING"]="warning",e["ERROR"]="error"}(De||(De={}));var Ze={id:-1,title:"",description:"",display:!1,duration:5e3,importance:Ne.LOW,context:De.NONE,received:new Date},Xe=function(e){We(n,e);var t=He(n);function n(){var e;return Me(this,n),e=t.apply(this,arguments),e.notification=Ze,e}return Fe(n,[{key:"onQueueChange",value:function(){var e=this;if(!this.notification.display&&this.notificationQueue.length>0){var t=this.notificationQueue.shift();if(!t)return;this.$nextTick((function(){return e.notification=t}))}}},{key:"created",value:function(){this.notification=Ze}},{key:"dismiss",value:function(e){this.notificationShown(e),this.notification=Le(Le({},this.notification),{},{display:!1})}}]),n}(c["e"]);Object(i["a"])([Object(c["f"])("notificationQueue",{deep:!0})],Xe.prototype,"onQueueChange",null),Xe=Object(i["a"])([Object(c["a"])({computed:Le({},Object(f["d"])("notifications",["notificationQueue"])),methods:Le({},Object(f["c"])("notifications",["notificationShown"]))})],Xe);var Ye=Xe,Qe=Ye,Je=(n("6707"),Object(I["a"])(Qe,Re,Ce,!1,null,"f05dcae4",null)),ze=Je.exports;function et(e){return et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}function at(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}function ot(e,t){return ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ot(e,t)}function it(e){var t=ut();return function(){var n,r=lt(e);if(t){var a=lt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==et(t)&&"function"!==typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}U()(Je,{VBadge:M["a"],VBtn:B["a"],VCol:F["a"],VImg:W["a"],VRow:$["a"],VSnackbar:ue["a"]});var ft=function(e){at(n,e);var t=it(n);function n(){return tt(this,n),t.apply(this,arguments)}return rt(n,[{key:"destroyed",value:function(){this.$raiden.disconnect()}}]),n}(Object(c["c"])(s["a"]));ft=Object(i["a"])([Object(c["a"])({components:{AppHeader:V,OfflineSnackbar:fe,UpdateSnackbar:xe,NotificationArea:ze}})],ft);var pt=ft,dt=pt,bt=(n("2a59"),n("279f")),yt=n("948a"),mt=n("fe17"),ht=Object(I["a"])(dt,a,o,!1,null,"6f430130",null),vt=ht.exports;U()(ht,{VApp:bt["a"],VContainer:yt["a"],VMain:mt["a"]});var gt=n("499d");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);n("0f75");var Ot=n("6e69"),wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"disclaimer",attrs:{fluid:""}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"10",offset:"1"}},[n("div",{staticClass:"disclaimer__paragraphs font-weight-light"},e._l(e.$t("disclaimer.paragraphs"),(function(t,r){return n("p",{key:r},[e._v(" "+e._s(t)+" ")])})),0),n("v-checkbox",{staticClass:"disclaimer__accept-checkbox",attrs:{label:e.$t("disclaimer.accept-checkbox"),dense:"","hide-details":""},model:{value:e.checkedAccept,callback:function(t){e.checkedAccept=t},expression:"checkedAccept"}}),n("v-checkbox",{staticClass:"disclaimer__persist-checkbox",attrs:{label:e.$t("disclaimer.persist-checkbox"),dense:"","hide-details":""},model:{value:e.checkedPersist,callback:function(t){e.checkedPersist=t},expression:"checkedPersist"}})],1)],1),n("action-button",{attrs:{text:e.$t("disclaimer.accept-button"),enabled:e.checkedAccept,sticky:""},on:{click:e.accept}})],1)},_t=[],kt=n("750b");function jt(e){return jt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t,n){return t&&Tt(e.prototype,t),n&&Tt(e,n),e}function At(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}function xt(e,t){return xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xt(e,t)}function Nt(e){var t=Ct();return function(){var n,r=Pt(e);if(t){var a=Pt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Dt(this,n)}}function Dt(e,t){return!t||"object"!==jt(t)&&"function"!==typeof t?Rt(e):t}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Pt(e){return Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pt(e)}var It=function(e){At(n,e);var t=Nt(n);function n(){var e;return Et(this,n),e=t.apply(this,arguments),e.checkedAccept=!1,e.checkedPersist=!1,e}return St(n,[{key:"accept",value:function(){this.$store.commit("acceptDisclaimer",this.checkedPersist),this.$router.push(this.navigationTarget)}},{key:"navigationTarget",get:function(){var e=this.$route.query.redirectTo;return e?{path:e}:{name:p["a"].HOME}}}]),n}(c["e"]);It=Object(i["a"])([Object(c["a"])({components:{ActionButton:kt["a"]}})],It);var Lt=It,Ut=Lt,Mt=(n("6691"),n("0d4f")),Bt=Object(I["a"])(Ut,wt,_t,!1,null,"51ed7395",null),Ft=Bt.exports;U()(Bt,{VCheckbox:Mt["a"],VCol:F["a"],VContainer:yt["a"],VRow:$["a"]});var Wt=n("bb51"),$t=n("5013"),Ht=n("f455"),Vt=n("87a2"),qt=n("a308"),Kt=n.n(qt),Gt=n("473d"),Zt=n.n(Gt),Xt=n("035e"),Yt=n.n(Xt),Qt=n("95e4"),Jt=n.n(Qt),zt=n("d328"),en=n.n(zt),tn=n("31ec"),nn=n.n(tn),rn=n("e590"),an=n.n(rn),on=n("12aa"),cn=n.n(on);function sn(e){return pn(e)||fn(e)||ln(e)||un()}function un(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ln(e,t){if(e){if("string"===typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,t):void 0}}function fn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function pn(e){if(Array.isArray(e))return dn(e)}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn={notify:function(e,t){var n,r,a=e.commit,o=e.getters.nextNotificationId,i=yn(yn({},t),{},{id:o,received:new Date,display:!0,context:null!==(n=t.context)&&void 0!==n?n:De.NONE,duration:null!==(r=t.duration)&&void 0!==r?r:5e3});a("notificationAdd",i)},notificationShown:function(e,t){var n=e.commit,r=e.state,a=r.notifications.findIndex((function(e){return e.id===t}));if(!(a<0)){var o=sn(r.notifications);o[a]=yn(yn({},r.notifications[a]),{},{display:!1}),n("notifications",o)}}},vn={notificationDelete:function(e,t){e.notifications=e.notifications.filter((function(e){return e.id!==t}))},notificationsViewed:function(e){e.newNotifications=!1},notificationAdd:function(e,t){e.notifications.push(t),e.newNotifications=!0},notifications:function(e,t){e.notifications=t},clear:function(e){e.notifications=[]}},gn={notifications:function(e){return e.notifications.sort((function(e,t){return t.id-e.id}))},nextNotificationId:function(e){var t=e.notifications;return 0===t.length?1:t.map((function(e){return e.id})).sort((function(e,t){return t-e}))[0]+1},notificationQueue:function(e){return e.notifications.filter((function(e){return e.importance===Ne.HIGH&&!0===e.display}))}},On=function(){return{notifications:[],newNotifications:!1}},wn=On(),_n=wn,kn={namespaced:!0,mutations:vn,actions:hn,state:_n,getters:gn};function jn(e){return Sn(e)||Tn(e)||Cn(e)||En()}function En(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Sn(e){if(Array.isArray(e))return Pn(e)}function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){Nn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dn(e,t){return Ln(e)||In(e,t)||Cn(e,t)||Rn()}function Rn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cn(e,t){if(e){if("string"===typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pn(e,t):void 0}}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function In(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ln(e){if(Array.isArray(e))return e}r["a"].use(f["b"]);var Un={loading:!0,blockNumber:0,defaultAccount:"",accountBalance:"0.0",raidenAccountBalance:"",providerDetected:!0,accessDenied:Vt["a"].UNDEFINED,channels:{},tokens:{},tokenAddresses:[],transfers:{},presences:{},network:Vt["b"],stateBackup:"",settings:{isFirstTimeConnect:!0,useRaidenAccount:!0},config:{},userDepositTokenAddress:"",disclaimerAccepted:!1,persistDisclaimerAcceptance:!1};function Mn(){return Jt()(Un)}var Bn=function(e,t){return e.balance&&t.balance&&(!e.balance.isZero()||!t.balance.isZero())},Fn=new $t["a"]({reducer:function(e){return{settings:e.settings}},filter:function(e){return"updateSettings"==e.type},key:"raiden_dapp_settings"}),Wn=new $t["a"]({reducer:function(e){return{disclaimerAccepted:!!e.persistDisclaimerAcceptance&&e.disclaimerAccepted}},filter:function(e){return"acceptDisclaimer"===e.type},key:"raiden_dapp_disclaimer_accepted"}),$n={state:Mn(),mutations:{noProvider:function(e){e.providerDetected=!1},accessDenied:function(e,t){e.accessDenied=t},account:function(e,t){e.defaultAccount=t},loadComplete:function(e){e.loading=!1},updateBlock:function(e,t){e.blockNumber=t},balance:function(e,t){e.accountBalance=t},raidenAccountBalance:function(e,t){e.raidenAccountBalance=t},updateChannels:function(e,t){e.channels=t},updateTokens:function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Dn(r[n],2),o=a[0],i=a[1];o in e.tokens&&an()(i,e.tokens[o])||(o in e.tokens?e.tokens[o]=xn(xn({},e.tokens[o]),i):e.tokens=xn(xn({},e.tokens),{},Nn({},o,i)))}},updateTokenAddresses:function(e,t){e.tokenAddresses=jn(t)},updatePresence:function(e,t){e.presences=xn(xn({},e.presences),t)},network:function(e,t){e.network=t},reset:function(e){var t=e.settings,n=e.disclaimerAccepted;Object.assign(e,xn(xn({},Mn()),{},{settings:t,disclaimerAccepted:n}))},updateTransfers:function(e,t){e.transfers=xn(xn({},e.transfers),{},Nn({},t.key,t))},backupState:function(e,t){e.stateBackup=t},updateSettings:function(e,t){e.settings=t},updateConfig:function(e,t){e.config=t},userDepositTokenAddress:function(e,t){e.userDepositTokenAddress=t},acceptDisclaimer:function(e,t){e.disclaimerAccepted=!0,e.persistDisclaimerAcceptance=t}},actions:{},getters:{tokens:function(e){var t=function(e,t){return e.address=t.token,e[t.state]+=1,e};return Kt()(Yt()(Zt()(e.channels),(function(e){return!cn()(e)})),(function(n){var r=en()(n,t,Object(Vt["d"])()),a=e.tokens[r.address];return a&&(r.name=a.name||"",r.symbol=a.symbol||""),r}))},allTokens:function(e){return Object.values(e.tokens).filter((function(t){return e.tokenAddresses.includes(t.address)})).sort((function(e,t){return Bn(e,t)?t.balance.gt(e.balance)?1:-1:e.symbol&&t.symbol?e.symbol.localeCompare(t.symbol):0}))},channels:function(e){return function(t){var n=[],r=e.channels[t];return r&&!cn()(r)&&(n=Zt()(r)),n}},token:function(e){return function(t){return t in e.tokens?e.tokens[t]:null}},network:function(e){return Object(Ht["g"])(e.network)},mainnet:function(e){return 1===e.network.chainId},channelWithBiggestCapacity:function(e,t){return function(e){var n=t.channels(e),r=n.filter((function(e){return e.state===Ht["b"].open}));return nn()(r,["capacity"],["desc"])[0]}},pendingTransfers:function(e){var t=e.transfers;return Object.keys(t).filter((function(e){var n=t[e].completed;return!n})).reduce((function(e,n){return e[n]=t[n],e}),{})},transfer:function(e){return function(t){var n=Object.keys(e.transfers).find((function(n){return e.transfers[n].paymentId===t}));if(n)return e.transfers[n]}},isConnected:function(e){return!e.loading&&!(!e.defaultAccount||""===e.defaultAccount)},balance:function(e){return e.raidenAccountBalance?e.raidenAccountBalance:e.accountBalance},udcToken:function(e){return e.tokens[e.userDepositTokenAddress]}},plugins:[Fn.plugin,Wn.plugin],modules:{notifications:kn}},Hn=new f["b"].Store($n),Vn=[{path:"/",name:p["a"].DISCLAIMER,meta:{title:"Disclaimer"},component:Ft},{path:"*",redirect:"/"},{path:"/home",name:p["a"].HOME,meta:{title:"Raiden dApp"},component:Wt["a"]},{path:"/transfer/:token",name:p["a"].TRANSFER,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-ad3f536a"),n.e("chunk-e417861e"),n.e("chunk-69afa954"),n.e("chunk-0c6b6cba"),n.e("chunk-794ff9f6")]).then(n.bind(null,"ded4"))}},{path:"/transfer/:token/:target",name:p["a"].TRANSFER_STEPS,meta:{title:"Transfer"},component:function(){return Promise.all([n.e("chunk-ad3f536a"),n.e("chunk-e417861e"),n.e("chunk-0c6b6cba"),n.e("chunk-69970a6a")]).then(n.bind(null,"146c"))}},{path:"/connect",name:p["a"].SELECT_TOKEN,meta:{title:"Select Token"},component:function(){return Promise.all([n.e("chunk-ad3f536a"),n.e("chunk-7a48be95")]).then(n.bind(null,"eb67"))}},{path:"/connect/:token",name:p["a"].SELECT_HUB,meta:{title:"Select Hub"},component:function(){return Promise.all([n.e("chunk-e417861e"),n.e("chunk-69afa954"),n.e("chunk-4910697b"),n.e("chunk-057d4805")]).then(n.bind(null,"5876"))}},{path:"/connect/:token/:partner",name:p["a"].OPEN_CHANNEL,meta:{title:"Open Channel"},component:function(){return Promise.all([n.e("chunk-e417861e"),n.e("chunk-4910697b"),n.e("chunk-351ac455")]).then(n.bind(null,"9db2"))}},{path:"/channels/:token",name:p["a"].CHANNELS,meta:{title:"Channels"},component:function(){return Promise.all([n.e("chunk-ad3f536a"),n.e("chunk-e417861e"),n.e("chunk-8fa2d0c4")]).then(n.bind(null,"3a90"))}},{path:"/notifications",name:p["a"].NOTIFICATIONS,beforeEnter:function(e,t,r){null===t.name?r({name:p["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.notifications=function(){return n.e("chunk-3ce80f0e").then(n.bind(null,"c284"))}),r()}},{path:"/account",name:p["a"].ACCOUNT,beforeEnter:function(e,t,r){null===t.name?r({name:p["a"].HOME}):e.matched.length&&(e.matched[0].components.default=t.matched[0].components.default,e.matched[0].components.modal=function(){return n.e("chunk-2cae49de").then(n.bind(null,"47f5"))}),r()},children:[{path:"/",name:p["a"].ACCOUNT_ROOT,meta:{title:"Account"},component:function(){return Promise.all([n.e("chunk-ad3f536a"),n.e("chunk-1bcf9c2c")]).then(n.bind(null,"f18d"))}},{path:"backup",name:p["a"].ACCOUNT_BACKUP,meta:{title:"Backup State"},component:function(){return Promise.all([n.e("chunk-ad3f536a"),n.e("chunk-3f992048")]).then(n.bind(null,"248b"))}},{path:"raiden",name:p["a"].ACCOUNT_RAIDEN,meta:{title:"Raiden Account"},component:function(){return Promise.all([n.e("chunk-e417861e"),n.e("chunk-01872d34")]).then(n.bind(null,"9114"))}},{path:"settings",name:p["a"].ACCOUNT_SETTINGS,meta:{title:"Settings"},component:function(){return Promise.all([n.e("chunk-ad3f536a"),n.e("chunk-a2f6d7d4")]).then(n.bind(null,"5d16"))}},{path:"withdrawal",name:p["a"].ACCOUNT_WITHDRAWAL,meta:{title:"Withdrawal"},component:function(){return Promise.all([n.e("chunk-ad3f536a"),n.e("chunk-ee4fd88e")]).then(n.bind(null,"c917"))}},{path:"udc",name:p["a"].ACCOUNT_UDC,meta:{title:"UDC"},component:function(){return Promise.all([n.e("chunk-e417861e"),n.e("chunk-bc39380e")]).then(n.bind(null,"4c07"))}}]}];function qn(e,t,n){var r=e.name===p["a"].DISCLAIMER;Hn.state.disclaimerAccepted?r?n({name:p["a"].HOME}):n():r?n():n({name:p["a"].DISCLAIMER,query:{redirectTo:e.fullPath}})}r["a"].use(Ot["a"]);var Kn=new Ot["a"]({mode:"hash",base:"/staging/",routes:Vn});Kn.beforeEach(qn);var Gn=Kn,Zn=n("8aa9");gt["b"].registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var Xn=n("4bf2"),Yn=n.n(Xn),Qn=n("f15c"),Jn=n("a3d5"),zn=n("38dd"),er=n("bf60"),tr=n("c2dd"),nr=n("a8c1"),rr=n.n(nr),ar=n("2fca"),or=n("f30a"),ir=n("c7b4");function cr(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n)}})),t}r["a"].use(ir["a"]);var sr=new ir["a"]({locale:"en",fallbackLocale:"en",messages:cr()}),ur=n("2dfa"),lr=n.n(ur);function fr(e){return fr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function pr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Or(e,t)}function dr(e){var t=vr();return function(){var n,r=wr(e);if(t){var a=wr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return br(this,n)}}function br(e,t){return!t||"object"!==fr(t)&&"function"!==typeof t?yr(e):t}function yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mr(e){var t="function"===typeof Map?new Map:void 0;return mr=function(e){if(null===e||!gr(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return hr(e,arguments,wr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Or(n,e)},mr(e)}function hr(e,t,n){return hr=vr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&Or(o,n.prototype),o},hr.apply(null,arguments)}function vr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function gr(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function Or(e,t){return Or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Or(e,t)}function wr(e){return wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wr(e)}function _r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(n),!0).forEach((function(t){Ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jr(e,t){return Sr(e)||Tr(e,t)||Nr(e,t)||Er()}function Er(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tr(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Sr(e){if(Array.isArray(e))return e}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xr(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Nr(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Nr(e,t){if(e){if("string"===typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(e,t):void 0}}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rr(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Cr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Rr(o,r,a,i,c,"next",e)}function c(e){Rr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lr(e,t,n){return t&&Ir(e.prototype,t),n&&Ir(e,n),e}var Ur=function(){function e(t){Pr(this,e),this._userDepositTokenAddress="",this._raiden=void 0,this.store=t}return Lr(e,[{key:"updateBalances",value:function(){var e=Cr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.store,e.next=3,this.getBalance();case 3:return e.t1=e.sent,e.t0.commit.call(e.t0,"balance",e.t1),e.t2=this.store,e.next=8,this.getBalance(this.raiden.address);case 8:e.t3=e.sent,e.t2.commit.call(e.t2,"raidenAccountBalance",e.t3);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTokenList",value:function(){var e=Cr(Yn.a.mark((function e(){var t,n,r,a,o,i;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenList();case 2:t=e.sent,n=[],r={},a=xr(t);try{for(a.s();!(o=a.n()).done;)i=o.value,n.push(i),r[i]={address:i}}catch(c){a.e(c)}finally{a.f()}return this.store.commit("updateTokenAddresses",t),this.store.commit("updateTokens",r),e.next=11,this.fetchTokenData(n);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ensResolve",value:function(){var e=Cr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.resolveName(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e["catch"](0),new Mr(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var t=Cr(Yn.a.mark((function t(n,r){var a,o,i,c,s,u=this;return Yn.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ar["a"].configuration();case 3:return o=t.sent,t.next=6,Qn["a"].provider(o.rpc_endpoint);case 6:if(i=t.sent,i){t.next=11;break}this.store.commit("noProvider"),t.next=50;break;case 11:if("string"===typeof i||!("networkVersion"in i)||"1"!==i.networkVersion){t.next=13;break}throw new Ht["f"](Ht["c"].RDN_UNRECOGNIZED_NETWORK);case 13:return t.next=15,e.createRaiden(i,null===o||void 0===o?void 0:o.private_key,n,r);case 15:return a=t.sent,this._raiden=a,this._configuration=o,this._subkey=r,t.next=21,this.getAccount();case 21:return c=t.sent,this.store.commit("account",c),t.next=25,a.userDepositTokenAddress();case 25:return this._userDepositTokenAddress=t.sent,this.store.commit("userDepositTokenAddress",this._userDepositTokenAddress),t.next=29,this.monitorPreSetTokens();case 29:return a.events$.pipe(Object(er["a"])((function(e){return"block/new"===e.type}))).subscribe((function(e){return u.store.commit("updateBlock",e.payload.blockNumber)})),a.events$.pipe(Object(er["a"])((function(e){return"block/new"===e.type})),Object(tr["a"])((function(){return u.fetchTokenData(lr()(u.store.getters.tokens.map((function(e){return e.address})).concat(u._userDepositTokenAddress)))}))).subscribe(),a.events$.pipe(Object(er["a"])((function(e){return"raiden/shutdown"===e.type}))).subscribe((function(){return u.store.commit("reset")})),a.config$.subscribe(function(){var e=Cr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.store.commit("updateConfig",t),!(null===(n=t.caps)||void 0===n?void 0:n[Ht["a"].NO_RECEIVE])){e.next=4;break}return e.next=4,u.notifyNoReceive();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.events$.subscribe(function(){var e=Cr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("token/monitored"!==t.type){e.next=4;break}u.store.commit("updateTokens",Ar({},t.payload.token,{address:t.payload.token})),e.next=36;break;case 4:if("matrix/presence/success"!==t.type){e.next=8;break}u.store.commit("updatePresence",Ar({},t.meta.address,t.payload.available)),e.next=36;break;case 8:if("ms/balanceProof/sent"!==t.type){e.next=15;break}if(t.payload.confirmed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,u.notifyBalanceProofSend(t.payload.monitoringService,t.payload.partner,t.payload.reward,t.payload.txHash);case 13:e.next=36;break;case 15:if("udc/withdrawn"!==t.type){e.next=22;break}if(t.payload.confirmed){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,u.notifyWithdrawal(t.meta.amount,t.payload.withdrawal);case 20:e.next=36;break;case 22:if("udc/withdraw/failure"!==t.type){e.next=27;break}return e.next=25,u.notifyWithdrawalFailure(null===(n=t.payload)||void 0===n?void 0:n.code,t.meta.amount,t.payload.message);case 25:e.next=36;break;case 27:if("channel/settle/success"!==t.type){e.next=33;break}if(!t.payload.confirmed){e.next=31;break}return e.next=31,u.notifyChannelSettleSuccess(t.meta.partner,t.meta.tokenNetwork,t.payload.txHash);case 31:e.next=36;break;case 33:if("channel/settle/failure"!==t.type){e.next=36;break}return e.next=36,u.notifyChannelSettleFailure(t.meta.partner,t.meta.tokenNetwork,t.payload.message);case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.channels$.subscribe((function(e){u.store.commit("updateChannels",e)})),a.transfers$.subscribe((function(e){u.store.commit("updateTransfers",e)})),this.store.commit("network",a.network),window.addEventListener("beforeunload",(function(e){return e.preventDefault(),""})),a.start(),t.t0=this.store,t.next=42,this.getBalance();case 42:if(t.t1=t.sent,t.t0.commit.call(t.t0,"balance",t.t1),!r){t.next=50;break}return t.t2=this.store,t.next=48,this.getBalance(a.address);case 48:t.t3=t.sent,t.t2.commit.call(t.t2,"raidenAccountBalance",t.t3);case 50:t.next=56;break;case 52:t.prev=52,t.t4=t["catch"](0),s=t.t4.message&&t.t4.message.indexOf("No deploy info provided")>-1?Vt["a"].UNSUPPORTED_NETWORK:t.t4.message&&t.t4.message.indexOf("Could not replace stored state")>-1?Vt["a"].RDN_STATE_MIGRATION:t.t4 instanceof Br?Vt["a"].INITIALIZATION_FAILED:Vt["a"].NO_ACCOUNT,this.store.commit("accessDenied",s);case 56:this.store.commit("loadComplete");case 57:case"end":return t.stop()}}),t,this,[[0,52]])})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"notifyNoReceive",value:function(){var e=Cr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:sr.t("receiving-disabled-dialog.title"),description:sr.t("receiving-disabled-dialog.body"),importance:Ne.HIGH,context:De.WARNING,duration:-1});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorPreSetTokens",value:function(){var e=Cr(Yn.a.mark((function e(){var t,n,r,a,o,i,c;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.network.chainId,null===(t=this._configuration)||void 0===t||null===(n=t.per_network)||void 0===n?void 0:n[r]){e.next=3;break}return e.abrupt("return");case 3:a=this._configuration.per_network[r],o=xr(a.monitored),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=13;break}return c=i.value,e.next=11,this.raiden.monitorToken(c);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),o.e(e.t0);case 18:return e.prev=18,o.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawalFailure",value:function(){var e=Cr(Yn.a.mark((function e(t,n,r){var a,o,i,c,s,u;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(["UDC_PLAN_WITHDRAW_GT_ZERO","UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE","UDC_PLAN_WITHDRAW_FAILED"].indexOf(t)>=0)){e.next=2;break}return e.abrupt("return");case 2:return o=this.store.getters.udcToken,i=null!==(a=o.decimals)&&void 0!==a?a:18,c=Jn["a"].toUnits(n,i),s="string"===typeof t?sr.t("notifications.withdrawal.failure.descriptions.".concat(t),{amount:c,symbol:o.symbol}):void 0,u=s||sr.t("notifications.withdrawal.failure.description",{amount:c,symbol:o.symbol,message:r}),e.next=9,this.store.dispatch("notifications/notify",{title:sr.t("notifications.withdrawal.failure.title"),description:u,context:De.ERROR,importance:Ne.HIGH});case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyWithdrawal",value:function(){var e=Cr(Yn.a.mark((function e(t,n){var r,a,o,i,c;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.store.getters.udcToken,o=null!==(r=a.decimals)&&void 0!==r?r:18,i=Jn["a"].toUnits(t,o),c=Jn["a"].toUnits(n,o),e.next=6,this.store.dispatch("notifications/notify",{title:sr.t("notifications.withdrawal.success.title"),description:sr.t("notifications.withdrawal.success.description",{amount:i,withdrawn:c,symbol:a.symbol}),context:De.INFO,importance:Ne.HIGH});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"notifyBalanceProofSend",value:function(){var e=Cr(Yn.a.mark((function e(t,n,r,a){var o,i,c,s;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this.store.getters.udcToken,c=null!==(o=i.decimals)&&void 0!==o?o:18,s=Jn["a"].toUnits(r,c),e.next=5,this.store.dispatch("notifications/notify",{title:sr.t("notifications.ms-balance-proof.title"),description:sr.t("notifications.ms-balance-proof.description",{monitoringService:t,partner:n,reward:s,symbol:i.symbol,txHash:a}),context:De.INFO,importance:Ne.HIGH});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleSuccess",value:function(){var e=Cr(Yn.a.mark((function e(t,n,r){var a;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=sr.t("notifications.settlement.success.description",{partner:t,tokenNetwork:n,txHash:r}),this._subkey&&(a+=" "+sr.t("notifications.settlement.success.withdrawal_hint")),e.next=4,this.store.dispatch("notifications/notify",{title:sr.t("notifications.settlement.success.title"),description:a,context:De.INFO,importance:Ne.HIGH});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"notifyChannelSettleFailure",value:function(){var e=Cr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.dispatch("notifications/notify",{title:sr.t("notifications.settlement.failure.title"),description:sr.t("notifications.settlement.failure.description",{partner:t,tokenNetwork:n,message:r}),context:De.ERROR,importance:Ne.HIGH});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"disconnect",value:function(){this.raiden.stop()}},{key:"getAccount",value:function(){var e=Cr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.address);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMainAccount",value:function(){var e=Cr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.mainAddress);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=Cr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getBalance(t);case 2:return n=e.sent,e.abrupt("return",Jn["a"].toEth(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=Cr(Yn.a.mark((function e(t){var n,r,a,o,i,c,s,u;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.raiden,e.prev=1,e.next=4,Promise.all([n.getTokenBalance(t),n.getTokenInfo(t)]);case 4:return r=e.sent,a=jr(r,2),o=a[0],i=a[1],c=i.decimals,s=i.symbol,u=i.name,e.abrupt("return",{name:u,symbol:s,balance:o,decimals:c,address:t});case 14:return e.prev=14,e.t0=e["catch"](1),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=Cr(Yn.a.mark((function e(t,n,r,a){var o,i;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e,t){a&&a({current:e,total:t})},i=this.raiden,o(1,3),e.next=5,i.openChannel(t,n,{deposit:r},(function(e){return e.type===Ht["d"].OPENED?o(2,3):""}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=Cr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.closeChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deposit",value:function(){var e=Cr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"withdraw",value:function(){var e=Cr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.withdrawChannel(t,n,r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=Cr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.settleChannel(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchTokenData",value:function(){var e=Cr(Yn.a.mark((function e(t){var n,r=this;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return n=function(){var e=Cr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getToken(t).then((function(e){e&&r.store.commit("updateTokens",Ar({},e.address,e))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,rr()(6,t,n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=Cr(Yn.a.mark((function e(t,n,r,a,o){var i;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transfer(t,n,r,{paymentId:o,paths:a});case 2:return i=e.sent,e.next=5,this.raiden.waitTransfer(i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=Cr(Yn.a.mark((function e(t,n,r,a){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findRoutes(t,n,r,{pfs:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"fetchServices",value:function(){var e=Cr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.findPFS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=Cr(Yn.a.mark((function e(t,n,r){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.directRoute(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=Cr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.mint(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=Cr(Yn.a.mark((function e(t,n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.depositToUDC(t,(function(e){return e.type===Ht["d"].APPROVED?n():null}));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=Cr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.planUdcWithdraw(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=Cr(Yn.a.mark((function e(){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.raiden.getUDCCapacity());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=Cr(Yn.a.mark((function e(t){var n,r;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.raiden.getAvailability(t);case 3:return n=e.sent,r=n.available,e.abrupt("return",r);case 8:e.prev=8,e.t0=e["catch"](0),this.store.commit("updatePresence",Ar({},t,!1));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getState",value:function(){var e=Cr(Yn.a.mark((function e(){var t,n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this._raiden)||void 0===t||t.stop(),e.next=3,null===(n=this._raiden)||void 0===n?void 0:n.state$.toPromise();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"transferToRaidenAccount",value:function(){var e=Cr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.transferOnchainBalance(this.raiden.address,Object(zn["parseEther"])(t));case 2:return e.next=4,this.updateBalances();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferToMainAccount",value:function(){var e=Cr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.raiden.mainAddress,!n){e.next=6;break}return e.next=4,this.raiden.transferOnchainBalance(n,Object(zn["parseEther"])(t),{subkey:!0});case 4:return e.next=6,this.updateBalances();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnChainTokens",value:function(){var e=Cr(Yn.a.mark((function e(t,n){var r;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.raiden.mainAddress,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.raiden.transferOnchainTokens(t,r,n,{subkey:!0});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRaidenAccountBalances",value:function(){var e=Cr(Yn.a.mark((function e(){var t,n,r,a,o,i,c,s=this;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.raiden,t.mainAddress){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,t.getTokenList();case 5:return n=e.sent,r={},a=function(){var e=Cr(Yn.a.mark((function e(n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenBalance(n,t.address).then((function(e){e.gt(or["Zero"])&&(r[n]={address:n,balance:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=10,rr()(6,n,a);case 10:if(o={},Object.keys(r).forEach((function(e){var t=s.store.state.tokens[e];t&&(o[e]=kr(kr({},t),r[e]),delete r[e])})),i=function(){var e=Cr(Yn.a.mark((function e(n){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getTokenInfo(n).then((function(e){o[n]=kr(kr({},e),r[n])})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object.keys(r),!(c.length>0)){e.next=17;break}return e.next=17,rr()(6,c,i);case 17:return e.abrupt("return",Object.values(o));case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=Cr(Yn.a.mark((function e(t){return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.monitorToken(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTokenBalance",value:function(){var e=Cr(Yn.a.mark((function e(t){var n;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.raiden.getTokenBalance(t);case 2:return n=e.sent,e.abrupt("return",n.toString());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"raiden",get:function(){if(void 0===this._raiden)throw new Error("Raiden instance was not initialized");return this._raiden}},{key:"monitoringReward",get:function(){return this.raiden.config.monitoringReward}}],[{key:"createRaiden",value:function(){var e=Cr(Yn.a.mark((function e(t){var n,r,a,o,i=arguments;return Yn.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.prev=3,e.next=6,ar["a"].contracts();case 6:return o=e.sent,e.next=9,Ht["e"].create(t,n,{storage:window.localStorage,state:r},o,{pfsSafetyMargin:1.1,pfs:"https://pfs.demo001.env.raiden.network",matrixServer:"https://transport.demo001.env.raiden.network",matrixServerLookup:Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_MATRIX_LIST_URL},a);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](3),new Br(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Mr=function(e){pr(n,e);var t=dr(n);function n(){return Pr(this,n),t.apply(this,arguments)}return n}(mr(Error)),Br=function(e){pr(n,e);var t=dr(n);function n(){return Pr(this,n),t.apply(this,arguments)}return n}(mr(Error));function Fr(e,t){e.prototype.$raiden=new Ur(Hn)}var Wr=n("5ffb"),$r=n.n(Wr);function Hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qr(e,t,n){return t&&Vr(e.prototype,t),n&&Vr(e,n),e}var Kr=function(){function e(){Hr(this,e),this.cache={}}return qr(e,[{key:"getIdenticon",value:function(e){var t=this.cache[e];if(t)return t;var n=$r()(e);return this.cache[e]=n,n}}]),e}();function Gr(e,t){e.prototype.$identicon=new Kr}n("7ba6"),n("8e5c"),n("bd89");var Zr=n("60f7");r["a"].use(Zr["a"]);var Xr=new Zr["a"]({icons:{iconfont:"mdi"},theme:{options:{customProperties:!0},dark:!0,themes:{dark:{notification:"#ea6464",primary:"#28A5C8",secondary:"#0A6E87",pending:"#fdd327",success:"#1dc512",failed:"#ea6464"}}}}),Yr=n("a24d"),Qr=(n("6a4f"),n("de70"));Object({NODE_ENV:"production",VUE_APP_PFS:"https://pfs.demo001.env.raiden.network",VUE_APP_MATRIX_SERVER:"https://transport.demo001.env.raiden.network",VUE_APP_HUB:"hub.raiden.eth",VUE_APP_ALLOW_MAINNET:"false",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",BASE_URL:"/staging/"}).VUE_APP_RAIDEN_PACKAGE||Object(Qr["a"])("".concat("/staging/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(e){setInterval((function(){e.update()}),6e4),console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){document.dispatchEvent(new CustomEvent("swUpdated",{detail:e})),console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,Object(Zn["b"])(),r["a"].use(Fr),r["a"].use(Gr),r["a"].use(Yr["a"]),new r["a"]({vuetify:Xr,router:Gn,store:Hn,i18n:sr,render:function(e){return e(vt)}}).$mount("#app")},d678:function(e,t,n){},d6c5:function(e,t,n){e.exports=n.p+"img/metamask.c879a582.svg"},d989:function(e,t,n){e.exports=n.p+"img/deposit.d1f000b7.svg"},dcec:function(e,t,n){},e2f5:function(e,t,n){e.exports=n.p+"img/eth_transfer_arrow.cdc92be6.svg"},e4b6:function(e,t,n){"use strict";var r=n("afd6"),a=n.n(r);a.a},ec79:function(e,t,n){e.exports=n.p+"img/generic.55c56a33.svg"},edd4:function(e){e.exports=JSON.parse('{"disclaimer":{"paragraphs":["This is a Beta version of experimental open source software released as a test version under an MIT license and may contain errors and/or bugs. No guarantee or representation whatsoever is made regarding its suitability (or its use) for any purpose or regarding its compliance with any applicable laws and regulations. Use of the software is at your own risk and discretion and by using the software you warrant and represent that you have read this disclaimer, understand its contents, assume all risk related thereto and hereby release, waive, discharge and covenant not to hold liable Brainbot Labs Establishment or any of its officers, employees or affiliates from and for any direct or indirect damage resulting from the the software or the use thereof. Such to the extent as permissible by applicable laws and regulations."," Privacy warning: Please be aware, that by using the Raiden Client, among others your Ethereum address, channels, channel deposits, settlements and the Ethereum address of your channel counterparty will be stored on the Ethereum chain, i.e. on servers of Ethereum node operators and ergo are to a certain extent publicly available. The same might also be stored on systems of parties running Raiden nodes connected to the same token network. Data present in the Ethereum chain is very unlikely to be able to be changed, removed or deleted from the public arena."," Also be aware, that data on individual Raiden token transfers will be made available via the Matrix protocol to the recipient, intermediating nodes of a specific transfer as well as to the Matrix server operators, see Raiden Transport Specification."],"accept-checkbox":"I have read, understood and hereby accept the above disclaimer and privacy warning","persist-checkbox":"Don\'t display this message on start up","accept-button":"Accept"},"home":{"welcome":"Welcome to the Raiden dApp","connect-button":"Connect","disclaimer":"The Raiden dApp is a reference implementation of the Raiden Light Client SDK. It is work in progress and can only be used on Ethereum testnets.","getting-started":{"description":"Read the {0} for detailed information on how to use the Raiden dApp.","link-name":"getting started guide"},"connect-dialog":{"title":"Connect","raiden-account":"Generate Account & Key","description-raiden-account":"A Raiden Account will be generated.","description-web3-account":"You can use your Web3 account directly by enabling it in the settings menu.","no-provider":"No Web3 provider detected, please install e.g. MetaMask."}},"notifications":{"no-notifications":"No notifications","ms-balance-proof":{"title":"Balance proof submitted","description":"A monitoring service successfully submitted a balance proof for a channel claiming a reward of {reward} {symbol}. Service: {monitoringService}, Partner: {partner}, Transaction: {txHash}"},"withdrawal":{"success":{"title":"User Deposit Withdrawal","description":"A planned withdrawal of {amount} {symbol} was successfully completed withdrawing {withdrawal} {symbol}"},"failure":{"title":"User Deposit Withdrawal","description":"The planned withdrawal of {amount} {symbol} failed: {message}","descriptions":{"UDC_WITHDRAW_NO_BALANCE":"We could not complete the withdrawal of {amount} {symbol} because there was not enough balance.","UDC_WITHDRAW_FAILED":"We could not complete the withdrawal of {amount} {symbol} because the transaction failed."}}},"clear":"Clear","settlement":{"success":{"title":"Channel Settlement","description":"The channel with {partner} for the token network {tokenNetwork} has become settled ({txHash}).","withdrawal_hint":"Go to the acounts Withdrawal screen to transfer the tokens to your main account."},"failure":{"title":"Channel Settlement","description":"The attempt to settle the channel with {partner} for the token network {tokenNetwork} failed: {message}"}}},"general":{"buttons":{"cancel":"Cancel","transfer":"Transfer","continue":"Continue","confirm":"Confirm"},"offline":"Please connect to the internet.","raiden-account":"Raiden Account","main-account":"Main Account"},"account-content":{"account-details":"Account Details","address":"Address:","currency":"ETH:","menu-items":{"settings":{"title":"Settings","subtitle":"Change how you interact with the dApp"},"backup-state":{"title":"Backup state","subtitle":"Download & upload your state"},"report-bugs":{"title":"Report bugs","subtitle":"Download logs"},"raiden-account":{"title":"Raiden Account","subtitle":"Transfer ETH between your main and Raiden account"},"withdrawal":{"title":"Withdrawal","subtitle":"Withdraw tokens to your main account"},"udc":{"title":"UDC","subtitle":"Manage User Deposit Contract funds"}}},"withdrawal":{"title":"Transfer token amount back to your main account.","dialog":{"title":"Withdraw {0}","body":"You are about to withdraw {0} from your Raiden account.","progress":"Withdrawing...","button":"Confirm","no-eth":"Your Raiden account does not have sufficient ETH to withdraw."},"blockie-alt":"Token address blockie","no-tokens":"The Raiden account has no tokens"},"udc":{"description":"Your UDC (User Deposit Contract) contains utility tokens for your current account. The tokens are used to pay for services such as pathfinding and monitoring.","deposit":"Deposit","mint-deposit":"Mint and deposit","balance":"Your current UDC balance is:","withdrawal":"Withdrawal","asterisk":"*","withdrawal-footnote":"Actual withdrawal amount might vary","balance-too-low":"Your {symbol} balance is too low to pay for the Monitoring Service. Receiving transfers has been temporarily disabled. Use the button above to mint an deposit more tokens. A minimum amount of 5 {service} is needed to enable receiving.","withdrawal-planned":"The withdrawal from the user deposit has been planned. You will get notified when the withdrawal is complete."},"backup-state":{"description":"The state holds all account information except the private key. You can backup your state to make sure the dApp is kept in sync when switching between browsers.","disabled-download":"Downloading the state is only possible when connected to the dApp","disabled-upload":"Uploading the state is only possible when the dApp is disconnected","download":"Download State","download-warning":"Downloading the state will force the dApp to shut down","download-button":"Download","upload":"Upload State","upload-drag-and-drop":"Drag and drop state file","upload-divider":"or","upload-button":"Browse files","upload-error":"Only one state file in valid JSON format can be uploaded"},"raiden-account":{"in-progress":"Transfer in progress","transfer-from-main-account":"Transfer ETH from Main Account to Raiden Account","transfer-from-raiden-account":"Transfer ETH from Raiden Account to Main Account"},"update":{"available":"A new version is available.","update":"Refresh"},"address-input":{"input":{"placeholder":"Address / ENS name"},"blockie-alt":"Selected token address blockie","error":{"invalid-address":"Enter a valid address or ENS name","no-checksum":"Please enter an address in checksum format. You can convert your address on https://ethsum.netlify.com","empty":"Enter an address or ENS name","ens-resolve-failed":"Please enter a resolvable ENS name","invalid-excluded-address":"Please enter a different address or ENS name. You can\'t use your own address or the address of the token network.","channel-not-open":"Please enter a hub address you have an open channel with.","target-offline":"Target is offline."}},"amount-input":{"input":{"hint":"Please enter an amount"},"error":{"empty":"Please enter an amount","too-many-decimals":"Please use only up to {decimals} decimals for this token","not-enough-funds":"Your maximum usable amount is {funds} {symbol}","zero":"Enter an amount larger than zero","invalid":"Please enter a valid amount"}},"address-display":{"copy":"Click to copy","copied":"Copied!"},"app-header":{"currency":"ETH"},"channel-actions":{"deposit":"Deposit","withdraw":"Withdraw","close":"Close","settle":"Settle"},"channel-deposit":{"buttons":{"confirm":"Deposit"},"input":{"label":"Amount"}},"channel-withdraw":{"buttons":{"confirm":"Withdraw"},"input":{"label":"Amount"},"dialog":{"label":"Withdraw","title":"Withdrawing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"done":{"label":"Done","title":"Withdraw Successful","description":"Your tokens have been successfully withdrawn."}},"find-routes":{"hops":"Hops","price":"Price","sub-title":"Route(s) provided by {subdomain} including number of hops and estimated fee","error":{"title":"Oops, something went wrong"}},"stepper":{"steps":{"open":{"title":"Open","description":"You can deposit more tokens \\n or close the channel."},"closed":{"title":"Closed","description":"Please wait until your channel is settleable. \\nthis may take some time."},"settleable":{"title":"Settleable","description":"Settle your channel to transfer \\n your tokens back to your account."}}},"channels":{"open":{"header":"Open"},"closed":{"header":"Closed"},"settleable":{"header":"Settleable"},"snackbar-close":"Close","token-info":"{symbol} | {name}","title":"Channels on"},"channel-list":{"channel":{"blockie_alt":"Partner address blockie","state":"Capacity: {value} | State: {state}","close_dialog":{"title":"Close Channel","description":"Are you sure you want to close this channel? This action cannot be undone."},"settle_dialog":{"title":"Settle Channel","description":"Are you sure you want to settle the channel with hub {partner} for token {token}?"}},"messages":{"close":{"success":"Channel closed successfully","failure":"Channel close failed"},"deposit":{"success":"Deposit was successful","failure":"Deposit failed"},"withdraw":{"success":"Withdraw was successful","failure":"Withdraw failed"},"settle":{"success":"Channel settle was successful","failure":"Channel settle failed"}}},"confirmation":{"buttons":{"cancel":"Cancel","close":"Close","settle":"Settle"}},"confirmation-dialog":{"buttons":{"cancel":"Cancel","confirm":"Confirm"}},"error-screen":{"title":"Error"},"no-access":{"unsupported-network":"The current network is unsupported. Please choose a different network.","sdk-initialization-failure":"SDK initialization failed. Please check the console for more information.","rdn-state-migration":"Cannot replace state with older uploaded state.","generic-error":"A valid account could not be detected. Please make sure that your provider is unlocked and accessible."},"tokens":{"connected":{"header":"Connected Tokens","token":{"blockie-alt":"Partner address blockie","token-info":"{symbol} | {name}","buttons":{"disconnect":"Disconnect Token","view-channels":"View Channels"}}},"connect-new":"Connect new token","disconnect-dialog":{"header":"Disconnect token","confirmation-message":"This action will close all channels for the {symbol} token! {address}"},"leave-progress":{"label":"Disconnect","title":"Disconnecting from the token network","description":"Closing the channels"},"leave-done":{"label":"Done","title":"Disconnected from the token network","description":"All your channels were successfully closed"}},"application":{"privacy-policy":"Privacy Policy, Disclaimer & Imprint"},"udc-deposit-dialog":{"title":"Deposit to UDC","button":"Mint and deposit","button-main":"Deposit","uniswap-url-title":"Click here to purchase RDN","uniswap-url":"https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency={rdnToken}&exactAmount=10&exactField=outPUT&recipient={mainAccountAddress}","available-utility-token":"Available {utilityTokenSymbol} to deposit: {utilityTokenBalance}","available":"Available {currency} to pay for on-chain transaction: {balance} {currency}","error":"The mint and deposit operation failed.","error-main":"The deposit operation failed.","progress":{"mint":"Minting {currency} tokens","approve":"Allow UDC to access {currency} tokens","deposit":"Deposit {currency} tokens to the UDC"}},"transfer":{"capacity-label":"Capacity","recipient-label":"Recipient","amount-label":"Amount","amount-placeholder":"Amount","error":{"button":"Dismiss","title":"Token transfer unsuccessful","deposit-title":"Deposit failed, please try again."},"transfer-menus":{"change-token-title":"Change Token","deposit-button":"Deposit","channel-button":"Channels","no-channels":"No open channels"},"transfer-inputs":{"title":"Transfer"},"steps":{"request-route":{"title":"Request Route","tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for PFS requests","tooltip-main":"Deposit {token} to the User Deposit Contract to pay for PFS requests","udc-description":"Balance to pay the Pathfinding Service","udc-description-low-balance":"Your {token} token balance is too low to pay for the Pathfinding Service. Use the button above to mint and deposit more tokens.","in-progress":"Paying for the route request","searching-for-route":"Searching for route...","done":"Route request payment complete"},"select-route":{"title":"Select Route"},"confirm-transfer":{"title":"Confirm Transfer","total-amount":"Total Amount"},"call-to-action":{"1":{"default":"Transfer Route Request","amount":"Confirm PFS Fee of {amount} {symbol}"},"2":{"default":"Confirm Mediation Fees","amount":"Confirm Mediation Fee of {amount} {symbol}"},"3":{"amount":"Transfer {amount} {symbol}"}},"transfer":{"title":"Transferring Tokens"},"done":{"title":"Send Successful","description":"Your transfer was successful."},"deposit":{"label":"Deposit","title":"Depositing Tokens","description":"Sign the transaction in MetaMask and close this dialogue to continue using the dApp."},"deposit-done":{"label":"Done","title":"Deposit Successful","description":"Your tokens have been successfully deposited."},"summary":{"headline":"Summary","route-request":"Route Request","pfs":"Pathfinding Service","service-fee":"Service Fee","mediated-transfer":"Mediated Transfer","direct-transfer":"Direct Transfer","target":"Target","transfer-amount":"Transfer Amount","total-amount":"Total Amount","mediation-fee":"Mediation Fee","identifier":"Identifier","footnotes":{"one":"1","direct-transfer":"Route request and selection skipped, because you are performing a direct transfer.","route-selection-skipped":"Automatically skipped route selection, because there was only a single route with zero fees."}}}},"transfer-history":{"title":"History","sent-title":"Sent to","sent-symbol":"-","received-title":"Received from","received-symbol":"+","pending-transfer":"PENDING","successful-transfer":"CONFIRMED","failed-transfer":"FAILED"},"select-token":{"header":"Available","tokens":{"token":{"blockie-alt":"Token address blockie","token-information":"{symbol} | {name}"}}},"select-hub":{"select-button":"Select Hub","service-token-tooltip":"Mint and deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-tooltip-main":"Deposit {token} to the User Deposit Contract to pay for the Monitoring Service.","service-token-balance-too-low":"Your {token} balance is too low to pay for the Monitoring Service. Use the button above to mint and deposit more tokens.","service-token-description":"Balance to pay the Monitoring Service"},"open-channel":{"error":{"title":"Ops, something went wrong","button":"Dismiss","deposit-failed":"Could not deposit to the channel.","open-failed":"Channel open failed."},"open-button":"Open Channel","hub":"Hub","steps":{"open":{"label":"Open","title":"Opening a new channel","description":"Please do not close the browser and confirm the transaction with MetaMask."},"transfer":{"label":"Transfer","title":"Transferring tokens to the network and deposit into the channel","description":"Please do not close the browser and confirm two (2) transactions with MetaMask."},"deposit":{"label":"Deposit","title":"Not implemented - split title above, when done","description":"Not implemented - split description above, when done"},"done":{"label":"Done","title":"New Channel opened","description":"A new channel was successfully opened. You can now start making transfers."}},"confirmation":"Channel opening is in progress, are you sure you want to leave?"},"token-information":{"title":"Token","description":"{symbol} | {name}","balance":"Balance"},"pathfinding-services":{"title":"Select Pathfinding Service","rtt":"{time} ms","headers":{"host":"Pathfinding Service","rtt":"Ping","price":"Price"}},"mint-dialog":{"title":"Mint {symbol}","description":"If you continue, you will get prompted by MetaMask to sign off a minting transaction. In order to mint tokens, you need test net ETH in your wallet."},"error-message":{"problem":"Problem:","solution":"Solution:"},"receiving-disabled-dialog":{"title":"Receiving transfers is disabled","body":"This may be due to configuration or UDC deposit being too low. If your client can receive, ensure you have enough UDC balance to pay for Monitoring Service (on Account menu) to enable receiving again."},"errors":{"RDN_GENERAL_ERROR":{"title":"An error occurred","problem":"We do not know this error, sorry.","solution":["Please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"RDN_MINT_FAILED":{"title":"Could not mint token","problem":"It looks like the Light Client does not support minting out-of-the-box for this token contract.","solution":"You may try to mint manually via MetaMask and Etherscan. You can find a step-by-step guide on https://github.com/raiden-network/light-client#minting-manually."},"PFS_UNKNOWN_TOKEN_NETWORK":{"title":"No open channels","problem":"You don\'t seem to have open channels on this token network.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Proceed with the flow to open a new channel"]},"PFS_INVALID_INFO":{"title":"Couldn\'t understand Pathfinding Service","problem":"The Light Client has received a response from the Pathfinding Service that it couldn\'t understand. It\'s possible that the current Light Client version is out-of-sync with the Pathfinding Service.","solution":["Update the dApp by reloading the page","Attempt a new transfer","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_FOUND":{"title":"No routes found","problem":"Pathfinding Service wasn\'t able to find a route in the Raiden Network to perform your transfer.","solution":"Make sure that you either have a direct channel with the target or that both of you are connected to a well-connected hub."},"PFS_ERROR_RESPONSE":{"title":"Pathfinding replied with an error","problem":"While communicating with the Pathfinding Service, you have received an error response that we don\'t actively handle yet.","solution":["Simply retry your last action","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_DISABLED":{"title":"Pathfinding Service disabled","problem":"You tried to find a route in the Raiden Network but Pathfinding was either disabled in your configuration or you did not select a valid Pathfinding Service.","solution":"Try to restart the Light Client by reloading the page and attempt a new transfer."},"PFS_TARGET_OFFLINE":{"title":"Target address is offline","problem":"You are trying to send tokens to an offline target.","solution":"Hit the ← button and verify that the address is online or choose a different target address."},"PFS_LAST_IOU_REQUEST_FAILED":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service returned an error.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_IOU_SIGNATURE_MISMATCH":{"title":"Error while depositing tokens for Pathfinding Service","problem":"While trying to deposit tokens for route requests, the Pathfinding Service encountered mismatching signatures.","solution":["This should happen very rarely, please retry to deposit","If the problem persists, please help us and report the issue","Click on your identicon in the top right corner","Click on Report Bugs / Download logs","File a new issue on https://github.com/raiden-network/light-client","Upload logs to the issue"]},"PFS_NO_ROUTES_BETWEEN_NODES":{"title":"No route between you and your target","problem":"The Pathfinding Service was not able to find a usable route between you and the target you want to transfer tokens to.","solution":["Hit the ← button in the top left","Click on the current token network","Select Connect new token","Select the token you want to transfer","Connect with a more popular hub, e.g. hub.raiden.eth. That way, Pathfinding Service is more likely to find a route between you and the target","Retry your transfer"]}},"versions":{"sdk":"Raiden SDK: {version}","contracts":"Raiden Contracts: {version}"},"scan":{"permission":{"title":"Grant Camera Access","description":"In order to scan QR codes, you will need to allow camera access."}},"progress-steps":{"transfer":{"PENDING":"Transfer sent","RECEIVED":"Transfer acknowledged by partner","REFUNDED":"Transfer refunded","CLOSED":"Channel closed early","REVEALED":"Secret revealed to target","UNLOCKING":"Unlock sent to partner","EXPIRING":"Lock expired","UNLOCKED":"Unlock acknowledged","EXPIRED":"Lock expired acknowledged","REQUESTED":"Secret requested by target","REGISTERED":"Secret registered on-chain"}},"settings":{"raiden-account":{"title":"Use Raiden Account","description":"By default the dApp uses a generated Raiden account to sign messages. Disable the Raiden account to use your Web3 provider account. All messages will then have to be signed manually."}},"notification-area":{"dismiss":"Dismiss"}}')},ee79:function(e){e.exports=JSON.parse('{"contracts_version":null,"chain_id":1,"contracts":{"SecretRegistry":{"address":"0x70f0c29b946E63803BD0Be796E17E47138668A68","transaction_hash":"0xa5a2672315e336dde3b43f3c09a4d0dbc7a59a4fe84f0506ea3abb5025bf94fb","block_number":10095755,"gas_cost":247286,"constructor_arguments":[]},"TokenNetworkRegistry":{"address":"0x6d07A2ef8De5d7D48337510BCEb9FEEa5424b20c","transaction_hash":"0xfde25a57b5ce0c8fcb748d5ff5ba8464cfce022d6eea72b6374b07c1b5f27b14","block_number":10095771,"gas_cost":4001210,"constructor_arguments":["0x70f0c29b946E63803BD0Be796E17E47138668A68",1,100,500,2]}},"token_networks":[{"token_network_address":"0x5b606943b36F3569E00EC4178A9f83eea8730184","constructor_arguments":{"_token_address":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":4683182690956770000,"_token_network_deposit_limit":4.68318269095677e+21}},{"token_network_address":"0xEA92bD481e54BBB9Bb6C927970a54E82eE26c6B4","constructor_arguments":{"_token_address":"0x6B175474E89094C44Da98b954EedeAC495271d0F","_secret_registry":"0x70f0c29b946E63803BD0Be796E17E47138668A68","_chain_id":1,"_settlement_timeout_min":100,"_settlement_timeout_max":500,"_deprecation_executor":"0xbBF11c2f66E1887681C902095CEfB1018C854c0f","_channel_participant_deposit_limit":1e+21,"_token_network_deposit_limit":1e+24}}]}')},f15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("4bf2"),a=n.n(r);function o(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(){c(this,e)}return u(e,null,[{key:"provider",value:function(){var e=i(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=window.ethereum,r=null,!t){e.next=6;break}r=t.startsWith("http")?t:"https://".concat(t),e.next=13;break;case 6:if("undefined"===typeof n){e.next=12;break}return e.next=9,n.enable();case 9:r=n,e.next=13;break;case 12:window.web3&&(r=window.web3.currentProvider);case 13:return r&&r.isMetaMask&&(r.autoRefreshOnNetworkChange=!1,r.on("networkChanged",(function(){return window.location.replace(window.location.origin)}))),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();l.injectedWeb3Available=function(){return window.ethereum||window.web3}},f455:function(e,t,n){"use strict";n.d(t,"e",(function(){return Dv})),n.d(t,"b",(function(){return Ro})),n.d(t,"a",(function(){return Re})),n.d(t,"d",(function(){return Se})),n.d(t,"c",(function(){return dt})),n.d(t,"f",(function(){return yt})),n.d(t,"g",(function(){return dn}));var r={};n.r(r),n.d(r,"newBlock",(function(){return ar})),n.d(r,"tokenMonitored",(function(){return or})),n.d(r,"channelOpen",(function(){return ir})),n.d(r,"channelMonitored",(function(){return cr})),n.d(r,"channelDeposit",(function(){return sr})),n.d(r,"channelWithdrawn",(function(){return ur})),n.d(r,"channelClose",(function(){return lr})),n.d(r,"channelSettleable",(function(){return fr})),n.d(r,"channelSettle",(function(){return pr}));var a={};n.r(a),n.d(a,"matrixSetup",(function(){return yr})),n.d(a,"matrixPresence",(function(){return mr})),n.d(a,"matrixRoom",(function(){return hr})),n.d(a,"matrixRoomLeave",(function(){return vr})),n.d(a,"rtcChannel",(function(){return gr}));var o={};n.r(o),n.d(o,"messageSend",(function(){return ia})),n.d(o,"messageGlobalSend",(function(){return ca})),n.d(o,"messageReceived",(function(){return sa}));var i={};n.r(i),n.d(i,"transfer",(function(){return _a})),n.d(i,"transferSigned",(function(){return ka})),n.d(i,"transferProcessed",(function(){return ja})),n.d(i,"transferSecret",(function(){return Ea})),n.d(i,"transferSecretRegister",(function(){return Ta})),n.d(i,"transferSecretRequest",(function(){return Sa})),n.d(i,"transferSecretReveal",(function(){return Aa})),n.d(i,"transferUnlock",(function(){return xa})),n.d(i,"transferUnlockProcessed",(function(){return Na})),n.d(i,"transferExpire",(function(){return Da})),n.d(i,"transferExpireProcessed",(function(){return Ra})),n.d(i,"transferRefunded",(function(){return Ca})),n.d(i,"withdraw",(function(){return Ia})),n.d(i,"withdrawMessage",(function(){return La})),n.d(i,"withdrawExpire",(function(){return Ua})),n.d(i,"withdrawCompleted",(function(){return Ma}));var c={};n.r(c),n.d(c,"pathFind",(function(){return Wa})),n.d(c,"pfsListUpdated",(function(){return $a})),n.d(c,"iouPersist",(function(){return Ha})),n.d(c,"iouClear",(function(){return Va})),n.d(c,"udcDeposit",(function(){return qa})),n.d(c,"udcWithdraw",(function(){return Ga})),n.d(c,"udcWithdrawn",(function(){return Za})),n.d(c,"msBalanceProofSent",(function(){return Xa}));var s={};n.r(s),n.d(s,"initNewBlockEpic",(function(){return Nf})),n.d(s,"initTokensRegistryEpic",(function(){return Df})),n.d(s,"initMonitorProviderEpic",(function(){return Rf})),n.d(s,"channelEventsEpic",(function(){return Uf})),n.d(s,"channelMonitoredEpic",(function(){return Mf})),n.d(s,"channelOpenEpic",(function(){return Bf})),n.d(s,"channelDepositEpic",(function(){return Wf})),n.d(s,"channelCloseEpic",(function(){return $f})),n.d(s,"channelUpdateEpic",(function(){return Hf})),n.d(s,"channelAutoSettleEpic",(function(){return Vf})),n.d(s,"channelSettleEpic",(function(){return qf})),n.d(s,"channelSettleableEpic",(function(){return Kf})),n.d(s,"channelUnlockEpic",(function(){return Gf})),n.d(s,"confirmationEpic",(function(){return Xf}));var u={};n.r(u),n.d(u,"initMatrixEpic",(function(){return Mp})),n.d(u,"matrixShutdownEpic",(function(){return Bp})),n.d(u,"matrixMonitorPresenceEpic",(function(){return ad})),n.d(u,"matrixPresenceUpdateEpic",(function(){return od})),n.d(u,"matrixMonitorChannelPresenceEpic",(function(){return id})),n.d(u,"matrixUpdateCapsEpic",(function(){return cd})),n.d(u,"matrixCreateRoomEpic",(function(){return _d})),n.d(u,"matrixInviteEpic",(function(){return kd})),n.d(u,"matrixHandleInvitesEpic",(function(){return jd})),n.d(u,"matrixLeaveExcessRoomsEpic",(function(){return Ed})),n.d(u,"matrixLeaveUnknownRoomsEpic",(function(){return Td})),n.d(u,"matrixCleanLeftRoomsEpic",(function(){return Sd})),n.d(u,"matrixCleanMissingRoomsEpic",(function(){return Ad})),n.d(u,"matrixMessageReceivedUpdateRoomEpic",(function(){return xd})),n.d(u,"matrixMessageSendEpic",(function(){return $d})),n.d(u,"matrixMessageGlobalSendEpic",(function(){return Hd})),n.d(u,"matrixMessageReceivedEpic",(function(){return Vd})),n.d(u,"deliveredEpic",(function(){return qd})),n.d(u,"rtcConnectEpic",(function(){return mb}));var l={};n.r(l),n.d(l,"transferChannelClosedEpic",(function(){return kb})),n.d(l,"transferAutoExpireEpic",(function(){return Ub})),n.d(l,"transferGenerateAndSignEnvelopeMessageEpic",(function(){return py})),n.d(l,"initQueuePendingEnvelopeMessagesEpic",(function(){return Oy})),n.d(l,"initQueuePendingReceivedEpic",(function(){return wy})),n.d(l,"transferMediateEpic",(function(){return Ay})),n.d(l,"transferProcessedReceivedEpic",(function(){return Ly})),n.d(l,"transferProcessedSendEpic",(function(){return Uy})),n.d(l,"transferUnlockProcessedReceivedEpic",(function(){return My})),n.d(l,"transferExpireProcessedEpic",(function(){return By})),n.d(l,"transferReceivedReplyProcessedEpic",(function(){return Fy})),n.d(l,"transferRefundedEpic",(function(){return Yy})),n.d(l,"transferRetryMessageEpic",(function(){return um})),n.d(l,"transferSecretRequestedEpic",(function(){return hm})),n.d(l,"transferSecretRevealEpic",(function(){return gm})),n.d(l,"transferSecretRevealedEpic",(function(){return Om})),n.d(l,"transferRequestUnlockEpic",(function(){return wm})),n.d(l,"monitorSecretRegistryEpic",(function(){return _m})),n.d(l,"transferSuccessOnSecretRegisteredEpic",(function(){return km})),n.d(l,"transferAutoRegisterEpic",(function(){return jm})),n.d(l,"transferSecretRegisterEpic",(function(){return Em})),n.d(l,"initWithdrawMessagesEpic",(function(){return Pm})),n.d(l,"withdrawSendRequestMessageEpic",(function(){return Im})),n.d(l,"withdrawSendTxEpic",(function(){return Lm})),n.d(l,"withdrawMessageProcessedEpic",(function(){return Um})),n.d(l,"autoWithdrawExpireEpic",(function(){return Mm})),n.d(l,"withdrawSendExpireMessageEpic",(function(){return Bm}));var f={};n.r(f),n.d(f,"pathFindServiceEpic",(function(){return Sh})),n.d(f,"pfsCapacityUpdateEpic",(function(){return Ah})),n.d(f,"pfsFeeUpdateEpic",(function(){return xh})),n.d(f,"pfsServiceRegistryMonitorEpic",(function(){return Nh})),n.d(f,"monitorUdcBalanceEpic",(function(){return Dh})),n.d(f,"udcDepositEpic",(function(){return Ch})),n.d(f,"monitorRequestEpic",(function(){return Ih})),n.d(f,"udcWithdrawRequestEpic",(function(){return Lh})),n.d(f,"udcCheckWithdrawPlannedEpic",(function(){return Uh})),n.d(f,"udcWithdrawPlannedEpic",(function(){return Mh})),n.d(f,"msMonitorNewBPEpic",(function(){return Bh}));var p=n("4bf2"),d=n.n(p),b=(n("3dfb"),n("f674"),n("8e94"),n("7e01")),y=n.n(b),m=n("9209"),h=n("41d1"),v=n("f4558"),g=y.a.methodFactory;Object.assign(y.a,{methodFactory:g}),m["logger"].setLevel(y.a.levels.DEBUG);var O=Object(h["getRequest"])();Object(h["request"])((function(e,t){var n=O(e,t),r=n.abort.bind(n);return Object.assign(n,{abort:function(){r(),t(new Error("aborted!"))}})})),"RTCPeerConnection"in globalThis||Object.assign(globalThis,n("01f7")),Object.assign(v,{createNewMatrixCall:function(){return null}});var w=n("5ca1"),_=n("38dd"),k=n("f30a"),j=n("45c3"),E=n("d2b3"),T=n("ae32"),S=n("ee80"),A=n.n(S),x=n("e68d"),N=n.n(x),D=n("2f73"),R=n("6649"),C=n("15f1"),P=n("1356"),I=n("fac5"),L=n("6452"),U=n("c159"),M=n("a334"),B=n("bf60"),F=n("911a"),W=n("eb0c"),$=n("fc62");function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}var K=function(){function e(){H(this,e)}return q(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,G,t)}}]),e}(),G=[{inputs:[{internalType:"address",name:"_secret_registry_address",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"uint256",name:"_max_token_networks",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token_address",type:"address"},{indexed:!0,internalType:"address",name:"token_network_address",type:"address"}],name:"TokenNetworkCreated",type:"event"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],name:"createERC20TokenNetwork",outputs:[{internalType:"address",name:"token_network_address",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"max_token_networks",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_created",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"token_to_token_networks",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}var Q=function(){function e(){Z(this,e)}return Y(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,J,t)}}]),e}(),J=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_secret_registry",type:"address"},{internalType:"uint256",name:"_chain_id",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_min",type:"uint256"},{internalType:"uint256",name:"_settlement_timeout_max",type:"uint256"},{internalType:"address",name:"_deprecation_executor",type:"address"},{internalType:"uint256",name:"_channel_participant_deposit_limit",type:"uint256"},{internalType:"uint256",name:"_token_network_deposit_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"ChannelClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_deposit",type:"uint256"}],name:"ChannelNewDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant1",type:"address"},{indexed:!0,internalType:"address",name:"participant2",type:"address"},{indexed:!1,internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"ChannelOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"participant1_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"participant2_amount",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"ChannelSettled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"receiver",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"bytes32",name:"locksroot",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"unlocked_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"returned_tokens",type:"uint256"}],name:"ChannelUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"participant",type:"address"},{indexed:!1,internalType:"uint256",name:"total_withdraw",type:"uint256"}],name:"ChannelWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"new_value",type:"bool"}],name:"DeprecationSwitch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!0,internalType:"address",name:"closing_participant",type:"address"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"balance_hash",type:"bytes32"}],name:"NonClosingBalanceProofUpdated",type:"event"},{inputs:[],name:"MAX_SAFE_UINT256",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"chain_id",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"channel_participant_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"channels",outputs:[{internalType:"uint256",name:"settle_block_number",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"bytes",name:"closing_signature",type:"bytes"}],name:"closeChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"deprecate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecation_executor",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelIdentifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"}],name:"getChannelInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"enum TokenNetwork.ChannelState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getChannelParticipantInfo",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"address",name:"partner",type:"address"}],name:"getParticipantsHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"}],name:"getUnlockIdentifier",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"settle_timeout",type:"uint256"}],name:"openChannel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"participants_hash_to_channel_identifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"safety_deprecation_switch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"secret_registry",outputs:[{internalType:"contract SecretRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_deposit",type:"uint256"},{internalType:"address",name:"partner",type:"address"}],name:"setTotalDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"total_withdraw",type:"uint256"},{internalType:"uint256",name:"expiration_block",type:"uint256"},{internalType:"bytes",name:"participant_signature",type:"bytes"},{internalType:"bytes",name:"partner_signature",type:"bytes"}],name:"setTotalWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"uint256",name:"participant1_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant1_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant1_locksroot",type:"bytes32"},{internalType:"address",name:"participant2",type:"address"},{internalType:"uint256",name:"participant2_transferred_amount",type:"uint256"},{internalType:"uint256",name:"participant2_locked_amount",type:"uint256"},{internalType:"bytes32",name:"participant2_locksroot",type:"bytes32"}],name:"settleChannel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{components:[{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"transferred_amount",type:"uint256"},{internalType:"uint256",name:"locked_amount",type:"uint256"},{internalType:"bytes32",name:"locksroot",type:"bytes32"}],internalType:"struct TokenNetwork.SettleInput",name:"participant1_settlement",type:"tuple"},{components:[{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"transferred_amount",type:"uint256"},{internalType:"uint256",name:"locked_amount",type:"uint256"},{internalType:"bytes32",name:"locksroot",type:"bytes32"}],internalType:"struct TokenNetwork.SettleInput",name:"participant2_settlement",type:"tuple"}],name:"settleChannel2",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settlement_timeout_max",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"settlement_timeout_min",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"signature_prefix",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_deposit_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"receiver",type:"address"},{internalType:"address",name:"sender",type:"address"},{internalType:"bytes",name:"locks",type:"bytes"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"}],name:"updateNonClosingBalanceProof",outputs:[],stateMutability:"nonpayable",type:"function"}];function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t,n){return t&&ee(e.prototype,t),n&&ee(e,n),e}var ne=function(){function e(){z(this,e)}return te(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,re,t)}}]),e}(),re=[{inputs:[{internalType:"uint256",name:"_initialAmount",type:"uint256"},{internalType:"uint8",name:"_decimalUnits",type:"uint8"},{internalType:"string",name:"_tokenName",type:"string"},{internalType:"string",name:"_tokenSymbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n){return t&&oe(e.prototype,t),n&&oe(e,n),e}var ce=function(){function e(){ae(this,e)}return ie(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,se,t)}}]),e}(),se=[{inputs:[{internalType:"address",name:"_token_for_registration",type:"address"},{internalType:"address",name:"_controller",type:"address"},{internalType:"uint256",name:"_initial_price",type:"uint256"},{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"service",type:"address"},{indexed:!1,internalType:"uint256",name:"valid_till",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deposit_amount",type:"uint256"},{indexed:!1,internalType:"contract Deposit",name:"deposit_contract",type:"address"}],name:"RegisteredService",type:"event"},{inputs:[{internalType:"uint256",name:"_price_bump_numerator",type:"uint256"},{internalType:"uint256",name:"_price_bump_denominator",type:"uint256"},{internalType:"uint256",name:"_decay_constant",type:"uint256"},{internalType:"uint256",name:"_min_price",type:"uint256"},{internalType:"uint256",name:"_registration_duration",type:"uint256"}],name:"changeParameters",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"controller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decay_constant",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_set_price",type:"uint256"},{internalType:"uint256",name:"_seconds_passed",type:"uint256"}],name:"decayedPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit_amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deprecated",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"everMadeDepositsLen",outputs:[{internalType:"uint256",name:"_len",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ever_made_deposits",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"hasValidRegistration",outputs:[{internalType:"bool",name:"_has_registration",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"min_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_denominator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price_bump_numerator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"registration_duration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"service_valid_till",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"setDeprecationSwitch",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"new_url",type:"string"}],name:"setURL",outputs:[{internalType:"bool",name:"_success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"set_price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"set_price_at",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"urls",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}var pe=function(){function e(){ue(this,e)}return fe(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,de,t)}}]),e}(),de=[{inputs:[{internalType:"uint256",name:"initial_supply",type:"uint256"},{internalType:"uint8",name:"decimal_units",type:"uint8"},{internalType:"string",name:"token_name",type:"string"},{internalType:"string",name:"token_symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_num",type:"uint256"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"decimals",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"num",type:"uint256"},{internalType:"address",name:"target",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"multiplier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner_address",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"transferFunds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return t&&ye(e.prototype,t),n&&ye(e,n),e}var he=function(){function e(){be(this,e)}return me(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,ve,t)}}]),e}(),ve=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"uint256",name:"_whole_balance_limit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"newBalance",type:"uint256"}],name:"BalanceReduced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawer",type:"address"},{indexed:!1,internalType:"uint256",name:"plannedBalance",type:"uint256"}],name:"WithdrawPlanned",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"beneficiary",type:"address"},{internalType:"uint256",name:"new_total_deposit",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"effectiveBalance",outputs:[{internalType:"uint256",name:"remaining_balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_msc_address",type:"address"},{internalType:"address",name:"_one_to_n_address",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"msc_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"one_to_n_address",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"planWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"total_deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whole_balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"whole_balance_limit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw_delay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"withdraw_plans",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"withdraw_block",type:"uint256"}],stateMutability:"view",type:"function"}];function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&Oe(e.prototype,t),n&&Oe(e,n),e}var _e=function(){function e(){ge(this,e)}return we(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,ke,t)}}]),e}(),ke=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"secrethash",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"secret",type:"bytes32"}],name:"SecretRevealed",type:"event"},{inputs:[{internalType:"bytes32",name:"secrethash",type:"bytes32"}],name:"getSecretRevealBlockHeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"secret",type:"bytes32"}],name:"registerSecret",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"secrets",type:"bytes32[]"}],name:"registerSecretBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t,n){return t&&Ee(e.prototype,t),n&&Ee(e,n),e}var Se,Ae=function(){function e(){je(this,e)}return Te(e,null,[{key:"connect",value:function(e,t){return new $["Contract"](e,xe,t)}}]),e}(),xe=[{inputs:[{internalType:"address",name:"_token_address",type:"address"},{internalType:"address",name:"_service_registry_address",type:"address"},{internalType:"address",name:"_udc_address",type:"address"},{internalType:"address",name:"_token_network_registry_address",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token_network_address",type:"address"},{indexed:!1,internalType:"uint256",name:"channel_identifier",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward_amount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!0,internalType:"address",name:"raiden_node_address",type:"address"}],name:"NewBalanceProofReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"ms_address",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"reward_identifier",type:"bytes32"}],name:"RewardClaimed",type:"event"},{inputs:[{internalType:"uint256",name:"channel_identifier",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"}],name:"claimReward",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"contract_address",type:"address"}],name:"contractExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"closed_at_block",type:"uint256"},{internalType:"uint256",name:"settle_timeout",type:"uint256"},{internalType:"address",name:"participant1",type:"address"},{internalType:"address",name:"participant2",type:"address"},{internalType:"address",name:"monitoring_service_address",type:"address"}],name:"firstBlockAllowedToMonitor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"closing_participant",type:"address"},{internalType:"address",name:"non_closing_participant",type:"address"},{internalType:"bytes32",name:"balance_hash",type:"bytes32"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes32",name:"additional_hash",type:"bytes32"},{internalType:"bytes",name:"closing_signature",type:"bytes"},{internalType:"bytes",name:"non_closing_signature",type:"bytes"},{internalType:"uint256",name:"reward_amount",type:"uint256"},{internalType:"address",name:"token_network_address",type:"address"},{internalType:"bytes",name:"reward_proof_signature",type:"bytes"}],name:"monitor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"service_registry",outputs:[{internalType:"contract ServiceRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract Token",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token_network_registry",outputs:[{internalType:"contract TokenNetworkRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"user_deposit",outputs:[{internalType:"contract UserDeposit",name:"",type:"address"}],stateMutability:"view",type:"function"}],Ne=n("bf6c2");(function(e){e["OPENED"]="OPENED",e["APPROVED"]="APPROVED",e["DEPOSITED"]="DEPOSITED",e["CONFIRMED"]="CONFIRMED"})(Se||(Se={}));var De,Re,Ce=Object(_["hexlify"])(Object(_["padZeros"])([],65)),Pe=Object(_["keccak256"])([]);(function(e){e["STOP"]="raidenStopped",e["ACCOUNT_CHANGED"]="providerAccountChanged",e["NETWORK_CHANGED"]="providerNetworkChanged"})(De||(De={})),function(e){e["NO_RECEIVE"]="noReceive",e["NO_MEDIATE"]="noMediate",e["NO_DELIVERY"]="noDelivery",e["WEBRTC"]="webRTC"}(Re||(Re={}));var Ie=n("2500"),Le=n("da54"),Ue=n.n(Le),Me=n("873e"),Be=n("47f9"),Fe=n("e244"),We=n("5b3b"),$e=n.n(We),He=n("a32b");function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){return Ge="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ze(e){return Je(e)||Qe(e)||Ye(e)||Xe()}function Xe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ye(e,t){if(e){if("string"===typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}function Qe(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Je(e){if(Array.isArray(e))return ze(e)}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),e}function rt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}function at(e){var t=ut();return function(){var n,r=pt(e);if(t){var a=pt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ot(this,n)}}function ot(e,t){return!t||"object"!==Ge(t)&&"function"!==typeof t?it(e):t}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e){var t="function"===typeof Map?new Map:void 0;return ct=function(e){if(null===e||!lt(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return st(e,arguments,pt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ft(n,e)},ct(e)}function st(e,t,n){return st=ut()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&ft(o,n.prototype),o},st.apply(null,arguments)}function ut(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function lt(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function ft(e,t){return ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ft(e,t)}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}var dt=He,bt=Ie["q"](Ie["r"],Ie["w"]([Ie["r"],Ie["m"],Ie["e"],Ie["l"]])),yt=function(e){rt(n,e);var t=at(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return et(this,n),r=t.call(this,e),r.details=a,r.name="RaidenError",Object.setPrototypeOf(it(r),n.prototype),r}return nt(n,[{key:"code",get:function(){var e,t=this;return null!==(e=$e()(dt,(function(e){return e===t.message})))&&void 0!==e?e:"RDN_GENERAL_ERROR"}}]),n}(ct(Error));function mt(e,t,n){if(!e)throw null===n||void 0===n||n("__assertion failed:",e,t),t instanceof Error?t:"function"===typeof t?t(e):Array.isArray(t)?st(yt,Ze(t)):new yt(null!==t&&void 0!==t?t:dt.RDN_ASSERT_ERROR,{condition:e})}var ht=Ie["i"]([Ie["u"]({name:Ie["r"]}),Ie["n"]({message:Ie["r"],stack:Ie["r"],details:bt})]),vt=new Ie["b"]("Error",(function(e){return"object"===Ge(e)&&!!e&&"name"in e&&"message"in e}),(function(e){return Object(Fe["pipe"])(ht.decode(e),Object(Be["map"])((function(e){return"details"in e?Object.assign(new yt(e.message,e.details),{name:e.name,stack:e.stack}):Object.assign(new Error(e.message),{name:e.name,stack:e.stack})})))}),(function(e){return qe({name:e.name,message:e.message,stack:e.stack},"details"in e?{details:e.details}:{})}));function gt(e,t){if(null==e)return{};var n,r,a=Ot(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ot(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e){Me["ThrowReporter"].report(e)}function Et(e,t,n,r){try{var a=e.decode(t);return jt(a),a.right}catch(o){throw null===r||void 0===r||r("__decode failed:",e,t),n?n instanceof Error?n:new yt(n):o}}function Tt(e){return null!=e}var St=new Ie["b"]("BigNumber",_["BigNumber"].isBigNumber,(function(e,t){try{return Ie["s"](Object(_["bigNumberify"])(e))}catch(n){return Ie["g"](e,t)}}),(function(e){return e.toString()})),At=N()((function(e){return Ie["f"](Ie["r"],(function(t){return"string"===typeof t&&(e?Object(_["hexDataLength"])(t)===e:Object(_["isHexString"])(t))}),"HexString")})),xt=N()((function(e){var t=e?k["Zero"].sub(k["Two"].pow(8*e-1)):void 0,n=e?k["Two"].pow(8*e-1):void 0;return Ie["f"](St,(function(e){return St.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"Int")})),Nt=N()((function(e){var t=e?k["Zero"]:void 0,n=e?k["Two"].pow(8*e):void 0;return Ie["f"](St,(function(e){return St.is(e)&&(!t||!n||e.gte(t)&&e.lt(n))}),"UInt")})),Dt=At(65),Rt=At(32),Ct=At(32),Pt=At(32);function It(e){try{return Object(_["getAddress"])(e)===e}catch(t){return!1}}var Lt=new Ie["a"]("Address",It,(function(e,t){try{return Ie["s"](Object(_["getAddress"])(e))}catch(n){return Ie["g"](e,t)}}),Ie["h"],At(20),It),Ut=N()((function(e){return Ie["i"]([e,Ie["o"](Ie["u"]({ts:Ie["m"]}))])}));function Mt(e){return _t(_t({},e),{},{ts:Date.now()})}function Bt(e){e.ts;var t=gt(e,["ts"]);return t}var Ft=N()((function(e){return Ie["i"]([e,Ie["o"](Ie["u"]({signature:Dt}))])})),Wt=N()((function(e){return new Ie["b"]("instanceOf(".concat(e.name,")"),(function(t){return t instanceof e}),(function(t,n){return t instanceof e?Ie["s"](t):Ie["g"](t,n)}),Ie["h"])}));function $t(e){return e[e.length-1]}function Ht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.lt(t)?t:e}))}var Vt=n("8590"),qt=n("ddb3b"),Kt=n("5b07"),Gt=n("3905"),Zt=n("c2dd"),Xt=n("c5af");function Yt(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Qt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Yt(o,r,a,i,c,"next",e)}function c(e){Yt(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Jt(e){return nn(e)||tn(e)||en(e)||zt()}function zt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function en(e,t){if(e){if("string"===typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rn(e,t):void 0}}function tn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function nn(e){if(Array.isArray(e))return rn(e)}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4?arguments[4]:void 0;if("string"===typeof t||Array.isArray(t))return Object(qt["a"])((function(n){return e.on(t,n)}),(function(n){return e.removeListener(t,n)}),n);var o=2*r,i=[];return Object(I["a"])((function(){var t;if(!a){var n=e._lastBlockNumber;n=n&&n>0?n:null!==(t=e.blockNumber)&&void 0!==t?t:1,a=n-r}return i.push(a),sn(e,"block")})).pipe(Object(Gt["a"])(Math.ceil(e.pollingInterval/10)),Object(Zt["a"])((function(n){return Object(I["a"])((function(){return e.getLogs(on(on({},t),{},{fromBlock:i[0],toBlock:n}))})).pipe(Object(W["a"])((function(e){i.length>=o&&i.shift(),i.push(n+1);var t=Math.max.apply(Math,[0].concat(Jt(e.map((function(e){return e.blockNumber})).filter(Tt).filter((function(e){return e+r<=n})))))+1;return i[0]<=t&&i.splice(0,i.filter((function(e){return e<=t})).length,t),Object(Kt["a"])(e)})),Object(Xt["a"])((function(){return L["a"]})))})))}function un(e,t){var n=function(t){var n=e.interface.parseLog(t);if(!0!==t.removed&&n){var r=Array.prototype.slice.call(n.values),a=on(on(on({},t),n),{},{args:r,removeListener:function(){},getBlock:function(){return e.provider.getBlock(t.blockHash)},getTransaction:function(){return e.provider.getTransaction(t.transactionHash)},getTransactionReceipt:function(){return e.provider.getTransactionReceipt(t.transactionHash)},decode:function(e,r){return n.decode(e,r||t.topics)}});return[].concat(Jt(r),[a])}};return void 0!==t?n(t):n}function ln(e){return fn.apply(this,arguments)}function fn(){return fn=Qt(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Vt["getNetwork"],e.t1=parseInt,e.next=4,t.send("net_version",[]);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 7:case"end":return e.stop()}}),e)}))),fn.apply(this,arguments)}function pn(e){var t=e.send;e.send=function(){var n=Qt(d.a.mark((function n(r,a){return d.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("eth_sign"!==r){n.next=2;break}return n.abrupt("return",t.apply(this,["personal_sign",[a[1],a[0]]]).catch((function(n){if(n instanceof Error&&(n.message.includes("The method personal_sign does not exist")||n.message.includes("Method personal_sign not supported")))return e.send=t,e.send(r,a);throw n})));case 2:return n.abrupt("return",t.apply(this,[r,a]));case 3:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}()}function dn(e){return"unknown"===e.name?e.chainId.toString():"homestead"===e.name?"mainnet":e.name}var bn,yn=Ie["o"](Ie["q"](Ie["r"],Ie["c"]));function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gn=Ie["u"]({urls:Ie["w"]([Ie["r"],Ie["d"](Ie["r"])])}),On=Ie["o"](Ie["i"]([Ie["u"]({matrixServerLookup:Ie["r"],revealTimeout:Ie["m"],settleTimeout:Ie["m"],httpTimeout:Ie["m"],discoveryRoom:Ie["w"]([Ie["r"],Ie["l"]]),pfsRoom:Ie["w"]([Ie["r"],Ie["l"]]),monitoringRoom:Ie["w"]([Ie["r"],Ie["l"]]),pfs:Ie["w"]([Lt,Ie["r"],Ie["l"]]),pfsSafetyMargin:Ie["m"],pfsMaxPaths:Ie["m"],pfsMaxFee:Nt(32),pfsIouTimeout:Ie["m"],matrixExcessRooms:Ie["m"],confirmationBlocks:Ie["m"],monitoringReward:Ie["w"]([Ie["l"],Nt(32)]),logger:Ie["j"]((bn={},vn(bn,"",null),vn(bn,"trace",null),vn(bn,"debug",null),vn(bn,"info",null),vn(bn,"warn",null),vn(bn,"error",null),bn)),caps:Ie["w"]([Ie["l"],yn]),fallbackIceServers:Ie["d"](gn),rateToSvt:Ie["q"](Ie["r"],Nt(32)),pollingInterval:Ie["m"],minimumAllowance:Nt(32),autoSettle:Ie["e"]}),Ie["n"]({matrixServer:Ie["r"],subkey:Ie["e"]})])),wn=Ie["o"](Ie["n"](hn(hn({},On.type.types["0"].props),On.type.types["1"].props)));function _n(e,t){var n,r=e.network;return hn({matrixServerLookup:"https://raw.githubusercontent.com/raiden-network/raiden-transport/master/known_servers.test.yaml",settleTimeout:500,revealTimeout:50,httpTimeout:3e4,discoveryRoom:"raiden_".concat(dn(r),"_discovery"),pfsRoom:"raiden_".concat(dn(r),"_path_finding"),monitoringRoom:"raiden_".concat(dn(r),"_monitoring"),pfs:"",matrixExcessRooms:3,pfsSafetyMargin:1,pfsMaxPaths:3,pfsMaxFee:Object(_["parseEther"])("0.05"),pfsIouTimeout:2e5,confirmationBlocks:5,monitoringReward:Object(_["parseEther"])("5"),logger:"info",caps:(n={},vn(n,Re.NO_DELIVERY,!0),vn(n,Re.NO_MEDIATE,!0),vn(n,Re.WEBRTC,!0),n),fallbackIceServers:[{urls:"stun:stun.l.google.com:19302"}],rateToSvt:{},pollingInterval:5e3,minimumAllowance:k["MaxUint256"],autoSettle:!1},t)}var kn=n("bc8e"),jn=n.n(kn),En=n("50fc"),Tn=n.n(En),Sn=n("d328"),An=n.n(Sn),xn=n("731d"),Nn=n.n(xn);function Dn(e){return In(e)||Pn(e)||Cn(e)||Rn()}function Rn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cn(e,t){if(e){if("string"===typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}function Pn(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function In(e){if(Array.isArray(e))return Ln(e)}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Un(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Mn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Un(o,r,a,i,c,"next",e)}function c(e){Un(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(n),!0).forEach((function(t){Wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $n(e){var t=Array.isArray(e)?e:[e];function n(e){return null!=e&&t.some((function(t){return t.is(e)}))}return(arguments.length<=1?0:arguments.length-1)>0?n(arguments.length<=1?void 0:arguments[1]):n}function Hn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3],c=Ie["u"](Fn(Fn(Fn({type:Ie["k"](r)},a?{payload:a}:null),o?{meta:o}:null),i?{error:Ie["k"](i)}:null)),s=function(e){var t;return(null===(t=e)||void 0===t?void 0:t["type"])===r},u=Fn({codec:c,type:r,is:s},void 0!==i?{error:i}:null),l=function(e,t){return Fn(Fn(Fn({type:r},a?{payload:e}:null),o?{meta:t}:null),void 0!==i?{error:i}:null)};return Object.assign(l,u)}function Vn(e,t,n,r,a,o){var i=!(arguments.length<=6)&&arguments.length-6?arguments.length<=6?void 0:arguments[6]:Ie["c"],c=Hn(t,a,e),s=Hn(n,o,e),u=Hn(r,i,e,!0);return{request:c,success:s,failure:u}}function qn(e){var t=function(t){return Nn()(t.meta,e,(function(e,t){return St.is(e)&&St.is(t)?e.eq(t):void 0}))};return!(arguments.length<=1)&&arguments.length-1?t(arguments.length<=1?void 0:arguments[1]):t}function Kn(e,t){var n=function(n){return $n([e.success,e.failure],n)&&qn(t,n)};return!(arguments.length<=2)&&arguments.length-2?n(arguments.length<=2?void 0:arguments[2]):n}function Gn(e,t){function n(e){var t,n;return"boolean"===typeof(null===(n=null===(t=e)||void 0===t?void 0:t["payload"])||void 0===n?void 0:n["confirmed"])}var r=function(r){return Kn(e,t,r)&&(e.failure.is(r)||n(r))};return!(arguments.length<=2)&&arguments.length-2?r(arguments.length<=2?void 0:arguments[2]):r}function Zn(e,t,n){return Xn.apply(this,arguments)}function Xn(){return Xn=Mn(d.a.mark((function e(t,n,r){var a,o=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]&&o[3],e.abrupt("return",r.pipe(Object(F["a"])(a?Gn(t,n):Kn(t,n)),Object(M["a"])((function(e){var n;if(t.failure.is(e))throw e.payload;if(!1===(null===(n=e.payload)||void 0===n?void 0:n.confirmed))throw new yt(dt.RDN_TRANSACTION_REORG,{transactionHash:e.payload.txHash});return e.payload}))).toPromise());case 2:case"end":return e.stop()}}),e)}))),Xn.apply(this,arguments)}function Yn(e){function t(n){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return r.type in n&&n[r.type][0].is(r)?n[r.type][1](t,r):t};function a(e,r){var a=Array.isArray(e)?e:[e];return mt(!a.some((function(e){return e.type in n})),"Already handled"),t(Object.assign.apply(Object,[{},n].concat(Dn(a.map((function(e){return Wn({},e.type,[e,r])}))))))}return Object.assign(r,{handle:a})}return t({})}var Qn,Jn=Ie["r"],zn=(Ie["r"],Ie["i"]([Ie["u"]({amount:Nt(32),expiration:Nt(32),secrethash:Rt}),Ie["n"]({registered:Ie["k"](!0)})],"Lock")),er=Ie["o"](Ie["u"]({chainId:Nt(32),tokenNetworkAddress:Lt,channelId:Nt(32),nonce:Nt(8),transferredAmount:Nt(32),lockedAmount:Nt(32),locksroot:Rt,additionalHash:Rt})),tr=er,nr={chainId:k["Zero"],tokenNetworkAddress:k["AddressZero"],channelId:k["Zero"],nonce:k["Zero"],transferredAmount:k["Zero"],lockedAmount:k["Zero"],locksroot:Pe,additionalHash:k["HashZero"],signature:Ce},rr=Ie["u"]({tokenNetwork:Lt,partner:Lt}),ar=Hn("block/new",Ie["u"]({blockNumber:Ie["m"]})),or=Hn("token/monitored",Ie["i"]([Ie["u"]({token:Lt,tokenNetwork:Lt}),Ie["n"]({fromBlock:Ie["m"],toBlock:Ie["m"]})])),ir=Vn(rr,"channel/open/request","channel/open/success","channel/open/failed",Ie["n"]({settleTimeout:Ie["m"],subkey:Ie["e"],deposit:Nt(32)}),Ie["u"]({id:Ie["m"],token:Lt,settleTimeout:Ie["m"],isFirstParticipant:Ie["e"],txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])})),cr=Hn("channel/monitored",Ie["u"]({id:Ie["m"]}),rr),sr=Vn(rr,"channel/deposit/request","channel/deposit/success","channel/deposit/failure",Ie["i"]([Ie["u"]({deposit:Nt(32)}),Ie["n"]({subkey:Ie["e"],waitOpen:Ie["k"](!0)})]),Ie["u"]({id:Ie["m"],participant:Lt,totalDeposit:Nt(32),txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])})),ur=Hn("channel/withdraw/success",Ie["u"]({id:Ie["m"],participant:Lt,totalWithdraw:Nt(32),txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])}),rr),lr=Vn(rr,"channel/close/request","channel/close/success","channel/close/failure",Ie["w"]([Ie["n"]({subkey:Ie["e"]}),Ie["v"]]),Ie["u"]({id:Ie["m"],participant:Lt,txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])})),fr=Hn("channel/settleable",Ie["u"]({settleableBlock:Ie["m"]}),rr),pr=Vn(rr,"channel/settle/request","channel/settle/success","channel/settle/failure",Ie["w"]([Ie["n"]({subkey:Ie["e"]}),Ie["v"]]),Ie["i"]([Ie["u"]({id:Ie["m"],txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])}),Ie["n"]({locks:Ie["p"](zn)})])),dr=Ie["o"](Ie["u"]({userId:Ie["r"],accessToken:Ie["r"],deviceId:Ie["r"],displayName:Ie["r"]})),br=Ie["u"]({address:Lt}),yr=Hn("matrix/setup",Ie["u"]({server:Ie["r"],setup:dr})),mr=Vn(br,"matrix/presence/request","matrix/presence/success","matrix/presence/failure",void 0,Ie["i"]([Ie["u"]({userId:Ie["r"],available:Ie["e"],ts:Ie["m"]}),Ie["n"]({caps:Ie["q"](Ie["r"],Ie["c"])})])),hr=Hn("matrix/room",Ie["u"]({roomId:Ie["r"]}),br),vr=Hn("matrix/room/leave",Ie["u"]({roomId:Ie["r"]}),br),gr=Hn("rtc/channel",Ie["w"]([Ie["v"],Wt(RTCDataChannel)]),br);(function(e){e["DELIVERED"]="Delivered",e["PROCESSED"]="Processed",e["SECRET_REQUEST"]="SecretRequest",e["SECRET_REVEAL"]="RevealSecret",e["LOCKED_TRANSFER"]="LockedTransfer",e["REFUND_TRANSFER"]="RefundTransfer",e["UNLOCK"]="Unlock",e["LOCK_EXPIRED"]="LockExpired",e["WITHDRAW_REQUEST"]="WithdrawRequest",e["WITHDRAW_CONFIRMATION"]="WithdrawConfirmation",e["WITHDRAW_EXPIRED"]="WithdrawExpired",e["PFS_CAPACITY_UPDATE"]="PFSCapacityUpdate",e["PFS_FEE_UPDATE"]="PFSFeeUpdate",e["MONITOR_REQUEST"]="RequestMonitoring"})(Qn||(Qn={}));var Or,wr=Ie["o"](Ie["u"]({message_identifier:Nt(8)})),_r=Ie["o"](Ie["u"]({type:Ie["k"](Qn.DELIVERED),delivered_message_identifier:Nt(8)})),kr=_r,jr=Ie["o"](Ie["i"]([Ie["u"]({type:Ie["k"](Qn.PROCESSED)}),wr])),Er=jr,Tr=Ie["o"](Ie["i"]([Ie["u"]({type:Ie["k"](Qn.SECRET_REQUEST),payment_identifier:Nt(8),secrethash:Rt,amount:Nt(32),expiration:Nt(32)}),wr])),Sr=Tr,Ar=Ie["o"](Ie["i"]([Ie["u"]({type:Ie["k"](Qn.SECRET_REVEAL),secret:Ct}),wr])),xr=Ar,Nr=Ie["o"](Ie["i"]([Ie["u"]({chain_id:Nt(32),token_network_address:Lt,channel_identifier:Nt(32),nonce:Nt(8),transferred_amount:Nt(32),locked_amount:Nt(32),locksroot:Rt}),wr])),Dr=Ie["o"](Ie["u"]({route:Ie["p"](Lt)})),Rr=Dr,Cr=Ie["o"](Ie["u"]({routes:Ie["p"](Rr)})),Pr=Cr,Ir=Ie["o"](Ie["i"]([Ie["u"]({payment_identifier:Nt(8),token:Lt,recipient:Lt,lock:zn,target:Lt,initiator:Lt,metadata:Pr}),Nr])),Lr=Ie["o"](Ie["i"]([Ie["u"]({type:Ie["k"](Qn.LOCKED_TRANSFER)}),Ir])),Ur=Lr,Mr=Ie["o"](Ie["i"]([Ie["u"]({type:Ie["k"](Qn.REFUND_TRANSFER)}),Ir])),Br=Mr,Fr=Ie["o"](Ie["i"]([Ie["u"]({type:Ie["k"](Qn.UNLOCK),payment_identifier:Nt(8),secret:Ct}),Nr])),Wr=Fr,$r=Ie["o"](Ie["i"]([Ie["u"]({type:Ie["k"](Qn.LOCK_EXPIRED),recipient:Lt,secrethash:Rt}),Nr])),Hr=$r,Vr=Ie["o"](Ie["u"]({chain_id:Nt(32),token_network_address:Lt,channel_identifier:Nt(32),participant:Lt,total_withdraw:Nt(32),nonce:Nt(8),expiration:Nt(32)})),qr=Ie["o"](Ie["i"]([Ie["u"]({type:Ie["k"](Qn.WITHDRAW_REQUEST)}),Vr,wr])),Kr=qr,Gr=Ie["o"](Ie["i"]([Ie["u"]({type:Ie["k"](Qn.WITHDRAW_CONFIRMATION)}),Vr,wr])),Zr=Gr,Xr=Ie["o"](Ie["i"]([Ie["u"]({type:Ie["k"](Qn.WITHDRAW_EXPIRED)}),Vr,wr])),Yr=Xr,Qr=Ie["o"](Ie["u"]({type:Ie["k"](Qn.PFS_CAPACITY_UPDATE),canonical_identifier:Ie["o"](Ie["u"]({chain_identifier:Nt(32),token_network_address:Lt,channel_identifier:Nt(32)})),updating_participant:Lt,other_participant:Lt,updating_nonce:Nt(8),other_nonce:Nt(8),updating_capacity:Nt(32),other_capacity:Nt(32),reveal_timeout:Nt(32)})),Jr=Qr,zr=Ie["o"](Ie["u"]({type:Ie["k"](Qn.PFS_FEE_UPDATE),canonical_identifier:Ie["o"](Ie["u"]({chain_identifier:Nt(32),token_network_address:Lt,channel_identifier:Nt(32)})),updating_participant:Lt,timestamp:Ie["r"],fee_schedule:Ie["u"]({cap_fees:Ie["e"],imbalance_penalty:Ie["w"]([Ie["l"],Ie["d"](Ie["t"]([Nt(32),xt(32)]))]),proportional:xt(32),flat:xt(32)})})),ea=zr,ta=Ie["o"](Ie["u"]({type:Ie["k"](Qn.MONITOR_REQUEST),balance_proof:Ie["u"]({chain_id:Nt(32),token_network_address:Lt,channel_identifier:Nt(32),nonce:Nt(8),balance_hash:Rt,additional_hash:Rt,signature:Dt}),monitoring_service_contract_address:Lt,non_closing_participant:Lt,non_closing_signature:Dt,reward_amount:Nt(32)})),na=ta,ra=[kr,Er,Sr,xr,Ur,Br,Wr,Hr,Kr,Zr,Yr,Jr,ea,na],aa=ra,oa=Ie["w"](aa),ia=Vn(Ie["u"]({address:Lt,msgId:Ie["r"]}),"message/send/request","message/send/success","message/send/failure",Ie["u"]({message:Ie["w"]([Ie["r"],Ft(oa)])}),Ie["w"]([Ie["v"],Ie["u"]({via:Ie["r"]})])),ca=Hn("message/global/send",Ie["u"]({message:Ie["w"]([Ie["r"],Ft(oa)])}),Ie["u"]({roomName:Ie["r"]})),sa=Hn("message/received",Ie["i"]([Ie["u"]({text:Ie["r"],ts:Ie["m"]}),Ie["n"]({message:Ie["w"]([oa,Ft(oa)]),userId:Ie["r"],roomId:Ie["r"]})]),Ie["u"]({address:Lt})),ua=n("4d63"),la=n.n(ua),fa=Ie["o"](Ie["i"]([Ie["u"]({result:Ie["d"](Ie["o"](Ie["u"]({path:Ie["p"](Lt),estimated_fee:xt(32)})))}),Ie["n"]({feedback_token:Ie["r"]})])),pa=Ie["d"](Ie["o"](Ie["u"]({path:Ie["p"](Lt),fee:xt(32)}))),da=Ie["o"](Ie["u"]({address:Lt,url:Ie["r"],rtt:Ie["m"],price:Nt(32),token:Lt})),ba=Ie["o"](Ie["u"]({sender:Lt,receiver:Lt,amount:Nt(32),expiration_block:Nt(32),one_to_n_address:Lt,chain_id:Nt(32)})),ya=Ie["o"](Ie["u"]({last_iou:Ft(ba)})),ma={SENT:"sent",RECEIVED:"received"},ha=Ie["o"](Ie["i"]([Ie["u"]({transfer:Ut(Ft(Ur)),fee:xt(32),partner:Lt}),Ie["n"]({secret:Ut(Ie["u"]({value:Ct,registerBlock:Ie["m"]})),transferProcessed:Ut(Ft(Er)),refund:Ut(Ft(Br)),channelClosed:Ut(Ie["u"]({txHash:Rt,txBlock:Ie["m"]})),secretRequest:Ut(Ft(Sr)),secretReveal:Ut(Ft(xr)),unlock:Ut(Ft(Wr)),lockExpired:Ut(Ft(Hr)),unlockProcessed:Ut(Ft(Er)),lockExpiredProcessed:Ut(Ft(Er))})])),va=ha,ga=Ie["o"](Ie["q"](Ie["r"],va));(function(e){e["pending"]="PENDING",e["received"]="RECEIVED",e["refunded"]="REFUNDED",e["closed"]="CLOSED",e["requested"]="REQUESTED",e["revealed"]="REVEALED",e["registered"]="REGISTERED",e["unlocking"]="UNLOCKING",e["expiring"]="EXPIRING",e["unlocked"]="UNLOCKED",e["expired"]="EXPIRED"})(Or||(Or={}));var Oa=Ie["j"](la()(ma)),wa=Ie["u"]({secrethash:Rt,direction:Oa}),_a=Vn(wa,"transfer/request","transfer/success","transfer/failure",Ie["i"]([Ie["u"]({tokenNetwork:Lt,target:Lt,value:Nt(32),paths:pa,paymentId:Nt(8)}),Ie["n"]({secret:Ct,expiration:Ie["m"],initiator:Lt})]),Ie["n"]({balanceProof:Ft(tr)})),ka=Hn("transfer/signed",Ie["u"]({message:Ft(Ur),fee:xt(32),partner:Lt}),wa),ja=Hn("transfer/processed",Ie["u"]({message:Ft(Er)}),wa),Ea=Hn("transfer/secret",Ie["u"]({secret:Ct}),wa),Ta=Vn(wa,"transfer/secret/register/request","transfer/secret/register/success","transfer/secret/register/failure",Ie["i"]([Ie["u"]({secret:Ct}),Ie["n"]({subkey:Ie["e"]})]),Ie["u"]({secret:Ct,txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])})),Sa=Hn("transfer/secret/request",Ie["u"]({message:Ft(Sr)}),wa),Aa=Hn("transfer/secret/reveal",Ie["u"]({message:Ft(xr)}),wa),xa=Vn(wa,"transfer/unlock/request","transfer/unlock/success","transfer/unlock/failure",void 0,Ie["u"]({message:Ft(Wr),partner:Lt})),Na=Hn("transfer/unlock/processed",Ie["u"]({message:Ft(Er)}),wa),Da=Vn(wa,"transfer/expire/request","transfer/expire/success","transfer/expire/failure",void 0,Ie["u"]({message:Ft(Hr),partner:Lt})),Ra=Hn("transfer/expire/processed",Ie["u"]({message:Ft(Er)}),wa),Ca=Hn("transfer/refunded",Ie["u"]({message:Ft(Br),partner:Lt}),wa),Pa=Ie["u"]({direction:Oa,tokenNetwork:Lt,partner:Lt,totalWithdraw:Nt(32),expiration:Ie["m"]}),Ia=Vn(Pa,"withdraw/request","withdraw/success","withdraw/failure",Ie["v"],Ie["u"]({txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])})),La=Vn(Pa,"withdraw/message/request","withdraw/message/success","withdraw/message/failure",Ie["u"]({message:Ft(Kr)}),Ie["u"]({message:Ft(Zr)})),Ua=Vn(Pa,"withdraw/expire/request","withdraw/expire/success","withdraw/expire/failure",Ie["v"],Ie["u"]({message:Ft(Yr)})),Ma=Hn("withdraw/completed",Ie["v"],Pa),Ba=Ie["u"]({tokenNetwork:Lt,target:Lt,value:Nt(32)}),Fa=Ie["u"]({tokenNetwork:Lt,serviceAddress:Lt}),Wa=Vn(Ba,"path/find/request","path/find/success","path/find/failure",Ie["n"]({paths:pa,pfs:Ie["w"]([da,Ie["l"]])}),Ie["u"]({paths:pa})),$a=Hn("pfs/list/updated",Ie["u"]({pfsList:Ie["p"](Lt)})),Ha=Hn("iou/persist",Ie["u"]({iou:Ft(ba)}),Fa),Va=Hn("iou/clear",void 0,Fa),qa=Vn(Ie["u"]({totalDeposit:Nt(32)}),"udc/deposit/request","udc/deposit/success","udc/deposit/failure",Ie["i"]([Ie["u"]({deposit:Nt(32)}),Ie["n"]({subkey:Ie["e"]})]),Ie["w"]([Ie["v"],Ie["u"]({txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])})])),Ka=Ie["u"]({amount:Nt(32)}),Ga=Vn(Ka,"udc/withdraw/request","udc/withdraw/success","udc/withdraw/failure",Ie["v"],Ie["i"]([Ie["u"]({block:Ie["m"]}),Ie["n"]({txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])})])),Za=Hn("udc/withdrawn",Ie["u"]({withdrawal:Nt(32),txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])}),Ka),Xa=Hn("ms/balanceProof/sent",Ie["u"]({tokenNetwork:Lt,partner:Lt,id:Ie["m"],reward:Nt(32),nonce:Nt(8),monitoringService:Lt,txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])}));function Ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(n),!0).forEach((function(t){Ja(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var za=Hn("raiden/shutdown",Ie["u"]({reason:Ie["w"]([Ie["k"](De.STOP),Ie["k"](De.ACCOUNT_CHANGED),Ie["k"](De.NETWORK_CHANGED),vt])})),eo=Hn("raiden/config/update",wn),to=Qa(Qa(Qa(Qa(Qa({raidenShutdown:za,raidenConfigUpdate:eo},r),a),o),i),c),no=[to.raidenShutdown,to.newBlock,to.matrixPresence.success,to.tokenMonitored,to.udcWithdrawn,to.udcWithdraw.failure,to.msBalanceProofSent,to.channelSettle.success,to.channelSettle.failure],ro=An()(to,(function(e,t){return Qa(Qa({},e),"type"in t?Ja({},t.type,t):jn()(t,Tn()("type")))}),{}),ao=Ie["o"](Ie["u"]({type:Ie["r"],payload:Ie["o"](Ie["u"]({txHash:Rt,txBlock:Ie["m"],confirmed:Ie["w"]([Ie["v"],Ie["e"]])}))})),oo=new Ie["b"]("ConfirmableAction",ao.is,(function(e,t){return Be["either"].chain(ao.validate(e,t),(function(e){var n=e.type;return n in ro?ro[n].codec.validate(e,t):Ie["g"](e,t)}))}),(function(e){return ro[e.type].codec.encode(e)}));function io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?io(Object(n),!0).forEach((function(t){so(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uo(e){return co(co({},e),{},{version:0})}function lo(e,t){return mo(e)||yo(e,t)||po(e,t)||fo()}function fo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function po(e,t){if(e){if("string"===typeof e)return bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bo(e,t):void 0}}function bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yo(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function mo(e){if(Array.isArray(e))return e}function ho(e){for(var t,n,r,a=e.sent,o=0,i=Object.entries(a);o<i.length;o++){var c=lo(i[o],2),s=c[0],u=c[1];e.secrets[s]&&Object.assign(u,{secret:[null!==(n=null===(t=u.secretReveal)||void 0===t?void 0:t[0])&&void 0!==n?n:u.transfer[0],{value:e.secrets[s].secret,registerBlock:null!==(r=e.secrets[s].registerBlock)&&void 0!==r?r:0}]})}return delete e["secrets"],e}function vo(e){for(var t=0,n=Object.values(e.channels);t<n.length;t++)for(var r=n[t],a=0,o=Object.values(r);a<o.length;a++){var i=o[a];i.closeBlock&&Object.assign(i,{closeParticipant:e.address})}for(var c=e.sent,s=0,u=Object.values(c);s<u.length;s++){var l=u[s];Object.assign(l,{partner:l.transfer[1].recipient})}return Object.assign(e,{received:{}}),e}var go=n("77a9"),Oo=n("2cb6");function wo(e,t){var n;if("boolean"===typeof e?e=e?k["One"]:k["Zero"]:"number"===typeof e&&(e=Object(_["bigNumberify"])(e)),"string"!==typeof e||Object(go["isHexString"])(e)||(e=Object(_["toUtf8Bytes"])(e)),Object(go["isArrayish"])(e)&&(e=Object(go["hexlify"])(e)),St.is(e)){if(e.lt(0))throw new yt(dt.DTA_NEGATIVE_NUMBER);if(e.gte(k["Two"].pow(8*t)))throw new yt(dt.DTA_NUMBER_TOO_LARGE);n=Object(go["hexZeroPad"])(Object(go["hexlify"])(e),t)}else{if("string"!==typeof e)throw new yt(dt.DTA_UNENCODABLE_DATA);if(Object(go["hexDataLength"])(e)!==t)throw new yt(dt.DTA_ARRAY_LENGTH_DIFFERENCE);n=e}return n}var _o,ko=JSON.parse,jo=JSON.stringify;function Eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(n),!0).forEach((function(t){No(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function So(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Ao(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){So(o,r,a,i,c,"next",e)}function c(e){So(o,r,a,i,c,"throw",e)}i(void 0)}))}}function xo(e){return xo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xo(e)}function No(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Do,Ro,Co=(_o={},No(_o,Qn.DELIVERED,12),No(_o,Qn.PROCESSED,0),No(_o,Qn.SECRET_REQUEST,3),No(_o,Qn.SECRET_REVEAL,11),No(_o,Qn.LOCKED_TRANSFER,7),No(_o,Qn.REFUND_TRANSFER,8),No(_o,Qn.UNLOCK,4),No(_o,Qn.LOCK_EXPIRED,13),No(_o,Qn.WITHDRAW_REQUEST,15),No(_o,Qn.WITHDRAW_CONFIRMATION,16),No(_o,Qn.WITHDRAW_EXPIRED,17),No(_o,Qn.PFS_CAPACITY_UPDATE,-1),No(_o,Qn.PFS_FEE_UPDATE,-1),No(_o,Qn.MONITOR_REQUEST,-1),_o);function Po(e){var t=e.routes.map((function(e){return Object(_["keccak256"])(_["RLP"].encode(e.route))}));return Object(_["keccak256"])(_["RLP"].encode(t))}function Io(e){var t=e.transferredAmount,n=e.lockedAmount,r=e.locksroot;return t.isZero()&&n.isZero()&&(r===k["HashZero"]||r===Pe)?k["HashZero"]:Object(_["keccak256"])(Object(go["concat"])([wo(t,32),wo(n,32),wo(r,32)]))}function Lo(e){switch(e.type){case Qn.LOCKED_TRANSFER:case Qn.REFUND_TRANSFER:var t=Object(go["concat"])([wo(Co[e.type],1),wo(e.message_identifier,8),wo(e.payment_identifier,8),wo(e.lock.expiration,32),wo(e.token,20),wo(e.recipient,20),wo(e.target,20),wo(e.initiator,20),wo(e.lock.secrethash,32),wo(e.lock.amount,32)]);return e.type===Qn.LOCKED_TRANSFER&&(t=Object(go["concat"])([t,Po(e.metadata)])),Object(_["keccak256"])(t);case Qn.UNLOCK:return Object(_["keccak256"])(Object(go["concat"])([wo(Co[e.type],1),wo(e.message_identifier,8),wo(e.payment_identifier,8),wo(e.secret,32)]));case Qn.LOCK_EXPIRED:return Object(_["keccak256"])(Object(go["concat"])([wo(Co[e.type],1),wo(e.message_identifier,8),wo(e.recipient,20),wo(e.secrethash,32)]))}}function Uo(e){var t;switch(e.type){case Qn.DELIVERED:return Object(go["hexlify"])(Object(go["concat"])([wo(Co[e.type],1),wo(0,3),wo(e.delivered_message_identifier,8)]));case Qn.PROCESSED:return Object(go["hexlify"])(Object(go["concat"])([wo(Co[e.type],1),wo(0,3),wo(e.message_identifier,8)]));case Qn.LOCKED_TRANSFER:case Qn.REFUND_TRANSFER:case Qn.UNLOCK:case Qn.LOCK_EXPIRED:var n=Lo(e),r=Io({transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot});return Object(go["hexlify"])(Object(go["concat"])([wo(e.token_network_address,20),wo(e.chain_id,32),wo(Do.BALANCE_PROOF,32),wo(e.channel_identifier,32),wo(r,32),wo(e.nonce,32),wo(n,32)]));case Qn.SECRET_REQUEST:return Object(go["hexlify"])(Object(go["concat"])([wo(Co[e.type],1),wo(0,3),wo(e.message_identifier,8),wo(e.payment_identifier,8),wo(e.secrethash,32),wo(e.amount,32),wo(e.expiration,32)]));case Qn.SECRET_REVEAL:return Object(go["hexlify"])(Object(go["concat"])([wo(Co[e.type],1),wo(0,3),wo(e.message_identifier,8),wo(e.secret,32)]));case Qn.WITHDRAW_REQUEST:case Qn.WITHDRAW_CONFIRMATION:return Object(go["hexlify"])(Object(go["concat"])([wo(e.token_network_address,20),wo(e.chain_id,32),wo(Do.WITHDRAW,32),wo(e.channel_identifier,32),wo(e.participant,20),wo(e.total_withdraw,32),wo(e.expiration,32)]));case Qn.WITHDRAW_EXPIRED:return Object(go["hexlify"])(Object(go["concat"])([wo(Co[e.type],1),wo(0,3),wo(e.nonce,32),wo(e.message_identifier,8),wo(e.token_network_address,20),wo(e.chain_id,32),wo(Do.WITHDRAW,32),wo(e.channel_identifier,32),wo(e.participant,20),wo(e.total_withdraw,32),wo(e.expiration,32)]));case Qn.PFS_CAPACITY_UPDATE:return Object(go["hexlify"])(Object(go["concat"])([wo(e.canonical_identifier.chain_identifier,32),wo(e.canonical_identifier.token_network_address,20),wo(e.canonical_identifier.channel_identifier,32),wo(e.updating_participant,20),wo(e.other_participant,20),wo(e.updating_nonce,8),wo(e.other_nonce,8),wo(e.updating_capacity,32),wo(e.other_capacity,32),wo(e.reveal_timeout,32)]));case Qn.PFS_FEE_UPDATE:return Object(go["hexlify"])(Object(go["concat"])([wo(e.canonical_identifier.chain_identifier,32),wo(e.canonical_identifier.token_network_address,20),wo(e.canonical_identifier.channel_identifier,32),wo(e.updating_participant,20),wo(e.fee_schedule.cap_fees,1),wo(e.fee_schedule.flat,32),wo(e.fee_schedule.proportional,32),Object(Oo["encode"])(null!==(t=e.fee_schedule.imbalance_penalty)&&void 0!==t?t:"0x"),wo(e.timestamp,19)]));case Qn.MONITOR_REQUEST:return Object(go["hexlify"])(Object(go["concat"])([wo(e.monitoring_service_contract_address,20),wo(e.balance_proof.chain_id,32),wo(Do.MS_REWARD,32),wo(e.balance_proof.token_network_address,20),wo(e.non_closing_participant,20),wo(e.non_closing_signature,65),wo(e.reward_amount,32)]))}}function Mo(e){return Dt.is(e.signature)}function Bo(e){return Object(_["verifyMessage"])(Object(go["arrayify"])(Uo(e)),e.signature)}function Fo(e){return{chainId:e.chain_id,tokenNetworkAddress:e.token_network_address,channelId:e.channel_identifier,nonce:e.nonce,transferredAmount:e.transferred_amount,lockedAmount:e.locked_amount,locksroot:e.locksroot,additionalHash:Lo(e),signature:e.signature}}function Wo(e){return jo("signature"in e?Ft(oa).encode(e):oa.encode(e))}function $o(e){var t=ko(e);return mt(t&&"object"===xo(t)&&"type"in t&&Object.values(Qn).some((function(e){return e===t["type"]})),"Invalid message type: ".concat(null===t||void 0===t?void 0:t["type"])),Et("signature"in t?Ft(oa):oa,t)}function Ho(e,t){return Vo.apply(this,arguments)}function Vo(){return Vo=Ao(d.a.mark((function e(t,n){var r,a,o,i=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:{log:y.a},a=r.log,!Mo(n)){e.next=3;break}return e.abrupt("return",n);case 3:return a.debug('Signing message "'.concat(n.type,'"'),n),e.next=6,t.signMessage(Object(go["arrayify"])(Uo(n)));case 6:return o=e.sent,e.abrupt("return",To(To({},n),{},{signature:o}));case 8:case"end":return e.stop()}}),e)}))),Vo.apply(this,arguments)}function qo(e){return function(t){return sa.is(t)&&(Array.isArray(e)?e.some((function(e){return e.is(t.payload.message)})):e.is(t.payload.message))}}(function(e){e[e["BALANCE_PROOF"]=1]="BALANCE_PROOF",e[e["BALANCE_PROOF_UPDATE"]=2]="BALANCE_PROOF_UPDATE",e[e["WITHDRAW"]=3]="WITHDRAW",e[e["COOP_SETTLE"]=4]="COOP_SETTLE",e[e["IOU"]=5]="IOU",e[e["MS_REWARD"]=6]="MS_REWARD"})(Do||(Do={})),function(e){e["open"]="open",e["closing"]="closing",e["closed"]="closed",e["settleable"]="settleable",e["settling"]="settling",e["settled"]="settled"}(Ro||(Ro={}));var Ko=Ie["o"](Ie["u"]({address:Lt,deposit:Nt(32),withdraw:Nt(32),locks:Ie["p"](zn),balanceProof:Ft(tr),pendingWithdraws:Ie["p"](Ie["w"]([Ft(Kr),Ft(Zr),Ft(Yr)])),nextNonce:Nt(8)})),Go=Ko,Zo=Ie["i"]([Ie["o"](Ie["u"]({id:Ie["m"],token:Lt,tokenNetwork:Lt,settleTimeout:Ie["m"],isFirstParticipant:Ie["e"],openBlock:Ie["m"],own:Go,partner:Go})),Ie["w"]([Ie["o"](Ie["u"]({state:Ie["w"]([Ie["k"](Ro.open),Ie["k"](Ro.closing)])})),Ie["i"]([Ie["o"](Ie["u"]({closeBlock:Ie["m"],closeParticipant:Lt})),Ie["w"]([Ie["o"](Ie["u"]({state:Ie["w"]([Ie["k"](Ro.closed),Ie["k"](Ro.settleable),Ie["k"](Ro.settling)])})),Ie["o"](Ie["u"]({state:Ie["k"](Ro.settled),settleBlock:Ie["m"]}))])])])]);function Xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yo(e,t){return ti(e)||ei(e,t)||Jo(e,t)||Qo()}function Qo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Jo(e,t){if(e){if("string"===typeof e)return zo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zo(e,t):void 0}}function zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ei(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function ti(e){if(Array.isArray(e))return e}function ni(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var a=Yo(r[n],2),o=a[0],i=a[1];e[o].balanceProof?(Object.assign(e[o].balanceProof,{additionalHash:e[o].balanceProof.messageHash}),delete e[o].balanceProof.messageHash,delete e[o].balanceProof.sender):Object.assign(e[o],{balanceProof:nr,locks:[]}),Object.assign(e[o],{address:i}),"withdraw"in e[o]||Object.assign(e[o],{withdraw:k["Zero"]})}}function ri(e){for(var t,n={},r=function(){for(var t=Yo(o[a],2),r=t[0],i=t[1],c=0,s=Object.entries(i);c<s.length;c++){var u=Yo(s[c],2),l=u[0],f=u[1];ni(f,{own:e.address,partner:l});var p=$e()(e.tokens,(function(e){return e===r}));Object.assign(f,{token:p,tokenNetwork:r}),Object.assign(n,Xo({},"".concat(l,"@").concat(r),f))}},a=0,o=Object.entries(e.channels);a<o.length;a++)r();return Object.assign(e,{channels:n,oldChannels:{}}),Object.assign(e,{transport:null!==(t=e.transport.matrix)&&void 0!==t?t:{}}),Object.assign(e,{iou:e.path.iou}),delete e.path,e}function ai(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=oi(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function oi(e,t){if(e){if("string"===typeof e)return ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ii(e,t):void 0}}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ci(e){var t,n=ai(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{withdrawRequests:[],nextNonce:Object(_["bigNumberify"])(r[i].balanceProof.nonce).add(1).toString()})}}catch(c){n.e(c)}finally{n.f()}return e}function si(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ui(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ui(e,t){if(e){if("string"===typeof e)return li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?li(e,t):void 0}}function li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fi(e){var t,n=si(Object.values(e.channels).concat(Object.values(e.oldChannels)));try{for(n.s();!(t=n.n()).done;)for(var r=t.value,a=0,o=["own","partner"];a<o.length;a++){var i=o[a];Object.assign(r[i],{pendingWithdraws:r[i].withdrawRequests}),delete r[i].withdrawRequests}}catch(c){n.e(c)}finally{n.f()}return e}function pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(n),!0).forEach((function(t){bi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yi(e){return yi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi(e)}function mi(e,t){return wi(e)||Oi(e,t)||vi(e,t)||hi()}function hi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vi(e,t){if(e){if("string"===typeof e)return gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gi(e,t):void 0}}function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oi(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wi(e){if(Array.isArray(e))return e}function _i(e){for(var t=0,n=["sent","received"];t<n.length;t++)for(var r=n[t],a=0,o=Object.values(e[r]);a<o.length;a++){for(var i=o[a],c=0,s=Object.entries(i);c<s.length;c++){var u=mi(s[c],2),l=u[0],f=u[1];Array.isArray(f)&&2===f.length&&"object"===yi(f[1])&&Object.assign(i,bi({},l,di(di({},f[1]),{},{ts:f[0]})))}var p=i.channelClosed;p&&Object.assign(i,{channelClosed:{txHash:p[1],txBlock:0,ts:p[0]}})}return e}var ki=[uo,ho,vo,ri,ci,fi,_i],ji=ki.length-1;function Ei(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ji,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{log:y.a},a=r.log,o=(null!==(t=null===e||void 0===e?void 0:e.version)&&void 0!==t?t:-1)+1;o<=n;o++)try{e=Object.assign(ki[o](e),{version:o})}catch(i){throw a.error("Error migrating state from version ".concat(o-1," to ").concat(o),e,i),i}return e}function Ti(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Si(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ti(o,r,a,i,c,"next",e)}function c(e){Ti(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(n),!0).forEach((function(t){Ni(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Di=Ie["o"](Ie["u"]({address:Lt,version:Ie["k"](ji),chainId:Ie["m"],registry:Lt,blockNumber:Ie["m"],config:wn,channels:Ie["o"](Ie["q"](Jn,Zo)),oldChannels:Ie["o"](Ie["q"](Ie["r"],Zo)),tokens:Ie["o"](Ie["q"](Ie["r"],Lt)),transport:Ie["o"](Ie["n"]({server:Ie["r"],setup:dr,rooms:Ie["o"](Ie["q"](Ie["r"],Ie["d"](Ie["r"])))})),sent:ga,received:ga,iou:Ie["o"](Ie["q"](Ie["r"],Ie["q"](Ie["r"],Ft(ba)))),pendingTxs:Ie["p"](oo)})),Ri=Di;function Ci(e){return jo(Ri.encode(e),void 0,2)}function Pi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{log:y.a},n=t.log;"string"===typeof e&&(e=ko(e));var r=Ei(e,ji,{log:n});try{return Et(Ri,r)}catch(a){throw n.error("Error validating migrated state version=".concat(null===r||void 0===r?void 0:r.version),r,a),a}}function Ii(e){var t=e.network,n=e.address,r=e.contractsInfo,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xi({address:n,version:ji,chainId:t.chainId,registry:r.TokenNetworkRegistry.address,blockNumber:r.TokenNetworkRegistry.block_number,channels:{},oldChannels:{},tokens:{},transport:{},sent:{},received:{},iou:{},pendingTxs:[],config:{}},a)}var Li=Ii({network:Object(_["getNetwork"])("unspecified"),address:k["AddressZero"],contractsInfo:{TokenNetworkRegistry:{address:k["AddressZero"],block_number:0},ServiceRegistry:{address:k["AddressZero"],block_number:0},UserDeposit:{address:k["AddressZero"],block_number:0},SecretRegistry:{address:k["AddressZero"],block_number:0},MonitoringService:{address:k["AddressZero"],block_number:0},OneToN:{address:k["AddressZero"],block_number:0}}}),Ui=function(e){return e&&"function"===typeof e.getItem},Mi=function(){var e=Si(d.a.mark((function e(t,n,r,a,o){var i,c,s,u,l,f,p,b,m,h,v;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=y.a.getLogger("raiden:".concat(r)),Ui(a)?(u=a,l=void 0):Ui(null===a||void 0===a?void 0:a.storage)?(u=a.storage,l=a.state):(u=void 0,l=a),f=void 0,l&&(f=Pi(l,{log:i})),!u){e.next=23;break}return p="raiden_".concat(dn(t),"_").concat(n.TokenNetworkRegistry.address,"_").concat(r),e.next=8,u.getItem(p);case 8:if(b=e.sent,!b){e.next=20;break}if(m=Pi(b,{log:i}),!f){e.next=19;break}if(!(f.blockNumber<m.blockNumber)){e.next=16;break}throw new yt(dt.RDN_STATE_MIGRATION,{storedStateBlockNumber:m.blockNumber,providedStateBlockNumber:f.blockNumber});case 16:i.warn("Replacing stored state @blockNumber=".concat(m.blockNumber," with newer provided state @blockNumber=").concat(f.blockNumber));case 17:e.next=20;break;case 19:f=m;case 20:h=Ue()((function(e){u.setItem(p,Ci(e))}),1e3,{maxWait:5e3}),c=h,s=function(){return h.flush()};case 23:return f||(f=Ii({network:t,address:r,contractsInfo:n})),v=_n({network:t},o),e.abrupt("return",{state:f,onState:c,onStateComplete:s,defaultConfig:v});case 26:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),Bi=n("bf69"),Fi=n.n(Bi);function Wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(n),!0).forEach((function(t){Hi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vi(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0;for(var o in e){var i=e[o];if(i){var c=null!==(n=r[o])&&void 0!==n?n:t[o],s=i(c,a);s!==c&&(r=$i($i({},r),{},Hi({},o,s)))}}return r}}var qi=n("5a76"),Ki=n("c77a"),Gi=n("4045"),Zi=n("1471"),Xi=n("5a1b"),Yi=n("394b"),Qi=n("cbd9"),Ji=n("6ad5"),zi=n("4dc1"),ec=n("677b"),tc=n("c472"),nc=n("01d4"),rc=n("1c3a"),ac=n("eab5");function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach((function(t){cc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sc(e,t){return dc(e)||pc(e,t)||lc(e,t)||uc()}function uc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lc(e,t){if(e){if("string"===typeof e)return fc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fc(e,t):void 0}}function fc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function dc(e){if(Array.isArray(e))return e}var bc=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.pipe(Xi["a"].apply(void 0,t),Object(ec["a"])())}};function yc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t};return function(t){return t.pipe(Object(ec["a"])(),Object(W["a"])((function(e){return Object(zi["a"])(e)})),Object(tc["a"])((function(t,n){var r=t.acc,a=sc(n,2),o=a[0],i=a[1];return e(r[o],i)?{acc:r}:{acc:ic(ic({},r),{},cc({},o,i)),changed:[o,i]}}),{acc:{}}),Object(Xi["a"])("changed"),Object(B["a"])(Tt))}}function mc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return function(n){return n.pipe(Object(nc["a"])((function(e){return e.pipe(Object(M["a"])((function(){if("number"===typeof t)return t;var e=t.next();return e.done?-1:e.value})),Object(rc["a"])((function(e){return e>=0})),Object(ac["a"])((function(e){return Object(qi["a"])(e)})))})),Object(Qi["a"])(e))}}function hc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return t>=10};return Object(I["a"])(e).pipe(Object(Zi["a"])((function(e){return e.pipe(Object(W["a"])((function(e,r){return n(e,r)?Object(Ki["a"])(e):Object(qi["a"])(t)})))})))}function vc(e,t){return wc(e)||Oc(e,t)||Tc(e,t)||gc()}function gc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function wc(e){if(Array.isArray(e))return e}function _c(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function kc(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_c(o,r,a,i,c,"next",e)}function c(e){_c(o,r,a,i,c,"throw",e)}i(void 0)}))}}function jc(e){return Ac(e)||Sc(e)||Tc(e)||Ec()}function Ec(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tc(e,t){if(e){if("string"===typeof e)return xc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xc(e,t):void 0}}function Sc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ac(e){if(Array.isArray(e))return xc(e)}function xc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nc(e){var t=e.tokenNetwork,n=e.partner;return"".concat("string"===typeof n?n:n.address,"@").concat(t)}function Dc(e){return"".concat(e.id,"#").concat(Nc(e))}function Rc(e){var t=e.own.withdraw,n=e.partner.withdraw,r=e.own.balanceProof.transferredAmount,a=e.partner.balanceProof.transferredAmount,o=e.own.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),i=e.partner.locks.filter((function(e){return e.registered})).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),c=r.add(o),s=a.add(i),u=e.own.balanceProof.lockedAmount.sub(o),l=e.partner.balanceProof.lockedAmount.sub(i),f=s.sub(c),p=c.sub(s),d=Ht.apply(void 0,[t].concat(jc(e.own.pendingWithdraws.filter((function(e){return e.type===Qn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),b=Ht.apply(void 0,[n].concat(jc(e.partner.pendingWithdraws.filter((function(e){return e.type===Qn.WITHDRAW_REQUEST})).map((function(e){return e.total_withdraw}))))),y=e.own.deposit.sub(d).sub(u).add(f),m=e.partner.deposit.sub(b).sub(l).add(p),h=e.own.deposit.add(f).sub(u),v=h.sub(t),g=e.partner.deposit.add(p).sub(l),O=g.sub(n);return{ownDeposit:e.own.deposit,ownWithdraw:t,ownTransferred:r,ownLocked:u,ownBalance:f,ownCapacity:y,ownOnchainUnlocked:o,ownUnlocked:c,partnerDeposit:e.partner.deposit,partnerWithdraw:n,partnerTransferred:a,partnerLocked:l,partnerBalance:p,partnerCapacity:m,partnerOnchainUnlocked:i,partnerUnlocked:s,ownTotalWithdrawable:h,ownWithdrawable:v,partnerTotalWithdrawable:g,partnerWithdrawable:O}}function Cc(e,t,n){var r=n.log;return function(n){return n.pipe(Object(Gi["a"])((function(t){return r.debug("sent ".concat(e,' tx "').concat(t.hash,'" to "').concat(t.to,'"'))})),Object(W["a"])(function(){var e=kc(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.wait();case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(M["a"])((function(n){var a,o,i,c=vc(n,2),s=c[0],u=c[1];if(!u.status||!u.transactionHash||!u.blockNumber)throw new yt(t,{status:null!==(a=u.status)&&void 0!==a?a:null,transactionHash:null!==(o=u.transactionHash)&&void 0!==o?o:null,blockNumber:null!==(i=u.blockNumber)&&void 0!==i?i:null});return r.debug("".concat(e,' tx "').concat(u.transactionHash,'" successfuly mined!')),[s,u]})))}}var Pc=["replacement fee too low","gas price supplied is too low","nonce is too low","nonce has already been used","already known","Transaction with the same hash was already imported"],Ic=["always failing transaction","execution failed due to an exception","transaction failed"];function Lc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pc,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{log:y.a},a=r.log;return function(r){return r.pipe(Object(Zi["a"])((function(r){return r.pipe(Object(W["a"])((function(r,o){return a.debug("__retryTx ".concat(o+1,"/").concat(t," every ").concat(e,", error: "),r),o<t&&n.some((function(e){var t,n;return null===(n=null===(t=r.message)||void 0===t?void 0:t.includes)||void 0===n?void 0:n.call(t,e)}))?Object(qi["a"])(e):Object(Ki["a"])(r)})))})))}}function Uc(e){return e.pipe(Object(Xi["a"])("channels"),yc(),Object(Xi["a"])(1),Object(Yi["a"])(Dc,void 0,void 0,(function(){return new D["a"](1)})),Object(M["a"])((function(t){var n=t.key.split("#"),r=vc(n,2),a=r[0],o=r[1],i=+a;return t.pipe(Object(Qi["a"])(e.pipe(Object(B["a"])((function(e){var t,n=e.channels;return(null===(t=n[o])||void 0===t?void 0:t.id)!==i})))))})))}function Mc(e,t,n){var r=vc(e,3),a=r[0],o=r[1],i=r[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dt.RDN_APPROVE_TRANSACTION_FAILED,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{log:y.a,minimumAllowance:k["Zero"]},u=s.log,l=s.minimumAllowance;if(mt(a.gte(i),[dt.RDN_INSUFFICIENT_BALANCE,{current:a.toString(),required:i.toString()}]),o.gte(i))return Object(C["a"])(!0);var f=Object(C["a"])(!0);return o.isZero()||(f=Object(I["a"])((function(){return t.functions.approve(n,0)})).pipe(Cc("approve",c,{log:u}),Object(Ji["a"])(!0))),f.pipe(Object(W["a"])((function(){return t.functions.approve(n,Ht(l,i))})),Cc("approve",c,{log:u}),Object(Xi["a"])(1))}function Bc(e){return Bc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(e)}function Fc(e,t){if(null==e)return{};var n,r,a=Wc(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Wc(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function $c(e){var t=Hc(e,"string");return"symbol"===Bc(t)?t:String(t)}function Hc(e,t){if("object"!==Bc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Vc(e,t){return Gc(e)||Kc(e,t)||Yc(e,t)||qc()}function qc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kc(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gc(e){if(Array.isArray(e))return e}function Zc(e){return Jc(e)||Qc(e)||Yc(e)||Xc()}function Xc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yc(e,t){if(e){if("string"===typeof e)return zc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zc(e,t):void 0}}function Qc(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Jc(e){if(Array.isArray(e))return zc(e)}function zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?es(Object(n),!0).forEach((function(t){ns(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ns(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rs(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var as=Yn(Li.blockNumber).handle(ar,(function(e,t){rs(e);var n=t.payload;return n.blockNumber})),os=Yn(Li.tokens).handle(or,(function(e,t){var n=t.payload,r=n.token,a=n.tokenNetwork;return e[r]===a?e:ts(ts({},e),{},ns({},r,a))}));function is(e,t){return e.filter((function(e){return e.type!==t.type||t.payload.txHash!==e.payload.txHash}))}var cs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Li.pendingTxs,t=arguments.length>1?arguments[1]:void 0;if(oo.is(t)){if(void 0===t.payload.confirmed)return[].concat(Zc(is(e,t)),[t]);var n=is(e,t);return n.length!==e.length?n:e}return e},ss={address:k["AddressZero"],deposit:k["Zero"],withdraw:k["Zero"],locks:[],balanceProof:nr,pendingWithdraws:[],nextNonce:k["One"]};function us(e,t){var n,r,a=Nc(t.meta),o=e.channels[a];if((null!==(n=null===o||void 0===o?void 0:o.openBlock)&&void 0!==n?n:0)>=t.payload.txBlock||(null!==(r=null===o||void 0===o?void 0:o.id)&&void 0!==r?r:0)>=t.payload.id||!t.payload.confirmed)return e;var i={state:Ro.open,id:t.payload.id,token:t.payload.token,tokenNetwork:t.meta.tokenNetwork,settleTimeout:t.payload.settleTimeout,isFirstParticipant:t.payload.isFirstParticipant,openBlock:t.payload.txBlock,own:ts(ts({},ss),{},{address:e.address}),partner:ts(ts({},ss),{},{address:t.meta.partner})};return ts(ts({},e),{},{channels:ts(ts({},e.channels),{},ns({},a,i))})}function ls(e,t){var n;if(!t.payload.confirmed)return e;var r=Nc(t.meta),a=e.channels[r];if((null===a||void 0===a?void 0:a.state)!==Ro.open||a.id!==t.payload.id)return e;var o=t.payload.participant===a.partner.address?"partner":"own",i=ur.is(t)?["withdraw",t.payload.totalWithdraw,a[o].pendingWithdraws.filter((function(e){return e.total_withdraw.gt(t.payload.totalWithdraw)}))]:["deposit",t.payload.totalDeposit,a[o].pendingWithdraws],c=Vc(i,3),s=c[0],u=c[1],l=c[2];return u.lte(a[o][s])?e:(a=ts(ts({},a),{},ns({},o,ts(ts({},a[o]),{},(n={},ns(n,s,u),ns(n,"pendingWithdraws",l),n)))),ts(ts({},e),{},{channels:ts(ts({},e.channels),{},ns({},r,a))}))}function fs(e,t){var n=Nc(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id)return e;if(void 0===t.payload.confirmed&&r.state===Ro.open)r=ts(ts({},r),{},{state:Ro.closing});else{if("closeBlock"in r||!t.payload.confirmed)return e;r=ts(ts({},r),{},{state:Ro.closed,closeBlock:t.payload.txBlock,closeParticipant:t.payload.participant})}return ts(ts({},e),{},{channels:ts(ts({},e.channels),{},ns({},n,r))})}function ps(e,t){var n=Nc(t.meta),r=e.channels[n];if(!r)return e;if(lr.request.is(t)&&r.state===Ro.open)r=ts(ts({},r),{},{state:Ro.closing});else if(pr.request.is(t)&&r.state===Ro.settleable)r=ts(ts({},r),{},{state:Ro.settling});else{if(!fr.is(t)||r.state!==Ro.closed)return e;r=ts(ts({},r),{},{state:Ro.settleable})}return ts(ts({},e),{},{channels:ts(ts({},e.channels),{},ns({},n,r))})}function ds(e,t){var n=Nc(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.id)!==t.payload.id||!("closeBlock"in r))return e;if(void 0===t.payload.confirmed&&r.state!==Ro.settling)return ts(ts({},e),{},{channels:ts(ts({},e.channels),{},ns({},n,ts(ts({},r),{},{state:Ro.settling})))});if(t.payload.confirmed){var a=e.channels,o=(a[n],Fc(a,[n].map($c)));return ts(ts({},e),{},{channels:o,oldChannels:ts(ts({},e.oldChannels),{},ns({},Dc(r),ts(ts({},r),{},{state:Ro.settled,settleBlock:t.payload.txBlock})))})}return e}function bs(e,t){var n=t.meta.secrethash;if(!t.payload.confirmed||!(n in e[t.meta.direction]))return e;var r=e[t.meta.direction][n].transfer,a=Nc({tokenNetwork:r.token_network_address,partner:e[t.meta.direction][n].partner});if(!(a in e.channels))return e;var o=t.meta.direction===ma.SENT?"own":"partner",i=e.channels[a][o].locks;return i.some((function(e){return e.secrethash===n&&!e.registered}))?ts(ts({},e),{},{channels:ts(ts({},e.channels),{},ns({},a,ts(ts({},e.channels[a]),{},ns({},o,ts(ts({},e.channels[a][o]),{},{locks:i.map((function(e){return e.secrethash!==n||e.registered?e:ts(ts({},e),{},{registered:!0})}))})))))}):e}var ys=Yn(Li).handle(ir.success,us).handle([sr.success,ur],ls).handle([lr.request,fr,pr.request],ps).handle(lr.success,fs).handle(pr.success,ds).handle(Ta.success,bs),ms=Vi({blockNumber:as,tokens:os,pendingTxs:cs},Li),hs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Li,t=arguments.length>1?arguments[1]:void 0;return[ms,ys].reduce((function(e,n){return n(e,t)}),e)},vs=hs;function gs(e){return ks(e)||_s(e)||ws(e)||Os()}function Os(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ws(e,t){if(e){if("string"===typeof e)return js(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?js(e,t):void 0}}function _s(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ks(e){if(Array.isArray(e))return js(e)}function js(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(n),!0).forEach((function(t){Ss(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ss(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function As(e,t){if(null==e)return{};var n,r,a=xs(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xs(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Ns,Ds=Yn(Li.transport).handle(yr,(function(e,t){e.rooms;var n=As(e,["rooms"]);return Ts(Ts({},e.server!==t.payload.server?n:e),t.payload)})).handle(hr,(function(e,t){var n,r;return Ts(Ts({},e),{},{rooms:Ts(Ts({},e.rooms),{},Ss({},t.meta.address,[t.payload.roomId].concat(gs((null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))))})})).handle(vr,(function(e,t){var n,r;return Ts(Ts({},e),{},{rooms:Ts(Ts({},e.rooms),{},Ss({},t.meta.address,(null!==(r=null===(n=e.rooms)||void 0===n?void 0:n[t.meta.address])&&void 0!==r?r:[]).filter((function(e){return e!==t.payload.roomId}))))})})),Rs=Vi({transport:Ds},Li),Cs=Rs,Ps=n("cfd5"),Is=n.n(Ps);function Ls(e){return Bs(e)||Ms(e)||$s(e)||Us()}function Us(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ms(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Bs(e){if(Array.isArray(e))return Hs(e)}function Fs(e,t){return qs(e)||Vs(e,t)||$s(e,t)||Ws()}function Ws(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $s(e,t){if(e){if("string"===typeof e)return Hs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hs(e,t):void 0}}function Hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vs(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function qs(e){if(Array.isArray(e))return e}function Ks(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ks(Object(n),!0).forEach((function(t){Zs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ks(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xs=(Ns={},Zs(Ns,ma.SENT,"own"),Zs(Ns,ma.RECEIVED,"partner"),Ns);function Ys(e,t){var n,r,a,o,i=t.meta.secrethash,c=Ta.success.is(t)&&t.payload.confirmed?t.payload.txBlock:null!==(a=null===(r=null===(n=e[t.meta.direction][i])||void 0===n?void 0:n.secret)||void 0===r?void 0:r.registerBlock)&&void 0!==a?a:0;return i in e[t.meta.direction]&&(null===(o=e[t.meta.direction][i].secret)||void 0===o?void 0:o.registerBlock)!==c&&(e=Gs(Gs({},e),{},Zs({},t.meta.direction,Gs(Gs({},e[t.meta.direction]),{},Zs({},i,Gs(Gs({},e[t.meta.direction][i]),{},{secret:Mt({value:t.payload.secret,registerBlock:c})})))))),e}function Qs(e,t){var n=t.payload.message,r=t.meta.secrethash,a=n.token_network_address,o=t.payload.partner,i=Nc({tokenNetwork:a,partner:o}),c=Xs[t.meta.direction],s=e.channels[i];if(ka.is(t)===r in e[t.meta.direction]||(null===s||void 0===s?void 0:s.state)!==Ro.open||!n.nonce.eq(s[c].nextNonce))return e;var u=ka.is(t)?[[].concat(Ls(s[c].locks),[t.payload.message.lock]),{transfer:Mt(t.payload.message),fee:t.payload.fee,partner:o}]:[s[c].locks.filter((function(e){return e.secrethash!==r})),Gs(Gs({},e[t.meta.direction][r]),{},Zs({},xa.success.is(t)?"unlock":"lockExpired",Mt(t.payload.message)))],l=Fs(u,2),f=l[0],p=l[1];return s=Gs(Gs({},s),{},Zs({},c,Gs(Gs({},s[c]),{},{locks:f,balanceProof:Fo(n),nextNonce:s[c].nextNonce.add(1)}))),Gs(Gs({},e),{},Zs({channels:Gs(Gs({},e.channels),{},Zs({},i,s))},t.meta.direction,Gs(Gs({},e[t.meta.direction]),{},Zs({},r,p))))}function Js(e,t){var n=t.meta.secrethash;return n in e[t.meta.direction]?Gs(Gs({},e),{},Zs({},t.meta.direction,Gs(Gs({},e[t.meta.direction]),{},Zs({},n,Gs(Gs({},e[t.meta.direction][n]),{},{secretRequest:Mt(t.payload.message)}))))):e}function zs(e,t){var n=t.meta.secrethash;return!(n in e[t.meta.direction])||e[t.meta.direction][n].secretReveal?e:Gs(Gs({},e),{},Zs({},t.meta.direction,Gs(Gs({},e[t.meta.direction]),{},Zs({},n,Gs(Gs({},e[t.meta.direction][n]),{},{secretReveal:Mt(t.payload.message)})))))}function eu(e,t){var n,r=t.meta.secrethash;if(!(r in e[t.meta.direction]))return e;if(ja.is(t))n="transferProcessed";else if(Na.is(t))n="unlockProcessed";else if(Ra.is(t))n="lockExpiredProcessed";else{if(!Ca.is(t))return e;n="refund"}return e[t.meta.direction][r][n]?e:Gs(Gs({},e),{},Zs({},t.meta.direction,Gs(Gs({},e[t.meta.direction]),{},Zs({},r,Gs(Gs({},e[t.meta.direction][r]),{},Zs({},n,Mt(t.payload.message)))))))}function tu(e,t){for(var n=e.sent,r=0,a=Object.entries(n);r<a.length;r++){var o=Fs(a[r],2),i=o[0],c=o[1],s=c.transfer;s.channel_identifier.eq(t.payload.id)&&s.recipient===t.meta.partner&&s.token_network_address===t.meta.tokenNetwork&&(n=Gs(Gs({},n),{},Zs({},i,Gs(Gs({},c),{},{channelClosed:Mt(Is()(["txHash","txBlock"],t.payload))}))))}n!==e.sent&&(e=Gs(Gs({},e),{},{sent:n}));for(var u=e.received,l=0,f=Object.entries(u);l<f.length;l++){var p=Fs(f[l],2),d=p[0],b=p[1],y=b.transfer;y.channel_identifier.eq(t.payload.id)&&y.recipient===t.meta.partner&&y.token_network_address===t.meta.tokenNetwork&&(u=Gs(Gs({},u),{},Zs({},d,Gs(Gs({},b),{},{channelClosed:Mt(Is()(["txHash","txBlock"],t.payload))}))))}return u!==e.received&&(e=Gs(Gs({},e),{},{received:u})),e}function nu(e,t){var n=t.payload.message,r=Nc(t.meta),a=e.channels[r],o=t.meta.direction===ma.RECEIVED!==La.success.is(t)?"partner":"own";if((null===a||void 0===a?void 0:a.state)!==Ro.open||!n.nonce.eq(a[o].nextNonce))return e;a=Gs(Gs({},a),{},Zs({},o,Gs(Gs({},a[o]),{},{nextNonce:a[o].nextNonce.add(1)})));var i=t.meta.direction===ma.RECEIVED?"partner":"own",c=[].concat(Ls(a[i].pendingWithdraws),[t.payload.message]);return a=Gs(Gs({},a),{},Zs({},i,Gs(Gs({},a[i]),{},{pendingWithdraws:c}))),Gs(Gs({},e),{},{channels:Gs(Gs({},e.channels),{},Zs({},r,a))})}function ru(e,t){var n=Nc(t.meta),r=e.channels[n];if((null===r||void 0===r?void 0:r.state)!==Ro.open)return e;var a=t.meta.direction===ma.RECEIVED?"partner":"own",o=r[a].pendingWithdraws.filter((function(e){return!e.expiration.eq(t.meta.expiration)||!e.total_withdraw.eq(t.meta.totalWithdraw)}));return r=Gs(Gs({},r),{},Zs({},a,Gs(Gs({},r[a]),{},{pendingWithdraws:o}))),Gs(Gs({},e),{},{channels:Gs(Gs({},e.channels),{},Zs({},n,r))})}var au=Yn(Li).handle([Ea,Ta.success],Ys).handle([ka,xa.success,Da.success],Qs).handle([ja,Na,Ra,Ca],eu).handle(Sa,Js).handle(Aa,zs).handle(lr.success,tu).handle([La.request,La.success,Ua.success],nu).handle(Ma,ru),ou=au;function iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(n),!0).forEach((function(t){su(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function su(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uu=Yn(Li.iou).handle(Ha,(function(e,t){return cu(cu({},e),{},su({},t.meta.tokenNetwork,cu(cu({},e[t.meta.tokenNetwork]),{},su({},t.meta.serviceAddress,t.payload.iou))))})).handle(Va,(function(e,t){return Fi()([t.meta.tokenNetwork,t.meta.serviceAddress],e)})),lu=Vi({iou:uu},Li),fu=lu;function pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function du(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(n),!0).forEach((function(t){bu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yu(e,t){return Ou(e)||gu(e,t)||hu(e,t)||mu()}function mu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hu(e,t){if(e){if("string"===typeof e)return vu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vu(e,t):void 0}}function vu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ou(e){if(Array.isArray(e))return e}var wu=Yn(Li).handle(eo,(function(e,t){for(var n=t.payload,r=e.config,a=0,o=Object.entries(n);a<o.length;a++){var i=yu(o[a],2),c=i[0],s=i[1];void 0!==s?r=du(du({},r),{},bu({},c,s)):c in r&&(r=Fi()(c,r))}return r===e.config?e:du(du({},e),{},{config:r})})),_u={configReducer:wu,channelsReducer:vs,transportReducer:Cs,transfersReducer:ou,servicesReducer:fu},ku=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Li,t=arguments.length>1?arguments[1]:void 0;return Object.values(_u).reduce((function(e,n){return n(e,t)}),e)},ju=n("5255"),Eu=n("0241"),Tu=n("8b25"),Su=n("0a13"),Au=n.n(Su),xu=n("e590"),Nu=n.n(xu),Du=n("e3b7");function Ru(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Iu(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Cu(e,t){return Mu(e)||Uu(e,t)||Iu(e,t)||Pu()}function Pu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Iu(e,t){if(e){if("string"===typeof e)return Lu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lu(e,t):void 0}}function Lu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uu(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Mu(e){if(Array.isArray(e))return e}function Bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(n),!0).forEach((function(t){Wu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $u=N()((function(e){return e.pipe(Object(B["a"])(mr.success.is),Object(tc["a"])((function(e,t){return Fu(Fu({},e),{},Wu({},t.meta.address,t))}),{}),Object(Du["a"])(),Object(Tu["a"])({}))}));function Hu(e){return Object.entries(e).filter((function(e){var t=Cu(e,2),n=t[1];return"boolean"!==typeof n||n})).map((function(e){var t=Cu(e,2),n=t[0],r=t[1];return"boolean"===typeof r?n:"".concat(n,'="').concat(r,'"')})).join(",")}function Vu(e){var t;if(e){var n={};try{var r,a=Ru(e.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/g));try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.match(/^\s*([^=]+)(?: ?= ?"?(.*?)"?\s*)?$/);i&&(n[i[1]]=null===(t=i[2])||void 0===t||t)}}catch(c){a.e(c)}finally{a.f()}return n}catch(c){}}}var qu,Ku=n("c3a3"),Gu=n("f4aa"),Zu=n("a4c3"),Xu=n("a8f8"),Yu=n("ad8d"),Qu=n("9b17"),Ju=n("d67f"),zu=n("222f"),el=n("dcca"),tl=n("be1d"),nl=n("5278"),rl=n.n(nl),al=n("12aa"),ol=n.n(al),il=n("3de0"),cl=n("7a10");function sl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ul(e,t){return pl(e)||fl(e,t)||bl(e,t)||ll()}function ll(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function pl(e){if(Array.isArray(e))return e}function dl(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=bl(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function bl(e,t){if(e){if("string"===typeof e)return yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yl(e,t):void 0}}function yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ml(e){var t,n=[],r=dl(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(wo(a.expiration,32),wo(a.amount,32),a.secrethash)}}catch(o){r.e(o)}finally{r.f()}return Object(_["keccak256"])(Object(go["concat"])(n))}function hl(e){return Object(_["sha256"])(e)}function vl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(go["hexlify"])(Object(_["randomBytes"])(e))}function gl(){return Object(_["bigNumberify"])(Date.now())}function Ol(){return Object(_["bigNumberify"])(Date.now())}function wl(e){return"direction"in e?e.direction:e.transfer.recipient===e.partner?ma.SENT:ma.RECEIVED}function _l(e){return"direction"in e?"".concat(e.direction,":").concat(e.secrethash):"".concat(wl(e),":").concat(e.transfer.lock.secrethash)}var kl=new RegExp("^(".concat(Object.values(ma).join("|"),"):0x[a-z0-9]{64}$"),"i");function jl(e){mt(kl.test(e),"Invalid transferKey format");var t=e.split(":"),n=ul(t,2),r=n[0],a=n[1];return{direction:r,secrethash:a}}function El(e){return function(t){return t[e]?t[e][0]:void 0}}var Tl=(qu={},sl(qu,Or.expired,El("lockExpiredProcessed")),sl(qu,Or.unlocked,El("unlockProcessed")),sl(qu,Or.expiring,El("lockExpired")),sl(qu,Or.unlocking,El("unlock")),sl(qu,Or.registered,(function(e){var t;return(null===(t=e.secret)||void 0===t?void 0:t.registerBlock)?e.secret.ts:void 0})),sl(qu,Or.revealed,El("secretReveal")),sl(qu,Or.requested,El("secretRequest")),sl(qu,Or.closed,El("channelClosed")),sl(qu,Or.refunded,El("refund")),sl(qu,Or.received,El("transferProcessed")),sl(qu,Or.pending,El("transfer")),qu);function Sl(e){for(var t,n,r,a=new Date(e.transfer.ts),o=a,i=Or.pending,c=0,s=Object.entries(Tl);c<s.length;c++){var u=ul(s[c],2),l=u[0],f=u[1],p=f(e);if(void 0!==p){i=l,o=new Date(p);break}}var d=e.transfer,b=wl(e),y=d.lock.amount.sub(e.fee),m=e.secretRequest&&e.secretRequest.amount.lt(y),h=!!(e.secretReveal||e.unlock||(null===(t=e.secret)||void 0===t?void 0:t.registerBlock))||!(m||e.refund||e.lockExpired||e.channelClosed)&&void 0,v=!!(e.unlockProcessed||e.lockExpiredProcessed||(null===(n=e.secret)||void 0===n?void 0:n.registerBlock)||e.channelClosed);return{key:_l(e),secrethash:d.lock.secrethash,direction:b,status:i,initiator:d.initiator,partner:e.partner,target:d.target,metadata:d.metadata,paymentId:d.payment_identifier,chainId:d.chain_id.toNumber(),token:d.token,tokenNetwork:d.token_network_address,channelId:d.channel_identifier,value:y,fee:e.fee,amount:d.lock.amount,expirationBlock:d.lock.expiration.toNumber(),startedAt:a,changedAt:o,success:h,completed:v,secret:null===(r=e.secret)||void 0===r?void 0:r.value}}function Al(e,t,n){var r=n.tokenNetwork,a=n.partner;if(t===k["HashZero"])return nr;var o,i=dl(Object.values(e).reverse());try{for(i.s();!(o=i.n()).done;){var c=o.value;if(c.transfer.token_network_address===r&&c.partner===a){var s=[c.transfer,c.unlock,c.lockExpired].filter(Tt).map(Fo).find((function(e){return Io(e)===t}));if(s)return s}}}catch(u){i.e(u)}finally{i.f()}}var xl=n("a0df"),Nl=n("31a7"),Dl=n("c998"),Rl=n("ee79"),Cl=n("b4cc"),Pl=n("0ff6"),Il=n("4e0b"),Ll=n("1f0b");function Ul(e,t){return Fl(e)||Bl(e,t)||Hl(e,t)||Ml()}function Ml(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bl(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Fl(e){if(Array.isArray(e))return e}function Wl(e){return ql(e)||Vl(e)||Hl(e)||$l()}function $l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hl(e,t){if(e){if("string"===typeof e)return Kl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kl(e,t):void 0}}function Vl(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ql(e){if(Array.isArray(e))return Kl(e)}function Kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gl(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Zl(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Gl(o,r,a,i,c,"next",e)}function c(e){Gl(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xl(Object(n),!0).forEach((function(t){Ql(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ql(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jl=function(e){switch(e.name){case"rinkeby":return Yl(Yl({},Nl.contracts),Pl.contracts);case"ropsten":return Yl(Yl({},xl.contracts),Cl.contracts);case"goerli":return Yl(Yl({},Dl.contracts),Il.contracts);case"homestead":return Yl(Yl({},Rl.contracts),Ll.contracts);default:throw new yt(dt.RDN_UNRECOGNIZED_NETWORK,{network:e.name})}};function zl(e,t){return ef.apply(this,arguments)}function ef(){return ef=Zl(d.a.mark((function e(t,n){var r,a,o,i,c,s,u;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=null!==(a=null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.location)||void 0===r?void 0:r.origin)&&void 0!==a?a:"unknown",i="=== RAIDEN SUBKEY GENERATION ===\n\nNetwork: ".concat(dn(t).toUpperCase(),"\nRaiden dApp URL: ").concat(o,"\n\nWARNING: ensure this signature is being requested from Raiden dApp running at URL above by comparing it to your browser's url bar.\nSigning this message at any other address WILL give it FULL control of this subkey's funds, tokens and Raiden channels!"),e.next=4,n.signMessage(Object(_["toUtf8Bytes"])(i));case 4:return c=e.sent,s=Object(_["sha256"])(c),u=new cl["Wallet"](s,n.provider),e.abrupt("return",{signer:u,address:u.address});case 8:case"end":return e.stop()}}),e)}))),ef.apply(this,arguments)}var tf=function(){var e=Zl(d.a.mark((function e(t,n,r){var a,o,i,c,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!il["Signer"].isSigner(t)){e.next=15;break}if(t.provider!==n){e.next=5;break}a=t,e.next=10;break;case 5:if(!(t instanceof cl["Wallet"])){e.next=9;break}a=t.connect(n),e.next=10;break;case 9:throw new yt(dt.RDN_SIGNER_NOT_CONNECTED,{account:t.toString(),provider:n.toString()});case 10:return e.next=12,a.getAddress();case 12:o=e.sent,e.next=38;break;case 15:if("number"!==typeof t){e.next=22;break}return a=n.getSigner(t),e.next=19,a.getAddress();case 19:o=e.sent,e.next=38;break;case 22:if(!Lt.is(t)){e.next=32;break}return e.next=25,n.listAccounts();case 25:if(c=e.sent,c.includes(t)){e.next=28;break}throw new yt(dt.RDN_ACCOUNT_NOT_FOUND,{account:t,accounts:JSON.stringify(c)});case 28:a=n.getSigner(t),o=t,e.next=38;break;case 32:if(!Pt.is(t)){e.next=37;break}a=new cl["Wallet"](t,n),o=a.address,e.next=38;break;case 37:throw new yt(dt.RDN_STRING_ACCOUNT_INVALID);case 38:if(!r){e.next=50;break}return i={signer:a,address:o},e.t0=zl,e.next=43,n.getNetwork();case 43:return e.t1=e.sent,e.t2=i.signer,e.next=47,(0,e.t0)(e.t1,e.t2);case 47:s=e.sent,a=s.signer,o=s.address;case 50:return e.abrupt("return",{signer:a,address:o,main:i});case 51:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),nf=function(e){return e.pipe(Object(W["a"])(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.sent,r=t.received,e.next=3,n;case 3:return e.next=5,r;case 5:case"end":return e.stop()}}),e)}))),yc(),Object(Xi["a"])(1),Object(M["a"])(Sl))},rf=function(e){return Object.values(e).reduce((function(e,t){var n=Rc(t),r=Yl({state:t.state,id:t.id,token:t.token,tokenNetwork:t.tokenNetwork,settleTimeout:t.settleTimeout,openBlock:t.openBlock,closeBlock:"closeBlock"in t?t.closeBlock:void 0,partner:t.partner.address,balance:n.ownBalance,capacity:n.ownCapacity},n);return Yl(Yl({},e),{},Ql({},t.token,Yl(Yl({},e[t.token]),{},Ql({},t.partner.address,r))))}),{})};function af(e,t){var n=e.signer,r=e.address,a=e.main;return a&&!t?a:{signer:n,address:r}}function of(e,t){return e.signer===t?e:e.connect(t)}function cf(e,t,n,r){return sf.apply(this,arguments)}function sf(){return sf=Zl(d.a.mark((function e(t,n,r,a){var o,i,c,s,u,l=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=l.length>4&&void 0!==l[4]?l[4]:{log:y.a},i=o.log,e.prev=1,e.next=4,(s=t.functions)[n].apply(s,Wl(r));case 4:c=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),i.error("Error sending ".concat(n," tx"),e.t0),new yt(a,{error:e.t0.message});case 11:return i.debug("sent ".concat(n,' tx "').concat(c.hash,'" to "').concat(t.address,'"')),e.prev=12,e.next=15,c.wait();case 15:u=e.sent,mt(u.status,"tx status: ".concat(u.status)),e.next=23;break;case 19:throw e.prev=19,e.t1=e["catch"](12),i.error("Error mining ".concat(n," tx"),e.t1),new yt(a,{transactionHash:c.hash});case 23:return i.debug("".concat(n,' tx "').concat(c.hash,'" successfuly mined!')),e.abrupt("return",u);case 25:case"end":return e.stop()}}),e,null,[[1,7],[12,19]])}))),sf.apply(this,arguments)}function uf(e,t,n){return lf.apply(this,arguments)}function lf(){return lf=Zl(d.a.mark((function e(t,n,r){var a,o,i,c,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.latest$,o=n.config$,i=n.provider,c=t.blockNumber,s=t.transactionHash,e.abrupt("return",a.pipe(bc("state","blockNumber"),Object(Xu["a"])(o),Object(B["a"])((function(e){var t=Ul(e,2),n=t[0],a=t[1].confirmationBlocks;return c+(null!==r&&void 0!==r?r:a)<=n})),Object(Zt["a"])((function(e){var t=Ul(e,2),n=t[0],a=t[1].confirmationBlocks;return Object(I["a"])((function(){return i.getTransactionReceipt(s)})).pipe(Object(M["a"])((function(e){if((null===e||void 0===e?void 0:e.confirmations)&&e.confirmations>=(null!==r&&void 0!==r?r:a))return e.blockNumber;if(c+2*(null!==r&&void 0!==r?r:a)<n)throw new yt(dt.RDN_TRANSACTION_REORG,{transactionHash:s})})))})),Object(F["a"])(Tt)).toPromise());case 4:case"end":return e.stop()}}),e)}))),lf.apply(this,arguments)}var ff=function(e){var t=/^(?:https:\/\/)?[^\s\/$.?#&"']+\.[^\s\/$?#&"']+$/;return t.test(e)};function pf(e,t){return df.apply(this,arguments)}function df(){return df=Zl(d.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f,p,b;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=he.connect(n,t),e.next=3,r.msc_address();case 3:return a=e.sent,o=Ae.connect(a,t),e.next=7,o.token_network_registry();case 7:return i=e.sent,c=K.connect(i,t),e.next=11,c.secret_registry_address();case 11:return s=e.sent,e.next=14,o.service_registry();case 14:return u=e.sent,e.next=17,t.getLogs(Yl(Yl({},c.filters.TokenNetworkCreated(null,null)),{},{fromBlock:1,toBlock:"latest"}));case 17:return l=e.sent,f=l.map((function(e){return e.blockNumber})).filter(Tt),p=f.length?Math.min.apply(Math,Wl(f)):0,e.next=22,r.one_to_n_address();case 22:return b=e.sent,e.abrupt("return",{TokenNetworkRegistry:{address:i,block_number:p},ServiceRegistry:{address:u,block_number:p},UserDeposit:{address:n,block_number:p},SecretRegistry:{address:s,block_number:p},MonitoringService:{address:a,block_number:p},OneToN:{address:b,block_number:p}});case 24:case"end":return e.stop()}}),e)}))),df.apply(this,arguments)}function bf(e){return yf.apply(this,arguments)}function yf(){return yf=Zl(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.pipe(Object(Xi["a"])("udcBalance"),Object(F["a"])((function(e){return!!e&&e.lt(k["MaxUint256"])}))).toPromise());case 1:case"end":return e.stop()}}),e)}))),yf.apply(this,arguments)}function mf(e){return gf(e)||vf(e)||_f(e)||hf()}function hf(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vf(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function gf(e){if(Array.isArray(e))return kf(e)}function Of(e,t){return Ef(e)||jf(e,t)||_f(e,t)||wf()}function wf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _f(e,t){if(e){if("string"===typeof e)return kf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kf(e,t):void 0}}function kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jf(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ef(e){if(Array.isArray(e))return e}function Tf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tf(Object(n),!0).forEach((function(t){Af(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Af(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xf(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Nf=function(e,t,n){xf(e),xf(t);var r=n.provider;return hc((function(){return r.getBlockNumber()}),r.pollingInterval).pipe(Object(W["a"])((function(e){return Object(P["a"])(Object(C["a"])(e),sn(r,"block"))})),Object(M["a"])((function(e){return ar({blockNumber:e})})))},Df=function(e,t,n){xf(e);var r=n.address,a=n.provider,o=n.registryContract,i=n.contractsInfo;return t.pipe(Object(Zu["a"])(1),Object(B["a"])((function(e){return ol()(e.tokens)})),Object(W["a"])((function(){return hc((function(){return a.getLogs(Sf(Sf({},o.filters.TokenNetworkCreated(null,null)),{},{fromBlock:i.TokenNetworkRegistry.block_number,toBlock:"latest"}))}),a.pollingInterval)})),Object(W["a"])(Kt["a"]),Object(M["a"])((function(e){return{log:e,parsed:o.interface.parseLog(e)}})),Object(B["a"])((function(e){var t,n=e.parsed;return!!(null===(t=n.values)||void 0===t?void 0:t.token_network_address)})),Object(W["a"])((function(e){var t=e.log,n=e.parsed,o=_["defaultAbiCoder"].encode(["address"],[r]);return Object(Ku["a"])(hc((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object(W["a"])(Kt["a"])),hc((function(){return a.getLogs({address:n.values.token_network_address,topics:[null,null,null,o],fromBlock:t.blockNumber,toBlock:"latest"})}),a.pollingInterval).pipe(Object(W["a"])(Kt["a"]))).pipe(Object(Zu["a"])(1),Object(Ji["a"])(or({token:n.values.token_address,tokenNetwork:n.values.token_network_address,fromBlock:t.blockNumber})))}),5))},Rf=function(e,t,n){xf(e),xf(t);var r=n.address,a=n.network,o=n.provider;return hc((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(M["a"])((function(e){return e.includes(r)})),Object(W["a"])((function(e){return Object(Gu["a"])(o.pollingInterval).pipe(Object(Zt["a"])((function(){return Object(P["a"])(e?hc((function(){return o.listAccounts()}),o.pollingInterval).pipe(Object(W["a"])((function(e){return e.includes(r)?L["a"]:Object(C["a"])(za({reason:De.ACCOUNT_CHANGED}))}))):L["a"],hc((function(){return ln(o)}),o.pollingInterval).pipe(Object(W["a"])((function(e){return e.chainId!==a.chainId?Object(C["a"])(za({reason:De.NETWORK_CHANGED})):L["a"]}))))})))})))};function Cf(e){var t=e.interface.events;return{openTopic:t.ChannelOpened.topic,depositTopic:t.ChannelNewDeposit.topic,withdrawTopic:t.ChannelWithdraw.topic,closedTopic:t.ChannelClosed.topic,settledTopic:t.ChannelSettled.topic}}function Pf(e,t){var n=Of(e,2),r=n[0],a=n[1],o=t.address,i=t.latest$,c=t.getTokenNetworkContract,s=c(a),u=Cf(s),l=u.openTopic,f=u.depositTopic,p=u.withdrawTopic,d=u.closedTopic,b=u.settledTopic;return function(e){return e.pipe(Object(Xu["a"])(i),Object(M["a"])((function(e){var t,n,i=Of(e,2),c=i[0],s=i[1],u=s.state,y=s.config,m=c[0].toNumber(),h=Object.values(u.channels).find((function(e){return e.tokenNetwork===a&&e.id===m})),v=$t(c),g=null===(t=v.topics)||void 0===t?void 0:t[0],O=v.transactionHash,w=v.blockNumber,_=w+y.confirmationBlocks<=u.blockNumber||void 0;switch(g){case l:var k=Of(c,4),j=k[1],E=k[2],T=k[3];if((o===j||o===E)&&(!h||m>h.id)){var S=o==j?E:j;n=ir.success({id:m,token:r,settleTimeout:T.toNumber(),isFirstParticipant:o===j,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:S})}break;case f:var A=Of(c,3),x=A[1],N=A[2];(null===h||void 0===h?void 0:h.id)===m&&N.gt(h[x===h.partner.address?"partner":"own"].deposit)&&(n=sr.success({id:m,participant:x,totalDeposit:N,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:h.partner.address}));break;case p:var D=Of(c,3),R=D[1],C=D[2];(null===h||void 0===h?void 0:h.id)===m&&C.gt(h[R===h.partner.address?"partner":"own"].withdraw)&&(n=ur({id:m,participant:R,totalWithdraw:C,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:h.partner.address}));break;case d:if((null===h||void 0===h?void 0:h.id)===m&&!("closeBlock"in h)){var P=Of(c,2),I=P[1];n=lr.success({id:m,participant:I,txHash:O,txBlock:w,confirmed:_},{tokenNetwork:a,partner:h.partner.address})}break;case b:(null===h||void 0===h?void 0:h.id)===m&&(n=pr.success({id:m,txHash:O,txBlock:w,confirmed:_,locks:h.partner.locks},{tokenNetwork:a,partner:h.partner.address}));break}return n})),Object(B["a"])(Tt))}}function If(e,t,n){var r=Of(e,2),a=r[0],o=r[1],i=Of(t,2),c=i[0],s=i[1],u=n.address,l=n.provider,f=n.latest$,p=n.getTokenNetworkContract,d=p(s),b=Cf(d),y=b.openTopic;return hc((function(){return Promise.all([l.getLogs(Sf(Sf({},d.filters.ChannelOpened(null,u,null,null)),{},{fromBlock:a,toBlock:o})),l.getLogs(Sf(Sf({},d.filters.ChannelOpened(null,null,u,null)),{},{fromBlock:a,toBlock:o}))])}),l.pollingInterval).pipe(Object(Xu["a"])(f),Object(W["a"])((function(e){var t=Of(e,2),n=Of(t[0],2),r=n[0],i=n[1],c=t[1].state,f=r.concat(i).map(un(d)).filter(Tt).filter((function(e){var t=Of(e,3),n=t[0],r=t[1],a=t[2],o=u===r?a:r,i=n.toNumber(),l=Nc({tokenNetwork:s,partner:o});return!(Dc({id:i,tokenNetwork:s,partner:o})in c.oldChannels||l in c.channels&&i<c.channels[l].id)})),p=[].concat(mf(f),mf(Object.values(c.channels).filter((function(e){return e.tokenNetwork===s})).map((function(e){return[e.id]})))).map((function(e){var t=Of(e,1),n=t[0];return _["defaultAbiCoder"].encode(["uint256"],[n])}));return 0===p.length?L["a"]:hc((function(){return l.getLogs({address:s,topics:[Object.values(Cf(d)).filter((function(e){return e!==y})),p],fromBlock:a,toBlock:o})}),l.pollingInterval).pipe(Object(W["a"])((function(e){var t=e.map(un(d)).filter(Tt),n=[].concat(mf(f),mf(t));return Object(Kt["a"])(rl()(n,[function(e){return $t(e).blockNumber},function(e){return $t(e).transactionIndex}]))})))})),Pf([c,s],n))}function Lf(e,t,n){var r=Of(t,2),a=r[0],o=r[1],i=n.provider,c=n.getTokenNetworkContract,s=n.config$,u=c(o),l={address:o,topics:[Object.values(Cf(u))]};return s.pipe(Object(F["a"])(),Object(W["a"])((function(t){var n=t.confirmationBlocks;return sn(i,l,void 0,n,e)})),Object(M["a"])(un(u)),Object(B["a"])(Tt),Pf([a,o],n))}var Uf=function(e,t,n){return e.pipe(Object(B["a"])(ar.is),Object(Xi["a"])("payload","blockNumber"),Object(Yu["a"])(1,void 0,(function(e){return t.pipe(Object(Xi["a"])("tokens"),yc(),Object(Xu["a"])(t),Object(W["a"])((function(t){var r=Of(t,2),a=Of(r[0],2),o=a[0],i=a[1],c=r[1],s=Object.values(c.channels).concat(Object.values(c.oldChannels)).filter((function(e){return e.tokenNetwork===i})).reduce((function(e,t){return Math.max(e,"settleBlock"in t?t.settleBlock:"closeBlock"in t?t.closeBlock:t.openBlock)}),n.contractsInfo.TokenNetworkRegistry.block_number),u=new R["a"];return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){return Object(P["a"])(Object(C["a"])(or({token:o,tokenNetwork:i,fromBlock:s,toBlock:e})),If([s,e],[o,i],n).pipe(Object(Qu["a"])((function(){return u.next(!0),u.complete()}))),Lf(e+1,[o,i],n).pipe(Object(Ju["a"])((function(){return u}))))})))})))})))},Mf=function(e,t){return xf(e),t.pipe(Uc,Object(W["a"])((function(e){return e.pipe(Object(F["a"])(),Object(M["a"])((function(e){return cr({id:e.id},{tokenNetwork:e.tokenNetwork,partner:e.partner.address})})))})))},Bf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])($n(ir.request)),Object(Xu["a"])(t,u),Object(W["a"])((function(t){var n,u,l,f,p=Of(t,3),d=p[0],b=p[1],y=p[2],m=y.settleTimeout,h=y.subkey,v=d.meta,g=v.tokenNetwork,O=v.partner,w=null===(n=b.channels[Nc(d.meta)])||void 0===n?void 0:n.state;if(w)return Object(C["a"])(ir.failure(new yt(dt.CNL_INVALID_STATE,{state:w}),d.meta));var _=af({signer:a,address:o,main:i},null!==(u=d.payload.subkey)&&void 0!==u?u:h),k=_.signer,j=of(s(g),k),E=L["a"];return(null===(f=null===(l=d.payload.deposit)||void 0===l?void 0:l.gt)||void 0===f?void 0:f.call(l,0))&&(E=Object(C["a"])(sr.request({deposit:d.payload.deposit,subkey:d.payload.subkey,waitOpen:!0},d.meta))),Object(Ku["a"])(E,Object(I["a"])((function(){var e;return j.functions.openChannel(o,O,null!==(e=d.payload.settleTimeout)&&void 0!==e?e:m)})).pipe(Cc("openChannel",dt.CNL_OPENCHANNEL_FAILED,{log:r}),Lc(c.pollingInterval,void 0,Pc.concat(Ic),{log:r}),Object(Qi["a"])(e.pipe(Object(B["a"])(ir.success.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===g&&e.meta.partner===O})))),Object(zu["a"])(),Object(Xt["a"])((function(e){return Object(C["a"])(ir.failure(e,d.meta))}))))})))};function Ff(e,t,n,r,a){var o=Of(e,2),i=o[0],c=o[1],s=Of(t,3),u=s[0],l=s[1],f=s[2],p=a.log,d=a.config$;return(null===n||void 0===n?void 0:n.gt(k["Zero"]))?Object(I["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address)])})).pipe(Object(Xu["a"])(d),Object(W["a"])((function(e){var t=Of(e,2),r=Of(t[0],2),a=r[0],o=r[1],s=t[1].minimumAllowance;return Mc([a,o,n],i,c.address,dt.CNL_APPROVE_TRANSACTION_FAILED,{log:p,minimumAllowance:s})})),Object(el["a"])(r),Object(Zu["a"])(1),Object(W["a"])((function(e){return c.functions.getChannelParticipantInfo(e,l,f).then((function(t){var n=t[0];return[e,n]}))})),Object(W["a"])((function(e){var t=Of(e,2),r=t[0],a=t[1];return c.functions.setTotalDeposit(r,l,a.add(n),f)})),Cc("setTotalDeposit",dt.CNL_SETTOTALDEPOSIT_FAILED,{log:p}),Lc(c.provider.pollingInterval,void 0,Pc.concat(Ic),{log:p}),Object(zu["a"])()):L["a"]}var Wf=function(e,t,n){xf(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.getTokenContract,s=n.getTokenNetworkContract,u=n.config$,l=n.latest$;return e.pipe(Object(B["a"])($n(sr.request)),Object(Yi["a"])((function(e){return e.meta.tokenNetwork})),Object(W["a"])((function(t){return t.pipe(Object(tl["a"])((function(t){return Object(ju["a"])([l,u]).pipe(Object(F["a"])(),Object(W["a"])((function(n){var f,p,d=Of(n,2),b=d[0].state,y=d[1].subkey,m=t.meta,h=m.tokenNetwork,v=m.partner,g=$e()(b.tokens,(function(e){return e===h})),O=b.channels[Nc(t.meta)];if(g&&!O&&t.payload.waitOpen)p=Object(P["a"])(e.pipe(Object(B["a"])(ir.failure.is),Object(B["a"])((function(e){return e.meta.tokenNetwork===t.meta.tokenNetwork&&e.meta.partner===t.meta.partner})),Object(el["a"])(Object(Ki["a"])(new yt(dt.CNL_NO_OPEN_CHANNEL_FOUND,t.meta)))),l.pipe(Object(Xi["a"])("state","channels",Nc(t.meta)),Object(B["a"])(Tt)));else{if((null===O||void 0===O?void 0:O.state)!==Ro.open)throw new yt(dt.CNL_NO_OPEN_CHANNEL_FOUND);p=Object(C["a"])(O)}var w=af({signer:a,address:o,main:i},null!==(f=t.payload.subkey)&&void 0!==f?f:y),_=w.signer,k=w.address,j=of(c(g),_),E=of(s(h),_);return p.pipe(Object(Xi["a"])("id"),Object(Yu["a"])(1,void 0,(function(e){return Ff([j,E],[k,o,v],t.payload.deposit,e,{log:r,config$:u})})))})),Object(Xt["a"])((function(e){return Object(C["a"])(sr.failure(e,t.meta))})))})))})))},$f=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(B["a"])($n(lr.request)),Object(Xu["a"])(t,l),Object(W["a"])((function(e){var t,n,l=Of(e,3),f=l[0],p=l[1],d=l[2].subkey,b=f.meta,y=b.tokenNetwork,m=b.partner,h=af({signer:a,address:o,main:i},null!==(n=null===(t=f.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:d),v=h.signer,g=of(u(y),v),O=p.channels[Nc(f.meta)];if((null===O||void 0===O?void 0:O.state)!==Ro.open&&(null===O||void 0===O?void 0:O.state)!==Ro.closing){var w=new yt(dt.CNL_NO_OPEN_OR_CLOSING_CHANNEL_FOUND,f.meta);return Object(C["a"])(lr.failure(w,f.meta))}var k=O.partner.balanceProof,j=Io(k),E=k.nonce,T=k.additionalHash,S=k.signature,A=Object(_["concat"])([wo(y,20),wo(s.chainId,32),wo(Do.BALANCE_PROOF,32),wo(O.id,32),wo(j,32),wo(E,32),wo(T,32),wo(S,65)]);return Object(Kt["a"])(a.signMessage(A)).pipe(Object(W["a"])((function(e){return Object(I["a"])((function(){return g.functions.closeChannel(O.id,m,o,j,E,T,S,e)})).pipe(Cc("closeChannel",dt.CNL_CLOSECHANNEL_FAILED,{log:r}),Lc(c.pollingInterval,void 0,void 0,{log:r}))})),Object(zu["a"])(),Object(Xt["a"])((function(e){return Object(C["a"])(lr.failure(e,f.meta))})))})))},Hf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.network,u=n.getTokenNetworkContract,l=n.config$;return e.pipe(Object(B["a"])($n(lr.success)),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(Ju["a"])((function(){return e.pipe(Object(B["a"])(ar.is))})),Object(Xu["a"])(t,l),Object(B["a"])((function(e){var t=Of(e,2),n=t[0],r=t[1],a=r.channels[Nc(n.meta)];return(null===a||void 0===a?void 0:a.state)===Ro.closed&&a.id===n.payload.id&&a.partner.balanceProof.transferredAmount.add(a.partner.balanceProof.lockedAmount).gt(k["Zero"])&&a.closeParticipant!==o})),Object(W["a"])((function(e){var t=Of(e,3),n=t[0],l=t[1],f=t[2].subkey,p=n.meta,d=p.tokenNetwork,b=p.partner,y=af({signer:a,address:o,main:i},f),m=y.signer,h=of(u(d),m),v=l.channels[Nc(n.meta)],g=Io(v.partner.balanceProof),O=v.partner.balanceProof.nonce,w=v.partner.balanceProof.additionalHash,k=v.partner.balanceProof.signature,j=Object(_["concat"])([wo(d,20),wo(s.chainId,32),wo(Do.BALANCE_PROOF_UPDATE,32),wo(v.id,32),wo(g,32),wo(O,32),wo(w,32),wo(k,65)]);return Object(Kt["a"])(a.signMessage(j)).pipe(Object(W["a"])((function(e){return Object(I["a"])((function(){return h.functions.updateNonClosingBalanceProof(v.id,b,o,g,O,w,k,e)})).pipe(Cc("updateNonClosingBalanceProof",dt.CNL_UPDATE_NONCLOSING_BP_FAILED,{log:r}),Lc(c.pollingInterval,void 0,void 0,{log:r}))})),Object(zu["a"])(),Object(Xt["a"])((function(e){return r.error("Error updating non-closing balance-proof, ignoring",e),L["a"]})))})))},Vf=function(e,t,n){xf(e);var r=n.config$;return t.pipe(Uc,Object(W["a"])((function(e){return e.pipe(Object(B["a"])((function(e){return e.state===Ro.settleable})),Object(Zu["a"])(1),Object(Xu["a"])(r),Object(Ju["a"])((function(e){var n=Of(e,2),r=n[0],a=n[1].confirmationBlocks,o=r.closeBlock+r.settleTimeout+Math.round(a*(1+Math.random()));return t.pipe(Object(Xi["a"])("blockNumber"),Object(B["a"])((function(e){return o<=e})),Object(Zu["a"])(1))})),Object(Xu["a"])(t),Object(B["a"])((function(e){var t,n=Of(e,2),r=Of(n[0],1),a=r[0],o=n[1];return(null===(t=o.channels[Nc(a)])||void 0===t?void 0:t.state)===Ro.settleable})),Object(M["a"])((function(e){var t=Of(e,1),n=Of(t[0],1),r=n[0];return pr.request(void 0,{tokenNetwork:r.tokenNetwork,partner:r.partner.address})})))})),Object(Qi["a"])(r.pipe(Object(Xi["a"])("autoSettle"),Object(B["a"])((function(e){return!e})))),Object(nc["a"])((function(){return r.pipe(Object(Xi["a"])("autoSettle"),Object(B["a"])((function(e){return e})))})))},qf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])($n(pr.request)),Object(Xu["a"])(t,u),Object(W["a"])((function(e){var t,n,u=Of(e,3),l=u[0],f=u[1],p=u[2].subkey,d=l.meta,b=d.tokenNetwork,y=d.partner,m=af({signer:a,address:o,main:i},null!==(n=null===(t=l.payload)||void 0===t?void 0:t.subkey)&&void 0!==n?n:p),h=m.signer,v=of(s(b),h),g=f.channels[Nc(l.meta)];if((null===g||void 0===g?void 0:g.state)!==Ro.settleable&&(null===g||void 0===g?void 0:g.state)!==Ro.settling){var O=new yt(dt.CNL_NO_SETTLEABLE_OR_SETTLING_CHANNEL_FOUND,l.meta);return Object(C["a"])(pr.failure(O,l.meta))}return Object(Kt["a"])(Promise.all([v.functions.getChannelParticipantInfo(g.id,o,y),v.functions.getChannelParticipantInfo(g.id,y,o)])).pipe(Object(W["a"])((function(e){var t=Of(e,2),n=t[0][3],a=t[1][3],i=g.own.balanceProof;if(n!==Io(i)){var s=Al(f.sent,n,l.meta);mt(s,[dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{address:o,ownBalanceHash:n}]),i=s}var u=g.partner.balanceProof;if(a!==Io(u)){var p=Al(f.received,a,l.meta);mt(p,[dt.CNL_SETTLECHANNEL_INVALID_BALANCEHASH,{partner:y,partnerBalanceHash:a}]),u=p}var d=[o,i],b=[y,u];if(b[1].transferredAmount.add(b[1].lockedAmount).lt(d[1].transferredAmount.add(d[1].lockedAmount))){var m=[b,d];d=m[0],b=m[1]}return Object(I["a"])((function(){return v.functions.settleChannel(g.id,d[0],d[1].transferredAmount,d[1].lockedAmount,d[1].locksroot,b[0],b[1].transferredAmount,b[1].lockedAmount,b[1].locksroot)})).pipe(Cc("settleChannel",dt.CNL_SETTLECHANNEL_FAILED,{log:r}),Lc(c.pollingInterval,void 0,void 0,{log:r}))})),Object(zu["a"])(),Object(Xt["a"])((function(e){return Object(C["a"])(pr.failure(e,l.meta))})))})))},Kf=function(e,t){return e.pipe(Object(B["a"])($n(ar)),Object(Xu["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Of(t,2),r=n[0].payload.blockNumber,a=n[1],o=0,i=Object.values(a.channels);case 2:if(!(o<i.length)){e.next=10;break}if(c=i[o],!(c.state===Ro.closed&&r>c.closeBlock+c.settleTimeout)){e.next=7;break}return e.next=7,fr({settleableBlock:r},{tokenNetwork:c.tokenNetwork,partner:c.partner.address});case 7:o++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))))},Gf=function(e,t,n){var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.getTokenNetworkContract,u=n.config$;return e.pipe(Object(B["a"])($n(pr.success)),Object(B["a"])((function(e){var t;return!(!e.payload.confirmed||!(null===(t=e.payload.locks)||void 0===t?void 0:t.length))})),Object(Xu["a"])(t,u),Object(B["a"])((function(e){var t,n=Of(e,2),r=n[0],a=n[1];return(null===(t=a.channels[Nc(r.meta)])||void 0===t?void 0:t.id)!==r.payload.id})),Object(W["a"])((function(e){var t=Of(e,3),n=t[0],u=t[2].subkey,l=n.meta,f=l.tokenNetwork,p=l.partner,d=of(s(f),af({signer:a,address:o,main:i},u).signer),b=Object(_["concat"])(n.payload.locks.reduce((function(e,t){return[].concat(mf(e),[wo(t.expiration,32),wo(t.amount,32),t.secrethash])}),[]));return Object(I["a"])((function(){return d.functions.unlock(n.payload.id,o,p,b)})).pipe(Cc("unlock",dt.CNL_ONCHAIN_UNLOCK_FAILED,{log:r}),Lc(c.pollingInterval,void 0,void 0,{log:r}),Object(zu["a"])(),Object(Xt["a"])((function(e){return r.error("Error unlocking pending locks on-chain, ignoring",e),L["a"]})))})))};function Zf(e,t,n,r){return hc((function(){return t.getTransactionReceipt(e.payload.txHash)}),t.pollingInterval).pipe(Object(M["a"])((function(t){var a;return void 0!==(null===t||void 0===t?void 0:t.confirmations)&&t.confirmations>=r&&t.status?Sf(Sf({},e),{},{payload:Sf(Sf({},e.payload),{},{txBlock:null!==(a=t.blockNumber)&&void 0!==a?a:e.payload.txBlock,confirmed:!0})}):e.payload.txBlock+2*r<n?Sf(Sf({},e),{},{payload:Sf(Sf({},e.payload),{},{confirmed:!1})}):void 0})),Object(B["a"])(Tt))}var Xf=function(e,t,n){xf(e);var r=n.config$,a=n.provider,o=n.latest$;return Object(ju["a"])(t.pipe(bc("blockNumber")),t.pipe(Object(Xi["a"])("pendingTxs")),r.pipe(bc("confirmationBlocks"))).pipe(Object(B["a"])((function(e){var t=Of(e,2),n=t[1];return n.length>0})),Object(Zt["a"])((function(e){var t=Of(e,3),n=t[0],r=t[1],i=t[2];return Object(Kt["a"])(r).pipe(Object(B["a"])((function(e){return e.payload.txBlock+i<n})),Object(tl["a"])((function(e){return Zf(e,a,n,i).pipe(Object(Qi["a"])(o.pipe(Object(B["a"])((function(t){var n=t.state;return!n.pendingTxs.some((function(t){return t.type===e.type&&t.payload.txHash===e.payload.txHash}))})))))})))})))},Yf=n("d859"),Qf=n("c5ca"),Jf=n("a4f9"),zf=n("1e86"),ep=n("efec"),tp=n("79a5");function np(e){var t=/^(?:\w*:?\/\/)?([^/#?&]+)/.exec(e);return t&&t[1]}function rp(e,t){var n=Object(tp["encodeUri"])("/presence/$userId/status",{$userId:t});return e._http.authedRequest(void 0,"GET",n)}var ap=n("e5e15"),op=n("a51e"),ip=n.n(op);function cp(e,t){return pp(e)||fp(e,t)||up(e,t)||sp()}function sp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function up(e,t){if(e){if("string"===typeof e)return lp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lp(e,t):void 0}}function lp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function pp(e){if(Array.isArray(e))return e}function dp(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function bp(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){dp(o,r,a,i,c,"next",e)}function c(e){dp(o,r,a,i,c,"throw",e)}i(void 0)}))}}function yp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function mp(e){return[e.discoveryRoom,e.pfsRoom,e.monitoringRoom].filter(Tt)}var hp=ip()((function(e,t){return e===t.roomId||e===t.name||e===t.getCanonicalAlias()||t.getAliases().includes(e)}));function vp(e,t){var n=e.getRoom(t);return n||(n=e.getRooms().find(hp(t))),n?Object(C["a"])(n):Object(ap["a"])(e,"Room").pipe(Object(B["a"])(hp(t)),Object(Zu["a"])(1))}function gp(e,t,n,r,a){var o=a.log,i=a.latest$,c=a.config$,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=3;return i.pipe(Object(B["a"])((function(t){var n=t.presences;return e in n})),Object(Zu["a"])(1),Object(W["a"])((function(n){var r,a=n.rtc;return s&&"open"===(null===(r=null===a||void 0===a?void 0:a[e])||void 0===r?void 0:r.readyState)?Object(C["a"])(a[e]):i.pipe(Object(M["a"])((function(t){var n,r,a=t.state;return null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0]})),Object(B["a"])(Tt),Object(ec["a"])(),Object(ac["a"])((function(n){return vp(t,n).pipe(Object(W["a"])((function(t){return i.pipe(Object(Xi["a"])("presences",e),Object(M["a"])((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.payload)||void 0===t?void 0:t.available)?e.payload.userId:void 0})),Object(ec["a"])(),Object(M["a"])((function(e){return{room:t,userId:e}})))})),Object(ac["a"])((function(e){var n=e.room,r=e.userId;if(!r)return L["a"];var a=n.getMember(r);return a&&"join"===a.membership?Object(C["a"])(a):Object(ap["a"])(t,"RoomMember.membership",(function(e,t){return yp(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===n.roomId&&e.userId===r&&"join"===e.membership})))})),Object(Xi["a"])("roomId"))})))})),Object(Zu["a"])(1),Object(W["a"])((function(e){return Object(I["a"])(bp(d.a.mark((function a(){return d.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return","string"===typeof e?t.sendEvent(e,n,r,""):e.send(r.body));case 1:case"end":return a.stop()}}),a)})))).pipe(Object(Ji["a"])("string"===typeof e?e:e.label),Object(Zi["a"])((function(e){return e.pipe(Object(Xu["a"])(c),Object(W["a"])((function(e,t){var n=cp(e,2),r=n[0],a=n[1].pollingInterval;return t<u-1?(o.warn("messageSend error, retrying ".concat(t+1,"/").concat(u),r),Object(qi["a"])(a)):Object(Ki["a"])(r)})))})))})))}function Op(e,t,n){var r=n.log;if("string"===typeof e)try{var a=$o(e);if("signature"in a){var o=Bo(a);if(o!==t)throw new yt(dt.TRNS_MESSAGE_SIGNATURE_MISMATCH,{sender:t,signer:o})}return a}catch(i){r.warn("Could not decode message: ".concat(e,": ").concat(i))}}function wp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _p(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function kp(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_p(o,r,a,i,c,"next",e)}function c(e){_p(o,r,a,i,c,"throw",e)}i(void 0)}))}}function jp(e,t){return xp(e)||Ap(e,t)||Tp(e,t)||Ep()}function Ep(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tp(e,t){if(e){if("string"===typeof e)return Sp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sp(e,t):void 0}}function Sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ap(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xp(e){if(Array.isArray(e))return e}var Np="RAIDEN";function Dp(e,t){var n=np(t.getHomeserverUrl());return Object(Kt["a"])(mp(e)).pipe(Object(M["a"])((function(e){return"#".concat(e,":").concat(n)})),Object(W["a"])((function(e){return t.joinRoom(e).then((function(r){return r.currentState.setStateEvents([new h["MatrixEvent"]({type:"m.room.aliases",state_key:n,content:{aliases:[e]},event_id:"$local_".concat(Date.now()),room_id:r.roomId,sender:t.getUserId()})]),t.store.storeRoom(r),t.emit("Room",r),r}))})),Object(Xi["a"])("roomId"),Object(Yf["a"])())}function Rp(e,t){return Object(I["a"])((function(){var n={not_rooms:t,ephemeral:{not_types:["m.receipt","m.typing"]},timeline:{limit:0,not_senders:[e.getUserId()]}},r={room:n};return e.createFilter(r)}))}function Cp(e,t,n,r){return e.pipe(Object(B["a"])(yr.is),Object(Zu["a"])(1),Object(Gi["a"])((function(){n.next(t),n.complete()})),Object(Qf["a"])(1e3),Object(Xu["a"])(r),Object(W["a"])((function(e){var n=jp(e,2),r=n[1];return Dp(r,t).pipe(Object(W["a"])((function(e){return Rp(t,e)})),Object(W["a"])((function(e){return t.startClient({filter:e})})))})),Object(zu["a"])())}function Pp(e){var t,n=/^\s*-\s*(.+?)\s*$/gm,r=[];while(t=n.exec(e))r.push(t[1]);return r}function Ip(e,t){return e.includes("://")||(e="https://"+e),Object(I["a"])((function(){var n=Date.now();return Object(ep["a"])(e+"/_matrix/client/versions").pipe(Object(Jf["a"])(t),Object(M["a"])((function(e){var t=e.ok;return t?Date.now():NaN})),Object(Xt["a"])((function(){return Object(C["a"])(NaN)})),Object(M["a"])((function(t){return{server:e,rtt:t-n}})))}))}function Lp(e,t){return Object(ep["a"])(e).pipe(Object(W["a"])(function(){var t=kp(d.a.mark((function t(n){return d.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return mt(n.ok,'Could not fetch server list from "'.concat(e,'" => ').concat(n.status)),t.abrupt("return",n.text());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(Jf["a"])(t),Object(W["a"])((function(e){return Pp(e)})),Object(W["a"])((function(e){return Ip(e,t)})),Object(Yf["a"])(),Object(W["a"])((function(e){return rl()(e,["rtt"])})),Object(B["a"])((function(e){var t=e.rtt;return!isNaN(t)})),Object(zf["a"])((function(){return new yt(dt.TRNS_NO_MATRIX_SERVERS)})))}function Up(e,t,n,r){var a=n.address,o=n.signer,i=n.config$,c=np(e);if(!c)throw new yt(dt.TRNS_NO_SERVERNAME,{server:e});return i.pipe(Object(F["a"])(),Object(W["a"])((function(n){var i=n.pollingInterval;if(t){var s=Object(h["createClient"])({baseUrl:e,userId:t.userId,accessToken:t.accessToken,deviceId:t.deviceId});return Object(C["a"])({matrix:s,server:e,setup:t})}var u=Object(h["createClient"])({baseUrl:e}),l=a.toLowerCase(),f="@".concat(l,":").concat(c);return Object(Kt["a"])(o.signMessage(c)).pipe(Object(W["a"])((function(e){return hc((function(){return u.login("m.login.password",{user:l,password:e,device_id:Np})}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})).pipe(Object(Xt["a"])((function(t){return u.register(l,e).catch((function(){throw t}))})))})),Object(W["a"])((function(t){var n=t.access_token,r=t.device_id;return u.deviceId=r,u._http.opts.accessToken=n,u.credentials={userId:f},Object(Kt["a"])(o.signMessage(f)).pipe(Object(M["a"])((function(t){return{matrix:u,server:e,setup:{userId:f,accessToken:n,deviceId:r,displayName:t}}})))})),Object(W["a"])((function(e){var t=e.matrix,n=e.server,a=e.setup;return Object(P["a"])(hc((function(){return t.setDisplayName(a.displayName)}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)})),hc((function(){return t.setAvatarUrl(r&&!ol()(r)?Hu(r):"")}),i,(function(e){return 429!==(null===e||void 0===e?void 0:e.httpStatus)}))).pipe(Object(Ji["a"])({matrix:t,server:n,setup:a}))})))})))}var Mp=function(e,t,n){wp(t);var r=n.address,a=n.signer,o=n.matrix$,i=n.latest$,c=n.config$;return Object(ju["a"])([i,c]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var t,n=jp(e,2),o=n[0].state,i=n[1],s=i.matrixServer,u=i.matrixServerLookup,l=i.httpTimeout,f=i.caps,p=o.transport.server,d=o.transport.setup,b=[];s?(s===p&&b.push(Object(C["a"])({server:p,setup:d})),b.push(Object(C["a"])({server:s}))):(p&&b.push(Object(C["a"])({server:p,setup:d})),b.push(Lp(u,l)));var y=function(e){return t=e,L["a"]};return Object(I["a"])((function(){return b.shift()||L["a"]})).pipe(Object(Xt["a"])(y),Object(tl["a"])((function(e){var t=e.server,n=e.setup;return Up(t,n,{address:r,signer:a,config$:c},f).pipe(Object(Xt["a"])(y))})),Object(F["a"])(),Object(Gi["a"])((function(e){var t=e.matrix;return t.setMaxListeners(30)})),Object(Zi["a"])((function(e){return e.pipe(Object(W["a"])((function(){return b.length?Object(C["a"])(null):Object(Ki["a"])(t)})))})))})),Object(W["a"])((function(t){var n=t.matrix,r=t.server,a=t.setup;return Object(P["a"])(Cp(e,n,o,c),Object(C["a"])(yr({server:r,setup:a})),c.pipe(bc("logger"),Object(Gi["a"])((function(e){return m["logger"].setLevel(e||"silent",!1)})),Object(zu["a"])()))})))},Bp=function(e,t,n){wp(t);var r=n.matrix$;return r.pipe(Object(W["a"])((function(t){return e.pipe(Object(Qu["a"])((function(){t.stopClient(),t.setPresence({presence:"offline",status_msg:""}).catch((function(){}))})))})),Object(zu["a"])())},Fp=n("e98d"),Wp=n.n(Fp);function $p(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Hp(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){$p(o,r,a,i,c,"next",e)}function c(e){$p(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Vp(e,t){return Gp(e)||Kp(e,t)||zp(e,t)||qp()}function qp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kp(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Gp(e){if(Array.isArray(e))return e}function Zp(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xp(Object(n),!0).forEach((function(t){Qp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jp(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=zp(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function zp(e,t){if(e){if("string"===typeof e)return ed(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ed(e,t):void 0}}function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var td=["online","unavailable"],nd=/^@(0x[0-9a-f]{40})[.:]/i;function rd(e,t,n){var r=n.log;return Object(I["a"])((function(){return e.searchUserDirectory({term:t.toLowerCase()})})).pipe(Object(W["a"])(d.a.mark((function e(n){var r,a,o,i,c,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.results,a=Jp(r),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=24;break}if(i=o.value,i.display_name){e.next=8;break}return e.abrupt("continue",22);case 8:if(e.prev=8,c=nd.exec(i.user_id),c&&Object(_["getAddress"])(c[1])===t){e.next=12;break}return e.abrupt("continue",22);case 12:if(s=Object(_["verifyMessage"])(i.user_id,i.display_name),s&&s===t){e.next=15;break}return e.abrupt("continue",22);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e["catch"](8),e.abrupt("continue",22);case 20:return e.next=22,i;case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e["catch"](2),a.e(e.t1);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32],[8,17]])}))),Object(W["a"])((function(t){return rp(e,t.user_id).then((function(e){return Yp(Yp({},e),t)})).catch((function(e){r.info("Error fetching user presence, ignoring:",e)}))})),Object(B["a"])(Tt),Object(Yf["a"])(),Object(M["a"])((function(e){if(!e.length)throw new yt(dt.TRNS_NO_VALID_USER,{address:t});return Wp()(e,"last_active_ago")})))}var ad=function(e,t,n){Zp(t);var r=n.matrix$,a=n.latest$,o=n.log;return e.pipe(Object(B["a"])($n(mr.request)),Object(W["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Yi["a"])((function(e){var t=e.action;return t.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Xu["a"])(a.pipe(bc("presences"))),Object(Zt["a"])((function(e){var t=Vp(e,2),n=t[0],r=n.action,a=n.matrix,i=t[1];return r.meta.address in i?Object(C["a"])(i[r.meta.address]):rd(a,r.meta.address,{log:o}).pipe(Object(M["a"])((function(e){var t=e.presence,n=e.user_id,a=e.avatar_url;return mr.success({userId:n,available:td.includes(t),ts:Date.now(),caps:Vu(a)},r.meta)})),Object(Xt["a"])((function(e){return Object(C["a"])(mr.failure(e,r.meta))})))})))})))},od=function(e,t,n){Zp(t);var r=n.log,a=n.matrix$,o=n.latest$;return a.pipe(Object(ac["a"])((function(e){return Object(ap["a"])(e,"event").pipe(Object(M["a"])((function(t){return{event:t,matrix:e}})))})),Object(B["a"])((function(e){var t=e.event;return"m.presence"===t.getType()})),Object(M["a"])((function(e){var t,n=e.event,r=e.matrix,a=r.getUser(n.getSender());try{mt(null===a||void 0===a?void 0:a.presence);var o=null===(t=nd.exec(a.userId))||void 0===t?void 0:t[1];mt(o);var i=Object(_["getAddress"])(o);return mt(i),{matrix:r,user:a,address:i}}catch(c){}})),Object(B["a"])(Tt),Object(Xu["a"])(e.pipe(Object(B["a"])(mr.request.is),Object(tc["a"])((function(e,t){return e.add(t.meta.address)}),new Set),Object(Tu["a"])(new Set))),Object(B["a"])((function(e){var t=Vp(e,2),n=t[0].address,r=t[1];return r.has(n)})),Object(W["a"])((function(e){var t=Vp(e,1),n=t[0],a=n.matrix,o=n.user,i=n.address,c=o.userId,s=o.presence,u=td.includes(s);return Object(I["a"])((function(){return a.getProfileInfo(c)})).pipe(Object(M["a"])((function(e){var t;mt(null===e||void 0===e?void 0:e.displayname,"no displayname");var n=Object(_["verifyMessage"])(c,e.displayname);return mt(n===i,"invalid displayname signature: ".concat(n," !== ").concat(i)),mr.success({userId:c,available:u,ts:null!==(t=o.lastPresenceTs)&&void 0!==t?t:Date.now(),caps:Vu(e.avatar_url)},{address:n})})),Object(Xt["a"])((function(e){return r.debug("Error validating presence event, ignoring",e),L["a"]})))}))).pipe(Object(Xu["a"])(o),Object(B["a"])((function(e){var t=Vp(e,2),n=t[0],r=t[1].presences;return n.payload.available||!(n.meta.address in r)||!r[n.meta.address].payload.available||n.payload.userId===r[n.meta.address].payload.userId})),Object(Xi["a"])(0))},id=function(e){return e.pipe(Object(B["a"])(cr.is),Object(M["a"])((function(e){return mr.request(void 0,{address:e.meta.partner})})))},cd=function(e,t,n){Zp(e),Zp(t);var r=n.matrix$,a=n.config$;return a.pipe(Object(Xi["a"])("caps"),Object(ec["a"])(Nu.a),Object(U["a"])(1),Object(W["a"])((function(e){return r.pipe(Object(M["a"])((function(t){return[e,t]})))})),Object(W["a"])(function(){var e=Hp(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Vp(t,2),r=n[0],a=n[1],e.abrupt("return",a.setAvatarUrl(r&&!ol()(r)?Hu(r):"").catch((function(){})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(zu["a"])())},sd=n("41db"),ud=n("1df9"),ld=n.n(ud);function fd(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function pd(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){fd(o,r,a,i,c,"next",e)}function c(e){fd(o,r,a,i,c,"throw",e)}i(void 0)}))}}function dd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=hd(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function bd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function yd(e,t){return Od(e)||gd(e,t)||hd(e,t)||md()}function md(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hd(e,t){if(e){if("string"===typeof e)return vd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vd(e,t):void 0}}function vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Od(e){if(Array.isArray(e))return e}function wd(e,t,n,r,a){var o=a.log;return Object(I["a"])((function(){var n=e.getRoom(t);return n?Object(C["a"])(n):Object(ap["a"])(e,"Room").pipe(Object(B["a"])((function(e){return e.roomId===t})),Object(Zu["a"])(1))})).pipe(Object(B["a"])((function(e){var t=e.getMember(n);return!t||"join"!==t.membership})),Object(Xu["a"])(r),Object(W["a"])((function(r){var a=yd(r,2),i=a[1].httpTimeout;return Object(I["a"])((function(){return e.invite(t,n).catch(o.warn.bind(o,"Error inviting"))})).pipe(Object(nc["a"])((function(e){return e.pipe(Object(Qf["a"])(i))})),Object(Qi["a"])(Object(ap["a"])(e,"RoomMember.membership",(function(e,t){return bd(e),t})).pipe(Object(B["a"])((function(e){return e.roomId===t&&e.userId===n&&"join"===e.membership})))))})))}var _d=function(e,t,n){bd(t);var r=n.address,a=n.log,o=n.matrix$,i=n.latest$;return e.pipe(Object(B["a"])($n([ka,cr,ia.request,vr])),Object(M["a"])((function(e){var t;switch(e.type){case ka.type:e.meta.direction===ma.SENT&&e.payload.message.initiator===r?t=e.payload.message.target:e.meta.direction===ma.RECEIVED&&e.payload.message.target===r&&(t=e.payload.message.initiator);break;case cr.type:t=e.meta.partner;break;default:t=e.meta.address;break}return t})),Object(B["a"])(Tt),Object(Yi["a"])((function(e){return e})),Object(W["a"])((function(e){return e.pipe(Object(W["a"])((function(e){return o.pipe(Object(M["a"])((function(t){return{address:e,matrix:t}})))})),Object(Zt["a"])((function(e){var t=e.address,n=e.matrix;return i.pipe(Object(B["a"])((function(e){var n=e.presences;return t in n})),Object(Zu["a"])(1),Object(B["a"])((function(e){var n,r,a=e.state;return!(null===(r=null===(n=a.transport.rooms)||void 0===n?void 0:n[t])||void 0===r?void 0:r[0])})),Object(W["a"])((function(e){var r=e.presences;return n.createRoom({visibility:"private",invite:[r[t].payload.userId]})})),Object(M["a"])((function(e){var n=e.room_id;return hr({roomId:n},{address:t})})),Object(Xt["a"])((function(e){return a.error("Error creating room, ignoring",e),L["a"]})))})))})))},kd=function(e,t,n){bd(t);var r=n.matrix$,a=n.config$,o=n.latest$,i=n.log;return e.pipe(Object(B["a"])($n(mr.success)),Object(Yi["a"])((function(e){return e.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(Xu["a"])(r),Object(ac["a"])((function(e){var t=yd(e,2),n=t[0],r=t[1];return n.payload.available?o.pipe(Object(M["a"])((function(e){var t,r,a=e.state;return null===(r=null===(t=a.transport.rooms)||void 0===t?void 0:t[n.meta.address])||void 0===r?void 0:r[0]})),Object(ec["a"])(),Object(ac["a"])((function(e){return Object(Ku["a"])(Object(C["a"])(e),e?Object(ap["a"])(r,"RoomMember.membership",(function(e,t){return bd(e),t})).pipe(Object(B["a"])((function(t){return t.roomId===e&&t.userId===n.payload.userId&&"leave"===t.membership})),Object(Ji["a"])(e)):L["a"])})),Object(ac["a"])((function(e){return e?wd(r,e,n.payload.userId,a,{log:i}):L["a"]}))):L["a"]})))})),Object(zu["a"])())},jd=function(e,t,n){bd(e),bd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(ac["a"])((function(e){return Object(ap["a"])(e,"RoomMember.membership",(function(t,n){return{event:t,member:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.member,n=e.matrix;return t.userId===n.getUserId()&&"invite"===t.membership})),Object(Xu["a"])(o),Object(W["a"])((function(e){var t=yd(e,2),n=t[0],r=n.event,a=n.member,o=n.matrix,c=t[1].httpTimeout,s=r.getSender(),u=i.pipe(bc("presences"),Object(M["a"])((function(e){return ld()(e,(function(e){return e.payload.userId===s}))})),Object(B["a"])(Tt),Object(Zu["a"])(1),Object(Qi["a"])(Object(qi["a"])(c)));return u.pipe(Object(M["a"])((function(e){return{matrix:o,member:a,senderPresence:e}})))})),Object(W["a"])((function(e){var t=e.matrix,n=e.member,a=e.senderPresence;return Object(Kt["a"])(t.joinRoom(n.roomId,{syncRoom:!0})).pipe(Object(Ji["a"])(hr({roomId:n.roomId},{address:a.meta.address})),Object(Xt["a"])((function(e){return r.error("Error joining invited room, ignoring",e),L["a"]})))})))},Ed=function(e,t,n){var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])($n(hr)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Xu["a"])(t,o),Object(W["a"])((function(e){var t,n,a=yd(e,3),o=a[0],i=o.action,c=o.matrix,s=a[1],u=a[2].matrixExcessRooms,l=null!==(n=null===(t=s.transport.rooms)||void 0===t?void 0:t[i.meta.address])&&void 0!==n?n:[];return Object(Kt["a"])(l.filter((function(e,t){return bd(e),t>=u}))).pipe(Object(W["a"])((function(e){return c.leave(e).catch((function(e){return r.error("Error leaving excess room, ignoring",e)})).then((function(){return e}))})),Object(M["a"])((function(e){return vr({roomId:e},i.meta)})))})))},Td=function(e,t,n){bd(e);var r=n.log,a=n.matrix$,o=n.config$;return a.pipe(Object(ac["a"])((function(e){return Object(ap["a"])(e,"Room").pipe(Object(M["a"])((function(t){return{matrix:e,room:t}})))})),Object(Ju["a"])((function(){return o.pipe(Object(F["a"])(),Object(W["a"])((function(e){var t=e.httpTimeout;return Object(qi["a"])(t)})))})),Object(Xu["a"])(t,o),Object(B["a"])((function(e){var t,n=yd(e,3),r=n[0],a=r.matrix,o=r.room,i=n[1].transport,c=n[2];if(!o)return!1;var s=np(a.getHomeserverUrl());if(mp(c).some((function(e){return hp("#".concat(e,":").concat(s),o)})))return!1;for(var u=0,l=Object.values(null!==(t=i.rooms)&&void 0!==t?t:{});u<l.length;u++){var f,p=l[u],d=dd(p);try{for(d.s();!(f=d.n()).done;){var b=f.value;if(b===o.roomId)return!1}}catch(y){d.e(y)}finally{d.f()}}return!0})),Object(W["a"])(function(){var e=pd(d.a.mark((function e(t){var n,a,o,i;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=yd(t,1),a=n[0],o=a.matrix,i=a.room,r.warn("Unknown room in matrix, leaving",i.roomId),e.abrupt("return",o.leave(i.roomId).catch((function(e){return r.error("Error leaving unknown room, ignoring",e)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(zu["a"])())},Sd=function(e,t,n){bd(e);var r=n.log,a=n.matrix$;return a.pipe(Object(ac["a"])((function(e){return Object(ap["a"])(e,"Room.myMembership",(function(t,n){return{room:t,membership:n,matrix:e}}))})),Object(B["a"])((function(e){var t=e.membership;return"leave"===t})),Object(Xu["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,a,o,i,c,s,u,l,f,p,b,y;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=yd(t,2),a=n[0].room,o=n[1].transport,c=0,s=Object.entries(null!==(i=o.rooms)&&void 0!==i?i:{});case 2:if(!(c<s.length)){e.next=26;break}u=yd(s[c],2),l=u[0],f=u[1],p=dd(f),e.prev=5,p.s();case 7:if((b=p.n()).done){e.next=15;break}if(y=b.value,y!==a.roomId){e.next=13;break}return r.warn("Left event for peer room detected, forgetting",l,y),e.next=13,vr({roomId:y},{address:l});case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](5),p.e(e.t0);case 20:return e.prev=20,p.f(),e.finish(20);case 23:c++,e.next=2;break;case 26:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))))},Ad=function(e,t,n){bd(e);var r=n.log,a=n.matrix$,o=n.config$;return t.pipe(bc("transport","rooms"),Object(B["a"])(Tt),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.entries(t);case 1:if(!(n<r.length)){e.next=23;break}a=yd(r[n],2),o=a[0],i=a[1],c=dd(i),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=12;break}return u=s.value,e.next=10,{roomId:u,address:o};case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:n++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])}))),Object(sd["a"])((function(e){var t=e.roomId;return t})),Object(W["a"])((function(e){var t=e.roomId,n=e.address;return a.pipe(Object(M["a"])((function(e){return{matrix:e,roomId:t,address:n}})))})),Object(Xu["a"])(o),Object(W["a"])((function(e){var t=yd(e,2),n=t[0],a=n.roomId,o=n.address,i=n.matrix,c=t[1].httpTimeout;return vp(i,a).pipe(Object(Jf["a"])(c),Object(zu["a"])(),Object(Xt["a"])((function(){return r.warn("Peer room in state not found in matrix, forgetting",o,a),Object(C["a"])(vr({roomId:a},{address:o}))})))})))},xd=function(e,t){return e.pipe(Object(B["a"])(sa.is),Object(Xu["a"])(t),Object(B["a"])((function(e){var t,n,r=yd(e,2),a=r[0],o=r[1],i=null!==(n=null===(t=o.transport.rooms)||void 0===t?void 0:t[a.meta.address])&&void 0!==n?n:[];return!!a.payload.roomId&&i.includes(a.payload.roomId)&&i[0]!==a.payload.roomId})),Object(M["a"])((function(e){var t=yd(e,1),n=t[0];return hr({roomId:n.payload.roomId},n.meta)})))};function Nd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rd(e,t,n){return t&&Dd(e.prototype,t),n&&Dd(e,n),e}var Cd=function(){function e(t){Nd(this,e),this.values=new Map,this.max=t}return Rd(e,[{key:"get",value:function(e){var t=this.values.get(e);return t&&(this.values.delete(e),this.values.set(e,t)),t}},{key:"put",value:function(e,t){if(this.values.size>=this.max){var n=this.values.keys().next().value;this.values.delete(n)}this.values.set(e,t)}}]),e}();function Pd(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Ud(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Id(e,t){return Fd(e)||Bd(e,t)||Ud(e,t)||Ld()}function Ld(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ud(e,t){if(e){if("string"===typeof e)return Md(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Md(e,t):void 0}}function Md(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Fd(e){if(Array.isArray(e))return e}function Wd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var $d=function(e,t,n){Wd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return e.pipe(Object(B["a"])($n(ia.request)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Yi["a"])((function(e){var t=e.action;return t.meta.address})),Object(W["a"])((function(e){return e.pipe(Object(tl["a"])((function(e){var t=e.action,n=e.matrix,a="string"===typeof t.payload.message?t.payload.message:Wo(t.payload.message),c={body:a,msgtype:"m.text"};return gp(t.meta.address,n,"m.room.message",c,{log:r,latest$:i,config$:o},!0).pipe(Object(M["a"])((function(e){return ia.success({via:e},t.meta)})),Object(Xt["a"])((function(e){return r.error("messageSend error",e,t.meta),Object(C["a"])(ia.failure(e,t.meta))})))})))})))},Hd=function(e,t,n){Wd(t);var r=n.log,a=n.matrix$,o=n.config$;return e.pipe(Object(B["a"])($n(ca)),Object(W["a"])((function(e){return a.pipe(Object(M["a"])((function(t){return{action:e,matrix:t}})))})),Object(Xu["a"])(o),Object(W["a"])((function(e){var t=Id(e,2),n=t[0],a=n.action,o=n.matrix,i=t[1],c=mp(i);if(!c.includes(a.meta.roomName))return r.warn("messageGlobalSend for unknown global room, ignoring",a.meta.roomName,c),L["a"];var s=np(o.getHomeserverUrl()),u="#".concat(a.meta.roomName,":").concat(s);return vp(o,u).pipe(Object(W["a"])((function(e){var t="string"===typeof a.payload.message?a.payload.message:Wo(a.payload.message);return o.sendEvent(e.roomId,"m.room.message",{body:t,msgtype:"m.text"},"")})),Object(Xt["a"])((function(e){return r.error("Error sending message to global room",a.meta,a.payload.message,e),L["a"]})))})),Object(zu["a"])())},Vd=function(e,t,n){Wd(e),Wd(t);var r=n.log,a=n.matrix$,o=n.config$,i=n.latest$;return a.pipe(Object(ac["a"])((function(e){return Object(ap["a"])(e,"Room.timeline",(function(t,n){return{matrix:e,event:t,room:n}}))})),Object(Xu["a"])(o),Object(B["a"])((function(e){var t,n,r=Id(e,2),a=r[0],o=a.matrix,i=a.event,c=a.room,s=r[1];return"m.room.message"===i.getType()&&"m.text"===(null===(n=null===(t=i.event)||void 0===t?void 0:t.content)||void 0===n?void 0:n.msgtype)&&i.getSender()!==o.getUserId()&&!mp(s).some((function(e){return hp("#".concat(e,":").concat(np(o.getHomeserverUrl())),c)}))})),Object(W["a"])((function(e){var t=Id(e,2),n=t[0],a=n.event,o=n.room,c=t[1].httpTimeout;return i.pipe(Object(B["a"])((function(e){var t,n,r=e.presences,i=e.state,c=ld()(r,["payload.userId",a.getSender()]);if(!c)return!1;var s=null!==(n=null===(t=i.transport.rooms)||void 0===t?void 0:t[c.meta.address])&&void 0!==n?n:[];return!!s.includes(o.roomId)})),Object(Zu["a"])(1),Object(Qi["a"])(Object(qi["a"])(c)),Object(W["a"])(d.a.mark((function e(t){var n,i,c,s,u,l,f;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.presences,c=ld()(n,["payload.userId",a.getSender()]),s=Pd((a.event.content.body||"").split("\n")),e.prev=3,s.s();case 5:if((u=s.n()).done){e.next=12;break}return l=u.value,f=Op(l,c.meta.address,{log:r}),e.next=10,sa({text:l,message:f,ts:null!==(i=a.event.origin_server_ts)&&void 0!==i?i:Date.now(),userId:c.payload.userId,roomId:o.roomId},c.meta);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])}))))})))},qd=function(e,t,n){Wd(t);var r=n.log,a=n.signer,o=n.latest$,i=new Cd(32);return e.pipe(Object(B["a"])(qo([Ft(Er),Ft(Sr),Ft(xr)])),Object(Xu["a"])(o),Object(B["a"])((function(e){var t,n=Id(e,2),r=n[0],a=n[1].presences;return r.meta.address in a&&!(null===(t=a[r.meta.address].payload.caps)||void 0===t?void 0:t[Re.NO_DELIVERY])})),Object(tl["a"])((function(e){var t=Id(e,1),n=t[0],o=n.payload.message;return Object(I["a"])((function(){var e=o.message_identifier,t=e.toString(),c=i.get(t);if(c)return Object(C["a"])(ia.request({message:c},{address:n.meta.address,msgId:t}));var s={type:Qn.DELIVERED,delivered_message_identifier:e};return r.info('Signing "'.concat(s.type,'" for "').concat(o.type,'" with id=').concat(e.toString())),Object(Kt["a"])(Ho(a,s,{log:r})).pipe(Object(Gi["a"])((function(e){return i.put(t,e)})),Object(M["a"])((function(e){return ia.request({message:e},{address:n.meta.address,msgId:t})})))}))})))},Kd=n("4d57"),Gd=n("56f3");function Zd(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Xd(e,t){return Jd(e)||Qd(e,t)||tb(e,t)||Yd()}function Yd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qd(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Jd(e){if(Array.isArray(e))return e}function zd(e){return rb(e)||nb(e)||tb(e)||eb()}function eb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tb(e,t){if(e){if("string"===typeof e)return ab(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ab(e,t):void 0}}function nb(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function rb(e){if(Array.isArray(e))return ab(e)}function ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ob(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ib(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ob(o,r,a,i,c,"next",e)}function c(e){ob(o,r,a,i,c,"throw",e)}i(void 0)}))}}var cb=new WeakMap;function sb(e){return ub.apply(this,arguments)}function ub(){return ub=ib(d.a.mark((function e(t){var n,r,a,o;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=cb.get(t),!(n&&Date.now()<n[0])){e.next=3;break}return e.abrupt("return",n[1]);case 3:return e.next=5,t.turnServer();case 5:return r=e.sent,a=Date.now()+36e5,o=[],r&&"uris"in r&&(o.push({urls:r.uris,username:r.username,credentialType:"password",credential:r.password}),a=Date.now()+1e3*r.ttl),cb.set(t,[a,o]),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),ub.apply(this,arguments)}function lb(e,t,n,r){var a="m.call.invite"===e?"offer":"m.call.answer"===e?"answer":"m.call.candidates"===e?"candidates":void 0;return function(o){var i,c,s,u;return o.getType()===e&&o.getSender()===t&&(null===(i=o.getContent())||void 0===i?void 0:i.call_id)===n&&(!r||o.getAge()<=(null!==(s=null===(c=o.getContent())||void 0===c?void 0:c.lifetime)&&void 0!==s?s:r))&&(!a||!!(null===(u=o.getContent())||void 0===u?void 0:u[a]))}}function fb(e,t,n,r,a){var o=r.callId,i=r.peerId,c=r.peerAddress,s=a.log,u=a.latest$,l=a.config$;return Object(P["a"])(Object(ap["a"])(e,"icecandidate").pipe(Object(Xi["a"])("candidate"),Object(Ju["a"])((function(){return n})),Object(rc["a"])(Tt),Object(Kd["a"])(10),Object(B["a"])((function(e){return e.length>0})),Object(Gi["a"])((function(e){return s.debug("RTC: got candidates",o,e)})),Object(W["a"])((function(e){return gp(c,t,"m.call.candidates",{call_id:o,version:0,candidates:e},{log:s,latest$:u,config$:l})}))),Object(ap["a"])(t,"event").pipe(Object(B["a"])(lb("m.call.candidates",i,o)),Object(Gi["a"])((function(e){return s.debug("RTC: received candidates",o,e.getContent().candidates)})),Object(W["a"])((function(e){var t;return Object(Kt["a"])(null!==(t=e.getContent().candidates)&&void 0!==t?t:[])})),Object(W["a"])((function(t){return Object(I["a"])((function(){return e.addIceCandidate(t)})).pipe(Object(Xt["a"])((function(e){return s.error("RTC: error setting candidate, ignoring",e),L["a"]})))})))).pipe(Object(zu["a"])())}function pb(e,t,n,r,a){var o=r.httpTimeout,i=r.fallbackIceServers,c=n.callId,s=n.peerId,u=n.peerAddress,l=a.log,f=a.latest$,p=a.config$;return Object(Kt["a"])(sb(e)).pipe(Object(W["a"])((function(r){var d=new RTCPeerConnection({iceServers:[].concat(zd(r),zd(i))}),b=d.createDataChannel(c,{ordered:!1});return Object(P["a"])(fb(d,e,t,n,a),Object(I["a"])((function(){return d.createOffer()})).pipe(Object(W["a"])((function(t){d.setLocalDescription(t);var n={call_id:c,lifetime:o,version:0,offer:t};return Object(P["a"])(Object(ap["a"])(e,"event").pipe(Object(B["a"])(lb("m.call.answer",s,c,o))),gp(u,e,"m.call.invite",n,{log:l,latest$:f,config$:p}).pipe(Object(Gi["a"])((function(e){return l.debug("RTC: sent invite",c,e)})),Object(zu["a"])()))})),Object(Zu["a"])(1),Object(Gi["a"])((function(){return l.info("RTC: got answer",c)})),Object(M["a"])((function(e){d.setRemoteDescription(new RTCSessionDescription(e.getContent().answer)),t.next(null),t.complete()})),Object(zu["a"])()),Object(C["a"])(b))})))}function db(e,t,n,r,a){var o=r.httpTimeout,i=n.callId,c=n.peerId,s=n.peerAddress,u=a.log,l=a.latest$,f=a.config$;return Object(ap["a"])(e,"event").pipe(Object(B["a"])(lb("m.call.invite",c,i,o)),Object(Gi["a"])((function(){return u.info("RTC: got invite",i)})),Object(W["a"])((function(t){return Object(Kt["a"])(sb(e)).pipe(Object(M["a"])((function(e){return[t,e]})))})),Object(Xu["a"])(f),Object(W["a"])((function(r){var c=Xd(r,2),p=Xd(c[0],2),d=p[0],b=p[1],y=c[1].fallbackIceServers,m=new RTCPeerConnection({iceServers:[].concat(zd(b),zd(y))});return m.setRemoteDescription(new RTCSessionDescription(d.getContent().offer)),Object(P["a"])(fb(m,e,t,n,a),Object(I["a"])((function(){return m.createAnswer()})).pipe(Object(W["a"])((function(t){m.setLocalDescription(t);var n={call_id:i,lifetime:o,version:0,answer:t};return gp(s,e,"m.call.answer",n,{log:u,latest$:l,config$:f})})),Object(Gi["a"])((function(e){u.debug("RTC: sent answer",i,e),t.next(null),t.complete()})),Object(zu["a"])()),Object(ap["a"])(m,"datachannel").pipe(Object(Xi["a"])("channel")))})),Object(Zu["a"])(1))}function bb(e,t,n,r){var a=t.callId,o=t.peerId,i=t.peerAddress,c=n.httpTimeout,s=r.log;return function(t){return t.pipe(Object(W["a"])((function(t){return Object(P["a"])(Object(ap["a"])(t,"close").pipe(Object(Gi["a"])((function(){s.info("RTC: dataChannel close",a),e.next(null),e.complete()})),Object(zu["a"])()),Object(ap["a"])(t,"error").pipe(Object(W["a"])((function(e){return Object(Ki["a"])(e.error)}))),Object(ap["a"])(t,"open").pipe(Object(Zu["a"])(1),Object(Jf["a"])(c/3),Object(Gi["a"])((function(){return s.info("RTC: dataChannel open",a)})),Object(Ji["a"])(gr(t,{address:i}))),Object(ap["a"])(t,"message").pipe(Object(Gi["a"])((function(e){return s.debug("RTC: dataChannel message",a,e)})),Object(Xi["a"])("data"),Object(B["a"])((function(e){return"string"===typeof e})),Object(M["a"])((function(e){return sa({text:e,message:Op(e,i,{log:s}),ts:Date.now(),userId:o},{address:i})})))).pipe(Object(Qu["a"])((function(){return t.close()})))})),Object(Qi["a"])(e),Object(Xt["a"])((function(t){var n;return e.next(null),e.complete(),s.info("Couldn't set up WebRTC dataChannel, retrying",a,null!==(n=null===t||void 0===t?void 0:t.message)&&void 0!==n?n:t),L["a"]})),Object(Gd["a"])(gr(void 0,{address:i})))}}function yb(e,t,n){var r=n.log,a=n.address,o=n.latest$,i=n.matrix$,c=n.config$;return t.pipe(Object(ec["a"])((function(e,t){return e.payload.userId===t.payload.userId&&e.payload.available===t.payload.available})),Object(Xu["a"])(i,c),Object(B["a"])((function(e){var t,n=Xd(e,3),r=n[0],a=n[2].caps;return!!(null===(t=r.payload.caps)||void 0===t?void 0:t[Re.WEBRTC])&&!!(null===a||void 0===a?void 0:a[Re.WEBRTC])})),Object(ac["a"])((function(t){var n=Xd(t,3),i=n[0],s=n[1],u=n[2];if(!i.payload.available)return Object(C["a"])(gr(void 0,i.meta));var l={log:r,latest$:o,config$:c},f=[a,i.meta.address].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.localeCompare(t)})).join("|"),p=f.startsWith(a.toLowerCase());return Object(I["a"])((function(){var t,n={callId:f,peerId:i.payload.userId,peerAddress:i.meta.address},a=new R["a"],d=new R["a"];return t=p?pb(s,a,n,u,l):db(s,a,n,u,l),d.pipe(Object(W["a"])((function(){return gp(i.meta.address,s,"m.call.hangup",{call_id:f,version:0},{log:r,latest$:o,config$:c}).pipe(Object(Qi["a"])(Object(qi["a"])(u.httpTimeout/10)))})),Object(Qi["a"])(e.pipe(Object(B["a"])(za.is)))).subscribe(),Object(P["a"])(t,Object(ap["a"])(s,"event").pipe(Object(B["a"])(lb("m.call.hangup",n.peerId,f)),Object(el["a"])(Object(Ki["a"])(new Error("RTC: peer hung up"))))).pipe(bb(d,n,u,l))})).pipe(Object(nc["a"])((function(e){return e.pipe(Object(Xu["a"])(o,c),Object(W["a"])((function(e){var t,n,r=Xd(e,3),a=r[1].presences,o=r[2].httpTimeout;return(null===(n=null===(t=a[i.meta.address])||void 0===t?void 0:t.payload)||void 0===n?void 0:n.available)?p?Object(qi["a"])(o/10):Object(C["a"])(null):L["a"]})))})))})))}var mb=function(e,t,n){return Zd(t),e.pipe(Object(B["a"])(mr.success.is),Object(Yi["a"])((function(e){return e.meta.address})),Object(W["a"])((function(t){return yb(e,t,n)})))};function hb(e,t){return _b(e)||wb(e,t)||gb(e,t)||vb()}function vb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gb(e,t){if(e){if("string"===typeof e)return Ob(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ob(e,t):void 0}}function Ob(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function _b(e){if(Array.isArray(e))return e}var kb=function(e,t,n){var r=n.address;return e.pipe(Object(B["a"])($n([lr.request,lr.success])),Object(Xu["a"])(t),Object(W["a"])((function(e){var t=hb(e,2),n=t[0],a=t[1];return Object(Kt["a"])(Object.entries(a.sent)).pipe(Object(B["a"])((function(e){var t=hb(e,2),a=t[1].transfer;return a.token_network_address===n.meta.tokenNetwork&&a.recipient===n.meta.partner&&a.initiator===r})),Object(M["a"])((function(e){var t,n,r=hb(e,2),a=r[0],o=r[1],i={secrethash:a,direction:ma.SENT};return o.lockExpired||o.unlockProcessed||(null===(t=o.secret)||void 0===t?void 0:t.registerBlock)||o.secretRequest&&!o.secretReveal?void 0:(null===(n=o.secret)||void 0===n?void 0:n.registerBlock)||o.secretReveal||o.unlock?o.unlock?_a.success({balanceProof:Fo(o.unlock)},i):_a.success({},i):_a.failure(new yt(dt.XFER_CHANNEL_CLOSED_PREMATURELY),i)})),Object(B["a"])(Tt))})))},jb=d.a.mark(Eb);function Eb(){var e,t,n,r,a=arguments;return d.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:1e3,t=a.length>1&&void 0!==a[1]?a[1]:6e4,n=a.length>2&&void 0!==a[2]?a[2]:1.4,r=e;case 4:return o.next=7,r;case 7:r=Math.min(t,Math.ceil(r*n)),o.next=4;break;case 10:case"end":return o.stop()}}),jb)}function Tb(e,t,n){return Object(P["a"])(e.pipe(Object(B["a"])(n),Object(Zu["a"])(1),Object(zu["a"])()),Object(C["a"])(t))}function Sb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;return Tb(t,e,Kn(ia,e.meta)).pipe(mc(n,r))}function Ab(e,t){return function(n){return n.type===e&&(!t||n.expiration.eq(t.expiration)&&n.total_withdraw.eq("totalWithdraw"in t?t.totalWithdraw:t.total_withdraw))}}function xb(e,t){return Pb(e)||Cb(e,t)||Db(e,t)||Nb()}function Nb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Db(e,t){if(e){if("string"===typeof e)return Rb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rb(e,t):void 0}}function Rb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Pb(e){if(Array.isArray(e))return e}function Ib(e,t,n){var r;return!e.unlock&&!e.lockExpired&&!e.channelClosed&&e.transfer.lock.expiration.add(t).lte(n)&&!(null===(r=e.secret)||void 0===r?void 0:r.registerBlock)}function Lb(e,t,n,r){var a=n.confirmationBlocks;return Object(Kt["a"])(Object.entries(t.sent)).pipe(Object(B["a"])((function(e){var t=xb(e,2),n=t[1];return Ib(n,a,r)})),Object(W["a"])((function(t){var n=xb(t,2),r=n[0],a=n[1],o={secrethash:r,direction:ma.SENT};return Object(P["a"])(Tb(e,Da.request(void 0,o),Kn(Da,o)),Object(C["a"])(_a.failure(new yt(dt.XFER_EXPIRED,{block:a.transfer.lock.expiration.toString()}),o)))})))}var Ub=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])($n(ar)),Object(Xu["a"])(t,r),Object(Zt["a"])((function(t){var n=xb(t,3),r=n[0].payload.blockNumber,a=n[1],o=n[2];return Lb(e,a,o,r)})))};function Mb(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Bb(e,t){return $b(e)||Wb(e,t)||qb(e,t)||Fb()}function Fb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wb(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function $b(e){if(Array.isArray(e))return e}function Hb(e){return Gb(e)||Kb(e)||qb(e)||Vb()}function Vb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qb(e,t){if(e){if("string"===typeof e)return Zb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zb(e,t):void 0}}function Kb(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Gb(e){if(Array.isArray(e))return Zb(e)}function Zb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xb(e,t){var n=e.locks.filter((function(e){return e.secrethash!==t}));return mt(n.length===e.locks.length-1,"invalid locks size"),n}function Yb(e){return e.reduce((function(e,t){var n=t.amount;return e.add(n)}),k["Zero"])}function Qb(e,t,n){var r=e.channels[Nc(t)];return mt((null===r||void 0===r?void 0:r.state)===Ro.open,"channel not open"),n&&(mt(n.chain_id.eq(e.chainId),"chainId mismatch"),mt(n.channel_identifier.eq(r.id),"channelId mismatch")),r}function Jb(e,t,n,r){var a,o=n.revealTimeout,i=r.log,c=r.address,s=r.network,u=r.signer;if(t.meta.secrethash in e.sent)return i.warn("transfer already present",t.meta),L["a"];var l={routes:t.payload.paths.map((function(e){var t=e.path;return{route:t}}))},f=t.payload.paths[0].fee,p=t.payload.paths[0].path[0],b=t.payload.tokenNetwork,y=Qb(e,{tokenNetwork:b,partner:p});mt(!t.payload.expiration||t.payload.expiration>=e.blockNumber+o,"expiration too soon");var m={amount:t.payload.value.add(f),expiration:Object(_["bigNumberify"])(t.payload.expiration||e.blockNumber+2*o),secrethash:t.meta.secrethash},h=ml([].concat(Hb(y.own.locks),[m]));i.info("Signing transfer of value",t.payload.value.toString(),"of token",y.token,", to",t.payload.target,", through routes",t.payload.paths,", paying",f.toString(),"in fees.");var v={type:Qn.LOCKED_TRANSFER,message_identifier:Ol(),chain_id:Object(_["bigNumberify"])(s.chainId),token_network_address:t.payload.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(y.id),nonce:y.own.nextNonce,transferred_amount:y.own.balanceProof.transferredAmount,locked_amount:y.own.balanceProof.lockedAmount.add(m.amount),locksroot:h,payment_identifier:t.payload.paymentId,token:y.token,recipient:p,lock:m,target:t.payload.target,initiator:null!==(a=t.payload.initiator)&&void 0!==a?a:c,metadata:l};return Object(Kt["a"])(Ho(u,v,{log:i})).pipe(Object(W["a"])(d.a.mark((function e(n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ka({message:n,fee:f,partner:p},t.meta);case 2:if(!t.payload.secret){e.next=5;break}return e.next=5,Ea({secret:t.payload.secret},t.meta);case 5:case"end":return e.stop()}}),e)}))))}function zb(e,t,n){return Object(ju["a"])([e,n.config$]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var r=Bb(e,2),a=r[0],o=r[1];return Jb(a,t,o,n)})),Object(Xt["a"])((function(e){return Object(C["a"])(_a.failure(e,t.meta))})))}function ey(e,t,n,r){var a=r.log,o=r.signer,i=n.meta.secrethash;mt(i in t.sent,"unknown transfer");var c,s=t.sent[i].transfer,u=s.token_network_address,l=t.sent[i].partner,f=Qb(t,{tokenNetwork:u,partner:l});if(t.sent[i].unlock)c=Object(C["a"])(t.sent[i].unlock);else{mt(t.sent[i].secret,"unknown secret"),mt(t.sent[i].secret.registerBlock>0||s.lock.expiration.gt(t.blockNumber),"lock expired");var p={type:Qn.UNLOCK,message_identifier:Ol(),chain_id:s.chain_id,token_network_address:s.token_network_address,channel_identifier:s.channel_identifier,nonce:f.own.nextNonce,transferred_amount:f.own.balanceProof.transferredAmount.add(s.lock.amount),locked_amount:f.own.balanceProof.lockedAmount.sub(s.lock.amount),locksroot:ml(Xb(f.own,i)),payment_identifier:s.payment_identifier,secret:t.sent[n.meta.secrethash].secret.value};c=Object(Kt["a"])(Ho(o,p,{log:a}))}return c.pipe(Object(Xu["a"])(e),Object(M["a"])((function(e){var t=Bb(e,2),r=t[0],a=t[1];return mt(a.sent[i].secret.registerBlock>0||s.lock.expiration.gt(a.blockNumber),"lock expired"),mt(!a.sent[i].channelClosed,"channel closed!"),xa.success({message:r,partner:l},n.meta)})))}function ty(e,t,n){var r=n.signer,a=n.log;return e.pipe(Object(F["a"])(),Object(W["a"])((function(n){return ey(e,n,t,{log:a,signer:r})})),Object(Xt["a"])((function(e){return a.warn("Error trying to unlock after SecretReveal",e),Object(C["a"])(xa.failure(e,t.meta))})))}function ny(e,t,n){var r=n.signer,a=n.log,o=t.meta.secrethash;mt(o in e.sent,"unknown transfer");var i,c=e.sent[o].transfer,s=c.token_network_address,u=e.sent[o].partner,l=Qb(e,{tokenNetwork:s,partner:u});if(e.sent[o].lockExpired)i=Object(C["a"])(e.sent[o].lockExpired);else{mt(c.lock.expiration.lt(e.blockNumber),"lock not yet expired"),mt(!e.sent[o].unlock,"transfer already unlocked");var f=ml(Xb(l.own,o)),p={type:Qn.LOCK_EXPIRED,message_identifier:Ol(),chain_id:c.chain_id,token_network_address:c.token_network_address,channel_identifier:c.channel_identifier,nonce:l.own.nextNonce,transferred_amount:l.own.balanceProof.transferredAmount,locked_amount:l.own.balanceProof.lockedAmount.sub(c.lock.amount),locksroot:f,recipient:u,secrethash:o};i=Object(Kt["a"])(Ho(r,p,{log:a}))}return i.pipe(Object(M["a"])((function(e){return Da.success({message:e,partner:u},t.meta)})))}function ry(e,t,n){var r=n.log,a=n.signer;return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){return ny(e,t,{signer:a,log:r})})),Object(Xt["a"])((function(e){return Object(C["a"])(Da.failure(e,t.meta))})))}function ay(e,t,n){var r=n.address,a=n.log,o=n.signer,i=n.config$,c=t.payload.message.lock.secrethash,s={secrethash:c,direction:ma.RECEIVED};return Object(ju["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=Bb(e,2),i=n[0],u=n[1],l=u.revealTimeout,f=u.caps,p=t.payload.message;if(c in i.received){a.warn("transfer already present",t.meta);var b=p.message_identifier;return i.received[c].partner===t.meta.address&&i.received[c].transfer.message_identifier.eq(b)?Object(C["a"])(ja({message:i.received[c].transferProcessed},s)):L["a"]}var y=p.token_network_address,m=t.meta.address,h=Qb(i,{tokenNetwork:y,partner:m},p);mt(p.nonce.eq(h.partner.nextNonce),"nonce mismatch");var v=[].concat(Hb(h.partner.locks),[p.lock]),g=ml(v);mt(p.locksroot===g,"locksroot mismatch"),mt(p.transferred_amount.eq(h.partner.balanceProof.transferredAmount),"transferredAmount mismatch"),mt(p.locked_amount.eq(Yb(v)),"lockedAmount mismatch");var O=Rc(h),w=O.partnerCapacity;mt(p.lock.amount.lte(w),"balanceProof total amount bigger than capacity"),mt(p.recipient===r,"Received transfer isn't for us"),a.info("Receiving transfer of value",p.lock.amount.toString(),"of token",h.token,", from",p.initiator,", through partner",m);var _=Object(C["a"])(void 0);!(null===f||void 0===f?void 0:f[Re.NO_RECEIVE])&&p.target===r&&p.lock.expiration.sub(l).gt(i.blockNumber)&&(_=Object(I["a"])((function(){var e={type:Qn.SECRET_REQUEST,payment_identifier:p.payment_identifier,secrethash:c,amount:p.lock.amount,expiration:p.lock.expiration,message_identifier:Ol()};return Ho(o,e,{log:a})})));var j=Object(I["a"])((function(){var e={type:Qn.PROCESSED,message_identifier:p.message_identifier};return Ho(o,e,{log:a})}));return Object(ju["a"])([j,_]).pipe(Object(W["a"])(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Bb(t,2),r=n[0],a=n[1],e.next=3,ka({message:p,fee:k["Zero"],partner:m},s);case 3:return e.next=5,ja({message:r},s);case 5:if(!a){e.next=10;break}return e.next=8,mr.request(void 0,{address:p.initiator});case 8:return e.next=10,Sa({message:a},s);case 10:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return Object(C["a"])(_a.failure(e,s))})))}function oy(e,t,n){var r=n.log,a=n.signer,o=hl(t.payload.message.secret),i={secrethash:o,direction:ma.RECEIVED};return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){if(!(o in e.received))return L["a"];var n=e.received[o],c=t.payload.message,s=t.meta.address;if(mt(s===n.partner,"wrong partner"),mt(!n.lockExpired,"already expired"),n.unlock)return r.warn("transfer already unlocked",t.meta),n.unlockProcessed&&n.unlockProcessed.message_identifier.eq(c.message_identifier)?Object(C["a"])(Na({message:n.unlockProcessed},i)):L["a"];var u=n.transfer;mt(c.token_network_address===u.token_network_address,"wrong tokenNetwork");var l=c.token_network_address,f=Qb(e,{tokenNetwork:l,partner:s},c);mt(c.nonce.eq(f.partner.nextNonce),"nonce mismatch");var p=u.lock.amount,b=Xb(f.partner,o);mt(c.locksroot===ml(b),"locksroot mismatch"),mt(c.transferred_amount.eq(f.partner.balanceProof.transferredAmount.add(p)),"transferredAmount mismatch"),mt(c.locked_amount.eq(Yb(b)),"lockedAmount mismatch");var y={type:Qn.PROCESSED,message_identifier:c.message_identifier};return Object(Kt["a"])(Ho(a,y,{log:r})).pipe(Object(W["a"])(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ea({secret:c.secret},i);case 2:return e.next=4,xa.success({message:c,partner:s},i);case 4:return e.next=6,Na({message:t},i);case 6:return e.next=8,_a.success({balanceProof:Fo(c)},i);case 8:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return r.warn("Error trying to process received Unlock",e),Object(C["a"])(xa.failure(e,i))})))}function iy(e,t,n){var r=n.log,a=n.signer,o=n.config$,i=t.payload.message.secrethash,c={secrethash:i,direction:ma.RECEIVED};return Object(ju["a"])([e,o]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n,o=Bb(e,2),s=o[0],u=o[1].confirmationBlocks;if(!(i in s.received))return L["a"];var l=s.received[i],f=t.payload.message,p=t.meta.address;if(mt(p===l.partner,"wrong partner"),mt(!l.unlock,"transfer unlocked"),l.lockExpired)return r.warn("transfer already expired",t.meta),l.lockExpiredProcessed&&l.lockExpiredProcessed.message_identifier.eq(f.message_identifier)?Object(C["a"])(Ra({message:l.lockExpiredProcessed},c)):L["a"];var b=l.transfer;mt(b.lock.expiration.add(u).lte(s.blockNumber),"expiration block not confirmed yet"),mt(!(null===(n=l.secret)||void 0===n?void 0:n.registerBlock),"secret registered onchain"),mt(f.token_network_address===b.token_network_address,"wrong tokenNetwork");var y=f.token_network_address,m=Qb(s,{tokenNetwork:y,partner:p},f);mt(f.nonce.eq(m.partner.nextNonce),"nonce mismatch");var h=Xb(m.partner,i);mt(f.locksroot===ml(h),"locksroot mismatch"),mt(f.locked_amount.eq(Yb(h)),"lockedAmount mismatch"),mt(f.transferred_amount.eq(m.partner.balanceProof.transferredAmount),"transferredAmount mismatch");var v={type:Qn.PROCESSED,message_identifier:f.message_identifier};return Object(Kt["a"])(Ho(a,v,{log:r})).pipe(Object(W["a"])(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Da.success({message:f,partner:p},c);case 2:return e.next=4,Ra({message:t},c);case 4:return e.next=6,_a.failure(new yt(dt.XFER_EXPIRED,{block:b.lock.expiration.toString()}),c);case 6:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return r.warn("Error trying to process received LockExpired",e),Object(C["a"])(Da.failure(e,c))})))}function cy(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.network,c=n.config$,s=n.latest$;return t.meta.direction!==ma.SENT?L["a"]:Object(ju["a"])([e,c,s]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n,c,s=Bb(e,3),u=s[0],l=s[1].revealTimeout,f=s[2].presences,p=Qb(u,t.meta);if(p.own.pendingWithdraws.some(Ab(Qn.WITHDRAW_REQUEST,t.meta)))return L["a"];mt(null===(c=null===(n=f[t.meta.partner])||void 0===n?void 0:n.payload)||void 0===c?void 0:c.available,dt.CNL_WITHDRAW_PARTNER_OFFLINE),mt(t.meta.expiration>=u.blockNumber+l,dt.CNL_WITHDRAW_EXPIRES_SOON),mt(t.meta.totalWithdraw.gt(p.own.withdraw),dt.CNL_WITHDRAW_AMOUNT_TOO_LOW),mt(t.meta.totalWithdraw.lte(Rc(p).ownTotalWithdrawable),dt.CNL_WITHDRAW_AMOUNT_TOO_HIGH);var d={type:Qn.WITHDRAW_REQUEST,message_identifier:Ol(),chain_id:Object(_["bigNumberify"])(i.chainId),token_network_address:t.meta.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(p.id),participant:a,total_withdraw:t.meta.totalWithdraw,nonce:p.own.nextNonce,expiration:Object(_["bigNumberify"])(t.meta.expiration)};return Object(Kt["a"])(Ho(o,d,{log:r})).pipe(Object(M["a"])((function(e){return La.request({message:e},t.meta)})))})),Object(Xt["a"])((function(e){return Object(C["a"])(Ia.failure(e,t.meta))})))}function sy(e,t,n){var r=n.address,a=t.payload.message,o=a.token_network_address,i=t.meta.address,c={direction:ma.SENT,tokenNetwork:o,partner:i,totalWithdraw:a.total_withdraw,expiration:a.expiration.toNumber()};return e.pipe(Object(F["a"])(),Object(M["a"])((function(e){return Qb(e,{tokenNetwork:o,partner:i},a),mt(a.participant===r,"participant mismatch"),La.success({message:a},c)})),Object(Xt["a"])((function(e){return Object(C["a"])(La.failure(e,c))})))}function uy(e,t,n){var r=n.log,a=n.address,o=n.signer,i=n.config$;return t.meta.direction!==ma.SENT?L["a"]:Object(ju["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=Bb(e,2),i=n[0],c=n[1].confirmationBlocks,s=Qb(i,t.meta);mt(!s.own.pendingWithdraws.some(Ab(Qn.WITHDRAW_EXPIRED,t.meta)),"already expired");var u=s.own.pendingWithdraws.find(Ab(Qn.WITHDRAW_REQUEST,t.meta));mt(u,"no matching WithdrawRequest found, maybe already confirmed"),mt(i.blockNumber>=t.meta.expiration+c,"not yet expired");var l={type:Qn.WITHDRAW_EXPIRED,message_identifier:Ol(),chain_id:u.chain_id,token_network_address:u.token_network_address,channel_identifier:u.channel_identifier,participant:a,total_withdraw:t.meta.totalWithdraw,nonce:s.own.nextNonce,expiration:u.expiration};return Object(Kt["a"])(Ho(o,l,{log:r})).pipe(Object(W["a"])(d.a.mark((function e(n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ua.success({message:n},t.meta);case 2:return e.next=4,Ia.failure(new yt(dt.CNL_WITHDRAW_EXPIRED),t.meta);case 4:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return Object(C["a"])(Ua.failure(e,t.meta))})))}function ly(e,t,n){var r=n.signer,a=n.log,o=t.payload.message,i=o.token_network_address,c=o.participant,s={direction:ma.RECEIVED,tokenNetwork:i,partner:c,totalWithdraw:o.total_withdraw,expiration:o.expiration.toNumber()};return e.pipe(Object(F["a"])(),Object(W["a"])((function(e){mt(o.participant===t.meta.address,"participant mismatch");var n,u=Qb(e,{tokenNetwork:i,partner:c},o),l=u.partner.pendingWithdraws.find(Ab(Qn.WITHDRAW_CONFIRMATION,o));if(l)n=Object(C["a"])(l);else{mt(o.nonce.eq(u.partner.nextNonce),"nonce mismatch"),mt(o.total_withdraw.lte(Rc(u).partnerTotalWithdrawable),"invalid total_withdraw");var f={type:Qn.WITHDRAW_CONFIRMATION,message_identifier:o.message_identifier,chain_id:o.chain_id,token_network_address:o.token_network_address,channel_identifier:o.channel_identifier,participant:o.participant,total_withdraw:o.total_withdraw,nonce:u.own.nextNonce,expiration:o.expiration};n=Object(Kt["a"])(Ho(r,f,{log:a}))}return n.pipe(Object(W["a"])(d.a.mark((function e(n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,La.request({message:o},s);case 2:return e.next=4,La.success({message:n},s);case 4:return e.next=6,ia.request({message:n},{address:c,msgId:t.payload.message.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return Object(C["a"])(La.failure(e,s))})))}function fy(e,t,n,r){var a=n.signer,o=n.log,i=n.config$,c=t.payload.message,s=c.token_network_address,u=c.participant,l={direction:ma.RECEIVED,tokenNetwork:s,partner:u,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()};return Object(ju["a"])([e,i]).pipe(Object(F["a"])(),Object(W["a"])((function(e){var n=Bb(e,2),i=n[0],f=n[1].confirmationBlocks;mt(u===t.meta.address,"participant mismatch");var p,b=Qb(i,{tokenNetwork:s,partner:u},c),y="".concat(Dc(b),"+").concat(c.message_identifier.toString()),m=r.get(y);if(m)p=Object(C["a"])(m);else{mt(c.nonce.eq(b.partner.nextNonce),"nonce mismatch"),mt(i.blockNumber>=l.expiration+f,"expire block not confirmed yet");var h={type:Qn.PROCESSED,message_identifier:c.message_identifier};p=Object(Kt["a"])(Ho(a,h,{log:o})).pipe(Object(Gi["a"])((function(e){return r.put(y,e)})))}return p.pipe(Object(W["a"])(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ua.success({message:c},l);case 2:return e.next=4,Ma(void 0,l);case 4:return e.next=6,ia.request({message:t},{address:u,msgId:t.message_identifier.toString()});case 6:case"end":return e.stop()}}),e)}))))})),Object(Xt["a"])((function(e){return Object(C["a"])(Ua.failure(e,l))})))}var py=function(e,t,n){Mb(t);var r=new Cd(32),a=n.latest$.pipe(bc("state"));return Object(P["a"])(e.pipe(Object(B["a"])($n([_a.request,xa.request,Da.request,Ia.request,Ua.request]))),e.pipe(Object(B["a"])(qo([Ft(Ur),Ft(Wr),Ft(Hr),Ft(Kr),Ft(Zr),Ft(Yr)])))).pipe(Object(tl["a"])((function(e){var t;switch(e.type){case _a.request.type:t=zb(a,e,n);break;case xa.request.type:t=ty(a,e,n);break;case Da.request.type:t=ry(a,e,n);break;case Ia.request.type:t=cy(a,e,n);break;case Ua.request.type:t=uy(a,e,n);break;case sa.type:switch(e.payload.message.type){case Qn.LOCKED_TRANSFER:t=ay(a,e,n);break;case Qn.UNLOCK:t=oy(a,e,n);break;case Qn.LOCK_EXPIRED:t=iy(a,e,n);break;case Qn.WITHDRAW_REQUEST:t=ly(a,e,n);break;case Qn.WITHDRAW_CONFIRMATION:t=sy(a,e,n);break;case Qn.WITHDRAW_EXPIRED:t=fy(a,e,n,r);break}break}return t})))};function dy(e,t){return vy(e)||hy(e,t)||yy(e,t)||by()}function by(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yy(e,t){if(e){if("string"===typeof e)return my(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?my(e,t):void 0}}function my(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function vy(e){if(Array.isArray(e))return e}function gy(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Oy=function(e,t){return gy(e),t.pipe(Object(F["a"])(),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=0,a=Object.entries(t.sent);case 1:if(!(r<a.length)){e.next=21;break}if(o=dy(a[r],2),i=o[0],c=o[1],s=i,!(c.unlockProcessed||c.lockExpiredProcessed||(null===(n=c.secret)||void 0===n?void 0:n.registerBlock)||c.channelClosed)){e.next=6;break}return e.abrupt("continue",18);case 6:return u={secrethash:s,direction:ma.SENT},e.next=9,mr.request(void 0,{address:c.transfer.target});case 9:if(c.transferProcessed){e.next=12;break}return e.next=12,ka({message:Bt(c.transfer),fee:c.fee,partner:c.partner},u);case 12:if(!c.unlock){e.next=15;break}return e.next=15,xa.success({message:Bt(c.unlock),partner:c.partner},u);case 15:if(!c.lockExpired){e.next=18;break}return e.next=18,Da.success({message:Bt(c.lockExpired),partner:c.partner},u);case 18:r++,e.next=1;break;case 21:case"end":return e.stop()}}),e)}))))},wy=function(e,t,n){gy(e);var r=n.config$;return t.pipe(Object(F["a"])(),Object(W["a"])((function(e){return Object(Kt["a"])(Object.entries(e.received))})),Object(B["a"])((function(e){var t,n=dy(e,2),r=n[1];return!r.unlock&&!r.lockExpired&&!(null===(t=r.secret)||void 0===t?void 0:t.registerBlock)&&!r.channelClosed})),Object(W["a"])((function(e){var t=dy(e,2),n=t[0],a=t[1],o={secrethash:n,direction:ma.RECEIVED};return Object(P["a"])(Object(C["a"])(ka({message:Bt(a.transfer),fee:a.fee,partner:a.partner},o)),a.secret&&!a.secretReveal?Object(C["a"])(Ea({secret:a.secret.value},o)):L["a"],a.secretReveal?Object(C["a"])(Aa({message:Bt(a.secretReveal)},o)):L["a"],!a.secret&&a.secretRequest?r.pipe(Object(Xi["a"])("caps",Re.NO_RECEIVE),Object(B["a"])((function(e){return!e})),Object(Zu["a"])(1),Object(el["a"])(Object(C["a"])(mr.request(void 0,{address:a.transfer.initiator}),Sa({message:Bt(a.secretRequest)},o)))):L["a"])})))};function _y(e,t){return Sy(e)||Ty(e,t)||jy(e,t)||ky()}function ky(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jy(e,t){if(e){if("string"===typeof e)return Ey(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ey(e,t):void 0}}function Ey(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ty(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Sy(e){if(Array.isArray(e))return e}var Ay=function(e,t,n){var r=n.address,a=n.config$;return e.pipe(Object(B["a"])(ka.is),Object(B["a"])((function(e){return e.meta.direction===ma.RECEIVED&&e.payload.message.target!==r})),Object(Xu["a"])(t,a),Object(B["a"])((function(e){var t=_y(e,3),n=t[0],r=t[1].sent,a=t[2].caps;return!(null===a||void 0===a?void 0:a[Re.NO_MEDIATE])&&!(n.meta.secrethash in r)})),Object(M["a"])((function(e){var t=_y(e,1),n=t[0],r=n.payload.message,a=n.meta.secrethash;return _a.request({tokenNetwork:r.token_network_address,target:r.target,value:r.lock.amount,paymentId:r.payment_identifier,paths:r.metadata.routes.map((function(e){var t=e.route;return{path:t.slice(1),fee:k["Zero"]}})),expiration:r.lock.expiration.toNumber(),initiator:r.initiator},{secrethash:a,direction:ma.SENT})})))};function xy(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Ny(e,t){return Iy(e)||Py(e,t)||Ry(e,t)||Dy()}function Dy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ry(e,t){if(e){if("string"===typeof e)return Cy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cy(e,t):void 0}}function Cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Py(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Iy(e){if(Array.isArray(e))return e}var Ly=function(e,t){return e.pipe(Object(B["a"])(qo(Ft(Er))),Object(Xu["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Ny(t,2),r=n[0],a=n[1],o=r.payload.message,i=void 0,c=0,s=Object.entries(a.sent);case 4:if(!(c<s.length)){e.next=12;break}if(u=Ny(s[c],2),l=u[0],f=u[1],!f.transfer.message_identifier.eq(o.message_identifier)||f.transfer.recipient!==r.meta.address){e.next=9;break}return i=l,e.abrupt("break",12);case 9:c++,e.next=4;break;case 12:if(i){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,ja({message:o},{secrethash:i,direction:ma.SENT});case 16:case"end":return e.stop()}}),e)}))))},Uy=function(e,t){return e.pipe(Object(B["a"])($n([ja,Na,Ra])),Object(B["a"])((function(e){return e.meta.direction===ma.RECEIVED})),Object(Xu["a"])(t),Object(M["a"])((function(e){var t=Ny(e,2),n=t[0],r=t[1].received;return ia.request({message:n.payload.message},{address:r[n.meta.secrethash].partner,msgId:n.payload.message.message_identifier.toString()})})))},My=function(e,t){return e.pipe(Object(B["a"])(qo(Ft(Er))),Object(Xu["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Ny(t,2),r=n[0],a=n[1],o=r.payload.message,i=$e()(a.sent,(function(e){return e.unlock&&e.unlock.message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return c={secrethash:i,direction:ma.SENT},e.next=8,_a.success({balanceProof:Fo(a.sent[i].unlock)},c);case 8:return e.next=10,Na({message:o},c);case 10:case"end":return e.stop()}}),e)}))))},By=function(e,t){return e.pipe(Object(B["a"])(qo(Ft(Er))),Object(Xu["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Ny(t,2),r=n[0],a=n[1],o=r.payload.message,i=$e()(a.sent,(function(e){return e.lockExpired&&e.lockExpired.message_identifier.eq(o.message_identifier)&&e.partner===r.meta.address})),i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Ra({message:o},{secrethash:i,direction:ma.SENT});case 7:case"end":return e.stop()}}),e)}))))},Fy=function(e,t,n){xy(t);var r=n.log,a=n.signer,o=new Cd(32);return e.pipe(Object(B["a"])(qo(Ft(Br))),Object(tl["a"])((function(e){var t=e.payload.message;return Object(I["a"])((function(){var n=t.message_identifier,i=n.toString(),c=o.get(i);if(c)return Object(C["a"])(ia.request({message:c},{address:e.meta.address,msgId:i}));var s={type:Qn.PROCESSED,message_identifier:n};return Object(Kt["a"])(Ho(a,s,{log:r})).pipe(Object(Gi["a"])((function(e){return o.put(i,e)})),Object(M["a"])((function(t){return ia.request({message:t},{address:e.meta.address,msgId:i})})))}))})))},Wy=n("ad3b"),$y=n.n(Wy);function Hy(e,t){return Zy(e)||Gy(e,t)||qy(e,t)||Vy()}function Vy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qy(e,t){if(e){if("string"===typeof e)return Ky(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ky(e,t):void 0}}function Ky(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gy(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Zy(e){if(Array.isArray(e))return e}function Xy(e,t){return $y()(e,t,(function(e,t){return St.is(e)?e.eq(t):St.is(t)?t.eq(e):void 0}))}var Yy=function(e,t){return e.pipe(Object(B["a"])(qo(Ft(Br))),Object(Xu["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Hy(t,2),r=n[0],a=n[1],o=r.payload.message,i=o.lock.secrethash,i in a.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=a.sent[i],s=c.transfer,o.initiator===s.recipient&&o.payment_identifier.eq(s.payment_identifier)&&Xy(o.lock,s.lock)){e.next=9;break}return e.abrupt("return");case 9:if(!(c.unlock||c.lockExpired||c.channelClosed||s.lock.expiration.lte(a.blockNumber))){e.next=11;break}return e.abrupt("return");case 11:return u={secrethash:i,direction:ma.SENT},e.next=14,Ca({message:o,partner:c.partner},u);case 14:return e.next=16,_a.failure(new yt(dt.XFER_REFUNDED),u);case 16:case"end":return e.stop()}}),e)}))))};function Qy(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function Jy(e,t){return rm(e)||nm(e,t)||em(e,t)||zy()}function zy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function em(e,t){if(e){if("string"===typeof e)return tm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tm(e,t):void 0}}function tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nm(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function rm(e){if(Array.isArray(e))return e}var am=function(e,t,n,r){return r.meta.direction!==ma.SENT?L["a"]:n.pipe(Object(F["a"])(),Object(ac["a"])((function(n){var a=n.pollingInterval,o=n.httpTimeout,i=r.meta.secrethash,c=r.payload.message,s=ia.request({message:c},{address:c.recipient,msgId:c.message_identifier.toString()}),u=t.pipe(bc("sent",i),Object(B["a"])((function(e){return!!(e.transferProcessed||e.unlockProcessed||e.lockExpiredProcessed||e.channelClosed)})));return Sb(s,e,u,Eb(a,2*o))})))},om=function(e,t,n,r){return r.meta.direction!==ma.SENT?L["a"]:t.pipe(Object(F["a"])(),Object(Xu["a"])(n),Object(ac["a"])((function(n){var a=Jy(n,2),o=a[0],i=a[1],c=i.pollingInterval,s=i.httpTimeout,u=r.meta.secrethash,l=r.payload.message,f=o.sent[u].transfer,p=ia.request({message:l},{address:f.recipient,msgId:l.message_identifier.toString()}),d=t.pipe(bc("sent",u),Object(B["a"])((function(e){return!(!e.unlockProcessed&&!e.channelClosed)})));return Sb(p,e,d,Eb(c,2*s))})))},im=function(e,t,n,r){return r.meta.direction!==ma.SENT?L["a"]:t.pipe(Object(F["a"])(),Object(Xu["a"])(n),Object(ac["a"])((function(n){var a=Jy(n,2),o=a[0],i=a[1],c=i.pollingInterval,s=i.httpTimeout,u=r.meta.secrethash,l=r.payload.message,f=ia.request({message:l},{address:o.sent[u].transfer.recipient,msgId:l.message_identifier.toString()}),p=t.pipe(bc("sent",u),Object(B["a"])((function(e){return!(!e.lockExpiredProcessed&&!e.channelClosed)})));return Sb(f,e,p,Eb(c,2*s))})))},cm=function(e,t,n,r){return r.meta.direction!==ma.RECEIVED?L["a"]:t.pipe(Object(F["a"])(),Object(Xu["a"])(n),Object(ac["a"])((function(n){var a=Jy(n,2),o=a[0],i=a[1],c=i.pollingInterval,s=i.httpTimeout,u=r.meta.secrethash,l=r.payload.message,f=ia.request({message:l},{address:o.received[u].transfer.initiator,msgId:l.message_identifier.toString()}),p=t.pipe(bc("received",u),Object(B["a"])((function(e){return!!(e.secretReveal||e.lockExpired||e.channelClosed)})));return Sb(f,e,p,Eb(c,2*s))})))},sm=function(e,t,n,r){return r.meta.direction!==ma.RECEIVED?L["a"]:t.pipe(Object(F["a"])(),Object(Xu["a"])(n),Object(ac["a"])((function(n){var a=Jy(n,2),o=a[0],i=a[1],c=i.pollingInterval,s=i.httpTimeout,u=r.meta.secrethash,l=r.payload.message,f=ia.request({message:l},{address:o.received[u].partner,msgId:l.message_identifier.toString()}),p=t.pipe(bc("received",u),Object(B["a"])((function(e){var t;return!!(e.unlock||(null===(t=e.secret)||void 0===t?void 0:t.registerBlock)||e.channelClosed)})));return Sb(f,e,p,Eb(c,2*s))})))},um=function(e,t,n){Qy(t);var r=n.latest$,a=n.config$,o=r.pipe(bc("state"));return e.pipe(Object(B["a"])($n([ka,xa.success,Da.success,Sa,Aa])),Object(W["a"])((function(t){return ka.is(t)?am(e,o,a,t):xa.success.is(t)?om(e,o,a,t):Da.success.is(t)?im(e,o,a,t):Sa.is(t)?cm(e,o,a,t):sm(e,o,a,t)})))};function lm(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function fm(e,t){return mm(e)||ym(e,t)||dm(e,t)||pm()}function pm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dm(e,t){if(e){if("string"===typeof e)return bm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bm(e,t):void 0}}function bm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ym(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function mm(e){if(Array.isArray(e))return e}var hm=function(e,t,n){var r=n.address,a=n.log;return e.pipe(Object(B["a"])(qo(Ft(Sr))),Object(Xu["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,o,i,c,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=fm(t,2),o=n[0],i=n[1],c=o.payload.message,c.secrethash in i.sent){e.next=4;break}return e.abrupt("return");case 4:if(s=i.sent[c.secrethash].transfer,s.initiator===r&&s.target===o.meta.address&&s.payment_identifier.eq(c.payment_identifier)){e.next=8;break}return a.warn("Invalid SecretRequest for transfer",c,s),e.abrupt("return");case 8:return e.next=10,Sa({message:c},{secrethash:c.secrethash,direction:ma.SENT});case 10:case"end":return e.stop()}}),e)}))))},vm=function(e,t,n){var r,a=n.signer,o=n.log,i=t.payload.message,c=t.meta.secrethash;if(!(null===(r=e.sent[c])||void 0===r?void 0:r.secret))return o.warn("SecretRequest for unknown secret",i,c),L["a"];var s,u=e.sent[c].transfer,l=u.target,f=e.sent[c].fee,p=u.lock.amount.sub(f);if(!i.expiration.lte(u.lock.expiration)||!i.expiration.gt(e.blockNumber))return o.error("SecretRequest for expired transfer",i,u),L["a"];if(i.amount.lt(p))return o.error("SecretRequest for amount too small!",i,u),Object(C["a"])(_a.failure(new yt(dt.XFER_INVALID_SECRETREQUEST),t.meta));if(i.amount.eq(p)||o.info("Accepted SecretRequest for amount different than sent",i,u),e.sent[t.meta.secrethash].secretReveal)s=Object(C["a"])(e.sent[t.meta.secrethash].secretReveal);else{var b={type:Qn.SECRET_REVEAL,message_identifier:Ol(),secret:e.sent[t.meta.secrethash].secret.value};s=Object(Kt["a"])(Ho(a,b,{log:o}))}return s.pipe(Object(W["a"])(d.a.mark((function e(n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Aa({message:n},t.meta);case 2:return e.next=4,ia.request({message:n},{address:l,msgId:n.message_identifier.toString()});case 4:case"end":return e.stop()}}),e)}))))},gm=function(e,t,n){lm(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])($n(Sa)),Object(B["a"])((function(e){return e.meta.direction===ma.SENT})),Object(tl["a"])((function(e){return o.pipe(bc("state")).pipe(Object(F["a"])(),Object(W["a"])((function(t){return vm(t,e,{log:r,signer:a})})))})))},Om=function(e,t){return e.pipe(Object(B["a"])(qo(xr)),Object(Xu["a"])(t),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=fm(t,2),r=n[0],a=n[1],o=r.payload.message,i=hl(o.secret),!(i in a.sent)){e.next=10;break}return c={secrethash:i,direction:ma.SENT},e.next=7,Ea({secret:o.secret},c);case 7:if(r.meta.address!==a.sent[i].partner||a.sent[i].channelClosed||a.sent[i].unlock){e.next=10;break}return e.next=10,xa.request(void 0,c);case 10:if(!(i in a.received)){e.next=13;break}return e.next=13,Ea({secret:o.secret},{secrethash:i,direction:ma.RECEIVED});case 13:case"end":return e.stop()}}),e)}))))},wm=function(e,t,n){lm(t);var r=n.log,a=n.signer,o=n.latest$;return e.pipe(Object(B["a"])($n([Ea,Ta.success])),Object(B["a"])((function(e){return e.meta.direction===ma.RECEIVED})),Object(tl["a"])((function(e){return o.pipe(bc("state"),Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.received;return!(null===(n=r[e.meta.secrethash])||void 0===n?void 0:n.secretReveal)})),Object(W["a"])((function(){var t={type:Qn.SECRET_REVEAL,message_identifier:Ol(),secret:e.payload.secret};return Ho(a,t,{log:r})})),Object(M["a"])((function(t){return Aa({message:t},e.meta)})),Object(Xt["a"])((function(t){return r.warn("Error trying to sign SecretReveal - ignoring",t,e.meta),L["a"]})))})))},_m=function(e,t,n){lm(e);var r=n.provider,a=n.secretRegistryContract,o=n.config$;return o.pipe(bc("confirmationBlocks"),Object(ac["a"])((function(e){return sn(r,a.filters.SecretRevealed(null,null),void 0,e)})),Object(M["a"])(un(a)),Object(B["a"])(Tt),Object(Xu["a"])(t,o),Object(B["a"])((function(e){var t=fm(e,2),n=fm(t[0],3),r=n[0],a=n[2].blockNumber,o=t[1],i=o.sent,c=o.received;return!!a&&(r in i&&i[r].transfer.lock.expiration.gte(a)||r in c&&c[r].transfer.lock.expiration.gte(a))})),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f,p,b,y,m;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=fm(t,3),r=fm(n[0],3),a=r[0],o=r[1],i=r[2],c=n[1],s=c.blockNumber,u=c.sent,l=c.received,f=n[2].confirmationBlocks,p=[],a in u&&u[a].transfer.lock.expiration.gte(i.blockNumber)&&p.push(ma.SENT),a in l&&l[a].transfer.lock.expiration.gte(i.blockNumber)&&p.push(ma.RECEIVED),b=0,y=p;case 5:if(!(b<y.length)){e.next=12;break}return m=y[b],e.next=9,Ta.success({secret:o,txHash:i.transactionHash,txBlock:i.blockNumber,confirmed:i.blockNumber+f<=s||void 0},{secrethash:a,direction:m});case 9:b++,e.next=5;break;case 12:case"end":return e.stop()}}),e)}))))},km=function(e){return e.pipe(Object(B["a"])(Ta.success.is),Object(B["a"])((function(e){return!!e.payload.confirmed})),Object(M["a"])((function(e){return _a.success({},e.meta)})))},jm=function(e,t,n){var r=n.config$,a=n.latest$;return t.pipe(bc(ma.RECEIVED),Object(W["a"])((function(e){return Object(Kt["a"])(Object.keys(e))})),Object(sd["a"])(),Object(W["a"])((function(t){return e.pipe(Object(B["a"])(ar.is),Object(Xu["a"])(a.pipe(Object(Xi["a"])("state",ma.RECEIVED,t)),r),Object(B["a"])((function(e){var t,n=fm(e,3),r=n[0],a=n[1],o=n[2],i=o.revealTimeout,c=o.caps;return!(null===c||void 0===c?void 0:c[Re.NO_RECEIVE])&&!!a.secret&&a.transfer.lock.expiration.sub(i).lt(r.payload.blockNumber)&&!(null===(t=a.secret)||void 0===t?void 0:t.registerBlock)&&!a.unlock})),Object(Zt["a"])((function(n){var r=fm(n,2),a=r[1],o={secrethash:t,direction:ma.RECEIVED};return Tb(e,Ta.request({secret:a.secret.value},o),Gn(Ta,o))})),Object(Qi["a"])(a.pipe(bc("state"),Object(B["a"])((function(e){var n,r=e.blockNumber,a=e.received[t],o=a.transfer.lock.expiration;return!!(o.lt(r)||a.unlock||(null===(n=a.secret)||void 0===n?void 0:n.registerBlock))})))))})))},Em=function(e,t,n){lm(t);var r=n.log,a=n.signer,o=n.address,i=n.main,c=n.provider,s=n.secretRegistryContract,u=n.config$;return e.pipe(Object(B["a"])(Ta.request.is),Object(Xu["a"])(u),Object(W["a"])((function(e){var t,n=fm(e,2),u=n[0],l=n[1].subkey,f=af({signer:a,address:o,main:i},null!==(t=u.payload.subkey)&&void 0!==t?t:l),p=f.signer,d=of(s,p);return Object(I["a"])((function(){return d.functions.registerSecret(u.payload.secret)})).pipe(Cc("registerSecret",dt.XFER_REGISTERSECRET_TX_FAILED,{log:r}),Lc(c.pollingInterval,void 0,void 0,{log:r}),Object(zu["a"])(),Object(Xt["a"])((function(e){return Object(C["a"])(Ta.failure(e,u.meta))})))})))};function Tm(e,t){return xm(e)||Am(e,t)||Dm(e,t)||Sm()}function Sm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Am(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function xm(e){if(Array.isArray(e))return e}function Nm(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Dm(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Dm(e,t){if(e){if("string"===typeof e)return Rm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rm(e,t):void 0}}function Rm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cm(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Pm=function(e,t){return Cm(e),t.pipe(Object(F["a"])(),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.values(t.channels);case 1:if(!(n<r.length)){e.next=31;break}if(a=r[n],a.state===Ro.open){e.next=5;break}return e.abrupt("continue",28);case 5:o=Nm(a.own.pendingWithdraws),e.prev=6,o.s();case 8:if((i=o.n()).done){e.next=20;break}if(c=i.value,c.type!==Qn.WITHDRAW_REQUEST||a.own.pendingWithdraws.some(Ab(Qn.WITHDRAW_CONFIRMATION,c))){e.next=15;break}return e.next=13,La.request({message:c},{direction:ma.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 13:e.next=18;break;case 15:if(c.type!==Qn.WITHDRAW_EXPIRED){e.next=18;break}return e.next=18,Ua.success({message:c},{direction:ma.SENT,tokenNetwork:a.tokenNetwork,partner:a.partner.address,totalWithdraw:c.total_withdraw,expiration:c.expiration.toNumber()});case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](6),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:n++,e.next=1;break;case 31:case"end":return e.stop()}}),e,null,[[6,22,25,28]])}))))},Im=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(La.request.is),Object(B["a"])((function(e){return e.meta.direction===ma.SENT})),Object(Xu["a"])(r),Object(W["a"])((function(n){var r=Tm(n,2),a=r[0],o=r[1],i=o.pollingInterval,c=o.httpTimeout,s=a.payload.message,u=ia.request({message:s},{address:a.meta.partner,msgId:s.message_identifier.toString()}),l=t.pipe(Object(B["a"])((function(e){var t=e.channels[Nc(a.meta)];return(null===t||void 0===t?void 0:t.state)!==Ro.open||t.own.pendingWithdraws.some(Ab(Qn.WITHDRAW_CONFIRMATION,a.meta))||!t.own.pendingWithdraws.some(Ab(Qn.WITHDRAW_REQUEST,a.meta))})));return Sb(u,e,l,Eb(i,2*c))})))},Lm=function(e,t,n){Cm(t);var r=n.address,a=n.signer,o=n.main,i=n.provider,c=n.log,s=n.getTokenNetworkContract,u=n.latest$;return e.pipe(Object(B["a"])(La.success.is),Object(B["a"])((function(e){return e.meta.direction===ma.SENT})),Object(tl["a"])((function(e){return u.pipe(Object(F["a"])(),Object(W["a"])((function(t){var n=t.state,u=t.config,l=u.subkey,f=u.revealTimeout;mt(e.meta.expiration>=n.blockNumber+f,dt.CNL_WITHDRAW_EXPIRES_SOON);var p=n.channels[Nc(e.meta)];mt((null===p||void 0===p?void 0:p.state)===Ro.open,"channel not open"),mt(e.meta.totalWithdraw.gt(p.own.withdraw),"withdraw already performed");var d=p.own.pendingWithdraws.find(Ab(Qn.WITHDRAW_REQUEST,e.payload.message));mt(d,"no matching WithdrawRequest found");var b=e.meta.tokenNetwork,y=af({signer:a,address:r,main:o},l),m=y.signer,h=of(s(b),m);return Object(I["a"])((function(){return h.functions.setTotalWithdraw(p.id,r,e.meta.totalWithdraw,e.meta.expiration,d.signature,e.payload.message.signature)})).pipe(Cc("setTotalWithdraw",dt.CNL_WITHDRAW_TRANSACTION_FAILED,{log:c}),Lc(i.pollingInterval,void 0,void 0,{log:c}))})),Object(M["a"])((function(t){var n=Tm(t,2),r=n[1];return Ia.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object(Xt["a"])((function(t){return Object(C["a"])(Ia.failure(t,e.meta))})))})))},Um=function(e,t,n){Cm(t);var r=n.signer,a=n.log,o=n.latest$,i=new Cd(32);return e.pipe(Object(B["a"])($n([La.request,La.success])),Object(B["a"])((function(e){return e.meta.direction===ma.RECEIVED!==La.success.is(e)})),Object(tl["a"])((function(e){return o.pipe(Object(F["a"])(),Object(B["a"])((function(t){var n,r=t.presences;return e.meta.partner in r&&!(null===(n=r[e.meta.partner].payload.caps)||void 0===n?void 0:n[Re.NO_DELIVERY])})),Object(W["a"])((function(){var t,n=e.payload.message,o=n.message_identifier.toString(),c=i.get(o);if(c)t=Object(C["a"])(c);else{var s={type:Qn.PROCESSED,message_identifier:n.message_identifier};t=Object(Kt["a"])(Ho(r,s,{log:a})).pipe(Object(Gi["a"])((function(e){return i.put(o,e)})))}return t.pipe(Object(M["a"])((function(t){return ia.request({message:t},{address:e.meta.partner,msgId:t.message_identifier.toString()})})))})),Object(Xt["a"])((function(e){return a.info("Signing Processed message for Withdraw message failed, ignoring",e),L["a"]})))})))},Mm=function(e,t,n){var r=n.config$;return e.pipe(Object(B["a"])(ar.is),Object(Xi["a"])("payload","blockNumber"),Object(Xu["a"])(t,r),Object(W["a"])(d.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f,p;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Tm(t,3),r=n[0],a=n[1],o=n[2].confirmationBlocks,i=0,c=Object.values(a.channels);case 2:if(!(i<c.length)){e.next=31;break}if(s=c[i],s.state===Ro.open){e.next=6;break}return e.abrupt("continue",28);case 6:u=s.own.pendingWithdraws.filter(Ab(Qn.WITHDRAW_REQUEST)),l=Nm(u),e.prev=8,l.s();case 10:if((f=l.n()).done){e.next=20;break}if(p=f.value,!p.expiration.add(o).gt(r)){e.next=14;break}return e.abrupt("continue",18);case 14:if(!s.own.pendingWithdraws.some(Ab(Qn.WITHDRAW_EXPIRED,p))){e.next=16;break}return e.abrupt("continue",18);case 16:return e.next=18,Ua.request(void 0,{direction:ma.SENT,tokenNetwork:s.tokenNetwork,partner:s.partner.address,expiration:p.expiration.toNumber(),totalWithdraw:p.total_withdraw});case 18:e.next=10;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](8),l.e(e.t0);case 25:return e.prev=25,l.f(),e.finish(25);case 28:i++,e.next=2;break;case 31:case"end":return e.stop()}}),e,null,[[8,22,25,28]])}))))},Bm=function(e,t,n){Cm(t);var r=n.config$;return e.pipe(Object(B["a"])(Ua.success.is),Object(B["a"])((function(e){return e.meta.direction===ma.SENT})),Object(Xu["a"])(r),Object(W["a"])((function(t){var n=Tm(t,2),r=n[0],a=n[1],o=a.pollingInterval,i=a.httpTimeout,c=r.payload.message,s=ia.request({message:c},{address:r.meta.partner,msgId:c.message_identifier.toString()}),u=e.pipe(Object(B["a"])(qo(Ft(Er))),Object(B["a"])((function(e){return e.meta.address===r.meta.partner&&e.payload.message.message_identifier.eq(c.message_identifier)})),Object(Ji["a"])(Ma(void 0,r.meta)),Object(Zu["a"])(1),Object(Du["a"])());return Object(P["a"])(Sb(s,e,u,Eb(o,2*i)),u)})))},Fm=n("e68e"),Wm=n("bbb8");function $m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$m(Object(n),!0).forEach((function(t){Vm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qm(e,t){return Ym(e)||Xm(e,t)||Gm(e,t)||Km()}function Km(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gm(e,t){if(e){if("string"===typeof e)return Zm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zm(e,t):void 0}}function Zm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xm(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ym(e){if(Array.isArray(e))return e}function Qm(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Jm(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Qm(o,r,a,i,c,"next",e)}function c(e){Qm(o,r,a,i,c,"throw",e)}i(void 0)}))}}function zm(e,t,n,r,a,o){var i;if(!(r in t)||!t[r].payload.available)return'path: partner "'.concat(r,'" not available in transport');if(a!==r&&(null===(i=t[r].payload.caps)||void 0===i?void 0:i[Re.NO_MEDIATE]))return'path: partner "'.concat(r,"\" doesn't mediate transfers");var c=e.channels[Nc({tokenNetwork:n,partner:r})];if(!c)return"path: there's no direct channel with partner \"".concat(r,'"');if(c.state!==Ro.open)return'path: channel with "'.concat(r,'" in state "').concat(c.state,'" instead of "').concat(Ro.open,'"');var s=Rc(c),u=s.ownCapacity;return!u.lt(o)||'path: channel with "'.concat(r,"\" doesn't have enough capacity=").concat(u.toString())}var eh=N()(function(){var e=Jm(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.functions.token());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function th(e,t){var n=t.serviceRegistryContract,r=t.network,a=t.contractsInfo,o=t.config$,i=Ie["u"]({message:Ie["r"],network_info:Ie["u"]({chain_id:Ie["k"](r.chainId),token_network_registry_address:Ie["k"](a.TokenNetworkRegistry.address)}),operator:Ie["r"],payment_address:Lt,price_info:Nt(32),version:Ie["r"]}),c=Lt.is(e)?Object(Kt["a"])(n.functions.urls(e)):Object(C["a"])(e);return c.pipe(Object(Xu["a"])(o),Object(W["a"])((function(e){var t=qm(e,2),r=t[0],a=t[1],o=a.httpTimeout,c=a.pfsMaxFee;if(!r)throw new yt(dt.PFS_EMPTY_URL);if(!ff(r))throw new yt(dt.PFS_INVALID_URL,{url:r});r.startsWith("https://")||r.startsWith("http://")||(r="https://".concat(r));var s=Date.now();return Object(ep["a"])(r+"/api/v1/info").pipe(Object(Jf["a"])(o),Object(W["a"])(function(){var e=Jm(d.a.mark((function e(t){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Et,e.t1=i,e.t2=ko,e.next=5,t.text();case 5:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t5=(0,e.t0)(e.t1,e.t4),e.next=10,eh(n);case 10:return e.t6=e.sent,e.abrupt("return",[e.t5,e.t6]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(M["a"])((function(e){var t=qm(e,2),n=t[0],a=t[1];return mt(n.price_info.lte(c),[dt.PFS_TOO_EXPENSIVE,{price:n.price_info.toString()}]),{address:n.payment_address,url:r,rtt:Date.now()-s,price:n.price_info,token:a}})))})))}function nh(e,t){var n=t.log;return Object(Kt["a"])(e).pipe(Object(W["a"])((function(e){return th(e,t).pipe(Object(Xt["a"])((function(t){return n.warn('Error trying to fetch PFS info for "'.concat(e,'" - ignoring:'),t),L["a"]})))}),5),Object(Yf["a"])(),Object(M["a"])((function(e){if(!e.length)throw new yt(dt.PFS_INVALID_INFO);return e.sort((function(e,t){var n=e.price.sub(t.price);return n.lt(0)?-1:n.gt(0)?1:e.rtt-t.rtt}))})))}function rh(e){return Object(_["concat"])([wo(e.one_to_n_address,20),wo(e.chain_id,32),wo(Do.IOU,32),wo(e.sender,20),wo(e.receiver,20),wo(e.amount,32),wo(e.expiration_block,32)])}function ah(e,t){return oh.apply(this,arguments)}function oh(){return oh=Jm(d.a.mark((function e(t,n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.signMessage(rh(n)).then((function(e){return Hm(Hm({},n),{},{signature:e})})));case 1:case"end":return e.stop()}}),e)}))),oh.apply(this,arguments)}function ih(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=gh(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function ch(e){return lh(e)||uh(e)||gh(e)||sh()}function sh(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uh(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function lh(e){if(Array.isArray(e))return Oh(e)}function fh(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ph(Object(n),!0).forEach((function(t){bh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ph(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yh(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function mh(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){yh(o,r,a,i,c,"next",e)}function c(e){yh(o,r,a,i,c,"throw",e)}i(void 0)}))}}function hh(e,t){return _h(e)||wh(e,t)||gh(e,t)||vh()}function vh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gh(e,t){if(e){if("string"===typeof e)return Oh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oh(e,t):void 0}}function Oh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wh(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function _h(e){if(Array.isArray(e))return e}var kh=Ie["o"](Ie["u"]({error_code:Ie["m"],errors:Ie["r"]}));function jh(e){return(null!==e&&void 0!==e?e:new Date).toISOString().substr(0,19)}function Eh(e,t,n){var r=n.address,a=n.signer,o=n.network,i=n.contractsInfo,c=n.latest$,s=n.config$;return Object(I["a"])((function(){var t=jh(),n=Object(_["concat"])([r,e.address,Object(_["toUtf8Bytes"])(t)]);return Object(Kt["a"])(a.signMessage(n)).pipe(Object(M["a"])((function(n){return{sender:r,receiver:e.address,timestamp:t,signature:n}})))})).pipe(Object(Xu["a"])(s),Object(W["a"])((function(n){var r=hh(n,2),a=r[0],o=r[1].httpTimeout;return Object(ep["a"])("".concat(e.url,"/api/v1/").concat(t,"/payment/iou?").concat(new URLSearchParams(a).toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).pipe(Object(Jf["a"])(o))})),Object(Xu["a"])(c.pipe(Object(Xi["a"])("state","blockNumber")),s),Object(W["a"])(function(){var t=mh(d.a.mark((function t(n){var a,c,s,u,l,f,p,b;return d.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=hh(n,3),c=a[0],s=a[1],u=a[2].pfsIouTimeout,404!==c.status){t.next=3;break}return t.abrupt("return",{sender:r,receiver:e.address,chain_id:Object(_["bigNumberify"])(o.chainId),amount:k["Zero"],one_to_n_address:i.OneToN.address,expiration_block:Object(_["bigNumberify"])(s).add(u)});case 3:return t.next=5,c.text();case 5:if(l=t.sent,c.ok){t.next=8;break}throw new yt(dt.PFS_LAST_IOU_REQUEST_FAILED,{responseStatus:c.status,responseText:l});case 8:if(f=Et(ya,ko(l)),p=f.last_iou,b=Object(_["verifyMessage"])(rh(p),p.signature),b===r){t.next=12;break}throw new yt(dt.PFS_IOU_SIGNATURE_MISMATCH,{signer:b,address:r});case 12:return t.abrupt("return",p);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}function Th(e,t,n){return n.latest$.pipe(Object(F["a"])(),Object(W["a"])((function(r){var a,o=r.state,i=null===(a=o.iou[t])||void 0===a?void 0:a[e.address];return i?Object(C["a"])(i):Eh(e,t,n)})),Object(M["a"])((function(t){return dh(dh({},t),{},{amount:t.amount.add(e.price)})})),Object(W["a"])((function(e){return ah(n.signer,e)})))}var Sh=function(e,t,n){return fh(t),e.pipe(Object(B["a"])($n(Wa.request)),Object(tl["a"])((function(t){return n.latest$.pipe(Object(F["a"])(),Object(W["a"])((function(r){var a,o,i=t.meta.target;return i in r.presences?(a=L["a"],o=Object(C["a"])(r)):(a=Object(C["a"])(mr.request(void 0,{address:i})),o=Fh(e,n,i)),Object(P["a"])(o.pipe(Object(W["a"])((function(e){return Wh(t,n,e)})),Object(Xu["a"])(n.latest$),Object(W["a"])((function(e){var r=hh(e,2),a=r[0],o=r[1];return $h(t,n,a,o)})),Object(Xt["a"])((function(e){return Object(C["a"])(Wa.failure(e,t.meta))}))),a)})))})))},Ah=function(e,t,n){fh(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Uc,Object(W["a"])((function(e){return e.pipe(Object(Fm["a"])(),Object(Xu["a"])(c),Object(B["a"])((function(e){var t=hh(e,2),n=hh(t[0],2),r=n[1],a=t[1].pfsRoom;return r.state===Ro.open&&!!a})),Object(Wm["a"])((function(e){var t=hh(e,2),n=hh(t[0],2),r=n[0],a=n[1],o=t[1].httpTimeout;return a.own.locks.length>r.own.locks.length||a.partner.locks.length>r.partner.locks.length?Object(qi["a"])(o):Object(C["a"])(1)})),Object(ac["a"])((function(e){var t=hh(e,2),n=hh(t[0],2),c=n[1],s=t[1],u=s.revealTimeout,l=s.pfsRoom,f=c.tokenNetwork,p=c.partner.address,d=Rc(c),b=d.ownCapacity,y=d.partnerCapacity,m={type:Qn.PFS_CAPACITY_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:f,channel_identifier:Object(_["bigNumberify"])(c.id)},updating_participant:a,other_participant:p,updating_nonce:c.own.balanceProof.nonce,other_nonce:c.partner.balanceProof.nonce,updating_capacity:b,other_capacity:y,reveal_timeout:Object(_["bigNumberify"])(u)};return Object(I["a"])((function(){return Ho(i,m,{log:r})})).pipe(Object(M["a"])((function(e){return ca({message:e},{roomName:l})})),Object(Xt["a"])((function(e){return r.error("Error trying to generate & sign PFSCapacityUpdate",e),L["a"]})))})))})))},xh=function(e,t,n){fh(e);var r=n.log,a=n.address,o=n.network,i=n.signer,c=n.config$;return t.pipe(Uc,Object(W["a"])((function(e){return e.pipe(Object(F["a"])())})),Object(Xu["a"])(c),Object(B["a"])((function(e){var t=hh(e,2),n=t[0],r=t[1],a=r.pfsRoom,o=r.caps;return n.state===Ro.open&&!!a&&!(null===o||void 0===o?void 0:o[Re.NO_MEDIATE])})),Object(W["a"])((function(e){var t=hh(e,2),n=t[0],c=t[1].pfsRoom,s={type:Qn.PFS_FEE_UPDATE,canonical_identifier:{chain_identifier:Object(_["bigNumberify"])(o.chainId),token_network_address:n.tokenNetwork,channel_identifier:Object(_["bigNumberify"])(n.id)},updating_participant:a,timestamp:jh(),fee_schedule:{cap_fees:!0,imbalance_penalty:null,proportional:k["Zero"],flat:k["Zero"]}};return Object(Kt["a"])(Ho(i,s,{log:r})).pipe(Object(M["a"])((function(e){return ca({message:e},{roomName:c})})),Object(Xt["a"])((function(e){return r.error("Error trying to generate & sign PFSFeeUpdate",e),L["a"]})))})))},Nh=function(e,t,n){fh(e),fh(t);var r=n.provider,a=n.serviceRegistryContract,o=n.contractsInfo,i=n.config$,c=n.latest$;return Object(ju["a"])([i.pipe(bc("pfs")),i.pipe(bc("confirmationBlocks"))]).pipe(Object(ac["a"])((function(e){var t=hh(e,2),n=t[0],i=t[1];return""!==n&&void 0!==n?L["a"]:sn(r,a.filters.RegisteredService(null,null,null,null),void 0,i,o.ServiceRegistry.block_number).pipe(Object(Xu["a"])(c),Object(B["a"])((function(e){var t=hh(e,2),n=t[0].blockNumber,r=t[1].state;return!!n&&n+i<=r.blockNumber})),Object(Xi["a"])(0),Object(M["a"])(un(a)),Object(B["a"])(Tt)).pipe(Object(Yi["a"])((function(e){var t=hh(e,1),n=t[0];return n})),Object(W["a"])((function(e){return e.pipe(Object(ac["a"])((function(e){var t=hh(e,2),n=t[0],r=t[1],a=Date.now(),o=r.mul(1e3);if(o.lt(a))return L["a"];var i=o.sub(a).lt(k["Two"].pow(31))?Object(C["a"])({service:n,valid:!1}).pipe(Object(Qf["a"])(new Date(o.toNumber()))):L["a"];return Object(P["a"])(Object(C["a"])({service:n,valid:!0}),i)})))})),Object(tc["a"])((function(e,t){var n=t.service,r=t.valid;return!r&&e.includes(n)?e.filter((function(e){return e!==n})):r&&!e.includes(n)?[].concat(ch(e),[n]):e}),[]),Object(ec["a"])(),Object(Gt["a"])(1e3),Object(M["a"])((function(e){return $a({pfsList:e})})))})))},Dh=function(e,t,n){fh(e),fh(t);var r=n.address,a=n.latest$,o=n.userDepositContract;return a.pipe(bc("state","blockNumber"),Object(Zt["a"])((function(){return o.functions.effectiveBalance(r)})),Object(Xu["a"])(a),Object(B["a"])((function(e){var t=hh(e,2),n=t[0],r=t[1].udcBalance;return!r.eq(n)})),Object(M["a"])((function(e){var t=hh(e,1),n=t[0];return qa.success(void 0,{totalDeposit:n})})))};function Rh(e,t,n,r,a){var o=hh(e,2),i=o[0],c=o[1],s=hh(t,2),u=s[0],l=s[1],f=hh(n,2),p=f[0],d=f[1],b=r.pollingInterval,y=r.minimumAllowance,m=a.log;return Object(I["a"])((function(){return Promise.all([i.functions.balanceOf(u),i.functions.allowance(u,c.address),c.functions.effectiveBalance(l)])})).pipe(Object(W["a"])((function(e){var t=hh(e,3),n=t[0],r=t[1],a=t[2];return mt(a.add(p).eq(d),[dt.UDC_DEPOSIT_OUTDATED,{requested:d.toString(),current:a.toString()}]),Mc([n,r,p],i,c.address,dt.RDN_APPROVE_TRANSACTION_FAILED,{log:m,minimumAllowance:y})})),Object(W["a"])((function(){return c.functions.deposit(l,d)})),Cc("deposit",dt.RDN_DEPOSIT_TRANSACTION_FAILED,{log:m}),Lc(b,void 0,void 0,{log:m}))}var Ch=function(e,t,n){fh(t);var r=n.userDepositContract,a=n.getTokenContract,o=n.address,i=n.log,c=n.signer,s=n.main,u=n.config$,l=r.functions.token();return e.pipe(Object(B["a"])(qa.request.is),Object(tl["a"])((function(e){return Object(I["a"])((function(){return l})).pipe(Object(Xu["a"])(u),Object(W["a"])((function(t){var n,u=hh(t,2),l=u[0],f=u[1],p=af({signer:c,address:o,main:s},null!==(n=e.payload.subkey)&&void 0!==n?n:f.subkey),d=p.signer,b=p.address,y=of(a(l),d),m=of(r,d);return Rh([y,m],[b,o],[e.payload.deposit,e.meta.totalDeposit],f,{log:i})})),Object(M["a"])((function(t){var n=hh(t,2),r=n[1];return qa.success({txHash:r.transactionHash,txBlock:r.blockNumber,confirmed:void 0},e.meta)})),Object(Xt["a"])((function(t){return Object(C["a"])(qa.failure(t,e.meta))})))})))};function Ph(e){var t=e.address,n=e.log,r=e.network,a=e.signer,o=e.contractsInfo,i=e.latest$,c=e.config$;return function(e){var s=hh(e,2),u=s[1],l=Rc(u),f=l.partnerUnlocked;return f.isZero()?L["a"]:Object(ju["a"])([i,c]).pipe(Object(B["a"])((function(e){var t,n,r=hh(e,2),a=r[0].udcBalance,o=r[1],i=o.monitoringRoom,c=o.monitoringReward,s=o.rateToSvt;return!!i&&!!(null===(t=null===c||void 0===c?void 0:c.gt)||void 0===t?void 0:t.call(c,k["Zero"]))&&a.gte(c)&&f.mul(null!==(n=s[u.token])&&void 0!==n?n:k["MaxUint256"]).div(k["WeiPerEther"]).gt(c)})),Object(Zu["a"])(1),Object(W["a"])((function(e){var i=hh(e,2),c=i[1],s=c.monitoringReward,l=c.monitoringRoom,f=u.partner.balanceProof,p=Io(f),d=Object(_["concat"])([wo(u.tokenNetwork,20),wo(r.chainId,32),wo(Do.BALANCE_PROOF_UPDATE,32),wo(u.id,32),wo(p,32),wo(f.nonce,32),wo(f.additionalHash,32),wo(f.signature,65)]);return Object(Kt["a"])(a.signMessage(d)).pipe(Object(W["a"])((function(e){return Ho(a,{type:Qn.MONITOR_REQUEST,balance_proof:{chain_id:f.chainId,token_network_address:f.tokenNetworkAddress,channel_identifier:Object(_["bigNumberify"])(u.id),nonce:f.nonce,balance_hash:p,additional_hash:f.additionalHash,signature:f.signature},non_closing_participant:t,non_closing_signature:e,monitoring_service_contract_address:o.MonitoringService.address,reward_amount:s},{log:n})})),Object(M["a"])((function(e){return ca({message:e},{roomName:l})})))})),Object(Xt["a"])((function(e){return n.error("Error trying to generate & sign MonitorRequest",e),L["a"]})))}}var Ih=function(e,t,n){return fh(e),fh(t),n.latest$.pipe(Object(Xi["a"])("state"),Uc,Object(Xu["a"])(n.config$),Object(W["a"])((function(e){var t=hh(e,2),r=t[0],a=t[1].httpTimeout;return r.pipe(Object(ec["a"])((function(e,t){return t.partner.balanceProof.transferredAmount.eq(e.partner.balanceProof.transferredAmount)&&t.partner.balanceProof.lockedAmount.eq(e.partner.balanceProof.lockedAmount)&&t.partner.locks===e.partner.locks})),Object(Fm["a"])(),Object(Wm["a"])((function(e){var t=hh(e,2),n=t[0],r=t[1];return r.partner.locks.length>n.partner.locks.length?Object(qi["a"])(a):Object(C["a"])(1)})),Object(ac["a"])(Ph(n)))})))},Lh=function(e,t,n){var r=n.userDepositContract,a=n.address,o=n.log,i=n.signer,c=n.provider;return e.pipe(Object(B["a"])(Ga.request.is),Object(W["a"])((function(e){return r.functions.balances(a).then((function(t){return[e,t]}))})),Object(tl["a"])((function(e){var n=hh(e,2),s=n[0],u=n[1],l=of(r,i),f=s.meta.amount;return Object(I["a"])((function(){return mt(f.gt(k["Zero"]),[dt.UDC_PLAN_WITHDRAW_GT_ZERO,{amount:f.toString()}]),mt(u.sub(f).gte(k["Zero"]),[dt.UDC_PLAN_WITHDRAW_EXCEEDS_AVAILABLE,{balance:u.toString(),amount:f.toString()}]),l.functions.planWithdraw(f)})).pipe(Cc("planWithdraw",dt.UDC_PLAN_WITHDRAW_FAILED,{log:o}),Lc(c.pollingInterval,void 0,void 0,{log:o}),Object(W["a"])((function(e){var n=hh(e,2),o=n[1],i=o.transactionHash,c=o.blockNumber;return t.pipe(bc("blockNumber"),Object(Zt["a"])((function(){return r.functions.withdraw_plans(a)})),Object(F["a"])((function(e){var t=e.amount;return t.gte(s.meta.amount)})),Object(M["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Ga.success({block:n.toNumber(),txHash:i,txBlock:c,confirmed:void 0},{amount:t})})))})),Object(Xt["a"])((function(e){return o.error("Planning udc withdraw failed",e),Object(C["a"])(Ga.failure(e,s.meta))})))})))},Uh=function(e,t,n){fh(e),fh(t);var r=n.userDepositContract,a=n.address;return Object(I["a"])((function(){return r.functions.withdraw_plans(a)})).pipe(Object(B["a"])((function(e){return e.withdraw_block.gt(k["Zero"])})),Object(M["a"])((function(e){var t=e.amount,n=e.withdraw_block;return Ga.success({block:n.toNumber(),confirmed:!0},{amount:t})})))},Mh=function(e,t,n){var r=n.log,a=n.userDepositContract,o=n.address,i=n.signer,c=n.provider;return e.pipe(Object(B["a"])(Ga.success.is),Object(B["a"])((function(e){return!0===e.payload.confirmed})),Object(W["a"])((function(e){return t.pipe(Object(Xi["a"])("blockNumber"),Object(F["a"])((function(t){return e.payload.block<t})),Object(Ji["a"])(e))})),Object(W["a"])((function(e){return a.functions.balances(o).then((function(t){return[e,t]}))})),Object(tl["a"])((function(e){var n=hh(e,2),s=n[0],u=n[1],l=of(a,i);return Object(I["a"])((function(){return mt(u.gt(k["Zero"]),[dt.UDC_WITHDRAW_NO_BALANCE,{balance:u.toString()}]),l.functions.withdraw(s.meta.amount)})).pipe(Cc("withdraw",dt.UDC_WITHDRAW_FAILED,{log:r}),Lc(c.pollingInterval,void 0,void 0,{log:r}),Object(tl["a"])((function(e){var n=hh(e,2),r=n[1],a=r.transactionHash,i=r.blockNumber;return t.pipe(bc("blockNumber"),Object(Zt["a"])((function(){return l.functions.balances(o)})),Object(F["a"])((function(e){return e.lt(u)})),Object(M["a"])((function(e){return Za({withdrawal:u.sub(e),txHash:a,txBlock:i,confirmed:void 0},s.meta)})))})),Object(Xt["a"])((function(e){return r.error("Error when processing the withdraw plan",e),Object(C["a"])(Ga.failure(e,s.meta))})))})))},Bh=function(e,t,n){fh(e);var r=n.provider,a=n.monitoringServiceContract,o=n.address,i=n.config$;return i.pipe(bc("confirmationBlocks"),Object(ac["a"])((function(e){return sn(r,a.filters.NewBalanceProofReceived(null,null,null,null,null,o),void 0,e)})),Object(M["a"])(un(a)),Object(B["a"])(Tt),Object(B["a"])((function(e){var t=hh(e,6),n=t[5];return n===o})),Object(Xu["a"])(t,i),Object(M["a"])((function(e){var t=hh(e,3),n=hh(t[0],7),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[6],u=t[1],l=t[2].confirmationBlocks,f=Object.values(u.channels).concat(Object.values(u.oldChannels)).find((function(e){return e.tokenNetwork===r&&a.eq(e.id)})),p=s.blockNumber;if(f&&p)return Xa({tokenNetwork:r,partner:f.partner.address,id:f.id,reward:o,nonce:i,monitoringService:c,txHash:s.transactionHash,txBlock:p,confirmed:p+l<=u.blockNumber||void 0})})),Object(B["a"])(Tt))};function Fh(e,t,n){return e.pipe(Object(B["a"])(Kn(mr,{address:n})),Object(Zu["a"])(1),Object(W["a"])((function(e){if(mr.success.is(e))return t.latest$.pipe(Object(F["a"])((function(e){var t=e.presences;return n in t})));throw e.payload})))}function Wh(e,t,n){var r=n.state,a=n.presences,o=n.config;Hh(e,r,a);var i=e.meta,c=i.tokenNetwork,s=i.target,u=i.value;if(e.payload.paths)return Object(C["a"])({paths:e.payload.paths,iou:void 0});if(!0===zm(r,a,c,s,s,u))return Object(C["a"])({paths:[{path:[t.address,e.meta.target],fee:k["Zero"]}],iou:void 0});if(Vh(e,o))throw new yt(dt.PFS_DISABLED);return qh(e,t)}function $h(e,t,n,r){var a=e.meta.tokenNetwork,o=n.iou,i=n.paths,c=n.error;return Object(Kt["a"])(d.a.mark((function s(){var u;return d.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!o){s.next=8;break}if(!Qh(n)){s.next=6;break}return s.next=4,Ha({iou:o},{tokenNetwork:a,serviceAddress:o.receiver});case 4:s.next=8;break;case 6:return s.next=8,Va(void 0,{tokenNetwork:a,serviceAddress:o.receiver});case 8:if(!c){s.next=14;break}if(!zh(c)){s.next=13;break}throw new yt(dt.PFS_NO_ROUTES_BETWEEN_NODES);case 13:throw new yt(dt.PFS_ERROR_RESPONSE,{errorCode:c.error_code,errors:c.errors});case 14:if(u=Kh(e,t,r,i),!u.length){s.next=20;break}return s.next=18,Wa.success({paths:u},e.meta);case 18:s.next=21;break;case 20:throw new yt(dt.PFS_NO_ROUTES_FOUND);case 21:case"end":return s.stop()}}),s)}))())}function Hh(e,t,n){var r,a=e.meta,o=a.tokenNetwork,i=a.target,c=a.value;mt(Object.values(t.tokens).includes(o),[dt.PFS_UNKNOWN_TOKEN_NETWORK,{tokenNetwork:o}]),mt(n[i].payload.available,[dt.PFS_TARGET_OFFLINE,{target:i}]),mt(!(null===(r=n[i].payload.caps)||void 0===r?void 0:r[Re.NO_RECEIVE]),[dt.PFS_TARGET_NO_RECEIVE,{target:i}]),mt(Object.values(t.channels).some((function(e){return!0===zm(t,n,o,e.partner.address,i,c)})),dt.PFS_NO_ROUTES_BETWEEN_NODES)}function Vh(e,t){var n=t.pfs,r=null===e.payload.pfs,a=!e.payload.pfs&&null===n;return r||a}function qh(e,t){var n=e.meta,r=n.tokenNetwork,a=n.target,o=n.value;return t.config$.pipe(Object(F["a"])(),Object(W["a"])((function(n){return Gh(e.payload.pfs,n.pfs,t).pipe(Object(W["a"])((function(e){return Zh(e,r,t)})),Object(W["a"])((function(e){var i=e.pfs,c=e.iou;return Xh(i,c,r,t.address,a,o,n)})),Object(M["a"])((function(e){var t=e.pfsResponse,r=e.responseText,a=e.iou;return Yh(t,r,a,n)})))})))}function Kh(e,t,n,r){var a=t.address,o=t.log,i=n.state,c=n.presences,s=[],u=new Set;if(r){var l,f=ih(r);try{for(f.s();!(l=f.n()).done;){var p=l.value,d=p.path,b=p.fee,y=Jh(d,a),m=y[0],h=!1,v="";if(!u.has(m)){if(0===s.length){var g=e.meta,O=g.tokenNetwork,w=g.target,_=g.value,k=zm(i,c,O,m,w,_);h=!0===k,v="string"===typeof k?k:""}else m!==s[0].path[0]?v="path: already selected another recipient":b.gt(s[0].fee)?v="path: already selected a smaller fee":h=!0;h?s.push({path:y,fee:b}):(o.warn("Invalidated received route. Reason:",v,"Route:",y),u.add(m))}}}catch(j){f.e(j)}finally{f.f()}}return s}function Gh(e,t,n){if(e)return Object(C["a"])(e);if(t)return th(t,n);var r=n.log,a=n.latest$;return a.pipe(Object(Xi["a"])("pfsList"),Object(F["a"])((function(e){return e.length>0})),Object(W["a"])((function(e){return nh(e,n)})),Object(Gi["a"])((function(e){return r.info("Auto-selecting best PFS from:",e)})),Object(Xi["a"])(0))}function Zh(e,t,n){return e.price.isZero()?Object(C["a"])({pfs:e,iou:void 0}):Th(e,t,n).pipe(Object(M["a"])((function(t){return{pfs:e,iou:t}})))}function Xh(e,t,n,r,a,o,i){var c=i.httpTimeout,s=i.pfsMaxPaths,u=jo({from:r,to:a,value:Nt(32).encode(o),max_paths:s,iou:t?dh(dh({},t),{},{amount:Nt(32).encode(t.amount),expiration_block:Nt(32).encode(t.expiration_block),chain_id:Nt(32).encode(t.chain_id)}):void 0});return Object(ep["a"])("".concat(e.url,"/api/v1/").concat(n,"/paths"),{method:"POST",headers:{"Content-Type":"application/json"},body:u}).pipe(Object(Jf["a"])(c),Object(W["a"])(function(){var e=mh(d.a.mark((function e(n){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,n.text();case 3:return e.t1=e.sent,e.t2=t,e.abrupt("return",{pfsResponse:e.t0,responseText:e.t1,iou:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}function Yh(e,t,n,r){var a=r.pfsSafetyMargin,o=r.pfsMaxPaths,i=ko(t);if(e.ok){var c=Et(fa,i).result.filter((function(e,t){return t<o})),s=c.map((function(e){var t=e.path,n=e.estimated_fee,r=n.mul(Math.round(1e6*a)).div(1e6);return{path:t,fee:r}}));return{paths:s,iou:n}}var u=Et(kh,i);return{iou:n,error:u}}function Qh(e){var t=e.paths,n=e.error;return void 0!==t||zh(n)}function Jh(e,t){return e[0]===t?e.slice(1):e}function zh(e){return 2201===(null===e||void 0===e?void 0:e.error_code)}function ev(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ev(Object(n),!0).forEach((function(t){nv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ev(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rv(e,t){return sv(e)||cv(e,t)||ov(e,t)||av()}function av(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ov(e,t){if(e){if("string"===typeof e)return iv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iv(e,t):void 0}}function iv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cv(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function sv(e){if(Array.isArray(e))return e}function uv(e,t,n){var r=t.pipe(bc("config"));return Object(ju["a"])([r,n]).pipe(Object(M["a"])((function(t){var n,r=rv(t,2),a=r[0],o=r[1],i=tv(tv({},e),a),c=null===a.caps?a.caps:tv(nv({},Re.NO_RECEIVE,!((null===(n=i.monitoringReward)||void 0===n?void 0:n.gt(0))&&i.monitoringReward.lte(o))),i.caps);return tv(tv({},i),{},{caps:c})})),Object(ec["a"])(Nu.a))}function lv(e,t,n){var r=n.defaultConfig,a=n.log,o=n.provider,i=e.pipe(Object(B["a"])(qa.success.is),Object(Xi["a"])("meta","totalDeposit"),Object(Tu["a"])(k["MaxUint256"])),c=uv(r,t,i),s=$u(e),u=e.pipe(Object(B["a"])($a.is),Object(Xi["a"])("payload","pfsList"),Object(Tu["a"])([])),l=e.pipe(Object(B["a"])(gr.is),Object(tc["a"])((function(e,t){return t.payload?tv(tv({},e),{},nv({},t.meta.address,t.payload)):Fi()(t.meta.address,e)}),{}),Object(Tu["a"])({}));return Object(Eu["a"])((function(){var e=c.pipe(bc("logger")).subscribe((function(e){return a.setLevel(e||"silent",!1)}));return e.add(c.pipe(bc("pollingInterval")).subscribe((function(e){return o.pollingInterval=e}))),e}),(function(){return Object(ju["a"])([Object(ju["a"])([e,t,c,s,u,l]),Object(ju["a"])([i])]).pipe(Object(M["a"])((function(e){var t=rv(e,2),n=rv(t[0],6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5],u=rv(t[1],1),l=u[0];return{action:r,state:a,config:o,presences:i,pfsList:c,rtc:s,udcBalance:l}})))}))}var fv=tv(tv(tv(tv({},s),u),l),f),pv=function(e,t,n){var r=e.pipe(Object(B["a"])($n(za))),a=e.pipe(Object(rc["a"])(Au()($n(za)),!0)),o=t.pipe(Object(Qi["a"])(r));return Object(Eu["a"])((function(){return lv(a,o,n).subscribe(n.latest$)}),(function(){return Object(Kt["a"])(Object.values(fv)).pipe(Object(W["a"])((function(e){return e(a,o,n)})),Object(Xt["a"])((function(e){return n.log.error("Fatal error:",e),Object(C["a"])(za({reason:e}))})),Object(Qi["a"])(r))}))};function dv(e){return mv(e)||yv(e)||_v(e)||bv()}function bv(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yv(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function mv(e){if(Array.isArray(e))return kv(e)}function hv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hv(Object(n),!0).forEach((function(t){gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ov(e,t){return Ev(e)||jv(e,t)||_v(e,t)||wv()}function wv(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _v(e,t){if(e){if("string"===typeof e)return kv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kv(e,t):void 0}}function kv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jv(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(s){a=!0,o=s}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw o}}return n}}function Ev(e){if(Array.isArray(e))return e}function Tv(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Sv(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Tv(o,r,a,i,c,"next",e)}function c(e){Tv(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Av(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nv(e,t,n){return t&&xv(e.prototype,t),n&&xv(e,n),e}var Dv=function(){function e(t,n,r,a,o,i,c){var s,u,l,f,p,b=this;Av(this,e),this.resolveName=t.resolveName.bind(t);var m=o.address;this.log=y.a.getLogger("raiden:".concat(m)),t.resetEventsBlock(o.blockNumber+1);var h=new D["a"](1);this.state$=h.pipe(bc("state")),this.action$=h.pipe(bc("action"),Object(U["a"])(1)),this.channels$=this.state$.pipe(bc("channels"),Object(M["a"])(rf)),this.transfers$=nf(this.state$),this.events$=this.action$.pipe(Object(B["a"])($n(no))),this.getTokenInfo=N()(function(){var e=Sv(d.a.mark((function e(t){var n,r,a,o,i,c,s;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),n=this.deps.getTokenContract(t),e.next=4,Promise.all([n.functions.totalSupply(),n.functions.decimals(),n.functions.name().catch(A()(void 0)),n.functions.symbol().catch(A()(void 0))]);case 4:return r=e.sent,a=Ov(r,4),o=a[0],i=a[1],c=a[2],s=a[3],mt(o&&null!=i,dt.RDN_NOT_A_TOKEN,this.log.info),e.abrupt("return",{totalSupply:o,decimals:i,name:c,symbol:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),this.deps={latest$:h,config$:h.pipe(bc("config")),matrix$:new R["a"],provider:t,network:n,signer:r,address:m,log:this.log,defaultConfig:i,contractsInfo:a,registryContract:K.connect(a.TokenNetworkRegistry.address,null!==(s=null===c||void 0===c?void 0:c.signer)&&void 0!==s?s:r),getTokenNetworkContract:N()((function(e){var t;return Q.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),getTokenContract:N()((function(e){var t;return ne.connect(e,null!==(t=null===c||void 0===c?void 0:c.signer)&&void 0!==t?t:r)})),serviceRegistryContract:ce.connect(a.ServiceRegistry.address,null!==(u=null===c||void 0===c?void 0:c.signer)&&void 0!==u?u:r),userDepositContract:he.connect(a.UserDeposit.address,null!==(l=null===c||void 0===c?void 0:c.signer)&&void 0!==l?l:r),secretRegistryContract:_e.connect(a.SecretRegistry.address,null!==(f=null===c||void 0===c?void 0:c.signer)&&void 0!==f?f:r),monitoringServiceContract:Ae.connect(a.MonitoringService.address,null!==(p=null===c||void 0===c?void 0:c.signer)&&void 0!==p?p:r),main:c},this.userDepositTokenAddress=N()(Sv(d.a.mark((function e(){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.deps.userDepositContract.functions.token();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var v=Object(T["createLogger"])({predicate:function(){return b.log.getLevel()<=y.a.levels.INFO},logger:this.log,level:{prevState:"debug",action:"info",error:"error",nextState:"debug"}});this.config$=this.deps.config$,this.config$.subscribe((function(e){return b.config=e})),this.epicMiddleware=Object(E["a"])({dependencies:this.deps}),this.store=Object(j["b"])(ku,o,Object(j["a"])(v,this.epicMiddleware)),lv(Object(C["a"])(eo({})),Object(C["a"])(this.store.getState()),this.deps).subscribe((function(e){return b.deps.latest$.next(e)}))}return Nv(e,[{key:"start",value:function(){var t=this;mt(this.epicMiddleware,dt.RDN_ALREADY_STARTED,this.log.info),this.log.info("Starting Raiden Light-Client",{prevBlockNumber:this.state.blockNumber,address:this.address,TokenNetworkRegistry:this.deps.contractsInfo.TokenNetworkRegistry.address,network:this.deps.network,"raiden-ts":e.version,"raiden-contracts":e.contractVersion});var n={complete:function(){return t.epicMiddleware=null}};this.deps.latest$.subscribe(n),this.epicMiddleware.run(pv),this.epicMiddleware=void 0,this.store.dispatch(eo({}))}},{key:"stop",value:function(){this.started&&this.store.dispatch(za({reason:De.STOP}))}},{key:"getBlockNumber",value:function(){var e=Sv(d.a.mark((function e(){return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.deps.provider.blockNumber,e.t0){e.next=5;break}return e.next=4,this.deps.provider.getBlockNumber();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateConfig",value:function(e){this.store.dispatch(eo(Et(wn,e)))}},{key:"getBalance",value:function(e){return e=null!==e&&void 0!==e?e:af(this.deps,this.config.subkey).address,mt(Lt.is(e),[dt.DTA_INVALID_ADDRESS,{address:e}],this.log.info),this.deps.provider.getBalance(e)}},{key:"getTokenBalance",value:function(){var e=Sv(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null!==n&&void 0!==n?n:af(this.deps,this.config.subkey).address,mt(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{address:n}],this.log.info),mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),r=this.deps.getTokenContract(t),e.abrupt("return",r.functions.balanceOf(n));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getTokenList",value:function(){var e=Sv(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deps.provider.getLogs(vv(vv({},this.deps.registryContract.filters.TokenNetworkCreated(null,null)),{},{fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number,toBlock:"latest"})).then((function(e){return e.map((function(e){return t.deps.registryContract.interface.parseLog(e)})).filter((function(e){var t;return!!(null===(t=e.values)||void 0===t?void 0:t.token_address)})).map((function(e){return e.values.token_address}))})));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"monitorToken",value:function(){var e=Sv(d.a.mark((function e(t){var n;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),n=this.state.tokens[t],!n){e.next=4;break}return e.abrupt("return",n);case 4:return e.next=6,this.deps.registryContract.token_to_token_networks(t);case 6:return n=e.sent,mt(n&&n!==k["AddressZero"],dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),this.store.dispatch(or({token:t,tokenNetwork:n,fromBlock:this.deps.contractsInfo.TokenNetworkRegistry.block_number})),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"openChannel",value:function(){var e=Sv(d.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f,p,b=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:{},a=b.length>3?b[3]:void 0,mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),e.next=6,this.monitorToken(t);case 6:return o=e.sent,mt(!r.subkey||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=r.settleTimeout?Et(Nt(4),r.settleTimeout,dt.DTA_INVALID_TIMEOUT,this.log.info).toNumber():void 0,c=r.deposit?Et(Nt(32),r.deposit,dt.DTA_INVALID_DEPOSIT,this.log.info):void 0,s={tokenNetwork:o,partner:n},u=Zn(ir,s,this.action$,!0).then((function(e){var t=e.txHash;return t})),c&&(l=Zn(sr,s,this.action$,!0).then((function(e){var t=e.txHash;return t}))),this.store.dispatch(ir.request(vv(vv({},r),{},{settleTimeout:i,deposit:c}),s)),e.next=16,u;case 16:return f=e.sent,null===a||void 0===a||a({type:Se.OPENED,payload:{txHash:f}}),e.next=20,this.state$.pipe(bc("channels",Nc({tokenNetwork:o,partner:n}),"state"),Object(F["a"])((function(e){return e===Ro.open}))).toPromise();case 20:if(null===a||void 0===a||a({type:Se.CONFIRMED,payload:{txHash:f}}),!l){e.next=26;break}return e.next=24,l;case 24:p=e.sent,null===a||void 0===a||a({type:Se.DEPOSITED,payload:{txHash:p}});case 26:return e.abrupt("return",f);case 27:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"depositChannel",value:function(){var e=Sv(d.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,f=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:{},o=a.subkey,mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),i=this.state,c=i.tokens[t],mt(c,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),mt(!o||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),s=Et(Nt(32),r,dt.DTA_INVALID_DEPOSIT,this.log.info),u={tokenNetwork:c,partner:n},l=Zn(sr,u,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(sr.request({deposit:s,subkey:o},u)),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"closeChannel",value:function(){var e=Sv(d.a.mark((function e(t,n){var r,a,o,i,c,s,u=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=r.subkey,mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),o=this.state,i=o.tokens[t],mt(i,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),mt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),c={tokenNetwork:i,partner:n},s=Zn(lr,c,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(lr.request(a?{subkey:a}:void 0,c)),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"settleChannel",value:function(){var e=Sv(d.a.mark((function e(t,n){var r,a,o,i,c,s,u=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:{},a=r.subkey,mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),o=this.state,i=o.tokens[t],mt(i,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),mt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),c={tokenNetwork:i,partner:n},s=Zn(pr,c,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(pr.request(a?{subkey:a}:void 0,c)),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAvailability",value:function(){var e=Sv(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{address:t}],this.log.info),n={address:t},r=Zn(mr,n,this.action$),this.store.dispatch(mr.request(void 0,n)),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var e=Sv(d.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,f,p,b,y=this,m=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:{},mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),o=this.state.tokens[t],mt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=Et(Nt(32),r,dt.DTA_INVALID_AMOUNT,this.log.info),c=void 0!==a.paymentId?Et(Nt(8),a.paymentId,dt.DTA_INVALID_PAYMENT_ID,this.log.info):gl(),s=a.paths?Et(pa,a.paths,dt.DTA_INVALID_PATH,this.log.info):void 0,u=a.pfs?Et(da,a.pfs,dt.DTA_INVALID_PFS,this.log.info):void 0,l=a.lockTimeout?this.state.blockNumber+a.lockTimeout:void 0,mt(void 0===a.secret||Ct.is(a.secret),dt.RDN_INVALID_SECRET,this.log.info),mt(void 0===a.secrethash||Rt.is(a.secrethash),dt.RDN_INVALID_SECRETHASH,this.log.info),f=a.secret?a.secret:a.secrethash?void 0:vl(),p=a.secrethash||hl(f),mt(!f||hl(f)===p,dt.RDN_SECRET_SECRETHASH_MISMATCH,this.log.info),b={tokenNetwork:o,target:n,value:i},e.abrupt("return",Object(P["a"])(this.action$.pipe(Object(F["a"])(Kn(Wa,b)),Object(M["a"])((function(e){if(Wa.failure.is(e))throw e.payload;return e.payload.paths}))),Object(I["a"])((function(){return y.store.dispatch(Wa.request({paths:s,pfs:u},b)),L["a"]}))).pipe(Object(W["a"])((function(e){return Object(P["a"])(y.action$.pipe(Object(B["a"])($n([ka,_a.failure])),Object(F["a"])((function(e){return e.meta.direction===ma.SENT&&e.meta.secrethash===p})),Object(M["a"])((function(e){if(_a.failure.is(e))throw e.payload;return _l(e.meta)}))),Object(I["a"])((function(){return y.store.dispatch(_a.request({tokenNetwork:o,target:n,value:i,paths:e,paymentId:c,secret:f,expiration:l},{secrethash:p,direction:ma.SENT})),L["a"]})))}))).toPromise());case 17:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"waitTransfer",value:function(){var e=Sv(d.a.mark((function e(t){var n,r,a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=jl(t),o=a.direction,i=a.secrethash,mt(i in this.state[o],dt.RDN_UNKNOWN_TRANSFER,this.log.info),c=Sl(this.state[o][i]),!c.completed){e.next=9;break}if(!c.success){e.next=8;break}return e.abrupt("return",null===(n=this.state[o][i].secretRequest)||void 0===n?void 0:n.amount);case 8:throw new yt(dt.XFER_ALREADY_COMPLETED,{status:c.status});case 9:return e.next=11,Zn(_a,{secrethash:i,direction:o},this.action$);case 11:return e.abrupt("return",null===(r=this.state[o][i].secretRequest)||void 0===r?void 0:r.amount);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"findRoutes",value:function(){var e=Sv(d.a.mark((function e(t,n,r){var a,o,i,c,s,u,l=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:{},mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),o=this.state.tokens[t],mt(o,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),i=Et(Nt(32),r),c=a.pfs?Et(da,a.pfs):void 0,s={tokenNetwork:o,target:n,value:i},u=Zn(Wa,s,this.action$).then((function(e){var t=e.paths;return t})),this.store.dispatch(Wa.request({pfs:c},s)),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"directRoute",value:function(){var e=Sv(d.a.mark((function e(t,n,r){var a,o,i,c;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{target:n}],this.log.info),a=this.state.tokens[t],mt(a,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=Et(Nt(32),r),i={tokenNetwork:a,target:n,value:o},c=Zn(Wa,i,this.action$).then((function(e){var t=e.paths;return t}),(function(){})),this.store.dispatch(Wa.request({pfs:null},i)),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"findPFS",value:function(){var e=Sv(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return mt(null!==this.config.pfs,dt.PFS_DISABLED,this.log.info),e.abrupt("return",(this.config.pfs?Object(C["a"])([this.config.pfs]):this.deps.latest$.pipe(bc("pfsList"),Object(F["a"])((function(e){return e.length>0})))).pipe(Object(W["a"])((function(e){return nh(e,t.deps)}))).toPromise());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"mint",value:function(){var e=Sv(d.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f,p,b=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:{},a=r.subkey,o=r.to,mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),mt(1!==this.deps.network.chainId,dt.RDN_MINT_MAINNET,this.log.info),i=af(this.deps,null!==a&&void 0!==a?a:this.config.subkey),c=i.signer,s=i.address,u=pe.connect(t,c),l=null!==o&&void 0!==o?o:s,mt(Lt.is(l),[dt.DTA_INVALID_ADDRESS,{beneficiary:l}],this.log.info),f=Et(Nt(32),n,dt.DTA_INVALID_AMOUNT),e.next=11,cf(u,"mintFor",[f,l],dt.RDN_MINT_FAILED,{log:this.log});case 11:return p=e.sent,e.next=14,uf(p,this.deps,1);case 14:return e.abrupt("return",p.transactionHash);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getUDCCapacity",value:function(){var e=Sv(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,bf(this.deps.latest$);case 2:return t=e.sent,n=this.state.blockNumber,r=Object.values(this.state.iou).reduce((function(e,t){return[].concat(dv(e),dv(Object.values(t).filter((function(e){return e.expiration_block.gte(n)}))))}),[]).reduce((function(e,t){return e.add(t.amount)}),k["Zero"]),e.abrupt("return",t.sub(r));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"depositToUDC",value:function(){var e=Sv(d.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:{},a=r.subkey,mt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),o=Et(Nt(32),t,dt.DTA_INVALID_DEPOSIT,this.log.info),mt(o.gt(k["Zero"]),dt.DTA_NON_POSITIVE_NUMBER,this.log.info),e.next=6,bf(this.deps.latest$);case 6:return i=e.sent,c={totalDeposit:i.add(o)},s=Zn(qa,c,this.action$).then((function(e){return null===e||void 0===e?void 0:e.txHash})),this.store.dispatch(qa.request({deposit:o,subkey:a},c)),e.next=12,s;case 12:return u=e.sent,null===n||void 0===n||n({type:Se.DEPOSITED,payload:{txHash:u}}),l=Zn(qa,c,this.action$,!0).then((function(e){return e.txHash})),e.next=17,l;case 17:return u=e.sent,null===n||void 0===n||n({type:Se.CONFIRMED,payload:{txHash:u}}),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"transferOnchainBalance",value:function(){var e=Sv(d.a.mark((function e(t){var n,r,a,o,i,c,s,u,l,f,p,b,y,m,h=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:k["MaxUint256"],r=h.length>2&&void 0!==h[2]?h[2]:{},a=r.subkey,o=r.gasPrice,mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{to:t}],this.log.info),mt(!a||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=af(this.deps,null!==a&&void 0!==a?a:this.config.subkey),c=i.signer,s=i.address,!o){e.next=9;break}e.t0=Object(_["bigNumberify"])(o),e.next=12;break;case 9:return e.next=11,this.deps.provider.getGasPrice();case 11:e.t0=e.sent;case 12:return u=e.t0,l=Object(_["bigNumberify"])(21e3),e.next=16,this.getBalance(s);case 16:return f=e.sent,p=f.sub(u.mul(l)),mt(p.gt(k["Zero"]),[dt.RDN_INSUFFICIENT_BALANCE,{transferable:p.toString()}],this.log.info),b=p.lte(n)?p:Object(_["bigNumberify"])(n),e.next=22,c.sendTransaction({to:t,value:b,gasPrice:u,gasLimit:l});case 22:return y=e.sent,e.next=25,y.wait();case 25:return m=e.sent,mt(m.status,dt.RDN_TRANSFER_ONCHAIN_BALANCE_FAILED,this.log.info),e.abrupt("return",y.hash);case 28:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"transferOnchainTokens",value:function(){var e=Sv(d.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f,p,b=arguments;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:k["MaxUint256"],a=b.length>3&&void 0!==b[3]?b[3]:{},o=a.subkey,mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{to:n}],this.log.info),mt(!o||this.deps.main,dt.RDN_SUBKEY_NOT_SET,this.log.info),i=af(this.deps,null!==o&&void 0!==o?o:this.config.subkey),c=i.signer,s=i.address,u=of(this.deps.getTokenContract(t),c),e.next=9,this.getTokenBalance(t,s);case 9:return l=e.sent,f=l.lte(r)?l:Object(_["bigNumberify"])(r),e.next=13,cf(u,"transfer",[n,f],dt.RDN_TRANSFER_ONCHAIN_TOKENS_FAILED,{log:this.log});case 13:return p=e.sent,e.abrupt("return",p.transactionHash);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"planUdcWithdraw",value:function(){var e=Sv(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={amount:Et(Nt(32),t,dt.DTA_INVALID_AMOUNT,this.log.error)},r=Zn(Ga,n,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Ga.request(void 0,n)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"withdrawChannel",value:function(){var e=Sv(d.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,f,p,b;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return mt(Lt.is(t),[dt.DTA_INVALID_ADDRESS,{token:t}],this.log.info),mt(Lt.is(n),[dt.DTA_INVALID_ADDRESS,{partner:n}],this.log.info),a=this.state.tokens[t],mt(a,dt.RDN_UNKNOWN_TOKEN_NETWORK,this.log.info),o=this.state.channels[Nc({tokenNetwork:a,partner:n})],mt((null===o||void 0===o?void 0:o.state)===Ro.open,dt.CNL_NO_OPEN_CHANNEL_FOUND,this.log.error),i=Rc(o),c=i.ownWithdrawable,s=i.ownWithdraw,u=Et(Nt(32),null!==r&&void 0!==r?r:c,dt.DTA_INVALID_AMOUNT,this.log.info),l=s.add(u),f=this.state.blockNumber+2*this.config.revealTimeout,p={direction:ma.SENT,tokenNetwork:a,partner:n,totalWithdraw:l,expiration:f},b=Zn(Ia,p,this.action$,!0).then((function(e){var t=e.txHash;return t})),this.store.dispatch(Ia.request(void 0,p)),e.abrupt("return",b);case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"started",get:function(){if(!this.epicMiddleware)return void 0===this.epicMiddleware}},{key:"state",get:function(){return this.store.getState()}},{key:"address",get:function(){return this.deps.address}},{key:"mainAddress",get:function(){var e;return null===(e=this.deps.main)||void 0===e?void 0:e.address}},{key:"network",get:function(){return this.deps.network}},{key:"contractsInfo",get:function(){return this.deps.contractsInfo}}],[{key:"create",value:function(){var e=Sv(d.a.mark((function e(t,n,r,a,o,i){var c,s,u,l,f,p,b,y,m,h,v,g,O;return d.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="string"===typeof t?new w["JsonRpcProvider"](t):t instanceof w["JsonRpcProvider"]?t:new w["Web3Provider"](t),pn(c),e.next=4,c.getNetwork();case 4:if(s=e.sent,a){e.next=9;break}u=Jl(s),e.next=17;break;case 9:if("string"!==typeof a){e.next=16;break}return mt(Lt.is(a),[dt.DTA_INVALID_ADDRESS,{contractsOrUserDepositAddress:a}]),e.next=13,pf(c,a);case 13:u=e.sent,e.next=17;break;case 16:u=a;case 17:return e.next=19,tf(n,c,i);case 19:return l=e.sent,f=l.signer,p=l.address,b=l.main,e.next=25,Mi(s,u,p,r,o&&Et(wn,o));case 25:return y=e.sent,m=y.state,h=y.onState,v=y.onStateComplete,g=y.defaultConfig,mt(p===m.address,[dt.RDN_STATE_ADDRESS_MISMATCH,{account:p,state:m.address}]),mt(s.chainId===m.chainId&&u.TokenNetworkRegistry.address===m.registry,[dt.RDN_STATE_NETWORK_MISMATCH,{network:s.chainId,contracts:u.TokenNetworkRegistry.address,stateNetwork:m.chainId,stateRegistry:m.registry}]),O=new this(c,s,f,u,m,g,b),h&&O.state$.subscribe(h,v,v),e.abrupt("return",O);case 35:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,o,i){return e.apply(this,arguments)}return t}()},{key:"version",get:function(){return Ne.sdk}},{key:"contractVersion",get:function(){return Ne.contracts}}]),e}()}});